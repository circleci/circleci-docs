---
layout: classic-docs
title: "API トークンの管理"
short-title: "API トークンの管理"
description: "CircleCI の API 使用に権限が指定されたトークンを割り当てる方法"
order: 20
version:
  - Cloud
  - Server v2.x
---

CircleCI の API を使用したり、ビルドの詳細を確認したりするには、適切なアクセス許可を持つ API トークンが必要です。 ここでは、API トークンの種類と、トークンを作成および削除する方法について説明します。

## 概要
{: #overview }

CircleCI では 2 種類の API トークンを作成できます。

  1. **パーソナル:** このトークンは CircleCI API とのやり取りに使用され、すべての情報の読み取りと書き込みに対するアクセス権を付与します。
  2. **プロジェクト**: このトークンは特定のプロジェクトに関する情報の読み取りと書き取りに対するアクセス権を付与します。 プロジェクト トークンには、*ステータス*、*読み取り専用*、*すべて*、の 3 つの権限範囲のオプションがあります。
    - *ステータス* トークン: プロジェクトのビルド ステータスの読み取りに対するアクセス権を付与します。 [ステータス バッジを埋め込む]({{ site.baseurl }}/ja/2.0/status-badges/)際に便利です。
    - _読み取り専用_ トークンは、プロジェクトの API への読み取り専用のアクセス権を付与します。
    - _管理者_ トークンは、プロジェクトの API の読み取りおよび書き込みに対するアクセス権を付与します。

**注意:** API トークンは、一度作成すると修正できません。 既存のトークンを変更するには、いったん削除してから再作成する、「トークン ローテーション」を行う必要があります。

### パーソナル API トークンの作成
{: #creating-a-personal-api-token }

  1. CircleCI アプリケーションで、[ユーザー設定](https://circleci.com/account){:rel="nofollow"}に移動します。
  2. [[Personal API Tokens (パーソナル API トークン)](https://circleci.com/account/api)]{:rel="nofollow"} をクリックします。
  3. **[Create New Token (新しいトークンを作成する)]** ボタンをクリックします。
  4. **[Token name (トークン名)]** フィールドに、覚えやすいトークン名を入力します。
  5. **[Add API Token (API トークンを追加する)]** ボタンをクリックします。
  6. トークンが表示されたら、別の場所にコピー ＆ ペーストします。 トークンを再度表示することはできません。

パーソナル APIトークンを削除するには、 **Remove (削除)** の欄の X をクリックし、ダイアログウィンドウで 削除されたことを確認してください。

### プロジェクト API トークンの作成
{: #creating-a-project-api-token }

  1. CircleCI アプリケーションで、プロジェクトの横にある歯車のアイコンをクリックして、プロジェクトの設定に移動します。
  2. **[Permissions (アクセス許可)]** セクションで、**[API Permissions (API のアクセス許可)]** をクリックします。
  3. **[Create Token (トークンを作成する)]** ボタンをクリックします。
  4. ドロップダウン メニューから権限の範囲を選択します。
  5. **[Token Label (トークン ラベル)]** フィールドに、覚えやすいラベルを入力します。
  6. **[Add Token (トークンを追加する)]** ボタンをクリックします。

プロジェクト API トークンを削除するには、**[Remove (削除する)]** 列の [X] をクリックします。 確認ウィンドウが表示されたら、フォームに「 DELETE」と入力し、「Delete API Token」ボタンをクリックします。


### パーソナル トークンとプロジェクト API トークンのローテーション
{: #rotating-personal-and-project-api-tokens }

API トークンのローテーションとは、古い API トークンを新しいトークンに置き換えることです。

API トークンは共有されたり、従業員やチームの間で回されたり、 不用意に公開されたりする可能性があるため、定期的に新しい APIトークンを再生成することをお勧めします。 多くの組織では、このプロセスを自動化しており、 の従業員が退職したときや、トークンが漏洩したと思われるときにスクリプトを実行しています。

#### パーソナル API トークンのローテーション
{: #rotating-a-personal-api-token }

1. CircleCI アプリケーションで、[ユーザー設定](https://app.circleci.com/settings/user)に移動します。
1. [パーソナル API トークン](https://app.circleci.com/settings/user/tokens)をクリックします。
1. パーソナル API トークンを削除するには、**[Remove (削除する)]** 列の [X] をクリックします。
1. [Create New Token (新しいトークンを作成する)] ボタンをクリックします。
1. トークンの名前フィールドにローテーションする古いトークンの新しい名前を入力します。 古いトークンと同じ名前でもかまいません。
1. [Add Token (トークンを追加する)] ボタンをクリックします。
1. トークンが表示されたら、別の場所にコピー & ペーストします。 トークンを再度表示することはできません。

#### プロジェクト API トークンのローテーション
{: #rotating-a-project-api-token }

1. CircleCI アプリケーションで、プロジェクトの横にある歯車のアイコンをクリックして、プロジェクトの設定に移動します。
1. **[Permissions (アクセス許可)]** セクションで、**[API Permissions (API のアクセス許可)]** をクリックします。
1. 入れ替えたいトークンの**[[Remove (削除する)]** 列の X をクリックします。 確認ウィンドウが表示されたら、DELETE と入力しAPI トークンの削除ボタンをクリックします。
1. **[Create Token (トークンを作成する)]** ボタンをクリックします。
1. 古いトークンに使用したのと同じ範囲を、ドロップダウンメニューから選択します。
1. **[Token Label (トークン ラベル)]** フィールドに、トークンのラベルを入力します。 古いトークンと同じ名前でもかまいません。
1. **[Add Token (トークンを追加する)]** ボタンをクリックします。

## 次のステップ
{: #next-steps }

APIトークンの使用例としては、以下のようなものが考えられます。

  - プロジェクトの README などの外部ページに[ビルド ステータス バッジを埋め込む]({{ site.baseurl }}/ja/2.0/status-badges/)
  - [条件付きのジョブをトリガーする]({{ site.baseurl }}/2.0/api-job-trigger/)
  - [ビルドのアーティファクトをダウンロード]({{ site.baseurl }}/2.0/artifacts/#downloading-all-artifacts-for-a-build-on-circleci)して安全に保管する
  - ビルドに[環境変数を挿入する]({{ site.baseurl }}/ja/2.0/env-vars/#api-を使用した環境変数の挿入)
