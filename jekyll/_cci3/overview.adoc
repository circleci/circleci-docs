---
version:
- Server v3.x
- Server Admin
---
= CircleCI Server v3.x Overview
:page-layout: classic-docs
:page-liquid:
:icons: font
:toc: macro
:toc-title:
// global version numbers
:serverversion: 3.0
:terraformversion: 0.13.0
:kubectlversion: 1.19
:helmversion: 3.4.0
:kotsversion: 1.26

toc::[]

== Introduction

CircleCI Server v{serverversion} is a continuous integration and continuous delivery (CI/CD) platform that you can install on your GCP or AWS Kubernetes cluster.

The core of the CircleCI Server application runs inside Kubernetes.

The application exposes 4 services using load balancers, three of these load balancers are VPC-internal.

[.table.table-striped]
[cols=4*, options="header", stripes=even]
|===
| Load Balancer
| Type
| Ports
| Description

| Front-end Service
| External
| 80 and 443
| Exposes the web application.

| Nomad Control Plane
| Internal
| 4647
| Exposes an RPC protocol for Nomad runners.

| Output Processor
| Internal
| 8585
| Ingests output from Nomad runners.

| VM Service
| Internal
| 3000
| Provisions virtual machines.
|===

CircleCI Server schedules CI jobs using the https://www.nomadproject.io/[Nomad] scheduler. The Nomad control plane runs inside of Kubernetes, while the
Nomad clients, which are responsible for running scheduled CircleCI jobs, are provisioned outside the cluster. CircleCI
Server can run Docker jobs on the Nomad clients themselves or in a dedicated virtual machine (VM).

Job artifacts and output are sent directly from jobs in Nomad to object storage (S3, GCS, or other supported options).
Audit logs and other items from the application are also stored in object storage so both the Kubernetes cluster and the
Nomad clients need access to object storage.

https://kots.io/[KOTs] is used to configure and deploy CircleCI Server 3.0.

== Architecture

.CircleCI Server v3.x Architecture
image::server-3-architecture-diagram.png[Services Architecture]
<<<

== What to read next

* xref:whats-new.adoc[What's new in 3.x]

