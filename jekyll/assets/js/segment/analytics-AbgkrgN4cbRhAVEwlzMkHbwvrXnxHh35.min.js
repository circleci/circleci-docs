(function(define){if(typeof define==="function"&&define.amd){define=undefined}(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){var analytics=require("@segment/analytics.js-core");module.exports=function(Integrations){for(let integration in Integrations){analytics.use(Integrations[integration])}return analytics}},{"@segment/analytics.js-core":26}],2:[function(require,module,exports){(function(global){(function(){var Integrations=require("./integrations");var analytics=require("./analytics")(Integrations);var analyticsq=global.analytics||[];var snippetVersion=analyticsq&&analyticsq.SNIPPET_VERSION?parseFloat(analyticsq.SNIPPET_VERSION,10):0;analytics._VERSIONS={cdn:null,integrations:{Amplitude:"3.3.3",AdWords:"2.5.3","Twitter Ads":"2.5.2","Facebook Pixel":"2.11.4",Optimizely:"3.5.1","Google Analytics":"2.18.5","Quora Conversion Pixel":"1.0.2",Hotjar:"1.3.2","Bing Ads":"2.0.1","Segment.io":"4.4.7"}};analytics.initialize({Amplitude:{apiKey:"645bd081fbbf8d3dadf6ac674cc29e67",batchEvents:false,deviceIdFromUrlParam:true,enableLocationListening:true,eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:false,groupTypeTrait:"",groupValueTrait:"",mapQueryParams:{},preferAnonymousIdForDeviceId:false,saveParamsReferrerOncePerSession:true,trackAllPages:false,trackAllPagesV2:false,trackCategorizedPages:true,trackGclid:false,trackNamedPages:true,trackReferrer:true,trackRevenuePerProduct:false,trackSessionEvents:false,trackUtmProperties:true,traitsToIncrement:[],traitsToSetOnce:[],useAdvertisingIdForDeviceId:false,useCustomAmplitudeProperties:false,useLogRevenueV2:false,versionSettings:{version:"3.3.3",componentTypes:["browser","ios","android","server"]},type:"browser",bundlingStatus:"bundled"},AdWords:{conversionId:"1032131388",eventMappings:[{eventName:"first-vcs-authorized-event-sent",label:"S42ECK2p7nUQvKaU7AM",conversionId:"1032131388",remarketing:true},{eventName:"first-vcs-authorized-event-sent",label:"XKjGCI-P34MBELDVnIAD",conversionId:"805776048",remarketing:true},{eventName:"project-added-event-sent",label:"UbifCISJ6Y0BELymlOwD",conversionId:"1032131388",remarketing:true},{eventName:"project-added-event-sent",label:"6oIUCNvw_o0BELDVnIAD",conversionId:"805776048",remarketing:true},{eventName:"usage-warning-banner-impression",label:"AWNaCMLe-pMBELymlOwD",conversionId:"1032131388",remarketing:true},{eventName:"usage-warning-banner-impression",label:"SG6aCIm5i5cBELDVnIAD",conversionId:"805776048",remarketing:true},{eventName:"project-added",label:"XYU8CPzV4Y8BELymlOwD",conversionId:"1032131388",remarketing:true},{eventName:"first-vcs-authorized-event-sent-2",label:"cOctCKjnlNMBELymlOwD",conversionId:"1032131388",remarketing:true},{eventName:"user-join-org",label:"9X8wCI2w8vYBELymlOwD",conversionId:"1032131388",remarketing:true},{eventName:"qualified_signup",label:"wl3-CNuWvvACEP3ynoAD",conversionId:"805812605",remarketing:true}],pageRemarketing:true,versionSettings:{version:"2.5.3",componentTypes:["browser","server"]},type:"browser",bundlingStatus:"bundled"},"Twitter Ads":{events:{"project-added-event-sent":"nwd82","Viewed Orbs Orb Details Page":"nw3tp","first-vcs-authorized-event-sent":"nvaxn"},identifier:"productId",page:"",universalTagPixelId:"",versionSettings:{version:"2.5.2",componentTypes:["browser"]},type:"browser",bundlingStatus:"bundled"},"Facebook Pixel":{automaticConfiguration:true,blacklistPiiProperties:[],contentTypes:{},initWithExistingTraits:false,keyForExternalId:"",legacyEvents:{},limitedDataUse:true,pixelId:"252088061880264",standardEvents:{"project-added-event-sent":"CompleteRegistration","first-vcs-authorized-event-sent":"Purchase"},standardEventsCustomProperties:[],userIdAsExternalId:false,valueIdentifier:"value",whitelistPiiProperties:[],versionSettings:{version:"2.11.4",componentTypes:["browser"]},type:"browser",bundlingStatus:"bundled"},Optimizely:{customCampaignProperties:{},customExperimentProperties:{},listen:true,nonInteraction:true,sendRevenueOnlyForOrderCompleted:false,trackCategorizedPages:true,trackNamedPages:true,variations:false,versionSettings:{version:"3.5.1",componentTypes:["browser","ios","android"]},type:"browser",bundlingStatus:"bundled"},"Google Analytics":{anonymizeIp:false,classic:false,contentGroupings:{},dimensions:{},domain:"",doubleClick:true,enableServerIdentify:false,enhancedEcommerce:false,enhancedLinkAttribution:false,identifyCategory:"",identifyEventName:"",ignoredReferrers:[],includeSearch:false,metrics:{},mobileTrackingId:"",nameTracker:false,nonInteraction:false,optimize:"",protocolMappings:{},reportUncaughtExceptions:false,sampleRate:13,sendUserId:false,setAllMappedProps:true,siteSpeedSampleRate:1,trackCategorizedPages:true,trackNamedPages:true,trackingId:"UA-25580673-8",useGoogleAmpClientId:false,versionSettings:{version:"2.18.5",componentTypes:["browser","ios","android","server"]},type:"browser",bundlingStatus:"bundled"},"Quora Conversion Pixel":{trackEvents:["first-vcs-authorized-event-sent","project-added"],writeKey:"52871213e33648a1bcc1f8bcff2e0ed0",versionSettings:{version:"1.0.2",componentTypes:["browser"]},type:"browser",bundlingStatus:"bundled"},Hotjar:{hjPlaceholderPolyfill:true,hjid:"413720",versionSettings:{version:"1.3.2",componentTypes:["browser"]},type:"browser",bundlingStatus:"bundled"},"Bing Ads":{tagId:"5784353",versionSettings:{version:"2.0.1",componentTypes:["browser"]},type:"browser",bundlingStatus:"bundled"},"Segment.io":{apiKey:"AbgkrgN4cbRhAVEwlzMkHbwvrXnxHh35",unbundledIntegrations:[],addBundledMetadata:true,maybeBundledConfigIds:{Optimizely:["3MlfoTitjd"],Hotjar:["5ccb83f3d33fc9000122e5b3"],"Bing Ads":["5e30847052197be045d3e9ce"],Amplitude:["MqVAKNuPGx"],"Facebook Pixel":["UepMNTMqj4"],AdWords:["UqDUvXqjhi"],"Google Analytics":["ajPhMKVurx"],"Twitter Ads":["i8leXFLWvU"],"Quora Conversion Pixel":["tr9S8XCzjz"]},versionSettings:{version:"4.4.7",componentTypes:["browser"]},retryQueue:true}},{initialPageview:snippetVersion===0,plan:{}});while(analyticsq&&analyticsq.length>0){var args=analyticsq.shift();var method=args.shift();if(typeof analytics[method]==="function"){analytics[method].apply(analytics,args)}}analyticsq=null;global.analytics=analytics}).call(this)}).call(this,typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{"./analytics":1,"./integrations":3}],3:[function(require,module,exports){module.exports={"adlearn-open-platform":require("@segment/analytics.js-integration-adlearn-open-platform"),"adobe-analytics":require("@segment/analytics.js-integration-adobe-analytics"),"adobe-target":require("@segment/analytics.js-integration-adobe-target"),adometry:require("@segment/analytics.js-integration-adometry"),adroll:require("@segment/analytics.js-integration-adroll"),adwords:require("@segment/analytics.js-integration-adwords"),alexa:require("@segment/analytics.js-integration-alexa"),ambassador:require("@segment/analytics.js-integration-ambassador"),amplitude:require("@segment/analytics.js-integration-amplitude"),appboy:require("@segment/analytics.js-integration-appboy"),appcues:require("@segment/analytics.js-integration-appcues"),appnexus:require("@segment/analytics.js-integration-appnexus"),aptrinsic:require("@segment/analytics.js-integration-aptrinsic"),atatus:require("@segment/analytics.js-integration-atatus"),autosend:require("@segment/analytics.js-integration-autosend"),awesm:require("@segment/analytics.js-integration-awesm"),"bing-ads":require("@segment/analytics.js-integration-bing-ads"),blueshift:require("@segment/analytics.js-integration-blueshift"),boomtrain:require("@segment/analytics.js-integration-boomtrain"),bronto:require("@segment/analytics.js-integration-bronto"),bugherd:require("@segment/analytics.js-integration-bugherd"),bugsnag:require("@segment/analytics.js-integration-bugsnag"),castle:require("@segment/analytics.js-integration-castle"),chameleon:require("@segment/analytics.js-integration-chameleon"),chartbeat:require("@segment/analytics.js-integration-chartbeat"),clevertap:require("@segment/analytics.js-integration-clevertap"),clicky:require("@segment/analytics.js-integration-clicky"),comscore:require("@segment/analytics.js-integration-comscore"),convertro:require("@segment/analytics.js-integration-convertro"),"crazy-egg":require("@segment/analytics.js-integration-crazy-egg"),criteo:require("@segment/analytics.js-integration-criteo"),curebit:require("@segment/analytics.js-integration-curebit"),customerio:require("@segment/analytics.js-integration-customerio"),cxense:require("@segment/analytics.js-integration-cxense"),"doubleclick-floodlight":require("@segment/analytics.js-integration-doubleclick-floodlight"),drip:require("@segment/analytics.js-integration-drip"),elevio:require("@segment/analytics.js-integration-elevio"),eloqua:require("@segment/analytics.js-integration-eloqua"),"email-aptitude":require("@segment/analytics.js-integration-email-aptitude"),errorception:require("@segment/analytics.js-integration-errorception"),evergage:require("@segment/analytics.js-integration-evergage"),extole:require("@segment/analytics.js-integration-extole"),"facebook-conversion-tracking":require("@segment/analytics.js-integration-facebook-conversion-tracking"),"facebook-custom-audiences":require("@segment/analytics.js-integration-facebook-custom-audiences"),"facebook-pixel":require("@segment/analytics.js-integration-facebook-pixel"),foxmetrics:require("@segment/analytics.js-integration-foxmetrics"),friendbuy:require("@segment/analytics.js-integration-friendbuy"),fullstory:require("@segment/analytics.js-integration-fullstory"),gauges:require("@segment/analytics.js-integration-gauges"),"get-satisfaction":require("@segment/analytics.js-integration-get-satisfaction"),"google-analytics":require("@segment/analytics.js-integration-google-analytics"),"google-tag-manager":require("@segment/analytics.js-integration-google-tag-manager"),gosquared:require("@segment/analytics.js-integration-gosquared"),gtag:require("@segment/analytics.js-integration-gtag"),heap:require("@segment/analytics.js-integration-heap"),hindsight:require("@segment/analytics.js-integration-hindsight"),hittail:require("@segment/analytics.js-integration-hittail"),hotjar:require("@segment/analytics.js-integration-hotjar"),hubspot:require("@segment/analytics.js-integration-hubspot"),improvely:require("@segment/analytics.js-integration-improvely"),inspectlet:require("@segment/analytics.js-integration-inspectlet"),intercom:require("@segment/analytics.js-integration-intercom"),"keen-io":require("@segment/analytics.js-integration-keen-io"),kenshoo:require("@segment/analytics.js-integration-kenshoo"),"kenshoo-infinity":require("@segment/analytics.js-integration-kenshoo-infinity"),kissmetrics:require("@segment/analytics.js-integration-kissmetrics"),klaviyo:require("@segment/analytics.js-integration-klaviyo"),"linkedin-insight-tag":require("@segment/analytics.js-integration-linkedin-insight-tag"),livechat:require("@segment/analytics.js-integration-livechat"),localytics:require("@segment/analytics.js-integration-localytics"),"lucky-orange":require("@segment/analytics.js-integration-lucky-orange"),lytics:require("@segment/analytics.js-integration-lytics"),madkudu:require("@segment/analytics.js-integration-madkudu"),marketo:require("@segment/analytics.js-integration-marketo"),"marketo-v2":require("@segment/analytics.js-integration-marketo-v2"),mediamath:require("@segment/analytics.js-integration-mediamath"),mixpanel:require("@segment/analytics.js-integration-mixpanel"),moengage:require("@segment/analytics.js-integration-moengage"),mojn:require("@segment/analytics.js-integration-mojn"),monetate:require("@segment/analytics.js-integration-monetate"),mouseflow:require("@segment/analytics.js-integration-mouseflow"),mousestats:require("@segment/analytics.js-integration-mousestats"),nanigans:require("@segment/analytics.js-integration-nanigans"),navilytics:require("@segment/analytics.js-integration-navilytics"),"nielsen-dcr":require("@segment/analytics.js-integration-nielsen-dcr"),"nielsen-dtvr":require("@segment/analytics.js-integration-nielsen-dtvr"),nudgespot:require("@segment/analytics.js-integration-nudgespot"),olark:require("@segment/analytics.js-integration-olark"),omniture:require("@segment/analytics.js-integration-omniture"),onespot:require("@segment/analytics.js-integration-onespot"),optimizely:require("@segment/analytics.js-integration-optimizely"),outbound:require("@segment/analytics.js-integration-outbound"),pardot:require("@segment/analytics.js-integration-pardot"),parsely:require("@segment/analytics.js-integration-parsely"),pendo:require("@segment/analytics.js-integration-pendo"),"perfect-audience":require("@segment/analytics.js-integration-perfect-audience"),perimeterx:require("@segment/analytics.js-integration-perimeterx"),pingdom:require("@segment/analytics.js-integration-pingdom"),"pinterest-tag":require("@segment/analytics.js-integration-pinterest-tag"),piwik:require("@segment/analytics.js-integration-piwik"),qualaroo:require("@segment/analytics.js-integration-qualaroo"),quanticmind:require("@segment/analytics.js-integration-quanticmind"),"quora-conversion-pixel":require("@segment/analytics.js-integration-quora-conversion-pixel"),ramen:require("@segment/analytics.js-integration-ramen"),rockerbox:require("@segment/analytics.js-integration-rockerbox"),"rocket-fuel":require("@segment/analytics.js-integration-rocket-fuel"),rollbar:require("@segment/analytics.js-integration-rollbar"),route:require("@segment/analytics.js-integration-route"),saasquatch:require("@segment/analytics.js-integration-saasquatch"),"salesforce-dmp":require("@segment/analytics.js-integration-salesforce-dmp"),"salesforce-live-agent":require("@segment/analytics.js-integration-salesforce-live-agent"),satismeter:require("@segment/analytics.js-integration-satismeter"),segmentio:require("@segment/analytics.js-integration-segmentio"),sentry:require("@segment/analytics.js-integration-sentry"),shareasale:require("@segment/analytics.js-integration-shareasale"),simplereach:require("@segment/analytics.js-integration-simplereach"),simplifi:require("@segment/analytics.js-integration-simplifi"),snapengage:require("@segment/analytics.js-integration-snapengage"),spinnakr:require("@segment/analytics.js-integration-spinnakr"),steelhouse:require("@segment/analytics.js-integration-steelhouse"),"stripe-radar":require("@segment/analytics.js-integration-stripe-radar"),supporthero:require("@segment/analytics.js-integration-supporthero"),"tag-injector":require("@segment/analytics.js-integration-tag-injector"),taplytics:require("@segment/analytics.js-integration-taplytics"),tapstream:require("@segment/analytics.js-integration-tapstream"),totango:require("@segment/analytics.js-integration-totango"),tvsquared:require("@segment/analytics.js-integration-tvsquared"),"twitter-ads":require("@segment/analytics.js-integration-twitter-ads"),userlike:require("@segment/analytics.js-integration-userlike"),uservoice:require("@segment/analytics.js-integration-uservoice"),vero:require("@segment/analytics.js-integration-vero"),"visual-website-optimizer":require("@segment/analytics.js-integration-visual-website-optimizer"),webengage:require("@segment/analytics.js-integration-webengage"),wigzo:require("@segment/analytics.js-integration-wigzo"),wishpond:require("@segment/analytics.js-integration-wishpond"),woopra:require("@segment/analytics.js-integration-woopra"),wootric:require("@segment/analytics.js-integration-wootric"),"yandex-metrica":require("@segment/analytics.js-integration-yandex-metrica"),youbora:require("@segment/analytics.js-integration-youbora"),zopim:require("@segment/analytics.js-integration-zopim")}},{"@segment/analytics.js-integration-adlearn-open-platform":39,"@segment/analytics.js-integration-adobe-analytics":48,"@segment/analytics.js-integration-adobe-target":57,"@segment/analytics.js-integration-adometry":66,"@segment/analytics.js-integration-adroll":75,"@segment/analytics.js-integration-adwords":81,"@segment/analytics.js-integration-alexa":87,"@segment/analytics.js-integration-ambassador":93,"@segment/analytics.js-integration-amplitude":99,"@segment/analytics.js-integration-appboy":109,"@segment/analytics.js-integration-appcues":118,"@segment/analytics.js-integration-appnexus":126,"@segment/analytics.js-integration-aptrinsic":135,"@segment/analytics.js-integration-atatus":141,"@segment/analytics.js-integration-autosend":149,"@segment/analytics.js-integration-awesm":155,"@segment/analytics.js-integration-bing-ads":161,"@segment/analytics.js-integration-blueshift":167,"@segment/analytics.js-integration-boomtrain":173,"@segment/analytics.js-integration-bronto":179,"@segment/analytics.js-integration-bugherd":185,"@segment/analytics.js-integration-bugsnag":191,"@segment/analytics.js-integration-castle":199,"@segment/analytics.js-integration-chameleon":205,"@segment/analytics.js-integration-chartbeat":211,"@segment/analytics.js-integration-clevertap":217,"@segment/analytics.js-integration-clicky":226,"@segment/analytics.js-integration-comscore":234,"@segment/analytics.js-integration-convertro":240,"@segment/analytics.js-integration-crazy-egg":249,"@segment/analytics.js-integration-criteo":255,"@segment/analytics.js-integration-curebit":265,"@segment/analytics.js-integration-customerio":271,"@segment/analytics.js-integration-cxense":277,"@segment/analytics.js-integration-doubleclick-floodlight":286,"@segment/analytics.js-integration-drip":295,"@segment/analytics.js-integration-elevio":303,"@segment/analytics.js-integration-eloqua":311,"@segment/analytics.js-integration-email-aptitude":320,"@segment/analytics.js-integration-errorception":329,"@segment/analytics.js-integration-evergage":337,"@segment/analytics.js-integration-extole":343,"@segment/analytics.js-integration-facebook-conversion-tracking":349,"@segment/analytics.js-integration-facebook-custom-audiences":355,"@segment/analytics.js-integration-facebook-pixel":361,"@segment/analytics.js-integration-foxmetrics":372,"@segment/analytics.js-integration-friendbuy":378,"@segment/analytics.js-integration-fullstory":389,"@segment/analytics.js-integration-gauges":399,"@segment/analytics.js-integration-get-satisfaction":405,"@segment/analytics.js-integration-google-analytics":411,"@segment/analytics.js-integration-google-tag-manager":420,"@segment/analytics.js-integration-gosquared":426,"@segment/analytics.js-integration-gtag":432,"@segment/analytics.js-integration-heap":438,"@segment/analytics.js-integration-hindsight":447,"@segment/analytics.js-integration-hittail":456,"@segment/analytics.js-integration-hotjar":462,"@segment/analytics.js-integration-hubspot":471,"@segment/analytics.js-integration-improvely":480,"@segment/analytics.js-integration-inspectlet":486,"@segment/analytics.js-integration-intercom":492,"@segment/analytics.js-integration-keen-io":498,"@segment/analytics.js-integration-kenshoo":513,"@segment/analytics.js-integration-kenshoo-infinity":504,"@segment/analytics.js-integration-kissmetrics":519,"@segment/analytics.js-integration-klaviyo":525,"@segment/analytics.js-integration-linkedin-insight-tag":531,"@segment/analytics.js-integration-livechat":540,"@segment/analytics.js-integration-localytics":549,"@segment/analytics.js-integration-lucky-orange":558,"@segment/analytics.js-integration-lytics":564,"@segment/analytics.js-integration-madkudu":570,"@segment/analytics.js-integration-marketo":585,"@segment/analytics.js-integration-marketo-v2":576,"@segment/analytics.js-integration-mediamath":594,"@segment/analytics.js-integration-mixpanel":603,"@segment/analytics.js-integration-moengage":609,"@segment/analytics.js-integration-mojn":618,"@segment/analytics.js-integration-monetate":624,"@segment/analytics.js-integration-mouseflow":633,"@segment/analytics.js-integration-mousestats":638,"@segment/analytics.js-integration-nanigans":644,"@segment/analytics.js-integration-navilytics":652,"@segment/analytics.js-integration-nielsen-dcr":658,"@segment/analytics.js-integration-nielsen-dtvr":668,"@segment/analytics.js-integration-nudgespot":677,"@segment/analytics.js-integration-olark":683,"@segment/analytics.js-integration-omniture":689,"@segment/analytics.js-integration-onespot":698,"@segment/analytics.js-integration-optimizely":707,"@segment/analytics.js-integration-outbound":718,"@segment/analytics.js-integration-pardot":726,"@segment/analytics.js-integration-parsely":738,"@segment/analytics.js-integration-pendo":745,"@segment/analytics.js-integration-perfect-audience":751,"@segment/analytics.js-integration-perimeterx":757,"@segment/analytics.js-integration-pingdom":763,"@segment/analytics.js-integration-pinterest-tag":769,"@segment/analytics.js-integration-piwik":778,"@segment/analytics.js-integration-qualaroo":784,"@segment/analytics.js-integration-quanticmind":793,"@segment/analytics.js-integration-quora-conversion-pixel":799,"@segment/analytics.js-integration-ramen":808,"@segment/analytics.js-integration-rockerbox":814,"@segment/analytics.js-integration-rocket-fuel":823,"@segment/analytics.js-integration-rollbar":832,"@segment/analytics.js-integration-route":838,"@segment/analytics.js-integration-saasquatch":844,"@segment/analytics.js-integration-salesforce-dmp":850,"@segment/analytics.js-integration-salesforce-live-agent":859,"@segment/analytics.js-integration-satismeter":868,"@segment/analytics.js-integration-segmentio":875,"@segment/analytics.js-integration-sentry":891,"@segment/analytics.js-integration-shareasale":897,"@segment/analytics.js-integration-simplereach":906,"@segment/analytics.js-integration-simplifi":912,"@segment/analytics.js-integration-snapengage":921,"@segment/analytics.js-integration-spinnakr":927,"@segment/analytics.js-integration-steelhouse":933,"@segment/analytics.js-integration-stripe-radar":942,"@segment/analytics.js-integration-supporthero":951,"@segment/analytics.js-integration-tag-injector":957,"@segment/analytics.js-integration-taplytics":966,"@segment/analytics.js-integration-tapstream":972,"@segment/analytics.js-integration-totango":978,"@segment/analytics.js-integration-tvsquared":987,"@segment/analytics.js-integration-twitter-ads":996,"@segment/analytics.js-integration-userlike":1002,"@segment/analytics.js-integration-uservoice":1008,"@segment/analytics.js-integration-vero":1014,"@segment/analytics.js-integration-visual-website-optimizer":1020,"@segment/analytics.js-integration-webengage":1026,"@segment/analytics.js-integration-wigzo":1032,"@segment/analytics.js-integration-wishpond":1038,"@segment/analytics.js-integration-woopra":1044,"@segment/analytics.js-integration-wootric":1053,"@segment/analytics.js-integration-yandex-metrica":1062,"@segment/analytics.js-integration-youbora":1068,"@segment/analytics.js-integration-zopim":1076}],4:[function(require,module,exports){var IDX=256,HEX=[],BUFFER;while(IDX--)HEX[IDX]=(IDX+256).toString(16).substring(1);function v4(){var i=0,num,out="";if(!BUFFER||IDX+16>256){BUFFER=Array(i=256);while(i--)BUFFER[i]=256*Math.random()|0;i=IDX=0}for(;i<16;i++){num=BUFFER[IDX+i];if(i==6)out+=HEX[num&15|64];else if(i==8)out+=HEX[num&63|128];else out+=HEX[num];if(i&1&&i>1&&i<11)out+="-"}IDX++;return out}exports.v4=v4},{}],5:[function(require,module,exports){"use strict";var arity=require("@ndhoule/arity");var objToString=Object.prototype.toString;var isFunction=function(val){return typeof val==="function"};var isNumber=function(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var after=function after(n,fn){if(!isNumber(n)){throw new TypeError("Expected a number but received "+typeof n)}if(!isFunction(fn)){throw new TypeError("Expected a function but received "+typeof fn)}var callCount=0;return arity(fn.length,function(){callCount+=1;if(callCount<n){return}return fn.apply(this,arguments)})};module.exports=after},{"@ndhoule/arity":6}],6:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString;var isFunction=function(val){return typeof val==="function"};var isNumber=function(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var createParams=function createParams(n){var args=[];for(var i=1;i<=n;i+=1){args.push("arg"+i)}return args};var createArityWrapper=function createArityWrapper(n){var paramNames=createParams(n).join(", ");var wrapperBody="".concat("  return function(",paramNames,") {\n","    return func.apply(this, arguments);\n","  };");return new Function("func",wrapperBody)};var arityWrapperCache=[function(fn){return function(){return fn.apply(this,arguments)}},function(fn){return function(arg1){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3,arg4){return fn.apply(this,arguments)}},function(fn){return function(arg1,arg2,arg3,arg4,arg5){return fn.apply(this,arguments)}}];var arity=function arity(n,func){if(!isFunction(func)){throw new TypeError("Expected a function but got "+typeof func)}n=Math.max(isNumber(n)?n:0,0);if(!arityWrapperCache[n]){arityWrapperCache[n]=createArityWrapper(n)}return arityWrapperCache[n](func)};module.exports=arity},{}],7:[function(require,module,exports){"use strict";var type=require("component-type");var clone=function clone(obj){var t=type(obj);if(t==="object"){var copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy}if(t==="array"){var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy}if(t==="regexp"){var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags)}if(t==="date"){return new Date(obj.getTime())}return obj};module.exports=clone},{"component-type":1120}],8:[function(require,module,exports){"use strict";var drop=require("@ndhoule/drop");var rest=require("@ndhoule/rest");var has=Object.prototype.hasOwnProperty;var objToString=Object.prototype.toString;var isObject=function isObject(value){return Boolean(value)&&typeof value==="object"};var isPlainObject=function isPlainObject(value){return Boolean(value)&&objToString.call(value)==="[object Object]"};var shallowCombiner=function shallowCombiner(target,source,value,key){if(has.call(source,key)&&target[key]===undefined){target[key]=value}return source};var deepCombiner=function(target,source,value,key){if(has.call(source,key)){if(isPlainObject(target[key])&&isPlainObject(value)){target[key]=defaultsDeep(target[key],value)}else if(target[key]===undefined){target[key]=value}}return source};var defaultsWith=function(combiner,target){if(!isObject(target)){return target}combiner=combiner||shallowCombiner;var sources=drop(2,arguments);for(var i=0;i<sources.length;i+=1){for(var key in sources[i]){combiner(target,sources[i],sources[i][key],key)}}return target};var defaultsDeep=function defaultsDeep(target){return defaultsWith.apply(null,[deepCombiner,target].concat(rest(arguments)))};var defaults=function(target){return defaultsWith.apply(null,[null,target].concat(rest(arguments)))};module.exports=defaults;module.exports.deep=defaultsDeep},{"@ndhoule/drop":9,"@ndhoule/rest":19}],9:[function(require,module,exports){"use strict";var max=Math.max;var drop=function drop(count,collection){var length=collection?collection.length:0;if(!length){return[]}var toDrop=max(Number(count)||0,0);var resultsLength=max(length-toDrop,0);var results=new Array(resultsLength);for(var i=0;i<resultsLength;i+=1){results[i]=collection[i+toDrop]}return results};module.exports=drop},{}],10:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var objToString=Object.prototype.toString;var isNumber=function isNumber(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var isArray=typeof Array.isArray==="function"?Array.isArray:function isArray(val){return objToString.call(val)==="[object Array]"};var isArrayLike=function isArrayLike(val){return val!=null&&(isArray(val)||val!=="function"&&isNumber(val.length))};var arrayEach=function arrayEach(iterator,array){for(var i=0;i<array.length;i+=1){if(iterator(array[i],i,array)===false){break}}};var baseEach=function baseEach(iterator,object){var ks=keys(object);for(var i=0;i<ks.length;i+=1){if(iterator(object[ks[i]],ks[i],object)===false){break}}};var each=function each(iterator,collection){return(isArrayLike(collection)?arrayEach:baseEach).call(this,iterator,collection)};module.exports=each},{"@ndhoule/keys":16}],11:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty;var entries=function entries(object){var results=[];for(var key in object){if(has.call(object,key)){results.push([key,object[key]])}}return results};module.exports=entries},{}],12:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var every=function every(predicate,collection){if(typeof predicate!=="function"){throw new TypeError("`predicate` must be a function but was a "+typeof predicate)}var result=true;each(function(val,key,collection){result=!!predicate(val,key,collection);if(!result){return false}},collection);return result};module.exports=every},{"@ndhoule/each":10}],13:[function(require,module,exports){"use strict";var has=Object.prototype.hasOwnProperty;var extend=function extend(dest){var sources=Array.prototype.slice.call(arguments,1);for(var i=0;i<sources.length;i+=1){for(var key in sources[i]){if(has.call(sources[i],key)){dest[key]=sources[i][key]}}}return dest};module.exports=extend},{}],14:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var foldl=function foldl(iterator,accumulator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}each(function(val,i,collection){accumulator=iterator(accumulator,val,i,collection)},collection);return accumulator};module.exports=foldl},{"@ndhoule/each":10}],15:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var strIndexOf=String.prototype.indexOf;var sameValueZero=function sameValueZero(value1,value2){if(value1===value2){return value1!==0||1/value1===1/value2}return value1!==value1&&value2!==value2};var includes=function includes(searchElement,collection){var found=false;if(typeof collection==="string"){return strIndexOf.call(collection,searchElement)!==-1}each(function(value){if(sameValueZero(value,searchElement)){found=true;return false}},collection);return found};module.exports=includes},{"@ndhoule/each":10}],16:[function(require,module,exports){"use strict";var hop=Object.prototype.hasOwnProperty;var strCharAt=String.prototype.charAt;var toStr=Object.prototype.toString;var charAt=function(str,index){return strCharAt.call(str,index)};var has=function has(context,prop){return hop.call(context,prop)};var isString=function isString(val){return toStr.call(val)==="[object String]"};var isArrayLike=function isArrayLike(val){return val!=null&&(typeof val!=="function"&&typeof val.length==="number")};var indexKeys=function indexKeys(target,pred){pred=pred||has;var results=[];for(var i=0,len=target.length;i<len;i+=1){if(pred(target,i)){results.push(String(i))}}return results};var objectKeys=function objectKeys(target,pred){pred=pred||has;var results=[];for(var key in target){if(pred(target,key)){results.push(String(key))}}return results};var keys=function keys(source){if(source==null){return[]}if(isString(source)){return indexKeys(source,charAt)}if(isArrayLike(source)){return indexKeys(source,has)}return objectKeys(source)};module.exports=keys},{}],17:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var map=function map(iterator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}var result=[];each(function(val,i,collection){result.push(iterator(val,i,collection))},collection);return result};module.exports=map},{"@ndhoule/each":10}],18:[function(require,module,exports){"use strict";var objToString=Object.prototype.toString;var existy=function(val){return val!=null};var isArray=function(val){return objToString.call(val)==="[object Array]"};var isString=function(val){return typeof val==="string"||objToString.call(val)==="[object String]"};var isObject=function(val){return val!=null&&typeof val==="object"};var pick=function pick(props,object){if(!existy(object)||!isObject(object)){return{}}if(isString(props)){props=[props]}if(!isArray(props)){props=[]}var result={};for(var i=0;i<props.length;i+=1){if(isString(props[i])&&props[i]in object){result[props[i]]=object[props[i]]}}return result};module.exports=pick},{}],19:[function(require,module,exports){"use strict";var max=Math.max;var rest=function rest(collection){if(collection==null||!collection.length){return[]}var results=new Array(max(collection.length-2,0));for(var i=1;i<collection.length;i+=1){results[i-1]=collection[i]}return results};module.exports=rest},{}],20:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var values=function values(source){var ks=keys(source);var results=new Array(ks.length);for(var i=0;i<ks.length;i+=1){results[i]=source[ks[i]]}return results};module.exports=values},{"@ndhoule/keys":16}],21:[function(require,module,exports){var type=require("component-type");var clone=require("component-clone");module.exports=alias;function alias(obj,method){switch(type(method)){case"object":return aliasByDictionary(clone(obj),method);case"function":return aliasByFunction(clone(obj),method)}}function aliasByDictionary(obj,aliases){for(var key in aliases){if(undefined===obj[key])continue;obj[aliases[key]]=obj[key];delete obj[key]}return obj}function aliasByFunction(obj,convert){var output={};for(var key in obj)output[convert(key)]=obj[key];return output}},{"component-clone":1110,"component-type":1120}],22:[function(require,module,exports){(function(global){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _analytics=global.analytics;var Alias=require("segmentio-facade").Alias;var Emitter=require("component-emitter");var Facade=require("segmentio-facade");var Group=require("segmentio-facade").Group;var Identify=require("segmentio-facade").Identify;var SourceMiddlewareChain=require("./middleware").SourceMiddlewareChain;var IntegrationMiddlewareChain=require("./middleware").IntegrationMiddlewareChain;var DestinationMiddlewareChain=require("./middleware").DestinationMiddlewareChain;var Page=require("segmentio-facade").Page;var Track=require("segmentio-facade").Track;var bindAll=require("bind-all");var clone=require("./utils/clone");var extend=require("extend");var cookie=require("./cookie");var metrics=require("./metrics");var debug=require("debug");var defaults=require("@ndhoule/defaults");var each=require("./utils/each");var foldl=require("@ndhoule/foldl");var group=require("./group");var is=require("is");var isMeta=require("@segment/is-meta");var keys=require("@ndhoule/keys");var memory=require("./memory");var nextTick=require("next-tick");var normalize=require("./normalize");var on=require("component-event").bind;var pageDefaults=require("./pageDefaults");var pick=require("@ndhoule/pick");var prevent=require("@segment/prevent-default");var querystring=require("component-querystring");var store=require("./store");var user=require("./user");var type=require("component-type");function Analytics(){this._options({});this.Integrations={};this._sourceMiddlewares=new SourceMiddlewareChain;this._integrationMiddlewares=new IntegrationMiddlewareChain;this._destinationMiddlewares={};this._integrations={};this._readied=false;this._timeout=300;this._user=user;this.log=debug("analytics.js");bindAll(this);var self=this;this.on("initialize",function(settings,options){if(options.initialPageview)self.page();self._parseQuery(window.location.search)})}Emitter(Analytics.prototype);Analytics.prototype.use=function(plugin){plugin(this);return this};Analytics.prototype.addIntegration=function(Integration){var name=Integration.prototype.name;if(!name)throw new TypeError("attempted to add an invalid integration");this.Integrations[name]=Integration;return this};Analytics.prototype.addSourceMiddleware=function(middleware){this._sourceMiddlewares.add(middleware);return this};Analytics.prototype.addIntegrationMiddleware=function(middleware){this._integrationMiddlewares.add(middleware);return this};Analytics.prototype.addDestinationMiddleware=function(integrationName,middlewares){var self=this;middlewares.forEach(function(middleware){if(!self._destinationMiddlewares[integrationName]){self._destinationMiddlewares[integrationName]=new DestinationMiddlewareChain}self._destinationMiddlewares[integrationName].add(middleware)});return self};Analytics.prototype.init=Analytics.prototype.initialize=function(settings,options){settings=settings||{};options=options||{};this._options(options);this._readied=false;var self=this;each(function(_opts,name){var Integration=self.Integrations[name];if(!Integration)delete settings[name]},settings);each(function(opts,name){if(options.integrations){if(options.integrations[name]===false||options.integrations.All===false&&!options.integrations[name]){return}}var Integration=self.Integrations[name];var clonedOpts={};extend(true,clonedOpts,opts);var integration=new Integration(clonedOpts);self.log("initialize %o - %o",name,opts);self.add(integration)},settings);var integrations=this._integrations;user.load();group.load();var readyCallCount=0;var integrationCount=keys(integrations).length;var ready=function(){readyCallCount++;if(readyCallCount>=integrationCount){self._readied=true;self.emit("ready")}};if(integrationCount<=0){ready()}this.failedInitializations=[];var initialPageSkipped=false;each(function(integration){if(options.initialPageview&&integration.options.initialPageview===false){var page=integration.page;integration.page=function(){if(initialPageSkipped){return page.apply(this,arguments)}initialPageSkipped=true;return}}integration.analytics=self;integration.once("ready",ready);try{metrics.increment("analytics_js.integration.invoke",{method:"initialize",integration_name:integration.name});integration.initialize()}catch(e){var integrationName=integration.name;metrics.increment("analytics_js.integration.invoke.error",{method:"initialize",integration_name:integration.name});self.failedInitializations.push(integrationName);self.log("Error initializing %s integration: %o",integrationName,e);integration.ready()}},integrations);this.initialized=true;this.emit("initialize",settings,options);return this};Analytics.prototype.setAnonymousId=function(id){this.user().anonymousId(id);return this};Analytics.prototype.add=function(integration){this._integrations[integration.name]=integration;return this};Analytics.prototype.identify=function(id,traits,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=user.id();user.identify(id,traits);var msg=this.normalize({options:options,traits:user.traits(),userId:user.id()});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("identify",new Identify(msg));this.emit("identify",id,traits,options);this._callback(fn);return this};Analytics.prototype.user=function(){return user};Analytics.prototype.group=function(id,traits,options,fn){if(!arguments.length)return group;if(is.fn(options))fn=options,options=null;if(is.fn(traits))fn=traits,options=null,traits=null;if(is.object(id))options=traits,traits=id,id=group.id();group.identify(id,traits);var msg=this.normalize({options:options,traits:group.traits(),groupId:group.id()});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("group",new Group(msg));this.emit("group",id,traits,options);this._callback(fn);return this};Analytics.prototype.track=function(event,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=null,properties=null;var plan=this.options.plan||{};var events=plan.track||{};var planIntegrationOptions={};var msg=this.normalize({properties:properties,options:options,event:event});plan=events[event];if(plan){this.log("plan %o - %o",event,plan);if(plan.enabled===false){planIntegrationOptions={All:false,"Segment.io":true}}else{planIntegrationOptions=plan.integrations||{}}}else{var defaultPlan=events.__default||{enabled:true};if(!defaultPlan.enabled){planIntegrationOptions={All:false,"Segment.io":true}}}defaults(msg.integrations,this._mergeInitializeAndPlanIntegrations(planIntegrationOptions));this._invoke("track",new Track(msg));this.emit("track",event,properties,options);this._callback(fn);return this};Analytics.prototype.trackClick=Analytics.prototype.trackLink=function(links,event,properties){if(!links)return this;if(type(links)==="element")links=[links];var self=this;each(function(el){if(type(el)!=="element"){throw new TypeError("Must pass HTMLElement to `analytics.trackLink`.")}on(el,"click",function(e){var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;var href=el.getAttribute("href")||el.getAttributeNS("http://www.w3.org/1999/xlink","href")||el.getAttribute("xlink:href");self.track(ev,props);if(href&&el.target!=="_blank"&&!isMeta(e)){prevent(e);self._callback(function(){window.location.href=href})}})},links);return this};Analytics.prototype.trackSubmit=Analytics.prototype.trackForm=function(forms,event,properties){if(!forms)return this;if(type(forms)==="element")forms=[forms];var self=this;each(function(el){if(type(el)!=="element")throw new TypeError("Must pass HTMLElement to `analytics.trackForm`.");function handler(e){prevent(e);var ev=is.fn(event)?event(el):event;var props=is.fn(properties)?properties(el):properties;self.track(ev,props);self._callback(function(){el.submit()})}var $=window.jQuery||window.Zepto;if($){$(el).submit(handler)}else{on(el,"submit",handler)}},forms);return this};Analytics.prototype.page=function(category,name,properties,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(properties))fn=properties,options=properties=null;if(is.fn(name))fn=name,options=properties=name=null;if(type(category)==="object")options=name,properties=category,name=category=null;if(type(name)==="object")options=properties,properties=name,name=null;if(type(category)==="string"&&type(name)!=="string")name=category,category=null;properties=clone(properties)||{};if(name)properties.name=name;if(category)properties.category=category;var defs=pageDefaults();defaults(properties,defs);var overrides=pick(keys(defs),properties);if(!is.empty(overrides)){options=options||{};options.context=options.context||{};options.context.page=overrides}var msg=this.normalize({properties:properties,category:category,options:options,name:name});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("page",new Page(msg));this.emit("page",category,name,properties,options);this._callback(fn);return this};Analytics.prototype.pageview=function(url){var properties={};if(url)properties.path=url;this.page(properties);return this};Analytics.prototype.alias=function(to,from,options,fn){if(is.fn(options))fn=options,options=null;if(is.fn(from))fn=from,options=null,from=null;if(is.object(from))options=from,from=null;var msg=this.normalize({options:options,previousId:from,userId:to});if(this.options.integrations){defaults(msg.integrations,this.options.integrations)}this._invoke("alias",new Alias(msg));this.emit("alias",to,from,options);this._callback(fn);return this};Analytics.prototype.ready=function(fn){if(is.fn(fn)){if(this._readied){nextTick(fn)}else{this.once("ready",fn)}}return this};Analytics.prototype.timeout=function(timeout){this._timeout=timeout};Analytics.prototype.debug=function(str){if(!arguments.length||str){debug.enable("analytics:"+(str||"*"))}else{debug.disable()}};Analytics.prototype._options=function(options){options=options||{};this.options=options;cookie.options(options.cookie);metrics.options(options.metrics);store.options(options.localStorage);user.options(options.user);group.options(options.group);return this};Analytics.prototype._callback=function(fn){if(is.fn(fn)){this._timeout?setTimeout(fn,this._timeout):nextTick(fn)}return this};Analytics.prototype._invoke=function(method,facade){var self=this;try{this._sourceMiddlewares.applyMiddlewares(extend(true,new Facade({}),facade),this._integrations,function(result){if(result===null){self.log('Payload with method "%s" was null and dropped by source a middleware.',method);return}if(!(result instanceof Facade)){result=new Facade(result)}self.emit("invoke",result);metrics.increment("analytics_js.invoke",{method:method});applyIntegrationMiddlewares(result)})}catch(e){metrics.increment("analytics_js.invoke.error",{method:method});self.log("Error invoking .%s method of %s integration: %o",method,name,e)}return this;function applyIntegrationMiddlewares(facade){var failedInitializations=self.failedInitializations||[];each(function(integration,name){var facadeCopy=extend(true,new Facade({}),facade);if(!facadeCopy.enabled(name))return;if(failedInitializations.indexOf(name)>=0){self.log("Skipping invocation of .%s method of %s integration. Integration failed to initialize properly.",method,name)}else{try{self._integrationMiddlewares.applyMiddlewares(facadeCopy,integration.name,function(result){if(result===null){self.log('Payload to integration "%s" was null and dropped by a middleware.',name);return}if(!(result instanceof Facade)){result=new Facade(result)}if(self._destinationMiddlewares[integration.name]){self._destinationMiddlewares[integration.name].applyMiddlewares(facadeCopy,integration.name,function(result){if(result===null){self.log('Payload to destination "%s" was null and dropped by a middleware.',name);return}if(!(result instanceof Facade)){result=new Facade(result)}metrics.increment("analytics_js.integration.invoke",{method:method,integration_name:integration.name});integration.invoke.call(integration,method,result)})}else{metrics.increment("analytics_js.integration.invoke",{method:method,integration_name:integration.name});integration.invoke.call(integration,method,result)}})}catch(e){metrics.increment("analytics_js.integration.invoke.error",{method:method,integration_name:integration.name});self.log("Error invoking .%s method of %s integration: %o",method,name,e)}}},self._integrations)}};Analytics.prototype.push=function(args){var method=args.shift();if(!this[method])return;this[method].apply(this,args)};Analytics.prototype.reset=function(){this.user().logout();this.group().logout()};Analytics.prototype._parseQuery=function(query){var q=querystring.parse(query);var traits=pickPrefix("ajs_trait_",q);var props=pickPrefix("ajs_prop_",q);if(q.ajs_uid)this.identify(q.ajs_uid,traits);if(q.ajs_event)this.track(q.ajs_event,props);if(q.ajs_aid)user.anonymousId(q.ajs_aid);return this;function pickPrefix(prefix,object){var length=prefix.length;var sub;return foldl(function(acc,val,key){if(key.substr(0,length)===prefix){sub=key.substr(length);acc[sub]=val}return acc},{},object)}};Analytics.prototype.normalize=function(msg){msg=normalize(msg,keys(this._integrations));if(msg.anonymousId)user.anonymousId(msg.anonymousId);msg.anonymousId=user.anonymousId();msg.context.page=defaults(msg.context.page||{},pageDefaults());return msg};Analytics.prototype._mergeInitializeAndPlanIntegrations=function(planIntegrations){if(!this.options.integrations){return planIntegrations}var integrations=extend({},this.options.integrations);var integrationName;if(planIntegrations.All===false){integrations={All:false}}for(integrationName in planIntegrations){if(planIntegrations.hasOwnProperty(integrationName)){if(this.options.integrations[integrationName]!==false){integrations[integrationName]=planIntegrations[integrationName]}}}return integrations};Analytics.prototype.noConflict=function(){window.analytics=_analytics;return this};module.exports=Analytics;module.exports.cookie=cookie;module.exports.memory=memory;module.exports.store=store;module.exports.metrics=metrics}).call(this)}).call(this,typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{"./cookie":23,"./group":25,"./memory":27,"./metrics":28,"./middleware":29,"./normalize":30,"./pageDefaults":31,"./store":32,"./user":33,"./utils/clone":34,"./utils/each":35,"@ndhoule/defaults":8,"@ndhoule/foldl":14,"@ndhoule/keys":16,"@ndhoule/pick":18,"@segment/is-meta":1090,"@segment/prevent-default":1099,"bind-all":1107,"component-emitter":1114,"component-event":1115,"component-querystring":1118,"component-type":1120,debug:37,extend:1126,is:1131,"next-tick":1142,"segmentio-facade":1158}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bindAll=require("bind-all");var clone=require("./utils/clone");var cookie=require("@segment/cookie");var debug=require("debug")("analytics.js:cookie");var defaults=require("@ndhoule/defaults");var topDomain=require("@segment/top-domain");function Cookie(options){this.options(options)}Cookie.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};var domain="."+topDomain(window.location.href);if(domain===".")domain=null;this._options=defaults(options,{maxage:31536e6,path:"/",domain:domain,sameSite:"Lax"});this.set("ajs:test",true);if(!this.get("ajs:test")){debug("fallback to domain=null");this._options.domain=null}this.remove("ajs:test")};Cookie.prototype.set=function(key,value){try{value=window.JSON.stringify(value);cookie(key,value==="null"?null:value,clone(this._options));return true}catch(e){return false}};Cookie.prototype.get=function(key){try{var value=cookie(key);value=value?window.JSON.parse(value):null;return value}catch(e){return null}};Cookie.prototype.remove=function(key){try{cookie(key,null,clone(this._options));return true}catch(e){return false}};module.exports=bindAll(new Cookie);module.exports.Cookie=Cookie},{"./utils/clone":34,"@ndhoule/defaults":8,"@segment/cookie":1088,"@segment/top-domain":1104,"bind-all":1107,debug:37}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var clone=require("./utils/clone");var cookie=require("./cookie");var debug=require("debug")("analytics:entity");var defaults=require("@ndhoule/defaults");var extend=require("@ndhoule/extend");var memory=require("./memory");var store=require("./store");var isodateTraverse=require("@segment/isodate-traverse");module.exports=Entity;function Entity(options){this.options(options);this.initialize()}Entity.prototype.initialize=function(){cookie.set("ajs:cookies",true);if(cookie.get("ajs:cookies")){cookie.remove("ajs:cookies");this._storage=cookie;return}if(store.enabled){this._storage=store;return}debug("warning using memory store both cookies and localStorage are disabled");this._storage=memory};Entity.prototype.storage=function(){return this._storage};Entity.prototype.options=function(options){if(arguments.length===0)return this._options;this._options=defaults(options||{},this.defaults||{})};Entity.prototype.id=function(id){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(id);default:}};Entity.prototype._getId=function(){if(!this._options.persist){return this._id===undefined?null:this._id}var cookieId=this._getIdFromCookie();if(cookieId){return cookieId}var lsId=this._getIdFromLocalStorage();if(lsId){this._setIdInCookies(lsId);return lsId}return null};Entity.prototype._getIdFromCookie=function(){return this.storage().get(this._options.cookie.key)};Entity.prototype._getIdFromLocalStorage=function(){if(!this._options.localStorageFallbackDisabled){return store.get(this._options.cookie.key)}return null};Entity.prototype._setId=function(id){if(this._options.persist){this._setIdInCookies(id);this._setIdInLocalStorage(id)}else{this._id=id}};Entity.prototype._setIdInCookies=function(id){this.storage().set(this._options.cookie.key,id)};Entity.prototype._setIdInLocalStorage=function(id){if(!this._options.localStorageFallbackDisabled){store.set(this._options.cookie.key,id)}};Entity.prototype.properties=Entity.prototype.traits=function(traits){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(traits);default:}};Entity.prototype._getTraits=function(){var ret=this._options.persist?store.get(this._options.localStorage.key):this._traits;return ret?isodateTraverse(clone(ret)):{}};Entity.prototype._setTraits=function(traits){traits=traits||{};if(this._options.persist){store.set(this._options.localStorage.key,traits)}else{this._traits=traits}};Entity.prototype.identify=function(id,traits){traits=traits||{};var current=this.id();if(current===null||current===id)traits=extend(this.traits(),traits);if(id)this.id(id);this.debug("identify %o, %o",id,traits);this.traits(traits);this.save()};Entity.prototype.save=function(){if(!this._options.persist)return false;this._setId(this.id());this._setTraits(this.traits());return true};Entity.prototype.logout=function(){this.id(null);this.traits({});this.storage().remove(this._options.cookie.key);store.remove(this._options.cookie.key);store.remove(this._options.localStorage.key)};Entity.prototype.reset=function(){this.logout();this.options({})};Entity.prototype.load=function(){this.id(this.id());this.traits(this.traits())}},{"./cookie":23,"./memory":27,"./store":32,"./utils/clone":34,"@ndhoule/defaults":8,"@ndhoule/extend":13,"@segment/isodate-traverse":1091,debug:37}],25:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Entity=require("./entity");var bindAll=require("bind-all");var debug=require("debug")("analytics:group");var inherit=require("inherits");Group.defaults={persist:true,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}};function Group(options){this.defaults=Group.defaults;this.debug=debug;Entity.call(this,options)}inherit(Group,Entity);module.exports=bindAll(new Group);module.exports.Group=Group},{"./entity":24,"bind-all":1107,debug:37,inherits:1129}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Analytics=require("./analytics");var analytics=new Analytics;analytics.require=require;analytics.VERSION=require("../package.json").version;module.exports=analytics},{"../package.json":38,"./analytics":22}],27:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var clone=require("./utils/clone");var has=Object.prototype.hasOwnProperty;module.exports=bindAll(new Memory);function Memory(){this.store={}}Memory.prototype.set=function(key,value){this.store[key]=clone(value);return true};Memory.prototype.get=function(key){if(!has.call(this.store,key))return;return clone(this.store[key])};Memory.prototype.remove=function(key){delete this.store[key];return true}},{"./utils/clone":34,"bind-all":1107}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var bindAll=require("bind-all");var send=require("@segment/send-json");var debug=require("debug")("analytics.js:metrics");function Metrics(options){this.options(options)}Metrics.prototype.options=function(options){options=options||{};this.host=options.host||"api.segment.io/v1";this.sampleRate=options.sampleRate||0;this.flushTimer=options.flushTimer||30*1e3;this.maxQueueSize=options.maxQueueSize||20;this.queue=[];if(this.sampleRate>0){var self=this;setInterval(function(){self._flush()},this.flushTimer)}};Metrics.prototype.increment=function(metric,tags){if(Math.random()>this.sampleRate){return}if(this.queue.length>=this.maxQueueSize){return}this.queue.push({type:"Counter",metric:metric,value:1,tags:tags});if(metric.indexOf("error")>0){this._flush()}};Metrics.prototype._flush=function(){var self=this;if(self.queue.length<=0){return}var payload={series:this.queue};var headers={"Content-Type":"text/plain"};self.queue=[];if(send.type!=="xhr")return;send("https://"+this.host+"/m",payload,headers,function(err,res){debug("sent %O, received %O",payload,[err,res])})};module.exports=bindAll(new Metrics);module.exports.Metrics=Metrics},{"@segment/send-json":1101,"bind-all":1107,debug:37}],29:[function(require,module,exports){"use strict";var Facade=require("segmentio-facade");module.exports.SourceMiddlewareChain=function SourceMiddlewareChain(){var apply=middlewareChain(this);this.applyMiddlewares=function(facade,integrations,callback){return apply(function(mw,payload,next){mw({integrations:integrations,next:next,payload:payload})},facade,callback)}};module.exports.IntegrationMiddlewareChain=function IntegrationMiddlewareChain(){var apply=middlewareChain(this);this.applyMiddlewares=function(facade,integration,callback){return apply(function(mw,payload,next){mw(payload,integration,next)},facade,callback)}};module.exports.DestinationMiddlewareChain=function DestinationMiddlewareChain(){var apply=middlewareChain(this);this.applyMiddlewares=function(facade,integration,callback){return apply(function(mw,payload,next){mw({payload:payload,integration:integration,next:next})},facade,callback)}};function middlewareChain(dest){var middlewares=[];dest.getMiddlewares=function(){return middlewares.slice()};dest.add=function(middleware){if(typeof middleware!=="function")throw new Error("attempted to add non-function middleware");if(middlewares.indexOf(middleware)!==-1)throw new Error("middleware is already registered");middlewares.push(middleware)};return function applyMiddlewares(run,facade,callback){if(typeof facade!=="object")throw new Error("applyMiddlewares requires a payload object");if(typeof callback!=="function")throw new Error("applyMiddlewares requires a function callback");var middlewaresToApply=middlewares.slice();middlewaresToApply.push(callback);executeChain(run,facade,middlewaresToApply,0)}}function executeChain(run,payload,middlewares,index){if(payload===null){middlewares[middlewares.length-1](null);return}if(!(payload instanceof Facade)){payload=new Facade(payload)}var mw=middlewares[index];if(mw){if(middlewares[index+1]){run(mw,payload,function(result){executeChain(run,result,middlewares,++index)})}else{mw(payload)}}}module.exports.middlewareChain=middlewareChain},{"segmentio-facade":1158}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var debug=require("debug")("analytics.js:normalize");var defaults=require("@ndhoule/defaults");var each=require("./utils/each");var includes=require("@ndhoule/includes");var map=require("./utils/map");var type=require("component-type");var uuid=require("uuid/v4");var md5=require("spark-md5").hash;var has=Object.prototype.hasOwnProperty;module.exports=normalize;var toplevel=["integrations","anonymousId","timestamp","context"];function normalize(msg,list){var lower=map(function(s){return s.toLowerCase()},list);var opts=msg.options||{};var integrations=opts.integrations||{};var providers=opts.providers||{};var context=opts.context||{};var ret={};debug("<-",msg);each(function(value,key){if(!integration(key))return;if(!has.call(integrations,key))integrations[key]=value;delete opts[key]},opts);delete opts.providers;each(function(value,key){if(!integration(key))return;if(type(integrations[key])==="object")return;if(has.call(integrations,key)&&typeof providers[key]==="boolean")return;integrations[key]=value},providers);each(function(_value,key){if(includes(key,toplevel)){ret[key]=opts[key]}else{context[key]=opts[key]}},opts);msg.messageId="ajs-"+md5(window.JSON.stringify(msg)+uuid());delete msg.options;ret.integrations=integrations;ret.context=context;ret=defaults(ret,msg);debug("->",ret);return ret;function integration(name){return!!(includes(name,list)||name.toLowerCase()==="all"||includes(name.toLowerCase(),lower))}}},{"./utils/each":35,"./utils/map":36,"@ndhoule/defaults":8,"@ndhoule/includes":15,"component-type":1120,debug:37,"spark-md5":1166,"uuid/v4":1186}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var canonical=require("@segment/canonical");var includes=require("@ndhoule/includes");var url=require("component-url");function pageDefaults(){return{path:canonicalPath(),referrer:document.referrer,search:location.search,title:document.title,url:canonicalUrl(location.search)}}function canonicalPath(){var canon=canonical();if(!canon)return window.location.pathname;var parsed=url.parse(canon);return parsed.pathname}function canonicalUrl(search){var canon=canonical();if(canon)return includes("?",canon)?canon:canon+search;var url=window.location.href;var i=url.indexOf("#");return i===-1?url:url.slice(0,i)}module.exports=pageDefaults},{"@ndhoule/includes":15,"@segment/canonical":1086,"component-url":1121}],32:[function(require,module,exports){"use strict";var bindAll=require("bind-all");var defaults=require("@ndhoule/defaults");var store=require("@segment/store");function Store(options){this.options(options)}Store.prototype.options=function(options){if(arguments.length===0)return this._options;options=options||{};defaults(options,{enabled:true});this.enabled=options.enabled&&store.enabled;this._options=options};Store.prototype.set=function(key,value){if(!this.enabled)return false;return store.set(key,value)};Store.prototype.get=function(key){if(!this.enabled)return null;return store.get(key)};Store.prototype.remove=function(key){if(!this.enabled)return false;return store.remove(key)};module.exports=bindAll(new Store);module.exports.Store=Store},{"@ndhoule/defaults":8,"@segment/store":1102,"bind-all":1107}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Entity=require("./entity");var bindAll=require("bind-all");var cookie=require("./cookie");var debug=require("debug")("analytics:user");var inherit=require("inherits");var rawCookie=require("@segment/cookie");var uuid=require("uuid");var localStorage=require("./store");User.defaults={persist:true,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}};function User(options){this.defaults=User.defaults;this.debug=debug;Entity.call(this,options)}inherit(User,Entity);User.prototype.id=function(id){var prev=this._getId();var ret=Entity.prototype.id.apply(this,arguments);if(prev==null)return ret;if(prev!=id&&id)this.anonymousId(null);return ret};User.prototype.anonymousId=function(anonymousId){var store=this.storage();if(arguments.length){store.set("ajs_anonymous_id",anonymousId);this._setAnonymousIdInLocalStorage(anonymousId);return this}anonymousId=store.get("ajs_anonymous_id");if(anonymousId){this._setAnonymousIdInLocalStorage(anonymousId);store.set("ajs_anonymous_id",anonymousId);return anonymousId}if(!this._options.localStorageFallbackDisabled){anonymousId=localStorage.get("ajs_anonymous_id");if(anonymousId){store.set("ajs_anonymous_id",anonymousId);return anonymousId}}anonymousId=rawCookie("_sio");if(anonymousId){anonymousId=anonymousId.split("----")[0];store.set("ajs_anonymous_id",anonymousId);this._setAnonymousIdInLocalStorage(anonymousId);store.remove("_sio");return anonymousId}anonymousId=uuid.v4();store.set("ajs_anonymous_id",anonymousId);this._setAnonymousIdInLocalStorage(anonymousId);return store.get("ajs_anonymous_id")};User.prototype._setAnonymousIdInLocalStorage=function(id){if(!this._options.localStorageFallbackDisabled){localStorage.set("ajs_anonymous_id",id)}};User.prototype.logout=function(){Entity.prototype.logout.call(this);this.anonymousId(null)};User.prototype.load=function(){if(this._loadOldCookie())return;Entity.prototype.load.call(this)};User.prototype._loadOldCookie=function(){var user=cookie.get(this._options.cookie.oldKey);if(!user)return false;this.id(user.id);this.traits(user.traits);cookie.remove(this._options.cookie.oldKey);return true};module.exports=bindAll(new User);module.exports.User=User},{"./cookie":23,"./entity":24,"./store":32,"@segment/cookie":1088,"bind-all":1107,debug:37,inherits:1129,uuid:1182}],34:[function(require,module,exports){"use strict";var type=require("component-type");var clone=function clone(obj){var t=type(obj);var copy;if(t==="object"){copy={};for(var key in obj){if(obj.hasOwnProperty(key)){copy[key]=clone(obj[key])}}return copy}if(t==="array"){copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy}if(t==="regexp"){var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags)}if(t==="date"){return new Date(obj.getTime())}return obj};module.exports=clone},{"component-type":1120}],35:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var objToString=Object.prototype.toString;var isNumber=function isNumber(val){var type=typeof val;return type==="number"||type==="object"&&objToString.call(val)==="[object Number]"};var isArray=typeof Array.isArray==="function"?Array.isArray:function isArray(val){return objToString.call(val)==="[object Array]"};var isArrayLike=function isArrayLike(val){return val!=null&&(isArray(val)||val!=="function"&&isNumber(val.length))};var arrayEach=function arrayEach(iterator,array){for(var i=0;i<array.length;i+=1){if(iterator(array[i],i,array)===false){break}}};var baseEach=function baseEach(iterator,object){var ks=keys(object);for(var i=0;i<ks.length;i+=1){if(iterator(object[ks[i]],ks[i],object)===false){break}}};var each=function each(iterator,collection){return(isArrayLike(collection)?arrayEach:baseEach).call(this,iterator,collection)};module.exports=each},{"@ndhoule/keys":16}],36:[function(require,module,exports){"use strict";var each=require("./each");var map=function map(iterator,collection){if(typeof iterator!=="function"){throw new TypeError("Expected a function but received a "+typeof iterator)}var result=[];each(function(val,i,collection){result.push(iterator(val,i,collection))},collection);return result};module.exports=map},{"./each":35}],37:[function(require,module,exports){module.exports=debug;function debug(name){if(!debug.enabled(name))return function(){};return function(fmt){fmt=coerce(fmt);var curr=new Date;var ms=curr-(debug[name]||curr);debug[name]=curr;fmt=name+" "+fmt+" +"+debug.humanize(ms);window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}}debug.names=[];debug.skips=[];debug.enable=function(name){try{localStorage.debug=name}catch(e){}var split=(name||"").split(/[\s,]+/),len=split.length;for(var i=0;i<len;i++){name=split[i].replace("*",".*?");if(name[0]==="-"){debug.skips.push(new RegExp("^"+name.substr(1)+"$"))}else{debug.names.push(new RegExp("^"+name+"$"))}}};debug.disable=function(){debug.enable("")};debug.humanize=function(ms){var sec=1e3,min=60*1e3,hour=60*min;if(ms>=hour)return(ms/hour).toFixed(1)+"h";if(ms>=min)return(ms/min).toFixed(1)+"m";if(ms>=sec)return(ms/sec|0)+"s";return ms+"ms"};debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++){if(debug.skips[i].test(name)){return false}}for(var i=0,len=debug.names.length;i<len;i++){if(debug.names[i].test(name)){return true}}return false};function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}try{if(window.localStorage)debug.enable(localStorage.debug)}catch(e){}},{}],38:[function(require,module,exports){module.exports={version:"3.13.9"}},{}],39:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var AdLearnOpenPlatform=integration("AdLearn Open Platform").option("retargetingPixelId","").tag("retargeting",'<img src="https://secure.leadback.advertising.com/adcedge/lb?site=695501&betr={{ retargetingPixelId }}"/>').tag("existingUsers",'<img src="https://secure.leadback.advertising.com/adcedge/lb?site=695501&srvc=1&betr={{ retargetingPixelId }}=920204[720]"/>').tag("conversion",'<img src="https://secure.ace-tag.advertising.com/action/type={{ type }}/bins=1/rich=0/mnum=1516/logs=0/xsstr1={{ userId }}/xsstr2={{ productIds }}/xssale={{ total }}/xsmemid={{ orderId }}/"/>').mapping("events");AdLearnOpenPlatform.prototype.page=function(){var user=this.analytics.user();this.load("retargeting");if(user.id())this.load("existingUsers")};AdLearnOpenPlatform.prototype.track=function(track){var userId=this.analytics.user().id();var orderId=track.orderId();var total=track.total()&&(track.total()||0).toFixed(2);var productIds=this.productIds(track.products());var events=this.events(track.event());var self=this;each(function(event){return self.load("conversion",{type:event,userId:userId||"",orderId:orderId||"",total:total||"",productIds:productIds||""})},events)};AdLearnOpenPlatform.prototype.productIds=function(products){var ids=[];each(function(product){ids.push(product.id)},products);return ids.join(",")};module.exports=AdLearnOpenPlatform},{"@ndhoule/each":10,"@segment/analytics.js-integration":40}],40:[function(require,module,exports){"use strict";var bind=require("component-bind");var clone=require("@ndhoule/clone");var debug=require("debug");var defaults=require("@ndhoule/defaults");var extend=require("@ndhoule/extend");var slug=require("slug-component");var protos=require("./protos");var statics=require("./statics");function createIntegration(name){function Integration(options){if(options&&options.addIntegration){return options.addIntegration(Integration)}this.debug=debug("analytics:integration:"+slug(name));this.options=defaults(clone(options)||{},this.defaults);this._queue=[];this.once("ready",bind(this,this.flush));Integration.emit("construct",this);this.ready=bind(this,this.ready);this._wrapInitialize();this._wrapPage();this._wrapTrack()}Integration.prototype.defaults={};Integration.prototype.globals=[];Integration.prototype.templates={};Integration.prototype.name=name;extend(Integration,statics);extend(Integration.prototype,protos);return Integration}module.exports=createIntegration},{"./protos":41,"./statics":42,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:43,"slug-component":1165}],41:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var after=require("@ndhoule/after");var each=require("@ndhoule/each");var events=require("analytics-events");var every=require("@ndhoule/every");var fmt=require("@segment/fmt");var foldl=require("@ndhoule/foldl");var is=require("is");var loadIframe=require("load-iframe");var loadScript=require("@segment/load-script");var nextTick=require("next-tick");var normalize=require("to-no-case");var has=Object.prototype.hasOwnProperty;var noop=function noop(){};var onerror=window.onerror;var onload=null;Emitter(exports);exports.initialize=function(){var ready=this.ready;nextTick(ready)};exports.loaded=function(){return false};exports.page=function(page){};exports.track=function(track){};exports.map=function(options,key){var normalizedComparator=normalize(key);var mappingType=getMappingType(options);if(mappingType==="unknown"){return[]}return foldl(function(matchingValues,val,key){var compare;var result;if(mappingType==="map"){compare=key;result=val}if(mappingType==="array"){compare=val;result=val}if(mappingType==="mixed"){compare=val.key;result=val.value}if(normalize(compare)===normalizedComparator){matchingValues.push(result)}return matchingValues},[],options)};exports.invoke=function(method){if(!this[method])return;var args=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(method,args);this.debug("%s with %o",method,args);return this[method].apply(this,args)};exports.queue=function(method,args){if(method==="page"&&this._assumesPageview&&!this._initialized){return this.page.apply(this,args)}this._queue.push({method:method,args:args})};exports.flush=function(){this._ready=true;var self=this;each(function(call){self[call.method].apply(self,call.args)},this._queue);this._queue.length=0};exports.reset=function(){for(var i=0;i<this.globals.length;i++){window[this.globals[i]]=undefined}window.onerror=onerror;window.onload=onload};exports.load=function(name,locals,callback){if(typeof name==="function"){callback=name;locals=null;name=null}if(name&&typeof name==="object"){callback=locals;locals=name;name=null}if(typeof locals==="function"){callback=locals;locals=null}name=name||"library";locals=locals||{};locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template "%s" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var self=this;var el;switch(template.type){case"img":attrs.width=1;attrs.height=1;el=loadImage(attrs,callback);break;case"script":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading "%s" error="%s"',self.name,err)});delete attrs.src;each(function(val,key){el.setAttribute(key,val)},attrs);break;case"iframe":el=loadIframe(attrs,callback);break;default:}return el};exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);if(!locals.hasOwnProperty("cache"))locals.cache=cache;each(function(val,key){if(!locals.hasOwnProperty(key))locals[key]=val},this.options);return locals};exports.ready=function(){this.emit("ready")};exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug("initialize");this._initialized=true;var ret=initialize.apply(this,arguments);this.emit("initialize");return ret};if(this._assumesPageview)this.initialize=after(2,this.initialize)};exports._wrapPage=function(){var page=this.page;this.page=function(){if(this._assumesPageview&&!this._initialized){return this.initialize.apply(this,arguments)}return page.apply(this,arguments)}};exports._wrapTrack=function(){var t=this.track;this.track=function(track){var event=track.event();var called;var ret;for(var method in events){if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments);called=true;break}}if(!called)ret=t.apply(this,arguments);return ret}};function getMappingType(mapping){if(is.array(mapping)){return every(isMixed,mapping)?"mixed":"array"}if(is.object(mapping))return"map";return"unknown"}function isMixed(item){if(!is.object(item))return false;if(!is.string(item.key))return false;if(!has.call(item,"value"))return false;return true}function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;img.onerror=error(fn,"failed to load pixel",img);img.onload=function(){fn()};img.src=attrs.src;img.width=1;img.height=1;return img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e;err.source=img;fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){attrs[key]=val.replace(/\{\{\ *(\w+)\ *\}\}/g,function(_,$1){return locals[$1]});return attrs},{},template.attrs)}},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":45,"component-emitter":1114,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],42:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var domify=require("domify");var each=require("@ndhoule/each");var includes=require("@ndhoule/includes");Emitter(exports);exports.option=function(key,value){this.prototype.defaults[key]=value;return this};exports.mapping=function(name){this.option(name,[]);this.prototype[name]=function(key){return this.map(this.options[name],key)};return this};exports.global=function(key){this.prototype.globals.push(key);return this};exports.assumesPageview=function(){this.prototype._assumesPageview=true;return this};exports.readyOnLoad=function(){this.prototype._readyOnLoad=true;return this};exports.readyOnInitialize=function(){this.prototype._readyOnInitialize=true;return this};exports.tag=function(name,tag){if(tag==null){tag=name;name="library"}this.prototype.templates[name]=objectify(tag);return this};function objectify(str){str=str.replace(' src="',' data-src="');var el=domify(str);var attrs={};each(function(attr){var name=attr.name==="data-src"?"src":attr.name;if(!includes(attr.name+"=",str))return;attrs[name]=attr.value},el.attributes);return{type:el.tagName.toLowerCase(),attrs:attrs}}},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:46}],43:[function(require,module,exports){(function(process){(function(){exports=module.exports=require("./debug");exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(this)}).call(this,require("_process"))},{"./debug":44,_process:1149}],44:[function(require,module,exports){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require("ms");exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},{ms:47}],45:[function(require,module,exports){module.exports={promotionViewed:/^[ _]?promotion[ _]?viewed?[ _]?$/i,viewedPromotion:/^[ _]?viewed[ _]?promotion?[ _]?$/i,promotionClicked:/^[ _]?promotion[ _]?clicked?[ _]?$/i,clickedPromotion:/^[ _]?clicked[ _]?promotion?[ _]?$/i,productsSearched:/^[ _]?products[ _]?searched[ _]?$/i,productListViewed:/^[ _]?product[ _]?list[ _]?viewed[ _]?$/i,productListFiltered:/^[ _]?product[ _]?list[ _]?filtered[ _]?$/i,viewedProductCategory:/^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,viewedProductDetails:/^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,productClicked:/^[ _]?product[ _]?clicked[ _]?$/i,clickedProduct:/^[ _]?clicked[ _]?product[ _]?$/i,productViewed:/^[ _]?product[ _]?viewed[ _]?$/i,viewedProduct:/^[ _]?viewed[ _]?product[ _]?$/i,productAdded:/^[ _]?product[ _]?added[ _]?$/i,addedProduct:/^[ _]?added[ _]?product[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,removedProduct:/^[ _]?removed[ _]?product[ _]?$/i,cartViewed:/^[ _]?cart[ _]?viewed[ _]?$/i,orderStarted:/^[ _]?order[ _]?started[ _]?$/i,startedOrder:/^[ _]?started[ _]?order[ _]?$/i,orderUpdated:/^[ _]?order[ _]?updated[ _]?$/i,updatedOrder:/^[ _]?updated[ _]?order[ _]?$/i,orderCompleted:/^[ _]?order[ _]?completed[ _]?$/i,completedOrder:/^[ _]?completed[ _]?order[ _]?$/i,orderRefunded:/^[ _]?order[ _]?refunded[ _]?$/i,refundedOrder:/^[ _]?refunded[ _]?order[ _]?$/i,orderCancelled:/^[ _]?order[ _]?cancelled[ _]?$/i,paymentInfoAdded:/^[ _]?payment[ _]?info[ _]?added[ _]?$/i,checkoutStarted:/^[ _]?checkout[ _]?started[ _]?$/i,checkoutStepViewed:/^[ _]?checkout[ _]?step[ _]?viewed[ _]?$/i,viewedCheckoutStep:/^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,checkoutStepCompleted:/^[ _]?checkout[ _]?step[ _]?completed[ _]?$/i,completedCheckoutStep:/^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i,couponEntered:/^[ _]?coupon[ _]?entered[ _]?$/i,couponApplied:/^[ _]?coupon[ _]?applied[ _]?$/i,couponDenied:/^[ _]?coupon[ _]?denied[ _]?$/i,couponRemoved:/^[ _]?coupon[ _]?removed[ _]?$/i,productAddedToWishlist:/^[ _]?product[ _]?added[ _]?to[ _]?wishlist[ _]?$/i,wishlistProductRemoved:/^[ _]?wishlist[ _]?product[ _]?removed[ _]?$/i,wishlistProductAddedToCart:/^[ _]?wishlist[ _]?product[ _]?added[ _]?to[ _]?cart[ _]?$/i,productShared:/^[ _]?product[ _]?shared[ _]?$/i,cartShared:/^[ _]?cart[ _]?shared[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,applicationInstalled:/^[ _]?application[ _]?installed[ _]?$/i,applicationUpdated:/^[ _]?application[ _]?updated[ _]?$/i,applicationOpened:/^[ _]?application[ _]?opened[ _]?$/i,applicationBackgrounded:/^[ _]?application[ _]?backgrounded[ _]?$/i,applicationUninstalled:/^[ _]?application[ _]?uninstalled[ _]?$/i,installAttributed:/^[ _]?install[ _]?attributed[ _]?$/i,deepLinkOpened:/^[ _]?deep[ _]?link[ _]?opened[ _]?$/i,pushNotificationReceived:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationTapped:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationBounced:/^[ _]?push[ _]?notification[ _]?bounced[ _]?$/i}},{}],46:[function(require,module,exports){module.exports=parse;var innerHTMLBug=false;var bugTestDiv;if(typeof document!=="undefined"){bugTestDiv=document.createElement("div");bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length;bugTestDiv=undefined}var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html,doc){if("string"!=typeof html)throw new TypeError("String expected");if(!doc)doc=document;var m=/<([\w:]+)/.exec(html);if(!m)return doc.createTextNode(html);html=html.replace(/^\s+|\s+$/g,"");var tag=m[1];if(tag=="body"){var el=doc.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=doc.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=doc.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}},{}],47:[function(require,module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},{}],48:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var dot=require("obj-case");var each=require("@ndhoule/each");var iso=require("@segment/to-iso-string");var Track=require("segmentio-facade").Track;var trample=require("@segment/trample");var has=Object.prototype.hasOwnProperty;var dynamicKeys=[];var AdobeAnalytics=module.exports=integration("Adobe Analytics");AdobeAnalytics.sOption=function(field,value){var s=window.s;var isValid=s&&has.call(s,field)&&!isEmptyString(field);var newValue=isValid?s[field]:value;this.prototype.sOptions=this.prototype.sOptions||{};this.prototype.sOptions[field]=newValue;return this.option(field,newValue)};AdobeAnalytics.global("s").global("s_gi").option("events",{}).option("eVars",{}).option("props",{}).option("hVars",{}).option("lVars",{}).option("merchEvents",[]).option("contextValues",{}).option("customDataPrefix","").option("reportSuiteId",window.s_account).option("timestampOption","enabled").option("productIdentifier","name").option("marketingCloudOrgId",null).option("enableTrackPageName",true).option("disableVisitorId",false).option("preferVisitorId",false).option("heartbeatTrackingServerUrl","").option("ssl",false).sOption("visitorID").sOption("channel").sOption("campaign").sOption("state").sOption("zip").sOption("pageName").sOption("trackingServer").sOption("trackingServerSecure").sOption("visitorMigrationKey").sOption("visitorMigrationServer").sOption("visitorNamespace").sOption("dc").sOption("charSet","ISO-8859-1").sOption("currencyCode","USD").sOption("trackDownloadLinks",true).sOption("trackExternalLinks",true).sOption("trackInlineStats",true).sOption("linkDownloadFileTypes","exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx").sOption("linkInternalFilters").sOption("linkLeaveQueryString",false).sOption("linkTrackVars","None").sOption("linkTrackEvents","None").sOption("usePlugins",true).tag("default",'<script src="//cdn.segment.com/integrations/adobe-analytics/appmeasurement-2.20.0.js">').tag("heartbeat",'<script src="//cdn.segment.com/integrations/adobe-analytics/appmeasurement-2.20.0-heartbeat.js">');AdobeAnalytics.prototype.initialize=function(){var options=this.options;var self=this;if(!Array.isArray(options.events))lowercaseKeys(options.events);window.s_account=window.s_account||options.reportSuiteId;window._segHBPlayheads={};if(options.heartbeatTrackingServerUrl){this.load("heartbeat",function(){var s=window.s;s.trackingServer=s.trackingServer||options.trackingServerUrl;s.trackingServerSecure=s.trackingServerSecure||options.trackingServerSecureUrl;if(options.marketingCloudOrgId&&window.Visitor&&typeof window.Visitor.getInstance==="function"){s.visitor=window.Visitor.getInstance(options.marketingCloudOrgId,{trackingServer:window.s.trackingServer||options.trackingServerUrl,trackingServerSecure:window.s.trackingServerSecure||options.trackingServerSecureUrl});self.mediaHeartbeats={};self.adBreakCounts={};self.qosData={};self.playhead=0;self.adBreakInProgress=false;self.heartbeatEventMap={"video playback started":initHeartbeat,"video content started":heartbeatVideoStart,"video playback paused":heartbeatVideoPaused,"video playback resumed":heartbeatVideoStart,"video content completed":heartbeatVideoComplete,"video playback completed":heartbeatSessionEnd,"video ad started":heartbeatAdStarted,"video ad completed":heartbeatAdCompleted,"video ad skipped":heartbeatAdSkipped,"video playback seek started":heartbeatSeekStarted,"video playback seek completed":heartbeatSeekCompleted,"video playback buffer started":heartbeatBufferStarted,"video playback buffer completed":heartbeatBufferCompleted,"video quality updated":heartbeatQualityUpdated,"video content playing":heartbeatUpdatePlayhead,"video playback interrupted":heartbeatVideoPaused}}self.ready()})}else{this.load("default",function(){var s=window.s;s.trackingServer=s.trackingServer||options.trackingServerUrl;s.trackingServerSecure=s.trackingServerSecure||options.trackingServerSecureUrl;if(options.marketingCloudOrgId&&window.Visitor&&typeof window.Visitor.getInstance==="function"){s.visitor=window.Visitor.getInstance(options.marketingCloudOrgId,{trackingServer:window.s.trackingServer||options.trackingServerUrl,trackingServerSecure:window.s.trackingServerSecure||options.trackingServerSecureUrl})}self.ready()})}};AdobeAnalytics.prototype.loaded=function(){return!!window.s_gi};AdobeAnalytics.prototype.page=function(page){clearKeys(dynamicKeys);var pageName=page.fullName();window.s.pageName=pageName;window.s.referrer=page.referrer();if(!this.options.disableVisitorId){var userId=this.analytics.user().id();if(userId){if(this.options.timestampOption==="disabled")window.s.visitorID=userId;if(this.options.timestampOption==="hybrid"&&this.options.preferVisitorId)window.s.visitorID=userId}}update(pageName,"events");updateCommonVariables(page,this.options);calculateTimestamp(page,this.options);var props=extractProperties(page,this.options);each(update,props);updateContextData(page,this.options);window.s.t()};AdobeAnalytics.prototype.track=function(track){clearKeys(dynamicKeys);var eventName=track.event().toLowerCase();if(this.options.heartbeatTrackingServerUrl){var heartbeatFunc=this.heartbeatEventMap[eventName];if(heartbeatFunc){heartbeatFunc.call(this,track);return}}var isMapped=this.isMapped(eventName);if(!isMapped){return}if(eventName==="cart opened"||eventName==="opened cart"){this.processEvent(track,"scOpen")}else{this.processEvent(track)}};AdobeAnalytics.prototype.productViewed=function(track){clearKeys(dynamicKeys);this.processEvent(track,"prodView")};AdobeAnalytics.prototype.productListViewed=function(track){clearKeys(dynamicKeys);this.processEvent(track,"prodView")};AdobeAnalytics.prototype.productAdded=function(track){clearKeys(dynamicKeys);this.processEvent(track,"scAdd")};AdobeAnalytics.prototype.productRemoved=function(track){clearKeys(dynamicKeys);this.processEvent(track,"scRemove")};AdobeAnalytics.prototype.orderCompleted=function(track){clearKeys(dynamicKeys);var props=track.properties();update(props.purchaseId||track.orderId(),"purchaseID");update(props.transactionId||track.orderId(),"transactionID");this.processEvent(track,"purchase")};AdobeAnalytics.prototype.cartViewed=function(track){clearKeys(dynamicKeys);this.processEvent(track,"scView")};AdobeAnalytics.prototype.checkoutStarted=function(track){clearKeys(dynamicKeys);var props=track.properties();update(props.purchaseId||track.orderId(),"purchaseID");update(props.transactionId||track.orderId(),"transactionID");this.processEvent(track,"scCheckout")};AdobeAnalytics.prototype.processEvent=function(msg,adobeEvent){var merchEvents=getMerchConfig(msg,this.options);var properties=msg.properties();setProductsString(msg.event(),properties,adobeEvent,this.options.productIdentifier,merchEvents.configProductMerchEvent,merchEvents.productEVars);updateContextData(msg,this.options);var eVarEvent=dot(this.options.eVars,msg.event());update(msg.event(),eVarEvent);setEventsString(msg.event(),properties,this.options.events,merchEvents.configMerchEvents,adobeEvent);updateCommonVariables(msg,this.options);calculateTimestamp(msg,this.options);var mappedProps=extractProperties(msg,this.options);each(update,mappedProps);if(msg.currency()!=="USD")update(msg.currency(),"currencyCode");window.s.linkTrackVars=dynamicKeys.join(",");window.s.tl(true,"o",msg.event())};function updateCommonVariables(facade,options){var properties=facade.properties();var campaign=facade.proxy("context.campaign.name")||properties.campaign;update(properties.channel||options.channel,"channel");update(campaign||options.campaign,"campaign");update(properties.state||options.state,"state");update(properties.zip||options.zip,"zip");if(options.enableTrackPageName&&facade.type()==="track")update(properties.pageName||options.pageName||facade.proxy("context.page.title"),"pageName")}function update(value,key){if(!key||value===undefined||value===null||value==="")return;dynamicKeys.push(key);window.s[key]=value.toString()}function calculateTimestamp(msg,options){var setting=options.timestampOption;var properties=msg.properties();var timestamp=properties.timestamp||msg.timestamp();if(typeof timestamp!=="string")timestamp=iso(timestamp);if(setting==="disabled")return;if(setting==="enabled")update(timestamp,"timestamp");if(setting==="hybrid"&&!options.preferVisitorId)update(timestamp,"timestamp")}function setEventsString(eventName,properties,eventsMap,merchEventsMap,predefinedEvent){var event=eventName.toLowerCase();var adobeEvents=predefinedEvent?[predefinedEvent]:[];if(eventsMap.length>0){each(function(eventMapping){if(eventMapping.segmentEvent.toLowerCase()===event){each(function(event){if(adobeEvents.indexOf(event)<=0){adobeEvents.push(event)}},eventMapping.adobeEvents)}},eventsMap)}if(merchEventsMap.length>0){each(function(merchMapping){var merchMap=mapMerchEvents(merchMapping,properties);each(function(merchEvent){if(adobeEvents.indexOf(merchEvent)<=0){adobeEvents.push(merchEvent)}},merchMap)},merchEventsMap)}adobeEvents=adobeEvents.filter(function(item){return!!item});var value=adobeEvents.join(",");update(value,"events");window.s.linkTrackEvents=value}function updateContextData(facade,options){window.s.contextData={};var properties=trample(facade.properties());var propertyPrefix=options.customDataPrefix?options.customDataPrefix+".":"";each(function(value,key){addContextDatum(propertyPrefix+key,value)},properties);var contextProperties=extractProperties(facade,options,"context");each(function(value,key){if(!key||value===undefined||value===null||value===""){return}if(typeof value==="boolean"){addContextDatum(key,value.toString());return}addContextDatum(key,value)},contextProperties)}function addContextDatum(key,value){window.s.contextData[key]=value;dynamicKeys.push("contextData."+key)}function mapMerchEvents(merchEvent,props){var merchMap=[];if(!merchEvent){return merchMap}if(merchEvent.valueScope==="event"){if(merchEvent.segmentProperty in props){var eventString=merchEvent.adobeEvent+"="+String(props[merchEvent.segmentProperty]);merchMap.push(eventString)}else if(!merchEvent.segmentProperty){merchMap.push(merchEvent.adobeEvent)}}else{merchMap.push(merchEvent.adobeEvent)}return merchMap}function getMerchConfig(msg,settings){var eventName=msg.event().toLowerCase();var mapping=(settings.merchEvents||[]).find(function(setting){return setting.segmentEvent.toLowerCase()===eventName});var config={configProductMerchEvent:[],configMerchEvents:[],productEVars:[]};if(mapping){config.configProductMerchEvent=mapping.merchEvents;config.configMerchEvents=dedupeMerchEventSettings(mapping.merchEvents||[]);config.productEVars=mapping.productEVars}return config}function dedupeMerchEventSettings(configMerchEvents){var dedupeSettings={};each(function(eventObject){var existingEventObject=dedupeSettings[eventObject.adobeEvent];if(!existingEventObject||existingEventObject.valueScope==="product"&&eventObject.valueScope==="event"){dedupeSettings[eventObject.adobeEvent]=eventObject}},configMerchEvents);var res=[];for(var adobeEvent in dedupeSettings){if(dedupeSettings[adobeEvent]){res.push(dedupeSettings[adobeEvent])}}return res}function clearKeys(keys){each(function(linkVar){delete window.s[linkVar]},keys);keys.length=0}function extractProperties(facade,options,propType){var result={};var mappings=[options.eVars,options.props,options.hVars,options.lVars,options.contextValues];var topLevelProperties=["messageId","anonymousId","event"];var props=facade.properties();if(propType==="mergedPropContext"){props=merge(trample(facade.properties()),trample(facade.context()))}else if(propType==="context"){props=trample(facade.context())}for(var x=0;x<mappings.length;x++){each(match,mappings[x])}function match(mappedValue,mappedKey){var value=dot(props,mappedKey);if(topLevelProperties.includes(mappedKey)&&propType!=="context"){value=facade.proxy(mappedKey)}var contextValueKeys=Object.keys(options.contextValues);if(topLevelProperties.includes(mappedKey)&&propType==="context"&&contextValueKeys.includes(mappedKey)){value=facade.proxy(mappedKey)}var isarr=Array.isArray(value);if(value!==null&&!isFunction(value)&&(typeof value!=="object"||isarr)){if(/^list\d+$/.test(mappedValue)&&isarr)value=value.join();result[mappedValue]=value}}return result}function setProductsString(eventName,properties,adobeEvent,identifier,productMerchEvents,productEVars){var singleProductEvent=adobeEvent==="scAdd"||adobeEvent==="scRemove"||adobeEvent==="prodView"&&eventName!=="Product List Viewed";var isSingleProductEvent=(productMerchEvents.length||productEVars.length)&&!Array.isArray(properties.products);var productFields=singleProductEvent||isSingleProductEvent?[properties]:properties.products;mapProducts(productFields,identifier,productEVars,productMerchEvents,properties)}function mapProducts(products,identifier,productEVars,merchEvents,properties){if(!Array.isArray(products))return;var productString=products.map(function(productProperties){var product=new Track({properties:productProperties});var category=product.category()||"";var quantity=product.quantity()!=null?product.quantity():1;var total=(product.price()*quantity).toFixed(2);var item=product[identifier]();if(identifier==="id"){item=product.productId()||product.id()}var eventString="";if(merchEvents&&merchEvents.length){eventString=mapProductEvents(merchEvents,properties,productProperties)}var productEVarstring="";if(productEVars&&productEVars.length){productEVarstring=mapProductEVars(productEVars,properties,productProperties)}if(eventString!==""||productEVarstring!==""){var test=[category,item,quantity,total,eventString,productEVarstring].map(function(value){if(value==null){return String(value)}return value});return test.join(";")}return[category,item,quantity,total].map(function(value){if(value==null){return String(value)}return value}).join(";")});update(productString,"products")}function mapProductEvents(merchEvents,props,product){var merchMap=[];var eventString;each(function(event){if(event.valueScope==="product"){if(!event.segmentProperty){return merchMap}if(event.segmentProperty.startsWith("products.")){var value=getProductField(event.segmentProperty,product);if(value&&value!=="undefined"){eventString=event.adobeEvent+"="+value;merchMap.push(eventString)}}else if(event.segmentProperty in props){eventString=event.adobeEvent+"="+String(props[event.segmentProperty]);merchMap.push(eventString)}}},merchEvents);return merchMap.join("|")}function mapProductEVars(productEVars,props,product){var eVars=[];each(function(eVar){if(eVar.key.startsWith("products.")){var productValue=getProductField(eVar.key,product);if(productValue&&productValue!=="undefined"){eVars.push(eVar.value+"="+productValue)}}else if(eVar.key in props){eVars.push(eVar.value+"="+props[eVar.key])}},productEVars);return eVars.join("|")}function getProductField(productString,product){var fields=productString.split(".");return product[fields[fields.length-1]].toString()}AdobeAnalytics.prototype.isMapped=function(event){return(this.options.events||[]).find(function(setting){return setting.segmentEvent.toLowerCase()===event})||(this.options.merchEvents||[]).find(function(setting){return setting.segmentEvent.toLowerCase()===event})};function isFunction(fn){var getType={};return fn&&getType.toString.call(fn)==="[object Function]"}function lowercaseKeys(obj){obj=obj||{};each(function(value,key){delete obj[key];obj[key.toLowerCase()]=value},obj);return obj}function isEmptyString(str){return typeof str==="string"&&str.length===0}function populateHeartbeat(track){var props=track.properties();var mediaHeartbeat=this.mediaHeartbeats[props.session_id||"default"];if(!mediaHeartbeat){initHeartbeat.call(this,track)}else{var mediaHeartbeatConfig=mediaHeartbeat.config;mediaHeartbeatConfig.channel=props.channel||mediaHeartbeatConfig.channel;mediaHeartbeatConfig.appVersion=track.proxy("context.app.version")||mediaHeartbeatConfig.appVersion;mediaHeartbeatConfig.playerName=props.video_player||mediaHeartbeatConfig.playerName}}function initHeartbeat(track){var self=this;var videoAnalytics=window.ADB.va;var props=track.properties();var mediaHeartbeatConfig=new videoAnalytics.MediaHeartbeatConfig;var mediaHeartbeatDelegate=new videoAnalytics.MediaHeartbeatDelegate;mediaHeartbeatConfig.trackingServer=this.options.heartbeatTrackingServerUrl;mediaHeartbeatConfig.channel=props.channel||"";mediaHeartbeatConfig.ovp="unknown";mediaHeartbeatConfig.appVersion=track.proxy("context.app.version")||"unknown";mediaHeartbeatConfig.playerName=props.video_player||"unknown";mediaHeartbeatConfig.ssl=this.options.ssl;mediaHeartbeatConfig.debugLogging=!!window._enableHeartbeatDebugLogging;mediaHeartbeatDelegate.getCurrentPlaybackTime=function(){var playhead=self.playhead||0;var sessions=window._segHBPlayheads||{};if(sessions[props.session_id]){playhead=sessions[props.session_id]}return playhead};mediaHeartbeatDelegate.getQoSObject=function(){return self.qosData};this.mediaHeartbeats[props.session_id||"default"]={heartbeat:new videoAnalytics.MediaHeartbeat(mediaHeartbeatDelegate,mediaHeartbeatConfig,window.s),delegate:mediaHeartbeatDelegate,config:mediaHeartbeatConfig};createQosObject.call(this,track);heartbeatSessionStart.call(this,track)}function heartbeatSessionStart(track){var videoAnalytics=window.ADB.va;var props=track.properties();var streamType=props.livestream?videoAnalytics.MediaHeartbeat.StreamType.LIVE:videoAnalytics.MediaHeartbeat.StreamType.VOD;var mediaObj=videoAnalytics.MediaHeartbeat.createMediaObject(props.title||"",props.asset_id||"unknown video id",props.total_length||0,streamType);var contextData=createCustomVideoMetadataContext(track,this.options);createStandardVideoMetadata(track,mediaObj);this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackSessionStart(mediaObj,contextData)}function heartbeatVideoStart(track){populateHeartbeat.call(this,track);var videoAnalytics=window.ADB.va;var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackPlay();var chapterCustomMetadata=createCustomVideoMetadataContext(track,this.options);if(!this.mediaHeartbeats[props.session_id||"default"].chapterInProgress){var chapterObj=videoAnalytics.MediaHeartbeat.createChapterObject(props.chapter_name||"no chapter name",props.position||1,props.length||6e3,props.start_time||0);this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.ChapterStart,chapterObj,chapterCustomMetadata);this.mediaHeartbeats[props.session_id||"default"].chapterInProgress=true}}function heartbeatVideoComplete(track){populateHeartbeat.call(this,track);var videoAnalytics=window.ADB.va;var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.ChapterComplete);this.mediaHeartbeats[props.session_id||"default"].chapterInProgress=false}function heartbeatVideoPaused(track){populateHeartbeat.call(this,track);var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackPause()}function heartbeatSessionEnd(track){populateHeartbeat.call(this,track);var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackComplete();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackSessionEnd();delete this.mediaHeartbeats[props.session_id||"default"];delete this.adBreakCounts[props.session_id||"default"]}function heartbeatAdStarted(track){var videoAnalytics=window.ADB.va;var props=track.properties();var adSessionCount=this.adBreakCounts[props.session_id||"default"];adSessionCount?adSessionCount=++this.adBreakCounts[props.session_id||"default"]:adSessionCount=this.adBreakCounts[props.session_id||"default"]=1;var adBreakObj=videoAnalytics.MediaHeartbeat.createAdBreakObject(props.type||"unknown",adSessionCount,props.position||1);this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.AdBreakStart,adBreakObj);this.adBreakInProgress=true;var adObj=videoAnalytics.MediaHeartbeat.createAdObject(props.title||"no title",props.asset_id.toString()||"default ad",props.position||1,props.total_length||0);createStandardAdMetadata(track,adObj);this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.AdStart,adObj,props.content||{})}function heartbeatAdCompleted(track){var videoAnalytics=window.ADB.va;var props=track.properties();if(!this.adBreakInProgress){heartbeatAdStarted.call(this,track)}this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.AdComplete);this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.AdBreakComplete);this.adBreakInProgress=false}function heartbeatAdSkipped(track){var videoAnalytics=window.ADB.va;var props=track.properties();if(!this.adBreakInProgress){heartbeatAdStarted.call(this,track)}this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.AdSkip);this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.AdBreakComplete);this.adBreakInProgress=false}function heartbeatBufferStarted(track){populateHeartbeat.call(this,track);var videoAnalytics=window.ADB.va;var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.BufferStart)}function heartbeatBufferCompleted(track){populateHeartbeat.call(this,track);var videoAnalytics=window.ADB.va;var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.BufferComplete)}function heartbeatSeekStarted(track){populateHeartbeat.call(this,track);var videoAnalytics=window.ADB.va;var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.SeekStart)}function heartbeatSeekCompleted(track){populateHeartbeat.call(this,track);var videoAnalytics=window.ADB.va;var props=track.properties();this.mediaHeartbeats[props.session_id||"default"].heartbeat.trackEvent(videoAnalytics.MediaHeartbeat.Event.SeekComplete)}function heartbeatQualityUpdated(track){createQosObject.call(this,track)}function createStandardVideoMetadata(track,mediaObj){var videoAnalytics=window.ADB.va;var props=track.properties();var metaKeys=videoAnalytics.MediaHeartbeat.VideoMetadataKeys;var stdVidMeta={};var segAdbMap={program:metaKeys.SHOW,season:metaKeys.SEASON,episode:metaKeys.EPISODE,assetId:metaKeys.ASSET_ID,contentAssetId:metaKeys.ASSET_ID,genre:metaKeys.GENRE,airdate:metaKeys.FIRST_AIR_DATE,publisher:metaKeys.ORIGINATOR,channel:metaKeys.NETWORK,rating:metaKeys.RATING};for(var prop in segAdbMap){stdVidMeta[segAdbMap[prop]]=props[prop]||"no "+segAdbMap[prop]}mediaObj.setValue(videoAnalytics.MediaHeartbeat.MediaObjectKey.StandardVideoMetadata,stdVidMeta)}function createCustomVideoMetadataContext(track,options){var contextData={};var extractedProperties=extractProperties(track,options,"mergedPropContext");each(function(value,key){if(!key||value===undefined||value===null||value===""){return}if(typeof value==="boolean"){contextData[key]=value.toString();return}contextData[key]=value},extractedProperties);return contextData}function createStandardAdMetadata(track,adObj){var videoAnalytics=window.ADB.va;var props=track.properties();var metaKeys=videoAnalytics.MediaHeartbeat.AdMetadataKeys;var stdAdMeta={};var segAdbMap={publisher:metaKeys.ADVERTISER};for(var prop in segAdbMap){stdAdMeta[segAdbMap[prop]]=props[prop]||"no "+segAdbMap[prop]}adObj.setValue(videoAnalytics.MediaHeartbeat.MediaObjectKey.StandardAdMetadata,stdAdMeta)}function heartbeatUpdatePlayhead(track){var props=track.properties();this.playhead=props.position}function createQosObject(track){var videoAnalytics=window.ADB.va;var props=track.properties();this.qosData=videoAnalytics.MediaHeartbeat.createQoSObject(props.bitrate||0,props.startupTime||0,props.fps||0,props.droppedFrames||0)}function merge(obj1,obj2){var res={};for(var propObj1 in obj1){if(obj1.hasOwnProperty(propObj1)){res[propObj1]=obj1[propObj1]}}for(var propObj2 in obj2){if(obj2.hasOwnProperty(propObj2)&&!res.hasOwnProperty(propObj2)){res[propObj2]=obj2[propObj2]}}return res}},{"@ndhoule/each":10,"@segment/analytics.js-integration":49,"@segment/to-iso-string":1103,"@segment/trample":1105,"obj-case":1143,"segmentio-facade":1158}],49:[function(require,module,exports){"use strict";var bind=require("component-bind");var debug=require("debug");var defaults=require("@ndhoule/defaults");var extend=require("extend");var slug=require("slug-component");var protos=require("./protos");var statics=require("./statics");function createIntegration(name){function Integration(options){if(options&&options.addIntegration){return options.addIntegration(Integration)}this.debug=debug("analytics:integration:"+slug(name));var clonedOpts={};extend(true,clonedOpts,options);this.options=defaults(clonedOpts||{},this.defaults);this._queue=[];this.once("ready",bind(this,this.flush));Integration.emit("construct",this);this.ready=bind(this,this.ready);this._wrapInitialize();this._wrapPage();this._wrapTrack()}Integration.prototype.defaults={};Integration.prototype.globals=[];Integration.prototype.templates={};Integration.prototype.name=name;extend(Integration,statics);extend(Integration.prototype,protos);return Integration}module.exports=createIntegration},{"./protos":50,"./statics":51,"@ndhoule/defaults":8,"component-bind":1109,debug:52,extend:54,"slug-component":1165}],50:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var each=require("@ndhoule/each");var events=require("analytics-events");var every=require("@ndhoule/every");var fmt=require("@segment/fmt");var foldl=require("@ndhoule/foldl");var is=require("is");var loadIframe=require("load-iframe");var loadScript=require("@segment/load-script");var nextTick=require("next-tick");var normalize=require("to-no-case");var has=Object.prototype.hasOwnProperty;var noop=function noop(){};var onerror=window.onerror;var onload=null;Emitter(exports);exports.initialize=function(){var ready=this.ready;nextTick(ready)};exports.loaded=function(){return false};exports.page=function(page){};exports.track=function(track){};exports.map=function(options,key){var normalizedComparator=normalize(key);var mappingType=getMappingType(options);if(mappingType==="unknown"){return[]}return foldl(function(matchingValues,val,key){var compare;var result;if(mappingType==="map"){compare=key;result=val}if(mappingType==="array"){compare=val;result=val}if(mappingType==="mixed"){compare=val.key;result=val.value}if(normalize(compare)===normalizedComparator){matchingValues.push(result)}return matchingValues},[],options)};exports.invoke=function(method){if(!this[method])return;var args=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(method,args);this.debug("%s with %o",method,args);return this[method].apply(this,args)};exports.queue=function(method,args){this._queue.push({method:method,args:args})};exports.flush=function(){this._ready=true;var self=this;each(function(call){self[call.method].apply(self,call.args)},this._queue);this._queue.length=0};exports.reset=function(){for(var i=0;i<this.globals.length;i++){window[this.globals[i]]=undefined}window.onerror=onerror;window.onload=onload};exports.load=function(name,locals,callback){if(typeof name==="function"){callback=name;locals=null;name=null}if(name&&typeof name==="object"){callback=locals;locals=name;name=null}if(typeof locals==="function"){callback=locals;locals=null}name=name||"library";locals=locals||{};locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template "%s" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var self=this;var el;switch(template.type){case"img":attrs.width=1;attrs.height=1;el=loadImage(attrs,callback);break;case"script":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading "%s" error="%s"',self.name,err)});delete attrs.src;each(function(val,key){el.setAttribute(key,val)},attrs);break;case"iframe":el=loadIframe(attrs,callback);break;default:}return el};exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);if(!locals.hasOwnProperty("cache"))locals.cache=cache;each(function(val,key){if(!locals.hasOwnProperty(key))locals[key]=val},this.options);return locals};exports.ready=function(){this.emit("ready")};exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug("initialize");this._initialized=true;var ret=initialize.apply(this,arguments);this.emit("initialize");return ret}};exports._wrapPage=function(){var page=this.page;var initialPageSkipped=false;this.page=function(){if(this._assumesPageview&&!initialPageSkipped){initialPageSkipped=true;return}return page.apply(this,arguments)}};exports._wrapTrack=function(){var t=this.track;this.track=function(track){var event=track.event();var called;var ret;for(var method in events){if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments);called=true;break}}if(!called)ret=t.apply(this,arguments);return ret}};function getMappingType(mapping){if(is.array(mapping)){return every(isMixed,mapping)?"mixed":"array"}if(is.object(mapping))return"map";return"unknown"}function isMixed(item){if(!is.object(item))return false;if(!is.string(item.key))return false;if(!has.call(item,"value"))return false;return true}function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;img.onerror=error(fn,"failed to load pixel",img);img.onload=function(){fn()};img.src=attrs.src;img.width=1;img.height=1;return img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e;err.source=img;fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){attrs[key]=val.replace(/\{\{\ *(\w+)\ *\}\}/g,function(_,$1){return locals[$1]});return attrs},{},template.attrs)}},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],51:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var domify=require("domify");var each=require("@ndhoule/each");var includes=require("@ndhoule/includes");Emitter(exports);exports.option=function(key,value){this.prototype.defaults[key]=value;return this};exports.mapping=function(name){this.option(name,[]);this.prototype[name]=function(key){return this.map(this.options[name],key)};return this};exports.global=function(key){this.prototype.globals.push(key);return this};exports.assumesPageview=function(){this.prototype._assumesPageview=true;return this};exports.readyOnLoad=function(){this.prototype._readyOnLoad=true;return this};exports.readyOnInitialize=function(){this.prototype._readyOnInitialize=true;return this};exports.tag=function(name,tag){if(tag==null){tag=name;name="library"}this.prototype.templates[name]=objectify(tag);return this};function objectify(str){str=str.replace(' src="',' data-src="');var el=domify(str);var attrs={};each(function(attr){var name=attr.name==="data-src"?"src":attr.name;if(!includes(attr.name+"=",str))return;attrs[name]=attr.value},el.attributes);return{type:el.tagName.toLowerCase(),attrs:attrs}}},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:55}],52:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":53,_process:1149,dup:43}],53:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:56}],54:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var toStr=Object.prototype.toString;var defineProperty=Object.defineProperty;var gOPD=Object.getOwnPropertyDescriptor;var isArray=function isArray(arr){if(typeof Array.isArray==="function"){return Array.isArray(arr)}return toStr.call(arr)==="[object Array]"};var isPlainObject=function isPlainObject(obj){if(!obj||toStr.call(obj)!=="[object Object]"){return false}var hasOwnConstructor=hasOwn.call(obj,"constructor");var hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf){return false}var key;for(key in obj){}return typeof key==="undefined"||hasOwn.call(obj,key)};var setProperty=function setProperty(target,options){if(defineProperty&&options.name==="__proto__"){defineProperty(target,options.name,{enumerable:true,configurable:true,value:options.newValue,writable:true})}else{target[options.name]=options.newValue}};var getProperty=function getProperty(obj,name){if(name==="__proto__"){if(!hasOwn.call(obj,name)){return void 0}else if(gOPD){return gOPD(obj,name).value}}return obj[name]};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone;var target=arguments[0];var i=1;var length=arguments.length;var deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(target==null||typeof target!=="object"&&typeof target!=="function"){target={}}for(;i<length;++i){options=arguments[i];if(options!=null){for(name in options){src=getProperty(target,name);copy=getProperty(options,name);if(target!==copy){if(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&isArray(src)?src:[]}else{clone=src&&isPlainObject(src)?src:{}}setProperty(target,{name:name,newValue:extend(deep,clone,copy)})}else if(typeof copy!=="undefined"){setProperty(target,{name:name,newValue:copy})}}}}}return target}},{}],55:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],56:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],57:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var AdobeTarget=module.exports=integration("Adobe Target");AdobeTarget.prototype.initialize=function(){window.adobe=window.adobe||{};window.adobe.target=window.adobe.target||{};window.adobe.target.trackEvent=window.adobe.target.trackEvent||function(){};this.ready()};AdobeTarget.prototype.track=function(track){var mbox=getMboxName(track);if(mbox===undefined){return}window.adobe.target.trackEvent({mbox:mbox,params:track.properties()})};AdobeTarget.prototype.orderCompleted=function(track){var mbox=getMboxName(track);if(mbox===undefined){return}var products=track.products()||[];var productIdArray=[];for(var i=0;i<products.length;i++){var productId=products[i].id||products[i].productId||products[i].product_id;if(productId)productIdArray.push(productId)}window.adobe.target.trackEvent({mbox:mbox,params:{orderId:track.orderId(),orderTotal:track.revenue(),productPurchaseId:productIdArray.join(",")}})};function getMboxName(msg){var opts=msg.options("Adobe Target");if(!opts.mboxName){return}var mbox=opts.mboxName;if(typeof mbox!=="string"){mbox=mbox.toString()}return mbox}},{"@segment/analytics.js-integration":58}],58:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":59,"./statics":60,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:61,dup:40,"slug-component":1165}],59:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":63,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],60:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:64,dup:42}],61:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":62,_process:1149,dup:43}],62:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:65}],63:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],64:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],65:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],66:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var entries=require("@ndhoule/entries");var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var map=require("@ndhoule/map");var pick=require("@ndhoule/pick");var values=require("@ndhoule/values");var TRACK_SPECIAL_PROPERTIES={revenue:"rev",value:"val"};var Adometry=module.exports=integration("Adometry").global("DMTRY").option("advertiserId","").option("campaignId","").option("pageId","").tag("page",'<script src="//js.dmtry.com/channel.js#gid:{{ campaignId }};advid:{{ advertiserId }};pid:{{ pageId }}{{ properties }}">').tag("track",'<script src="//js.dmtry.com/channel.js#gid:{{ campaignId }};advid:{{ advertiserId }};pid:{{ placementId }}{{ properties }}">').mapping("events").mapping("aliases");Adometry.prototype.track=function(track){var event=track.event();if(!event)return;var self=this;var placementIds=this.events(event);var aliases=extend({},this.options.aliases,TRACK_SPECIAL_PROPERTIES);var properties=track.properties(aliases);var filteredProperties=pick(values(aliases),properties);each(function(placementId){self.load("track",{advertiserId:self.options.advertiserId,campaignId:self.options.campaignId,placementId:placementId,properties:self._hashify(filteredProperties,"cus.")})},placementIds)};Adometry.prototype.page=function(page){var self=this;var anonymousId=page.anonymousId();var properties={ano:anonymousId};self.load("page",{properties:self._hashify(properties,"cus.")})};Adometry.prototype._hashify=function(props,prefix){prefix=prefix||"";props=entries(props);if(!props||!props.length){return""}return";"+map(function(prop){return prefix+prop[0]+":"+prop[1]},props).join(";")}},{"@ndhoule/each":10,"@ndhoule/entries":11,"@ndhoule/extend":13,"@ndhoule/map":17,"@ndhoule/pick":18,"@ndhoule/values":20,"@segment/analytics.js-integration":67}],67:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":68,"./statics":69,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:70,dup:40,"slug-component":1165}],68:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":72,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],69:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:73,dup:42}],70:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":71,_process:1149,dup:43}],71:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:74}],72:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],73:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],74:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],75:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var foldl=require("@ndhoule/foldl");var integration=require("@segment/analytics.js-integration");var map=require("@ndhoule/map");var snake=require("to-snake-case");var useHttps=require("use-https");var AdRoll=module.exports=integration("AdRoll").assumesPageview().global("__adroll").global("__adroll_loaded").global("adroll_adv_id").global("adroll_custom_data").global("adroll_email").global("adroll_pix_id").option("advId","").option("pixId","").option("_version",2).tag("http",'<script src="http://a.adroll.com/j/roundtrip.js">').tag("https",'<script src="https://s.adroll.com/j/roundtrip.js">').mapping("events");AdRoll.prototype.initialize=function(){window.adroll_adv_id=this.options.advId;window.adroll_pix_id=this.options.pixId;window.__adroll_loaded=true;var name=useHttps()?"https":"http";this.load(name,this.ready)};AdRoll.prototype.loaded=function(){return!!window.__adroll};AdRoll.prototype.page=function(page){this.track(page.track(page.fullName()))};AdRoll.prototype.identify=function(identify){if(identify.email()){window.adroll_email=identify.email();window.__adroll.record_adroll_email("segment")}};AdRoll.prototype.track=function(track){var events=this.events(track.event());var userId=this.analytics.user().id();var data=formulateData(track,{revenue:"adroll_conversion_value"});if(this.options._version===1){if(!events.length)events=[track.event()];events=map(snake,events)}if(userId)data.user_id=userId;sendConversion(events,data)};AdRoll.prototype.productViewed=AdRoll.prototype.productAdded=function(track){var events=this.events(track.event());var userId=this.analytics.user().id();var data=formulateData(track,{id:"product_id",productId:"product_id",price:"adroll_conversion_value"});if(this.options._version===1){if(!events.length)events=[track.event()];events=map(snake,events)}if(userId)data.user_id=userId;sendConversion(events,data)};AdRoll.prototype.orderCompleted=function(track){var events=this.events(track.event());var userId=this.analytics.user().id();var data=formulateData(track,{orderId:"order_id",revenue:"adroll_conversion_value"});if(track.properties().currency){data.adroll_currency=track.properties().currency;delete data.currency}if(this.options._version===1){if(!events.length)events=[track.event()];events=map(snake,events)}if(userId)data.user_id=userId;sendConversion(events,data)};function sendConversion(events,d){each(function(segmentId){var data=d;data.adroll_segments=segmentId;window.__adroll.record_user(data)},events)}function formulateData(track,alias){var aliases=alias||{};var ret=foldl(function(props,val,key){var properties=props;properties[snake(key)]=val;return properties},track.properties(aliases));return ret}},{"@ndhoule/each":10,"@ndhoule/foldl":14,"@ndhoule/map":17,"@segment/analytics.js-integration":76,"to-snake-case":1172,"use-https":1180}],76:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":77,"./statics":78,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:80,"slug-component":1165}],77:[function(require,module,exports){"use strict";var Emitter=require("component-emitter");var after=require("@ndhoule/after");var each=require("@ndhoule/each");var events=require("analytics-events");var every=require("@ndhoule/every");var fmt=require("@segment/fmt");var foldl=require("@ndhoule/foldl");var is=require("is");var loadIframe=require("load-iframe");var loadScript=require("@segment/load-script");var nextTick=require("next-tick");var normalize=require("to-no-case");var has=Object.prototype.hasOwnProperty;var noop=function noop(){};var onerror=window.onerror;var onload=null;Emitter(exports);exports.initialize=function(){var ready=this.ready;nextTick(ready)};exports.loaded=function(){return false};exports.page=function(page){};exports.track=function(track){};exports.map=function(options,key){var normalizedComparator=normalize(key);var mappingType=getMappingType(options);if(mappingType==="unknown"){return[]}return foldl(function(matchingValues,val,key){var compare;var result;if(mappingType==="map"){compare=key;result=val}if(mappingType==="array"){compare=val;result=val}if(mappingType==="mixed"){compare=val.key;result=val.value}if(normalize(compare)===normalizedComparator){matchingValues.push(result)}return matchingValues},[],options)};exports.invoke=function(method){if(!this[method])return;var args=Array.prototype.slice.call(arguments,1);if(!this._ready)return this.queue(method,args);this.debug("%s with %o",method,args);return this[method].apply(this,args)};exports.queue=function(method,args){this._queue.push({method:method,args:args})};exports.flush=function(){this._ready=true;var self=this;each(function(call){self[call.method].apply(self,call.args)},this._queue);this._queue.length=0};exports.reset=function(){for(var i=0;i<this.globals.length;i++){window[this.globals[i]]=undefined}window.onerror=onerror;window.onload=onload};exports.load=function(name,locals,callback){if(typeof name==="function"){callback=name;locals=null;name=null}if(name&&typeof name==="object"){callback=locals;locals=name;name=null}if(typeof locals==="function"){callback=locals;locals=null}name=name||"library";locals=locals||{};locals=this.locals(locals);var template=this.templates[name];if(!template)throw new Error(fmt('template "%s" not defined.',name));var attrs=render(template,locals);callback=callback||noop;var self=this;var el;switch(template.type){case"img":attrs.width=1;attrs.height=1;el=loadImage(attrs,callback);break;case"script":el=loadScript(attrs,function(err){if(!err)return callback();self.debug('error loading "%s" error="%s"',self.name,err)});delete attrs.src;each(function(val,key){el.setAttribute(key,val)},attrs);break;case"iframe":el=loadIframe(attrs,callback);break;default:}return el};exports.locals=function(locals){locals=locals||{};var cache=Math.floor((new Date).getTime()/36e5);if(!locals.hasOwnProperty("cache"))locals.cache=cache;each(function(val,key){if(!locals.hasOwnProperty(key))locals[key]=val},this.options);return locals};exports.ready=function(){this.emit("ready")};exports._wrapInitialize=function(){var initialize=this.initialize;this.initialize=function(){this.debug("initialize");this._initialized=true;var ret=initialize.apply(this,arguments);this.emit("initialize");return ret}};exports._wrapPage=function(){if(this._assumesPageview)return this.page=after(2,this.page)};exports._wrapTrack=function(){var t=this.track;this.track=function(track){var event=track.event();var called;var ret;for(var method in events){if(has.call(events,method)){var regexp=events[method];if(!this[method])continue;if(!regexp.test(event))continue;ret=this[method].apply(this,arguments);called=true;break}}if(!called)ret=t.apply(this,arguments);return ret}};function getMappingType(mapping){if(is.array(mapping)){return every(isMixed,mapping)?"mixed":"array"}if(is.object(mapping))return"map";return"unknown"}function isMixed(item){if(!is.object(item))return false;if(!is.string(item.key))return false;if(!has.call(item,"value"))return false;return true}function loadImage(attrs,fn){fn=fn||function(){};var img=new Image;img.onerror=error(fn,"failed to load pixel",img);img.onload=function(){fn()};img.src=attrs.src;img.width=1;img.height=1;return img}function error(fn,message,img){return function(e){e=e||window.event;var err=new Error(message);err.event=e;err.source=img;fn(err)}}function render(template,locals){return foldl(function(attrs,val,key){attrs[key]=val.replace(/\{\{\ *(\w+)\ *\}\}/g,function(_,$1){return locals[$1]});return attrs},{},template.attrs)}},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],78:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:79,dup:51}],79:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],80:[function(require,module,exports){"use strict";var hasOwn=Object.prototype.hasOwnProperty;var toStr=Object.prototype.toString;var isArray=function isArray(arr){if(typeof Array.isArray==="function"){return Array.isArray(arr)}return toStr.call(arr)==="[object Array]"};var isPlainObject=function isPlainObject(obj){if(!obj||toStr.call(obj)!=="[object Object]"){return false}var hasOwnConstructor=hasOwn.call(obj,"constructor");var hasIsPrototypeOf=obj.constructor&&obj.constructor.prototype&&hasOwn.call(obj.constructor.prototype,"isPrototypeOf");if(obj.constructor&&!hasOwnConstructor&&!hasIsPrototypeOf){return false}var key;for(key in obj){}return typeof key==="undefined"||hasOwn.call(obj,key)};module.exports=function extend(){var options,name,src,copy,copyIsArray,clone;var target=arguments[0];var i=1;var length=arguments.length;var deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(target==null||typeof target!=="object"&&typeof target!=="function"){target={}}for(;i<length;++i){options=arguments[i];if(options!=null){for(name in options){src=target[name];copy=options[name];if(target!==copy){if(deep&&copy&&(isPlainObject(copy)||(copyIsArray=isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&isArray(src)?src:[]}else{clone=src&&isPlainObject(src)?src:{}}target[name]=extend(deep,clone,copy)}else if(typeof copy!=="undefined"){target[name]=copy}}}}}return target}},{}],81:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var when=require("do-when");var AdWords=module.exports=integration("AdWords").option("conversionId","").option("pageRemarketing",false).option("eventMappings",[]).tag('<script src="//www.googleadservices.com/pagead/conversion_async.js">');AdWords.prototype.initialize=function(){var loaded=this.loaded;var ready=this.ready;this.load(function(){when(loaded,ready)})};AdWords.prototype.loaded=function(){return!!(document.body&&window.google_trackConversion)};AdWords.prototype.page=function(page){var remarketing=this.options.pageRemarketing;var id=this.options.conversionId;var props=page.properties();window.google_trackConversion({google_conversion_id:id,google_custom_params:{},google_remarketing_only:false});if(remarketing){window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:true})}};AdWords.prototype.track=function(track){var self=this;var props=track.properties();var eventMappings=this.options.eventMappings;var revenue=track.revenue()||0;eventMappings.forEach(function(mapping){var id;if(mapping.value){if(mapping.value.eventName.toLowerCase()!==track.event().toLowerCase())return;id=mapping.value.conversionId||self.options.conversionId;if(mapping.value.label!==""){delete props.revenue;window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:mapping.value.label,google_conversion_value:revenue,google_remarketing_only:false})}if(mapping.value.remarketing){window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:true})}}else{if(mapping.eventName.toLowerCase()!==track.event().toLowerCase())return;id=mapping.conversionId||self.options.conversionId;if(mapping.label!==""){delete props.revenue;window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:mapping.label,google_conversion_value:revenue,google_remarketing_only:false})}if(mapping.remarketing){window.google_trackConversion({google_conversion_id:id,google_custom_params:props,google_remarketing_only:true})}}})}},{"@segment/analytics.js-integration":82,"do-when":1125}],82:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":83,"./statics":84,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],83:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":85,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],84:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:86,dup:42}],85:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],86:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],87:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Alexa=module.exports=integration("Alexa").assumesPageview().global("_atrk_opts").option("account",null).option("domain","").option("dynamic",true).tag('<script src="//d31qbv1cthcecs.cloudfront.net/atrk.js">');Alexa.prototype.initialize=function(){var self=this;window._atrk_opts={atrk_acct:this.options.account,domain:this.options.domain,dynamic:this.options.dynamic};this.load(function(){window.atrk();self.ready()})};Alexa.prototype.loaded=function(){return!!window.atrk}},{"@segment/analytics.js-integration":88}],88:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":89,"./statics":90,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],89:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":91,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],90:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:92,dup:42}],91:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],92:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],93:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Ambassador=module.exports=integration("Ambassador").global("mbsy").option("uid","").option("campaigns",{}).tag('<script src="https://cdn.getambassador.com/us.js">').mapping("events");Ambassador.prototype.initialize=function(){(function(m,b,s,y){m[b]=m[b]||{};m[b].uid=s;m[b].methods=["identify","track"];m[b].queue=[];m[b].factory=function(t){return function(){var l=Array.prototype.slice.call(arguments);l.unshift(t);m[b].queue.push(l);return m[b].queue}};for(var t=0;t<m[b].methods.length;t++){y=m[b].methods[t];m[b][y]=m[b].factory(y)}}).bind(this)(window,"mbsy",this.options.uid);this.load(this.ready)};Ambassador.prototype.loaded=function(){return!!window.mbsy};Ambassador.prototype.identify=function(identify){var allowedCampaigns=getAllowedCampaigns(this.options.campaigns);var id=identify.userId();var email=identify.email();var traits=identify.traits();delete traits.id;if(!(id||email))return this.debug("user id or email is required");var args=[];if(id)args.push(id);args.push(traits);var opts={};opts.identifyType="segment";args.push(opts);if(allowedCampaigns.length>0){for(var i=0;i<allowedCampaigns.length;i++){opts.campaign=allowedCampaigns[i];window.mbsy.identify.apply(this,args)}}else{window.mbsy.identify.apply(this,args)}};Ambassador.prototype.track=function(track){var allowedCampaigns=getAllowedCampaigns(this.options.campaigns);if(!allowedCampaigns)return;var props=track.properties();var evt=track.event();var events=this.events(evt);if(events.indexOf("conversion")===-1)return;for(var i=0;i<allowedCampaigns.length;i++){props.campaign=allowedCampaigns[i];window.mbsy.track(evt,props,{conversion:true})}};function getAllowedCampaigns(allCampaigns){var allowedCampaigns=[];for(var c in allCampaigns){if(isValidUrl(c)){allowedCampaigns.push(allCampaigns[c])}}return allowedCampaigns.length===0?false:allowedCampaigns}function windowLocationContext(){return window.mockLocation?parseUrl(window.mockLocation):window.location}function containsHash(locationObj){return locationObj.hash&&locationObj.href.indexOf("#")>=0}function isValidUrl(u){if(!u){return false}var url=u;url=url.replace(/．/g,".");url=url.substr(0,4)==="http"?url:"http://"+url;var wildcardPhrase="--"+(new Date).getTime()+"--";url=url.replace(/\*/g,wildcardPhrase);url=url.toLowerCase();var rawBrowserUrl=windowLocationContext().href.toLowerCase();var providedUrlParts=parseUrl(url);var browserUrlParts=parseUrl(rawBrowserUrl);var providedHostnameParts=decodeURIComponent(providedUrlParts.hostname).split(".").filter(function(p){return!!p}).reverse();var providedPathnameParts=decodeURIComponent(providedUrlParts.pathname).split("/").filter(function(p){return!!p});var providedHashParts=decodeURIComponent(providedUrlParts.hash).replace(/[#!]+/g,"").split("/").filter(function(p){return!!p});var browserHostnameParts=browserUrlParts.hostname.split(".").filter(function(p){return!!p}).reverse();var browserPathnameParts=browserUrlParts.pathname.split("/").filter(function(p){return!!p});var browserHashParts=browserUrlParts.hash.replace(/[#!]+/g,"").split("?")[0].split("/").filter(function(p){return!!p});for(var i=0;i<providedHostnameParts.length;i++){if(providedHostnameParts[i]!==wildcardPhrase&&providedHostnameParts[i]!==browserHostnameParts[i]){return false}}for(var x=0;x<providedPathnameParts.length;x++){if(providedPathnameParts[x]!==wildcardPhrase&&providedPathnameParts[x]!==browserPathnameParts[x]){return false}}if(containsHash(providedUrlParts)){for(var y=0;y<providedHashParts.length;y++){if(providedHashParts[y]!==wildcardPhrase&&providedHashParts[y]!==browserHashParts[y]||!browserHashParts[y]&&!containsHash(browserUrlParts)){return false}}}if(providedPathnameParts.length===0&&browserPathnameParts.length>0){return false}return true}function parseUrl(url){var urlAnchor=document.createElement("a");urlAnchor.href=url;var urlParts={hash:urlAnchor.hash,href:urlAnchor.href,pathname:urlAnchor.pathname,port:urlAnchor.port,search:urlAnchor.search,hostname:urlAnchor.hostname,host:urlAnchor.host,origin:urlAnchor.origin,protocol:urlAnchor.protocol};if(urlParts.pathname.substr(0,1)!=="/"){urlParts.pathname="/"+urlParts.pathname}return urlParts}},{"@segment/analytics.js-integration":94}],94:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":95,"./statics":96,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],95:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":97,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],96:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:98,dup:42}],97:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],98:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],99:[function(require,module,exports){"use strict";var bind=require("component-bind");var integration=require("@segment/analytics.js-integration");var topDomain=require("@segment/top-domain");var when=require("do-when");var is=require("is");var each=require("@ndhoule/each");var Track=require("segmentio-facade").Track;var umd=typeof window.define==="function"&&window.define.amd;var src="https://circleci.com/docs/assets/js/amplitude/amplitude-fork-5.2.2.min.js";var Amplitude=module.exports=integration("Amplitude").global("amplitude").option("apiKey","").option("trackAllPages",false).option("trackNamedPages",true).option("trackCategorizedPages",true).option("trackUtmProperties",true).option("trackReferrer",false).option("batchEvents",false).option("eventUploadThreshold",30).option("eventUploadPeriodMillis",3e4).option("useLogRevenueV2",false).option("forceHttps",false).option("trackGclid",false).option("saveParamsReferrerOncePerSession",true).option("deviceIdFromUrlParam",false).option("mapQueryParams",{}).option("trackRevenuePerProduct",false).option("preferAnonymousIdForDeviceId",false).option("traitsToSetOnce",[]).option("traitsToIncrement",[]).option("appendFieldsToEventProps",{}).option("unsetParamsReferrerOnNewSession",false).option("trackProductsOnce",false).option("versionName","").option("useAmplitudeReferral",false).tag('<script src="'+src+'">');Amplitude.prototype.initialize=function(){(function(e,t){var n=e.amplitude||{_q:[],_iq:{}};function s(e,t){e.prototype[t]=function(){this._q.push([t].concat(Array.prototype.slice.call(arguments,0)));return this}}var o=function(){this._q=[];return this};var a=["add","append","clearAll","prepend","set","setOnce","unset"];for(var u=0;u<a.length;u++){s(o,a[u])}n.Identify=o;var c=function(){this._q=[];return this};var l=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(var p=0;p<l.length;p++){s(c,l[p])}n.Revenue=c;var d=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function v(e){function t(t){e[t]=function(){e._q.push([t].concat(Array.prototype.slice.call(arguments,0)))}}for(var n=0;n<d.length;n++){t(d[n])}}v(n);n.getInstance=function(e){e=(!e||e.length===0?"$default_instance":e).toLowerCase();if(!n._iq.hasOwnProperty(e)){n._iq[e]={_q:[]};v(n._iq[e])}return n._iq[e]};e.amplitude=n})(window,document);this.setDomain(window.location.href);window.amplitude.getInstance().init(this.options.apiKey,null,{includeUtm:this.options.trackUtmProperties,batchEvents:this.options.batchEvents,eventUploadThreshold:this.options.eventUploadThreshold,eventUploadPeriodMillis:this.options.eventUploadPeriodMillis,forceHttps:this.options.forceHttps,includeGclid:this.options.trackGclid,saveParamsReferrerOncePerSession:this.options.saveParamsReferrerOncePerSession,includeReferrer:this.options.useAmplitudeReferral,deviceIdFromUrlParam:this.options.deviceIdFromUrlParam,unsetParamsReferrerOnNewSession:this.options.unsetParamsReferrerOnNewSession,deviceId:this.options.preferAnonymousIdForDeviceId&&this.analytics&&this.analytics.user()&&this.analytics.user().anonymousId()});var versionName=this.options.versionName;if(versionName){window.amplitude.getInstance().setVersionName(versionName)}var loaded=bind(this,this.loaded);var ready=this.ready;if(umd){window.require([src],function(amplitude){window.amplitude=amplitude;when(loaded,function(){window.amplitude.runQueuedFunctions();ready()})});return}this.load(function(){if(window.amplitude.runQueuedFunctions){window.amplitude.runQueuedFunctions();ready()}})};Amplitude.prototype.loaded=function(){return!!(window.amplitude&&window.amplitude.getInstance().options)};Amplitude.prototype.page=function(page){this.setDeviceIdFromAnonymousId(page);if(this.options.trackReferrer&&!this.options.useAmplitudeReferral)this.sendReferrer();var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Amplitude.prototype.identify=function(identify){this.setDeviceIdFromAnonymousId(identify);var id=identify.userId();var traits=identify.traits();if(id)window.amplitude.getInstance().setUserId(id);var mapQueryParams=this.options.mapQueryParams;var query=identify.proxy("context.page.search");if(!is.empty(mapQueryParams)){each(function(value,key){traits[key]=query},mapQueryParams)}this.setTraits(traits);var groups=identify.options(this.name).groups;if(groups&&is.object(groups)){for(var group in groups){if(groups.hasOwnProperty(group))window.amplitude.getInstance().setGroup(group,groups[group])}}};Amplitude.prototype.setTraits=function(traits){var traitsToIncrement=this.options.traitsToIncrement||[];var traitsToSetOnce=this.options.traitsToSetOnce||[];var amplitudeIdentify=new window.amplitude.Identify;for(var trait in traits){if(!traits.hasOwnProperty(trait))continue;var shouldIncrement=traitsToIncrement.indexOf(trait)>=0;var shouldSetOnce=traitsToSetOnce.indexOf(trait)>=0;if(shouldIncrement){amplitudeIdentify.add(trait,traits[trait])}if(shouldSetOnce){amplitudeIdentify.setOnce(trait,traits[trait])}if(!shouldIncrement&&!shouldSetOnce){amplitudeIdentify.set(trait,traits[trait])}}window.amplitude.identify(amplitudeIdentify)};Amplitude.prototype.track=logEvent;function logEvent(track,dontSetRevenue){this.setDeviceIdFromAnonymousId(track);var props=track.properties();var options=track.options(this.name);var event=track.event();var mapQueryParams=this.options.mapQueryParams;var query=track.proxy("context.page.search");if(!is.empty(mapQueryParams)){var params={};var type;each(function(value,key){type=value;if(type==="user_properties"){params[key]=query}else{props[key]=query}},mapQueryParams);if(type==="user_properties")window.amplitude.getInstance().setUserProperties(params)}each(function(prop,field){props[prop]=track.proxy(field)},this.options.appendFieldsToEventProps);if(options.groups){window.amplitude.getInstance().logEventWithGroups(event,props,options.groups)}else{window.amplitude.getInstance().logEvent(event,props)}if(track.revenue()&&!dontSetRevenue)this.setRevenue(mapRevenueAttributes(track))}Amplitude.prototype.orderCompleted=function(track){this.setDeviceIdFromAnonymousId(track);var products=track.products();var clonedTrack=track.json();var trackRevenuePerProduct=this.options.trackRevenuePerProduct;var revenueType=track.proxy("properties.revenueType");var revenue=track.revenue();var trackProductsOnce=this.options.trackProductsOnce;if(trackProductsOnce){var allProducts=[];var productKeys=Object.keys(products);for(var index=0;index<productKeys.length;index++){var eachProduct=new Track({properties:products[index]});allProducts.push(mapProductAttributes(eachProduct))}clonedTrack.properties.products=allProducts;logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct);return}delete clonedTrack.properties.products;logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct);each(function(product){var price=product.price;var quantity=product.quantity;clonedTrack.properties=product;clonedTrack.event="Product Purchased";if(trackRevenuePerProduct&&price!=null&&quantity){if(revenueType){clonedTrack.properties.revenueType=revenueType}if(revenue){clonedTrack.properties.revenue=revenue}this.setRevenue(mapRevenueAttributes(new Track(clonedTrack)))}logEvent.call(this,new Track(clonedTrack),trackRevenuePerProduct)}.bind(this),products)};Amplitude.prototype.group=function(group){this.setDeviceIdFromAnonymousId(group);var groupType=group.traits()[this.options.groupTypeTrait];var groupValue=group.traits()[this.options.groupValueTrait];if(groupType&&groupValue){window.amplitude.getInstance().setGroup(groupType,groupValue)}else{var groupId=group.groupId();if(groupId){window.amplitude.getInstance().setGroup("[Segment] Group",groupId)}}};Amplitude.prototype.setDomain=function(href){var domain=topDomain(href);window.amplitude.setDomain(domain)};Amplitude.prototype.setDeviceIdFromAnonymousId=function(facade){if(this.options.preferAnonymousIdForDeviceId){this.setDeviceId(facade.anonymousId())}};Amplitude.prototype.setDeviceId=function(deviceId){if(deviceId)window.amplitude.getInstance().setDeviceId(deviceId)};Amplitude.prototype.setRevenue=function(properties){var price=properties.price;var productId=properties.productId;var revenueType=properties.revenueType;var quantity=properties.quantity;var eventProps=properties.eventProps;var revenue=properties.revenue;if(this.options.useLogRevenueV2){if(!price){price=revenue;quantity=1}var ampRevenue=(new window.amplitude.Revenue).setPrice(price).setQuantity(quantity).setEventProperties(eventProps);if(revenueType)ampRevenue.setRevenueType(revenueType);if(productId)ampRevenue.setProductId(productId);window.amplitude.getInstance().logRevenueV2(ampRevenue)}else{window.amplitude.getInstance().logRevenue(revenue||price*quantity,quantity,productId)}};Amplitude.prototype.sendReferrer=function(){var identify=new window.amplitude.Identify;var referrer=this.getReferrer();if(!referrer||referrer.length===0)return;identify.setOnce("initial_referrer",referrer);identify.set("referrer",referrer);var parts=referrer.split("/");if(parts.length>=3){var referringDomain=parts[2];identify.setOnce("initial_referring_domain",referringDomain);identify.set("referring_domain",referringDomain)}window.amplitude.getInstance().identify(identify)};Amplitude.prototype.getReferrer=function(){return document.referrer};function mapRevenueAttributes(track){var mapRevenueType={"order completed":"Purchase","completed order":"Purchase","product purchased":"Purchase"};return{price:track.price(),productId:track.productId(),revenueType:track.proxy("properties.revenueType")||mapRevenueType[track.event().toLowerCase()],quantity:track.quantity(),eventProps:track.properties(),revenue:track.revenue()}}function mapProductAttributes(product){return{productId:product.productId(),sku:product.sku(),name:product.name(),price:product.price(),quantity:product.quantity(),category:product.category()}}},{"@ndhoule/each":10,"@segment/analytics.js-integration":100,"@segment/top-domain":1104,"component-bind":1109,"do-when":1125,is:1131,"segmentio-facade":1158}],100:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":101,"./statics":102,"@ndhoule/defaults":8,"component-bind":1109,debug:103,dup:49,extend:105,"slug-component":1165}],101:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],102:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:106,dup:51}],103:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":104,_process:1149,dup:43}],104:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:107}],105:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],106:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],107:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],108:[function(require,module,exports){var appboyUtil={shouldOpenSession:function(userId,options){return!!(userId||!options.onlyTrackKnownUsersOnWeb)},getCustomEndpoint:function(options){var customEndpoint;if(options.customEndpoint){var endpoint=options.customEndpoint;var regex=new RegExp("^(http|https)://","i");customEndpoint=(regex.test(endpoint)?endpoint:"https://"+endpoint)+"/api/v3"}else if(options.datacenter==="eu"){customEndpoint="https://sdk.fra-01.braze.eu/api/v3"}return customEndpoint},getMajorVersion:function(options){return Math.floor(Number(options.version))},isMajorVersionTwo:function(options){return appboyUtil.getMajorVersion(options)===2},isMajorVersionThree:function(options){return appboyUtil.getMajorVersion(options)===3},getConfig:function(options){var config={};if(appboyUtil.isMajorVersionTwo(options)||appboyUtil.isMajorVersionThree(options)){config={safariWebsitePushId:options.safariWebsitePushId,enableHtmlInAppMessages:options.enableHtmlInAppMessages,allowCrawlerActivity:options.allowCrawlerActivity,doNotLoadFontAwesome:options.doNotLoadFontAwesome,enableLogging:options.enableLogging,localization:options.localization,minimumIntervalBetweenTriggerActionsInSeconds:Number(options.minimumIntervalBetweenTriggerActionsInSeconds)||30,openInAppMessagesInNewTab:options.openInAppMessagesInNewTab,openNewsFeedCardsInNewTab:options.openNewsFeedCardsInNewTab,requireExplicitInAppMessageDismissal:options.requireExplicitInAppMessageDismissal,serviceWorkerLocation:options.serviceWorkerLocation,sessionTimeoutInSeconds:Number(options.sessionTimeoutInSeconds)||30}}else{var datacenterMappings={us:"https://sdk.iad-01.braze.com",us02:"https://sdk.iad-02.braze.com",us03:"https://sdk.iad-03.braze.com",eu:"https://sdk.fra-01.braze.eu"};if(options.safariWebsitePushId)config.safariWebsitePushId=options.safariWebsitePushId;if(options.enableHtmlInAppMessages)config.enableHtmlInAppMessages=true;if(options.customEndpoint){var endpoint=options.customEndpoint;var regex=new RegExp("^(http|https)://","i");config.baseUrl=(regex.test(endpoint)?endpoint:"https://"+endpoint)+"/api/v3"}else{config.baseUrl=(datacenterMappings[options.datacenter]||"https://sdk.iad-01.braze.com")+"/api/v3"}}var customEndpoint=appboyUtil.getCustomEndpoint(options);if(customEndpoint)config.baseUrl=customEndpoint;return config}};module.exports=appboyUtil},{}],109:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Track=require("segmentio-facade").Track;var each=require("@ndhoule/each");var del=require("obj-case").del;var clone=require("@ndhoule/clone");var appboyUtil=require("./appboyUtil");var Appboy=module.exports=integration("Appboy").global("appboy").option("apiKey","").option("safariWebsitePushId","").option("allowCrawlerActivity",false).option("doNotLoadFontAwesome",false).option("enableLogging",false).option("automaticallyDisplayMessages",true).option("localization","en").option("minimumIntervalBetweenTriggerActionsInSeconds",30).option("openInAppMessagesInNewTab",false).option("openNewsFeedCardsInNewTab",false).option("sessionTimeoutInSeconds",30).option("requireExplicitInAppMessageDismissal",false).option("enableHtmlInAppMessages",false).option("trackAllPages",false).option("trackNamedPages",false).option("customEndpoint","").option("version",1).option("logPurchaseWhenRevenuePresent",false).option("onlyTrackKnownUsersOnWeb",false).tag("v1",'<script src="https://js.appboycdn.com/web-sdk/1.6/appboy.min.js">').tag("v2",'<script src="https://js.appboycdn.com/web-sdk/2.4/appboy.min.js">').tag("v2.7",'<script src="https://js.appboycdn.com/web-sdk/2.7/appboy.min.js">').tag("v3.1",'<script src="https://js.appboycdn.com/web-sdk/3.1/appboy.min.js">');Appboy.prototype.appboyInitialize=function(userId,options,config){window.appboy.initialize(options.apiKey,config);if(options.automaticallyDisplayMessages)window.appboy.display.automaticallyShowNewInAppMessages();if(userId)window.appboy.changeUser(userId);window.appboy.openSession()};Appboy.prototype.initialize=function(){if(appboyUtil.isMajorVersionThree(this.options)){this.initializeV3()}else if(appboyUtil.isMajorVersionTwo(this.options)){this.initializeV2()}else{this.initializeV1()}};Appboy.prototype.initializeV1=function(){var options=this.options;var self=this;var userId=this.analytics.user().id();+function(a,p,P,b,y){window.appboy={};for(var s="destroy toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates logCardImpressions logCardClick logFeedDisplayed requestInAppMessageRefresh logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages submitFeedback ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed sharedLib".split(" "),i=0;i<s.length;i++){for(var k=appboy,l=s[i].split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=function(){console&&console.error("The Appboy SDK has not yet been loaded.")}}appboy.initialize=function(){console&&console.error("Appboy cannot be loaded - this is usually due to strict corporate firewalls or ad blockers.")};appboy.getUser=function(){return new appboy.ab.User};appboy.getCachedFeed=function(){return new appboy.ab.Feed}}(document,"script","link");this._shim=window.appboy.initialize;this.load("v1",function(){if(appboyUtil.shouldOpenSession(userId,options)){self.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);self.initializeTester(options.apiKey,config);self.appboyInitialize(userId,options,config)}self.ready()})};Appboy.prototype.initializeV2=function(){var options=this.options;var userId=this.analytics.user().id();+function(a,p,P,b,y){window.appboy={};window.appboyQueue=[];for(var s="initialize destroy getDeviceId toggleAppboyLogging setLogger openSession changeUser requestImmediateDataFlush requestFeedRefresh subscribeToFeedUpdates logCardImpressions logCardClick logFeedDisplayed requestInAppMessageRefresh logInAppMessageImpression logInAppMessageClick logInAppMessageButtonClick logInAppMessageHtmlClick subscribeToNewInAppMessages removeSubscription removeAllSubscriptions logCustomEvent logPurchase isPushSupported isPushBlocked isPushGranted isPushPermissionGranted registerAppboyPushMessages unregisterAppboyPushMessages submitFeedback trackLocation stopWebTracking resumeWebTracking wipeData ab ab.User ab.User.Genders ab.User.NotificationSubscriptionTypes ab.User.prototype.getUserId ab.User.prototype.setFirstName ab.User.prototype.setLastName ab.User.prototype.setEmail ab.User.prototype.setGender ab.User.prototype.setDateOfBirth ab.User.prototype.setCountry ab.User.prototype.setHomeCity ab.User.prototype.setLanguage ab.User.prototype.setEmailNotificationSubscriptionType ab.User.prototype.setPushNotificationSubscriptionType ab.User.prototype.setPhoneNumber ab.User.prototype.setAvatarImageUrl ab.User.prototype.setLastKnownLocation ab.User.prototype.setUserAttribute ab.User.prototype.setCustomUserAttribute ab.User.prototype.addToCustomAttributeArray ab.User.prototype.removeFromCustomAttributeArray ab.User.prototype.incrementCustomUserAttribute ab.User.prototype.addAlias ab.InAppMessage ab.InAppMessage.SlideFrom ab.InAppMessage.ClickAction ab.InAppMessage.DismissType ab.InAppMessage.OpenTarget ab.InAppMessage.ImageStyle ab.InAppMessage.TextAlignment ab.InAppMessage.Orientation ab.InAppMessage.CropType ab.InAppMessage.prototype.subscribeToClickedEvent ab.InAppMessage.prototype.subscribeToDismissedEvent ab.InAppMessage.prototype.removeSubscription ab.InAppMessage.prototype.removeAllSubscriptions ab.InAppMessage.Button ab.InAppMessage.Button.prototype.subscribeToClickedEvent ab.InAppMessage.Button.prototype.removeSubscription ab.InAppMessage.Button.prototype.removeAllSubscriptions ab.SlideUpMessage ab.ModalMessage ab.FullScreenMessage ab.HtmlMessage ab.ControlMessage ab.Feed ab.Feed.prototype.getUnreadCardCount ab.Card ab.ClassicCard ab.CaptionedImage ab.Banner ab.WindowUtils display display.automaticallyShowNewInAppMessages display.showInAppMessage display.showFeed display.destroyFeed display.toggleFeed sharedLib".split(" "),i=0;i<s.length;i++){for(var m=s[i],k=appboy,l=m.split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=new Function("return function "+m.replace(/\./g,"_")+"(){appboyQueue.push(arguments); return true}")()}appboy.getUser=function(){return new appboy.ab.User};appboy.getCachedFeed=function(){return new appboy.ab.Feed}}(window,document,"script");if(appboyUtil.shouldOpenSession(userId,options)){this.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);this.initializeTester(options.apiKey,config);this.appboyInitialize(userId,options,config)}var versionTag=Number(options.version)===2.7?"v2.7":"v2";this.load(versionTag,this.ready)};Appboy.prototype.initializeV3=function(){var options=this.options;var userId=this.analytics.user().id();+function(a,p,P,b,y){a.appboy={};a.appboyQueue=[];for(var s="DeviceProperties Card Card.prototype.dismissCard Card.prototype.removeAllSubscriptions Card.prototype.removeSubscription Card.prototype.subscribeToClickedEvent Card.prototype.subscribeToDismissedEvent Banner CaptionedImage ClassicCard ControlCard ContentCards ContentCards.prototype.getUnviewedCardCount Feed Feed.prototype.getUnreadCardCount ControlMessage InAppMessage InAppMessage.SlideFrom InAppMessage.ClickAction InAppMessage.DismissType InAppMessage.OpenTarget InAppMessage.ImageStyle InAppMessage.Orientation InAppMessage.TextAlignment InAppMessage.CropType InAppMessage.prototype.closeMessage InAppMessage.prototype.removeAllSubscriptions InAppMessage.prototype.removeSubscription InAppMessage.prototype.subscribeToClickedEvent InAppMessage.prototype.subscribeToDismissedEvent FullScreenMessage ModalMessage HtmlMessage SlideUpMessage User User.Genders User.NotificationSubscriptionTypes User.prototype.addAlias User.prototype.addToCustomAttributeArray User.prototype.getUserId User.prototype.incrementCustomUserAttribute User.prototype.removeFromCustomAttributeArray User.prototype.setAvatarImageUrl User.prototype.setCountry User.prototype.setCustomLocationAttribute User.prototype.setCustomUserAttribute User.prototype.setDateOfBirth User.prototype.setEmail User.prototype.setEmailNotificationSubscriptionType User.prototype.setFirstName User.prototype.setGender User.prototype.setHomeCity User.prototype.setLanguage User.prototype.setLastKnownLocation User.prototype.setLastName User.prototype.setPhoneNumber User.prototype.setPushNotificationSubscriptionType InAppMessageButton InAppMessageButton.prototype.removeAllSubscriptions InAppMessageButton.prototype.removeSubscription InAppMessageButton.prototype.subscribeToClickedEvent display display.automaticallyShowNewInAppMessages display.destroyFeed display.hideContentCards display.showContentCards display.showFeed display.showInAppMessage display.toggleContentCards display.toggleFeed changeUser destroy getDeviceId initialize isPushBlocked isPushGranted isPushPermissionGranted isPushSupported logCardClick logCardDismissal logCardImpressions logContentCardsDisplayed logCustomEvent logFeedDisplayed logInAppMessageButtonClick logInAppMessageClick logInAppMessageHtmlClick logInAppMessageImpression logPurchase openSession registerAppboyPushMessages removeAllSubscriptions removeSubscription requestContentCardsRefresh requestFeedRefresh requestImmediateDataFlush resumeWebTracking setLogger stopWebTracking subscribeToContentCardsUpdates subscribeToFeedUpdates subscribeToInAppMessage subscribeToNewInAppMessages toggleAppboyLogging trackLocation unregisterAppboyPushMessages wipeData".split(" "),i=0;i<s.length;i++){for(var m=s[i],k=a.appboy,l=m.split("."),j=0;j<l.length-1;j++)k=k[l[j]];k[l[j]]=new Function("return function "+m.replace(/\./g,"_")+"(){window.appboyQueue.push(arguments); return true}")()}window.appboy.getCachedContentCards=function(){return new window.appboy.ContentCards};window.appboy.getCachedFeed=function(){return new window.appboy.Feed};window.appboy.getUser=function(){return new window.appboy.User}}(window,document,"script");if(appboyUtil.shouldOpenSession(userId,options)){this.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);this.initializeTester(options.apiKey,config);this.appboyInitialize(userId,options,config)}this.load("v3.1",this.ready)};Appboy.prototype.shouldHandleEvent=function(){return!this.options.onlyTrackKnownUsersOnWeb||this.hasBeenInitialized};Appboy.prototype.initializeTester=function(){};Appboy.prototype.loaded=function(){var options=this.options;if(Number(options.version)===2)return window.appboyQueue===null;return window.appboy&&window.appboy.initialize!==this._shim};Appboy.prototype.identify=function(identify){var userId=identify.userId();var address=identify.address();var avatar=identify.avatar();var birthday=identify.birthday();var email=identify.email();var firstName=identify.firstName();var gender=identify.gender();var lastName=identify.lastName();var phone=identify.phone();var traits=clone(identify.traits());var options=this.options;if(this.options.onlyTrackKnownUsersOnWeb&&userId&&!this.hasBeenInitialized){this.hasBeenInitialized=true;var config=appboyUtil.getConfig(options);this.initializeTester(options.apiKey,config);this.appboyInitialize(userId,options,config)}if(this.options.onlyTrackKnownUsersOnWeb&&!this.hasBeenInitialized){return}if(userId){window.appboy.changeUser(userId)}if(avatar){window.appboy.getUser().setAvatarImageUrl(avatar)}if(email){window.appboy.getUser().setEmail(email)}if(firstName){window.appboy.getUser().setFirstName(firstName)}if(gender){window.appboy.getUser().setGender(getGender(gender))}if(lastName){window.appboy.getUser().setLastName(lastName)}if(phone){window.appboy.getUser().setPhoneNumber(phone)}if(address){window.appboy.getUser().setCountry(address.country);window.appboy.getUser().setHomeCity(address.city)}if(address){window.appboy.getUser().setCountry(address.country);window.appboy.getUser().setHomeCity(address.city)}if(birthday){window.appboy.getUser().setDateOfBirth(birthday.getUTCFullYear(),birthday.getUTCMonth()+1,birthday.getUTCDate())}var reserved=["avatar","address","birthday","email","id","firstName","gender","lastName","phone","facebook","twitter","first_name","last_name","dob","external_id","country","home_city","bio","gender","phone","email_subscribe","push_subscribe"];each(function(key){delete traits[key]},reserved);each(function(value,key){if(value!==null&&typeof value==="object"&&!Array.isArray(value)&&!isDate(value)){delete traits[key]}},traits);each(function(value,key){window.appboy.getUser().setCustomUserAttribute(key,value)},traits)};Appboy.prototype.group=function(group){if(!this.shouldHandleEvent()){return}var userId=group.userId();var groupIdKey="ab_segment_group_"+group.groupId();if(userId){window.appboy.changeUser(userId)}window.appboy.getUser().setCustomUserAttribute(groupIdKey,true)};Appboy.prototype.track=function(track){if(!this.shouldHandleEvent()){return}var userId=track.userId();var eventName=track.event();var properties=track.properties();if(userId){window.appboy.changeUser(userId)}if(this.options.logPurchaseWhenRevenuePresent&&properties.revenue){this.orderCompleted(track)}else{each(function(value,key){if(value!=null&&typeof value==="object"&&!isDate(value)){delete properties[key]}},properties);window.appboy.logCustomEvent(eventName,properties)}};Appboy.prototype.page=function(page){if(!this.shouldHandleEvent()){return}var settings=this.options;if(!settings.trackAllPages&&!settings.trackNamedPages)return;if(settings.trackNamedPages&&!page.name())return;var userId=page.userId();var pageEvent=page.track(page.fullName());var eventName=pageEvent.event();var properties=page.properties();if(userId){window.appboy.changeUser(userId)}window.appboy.logCustomEvent(eventName,properties)};Appboy.prototype.orderCompleted=function(track){if(!this.shouldHandleEvent()){return}var userId=track.userId();var products=track.products();var currencyCode=track.currency();var purchaseProperties=track.properties();if(userId){window.appboy.changeUser(userId)}del(purchaseProperties,"products");del(purchaseProperties,"currency");for(var i=0;i<products.length;i++){logProduct(products[i],currencyCode,purchaseProperties)}};function getGender(gender){if(!gender)return;if(typeof gender!=="string")return;var femaleGenders=["woman","female","w","f"];var maleGenders=["man","male","m"];var otherGenders=["other","o"];if(femaleGenders.indexOf(gender.toLowerCase())>-1)return window.appboy.ab.User.Genders.FEMALE;if(maleGenders.indexOf(gender.toLowerCase())>-1)return window.appboy.ab.User.Genders.MALE;if(otherGenders.indexOf(gender.toLowerCase())>-1)return window.appboy.ab.User.Genders.OTHER}function logProduct(product,currencyCode,extraProperties){var track=new Track({properties:product});var productId=track.productId();var price=track.price();var quantity=track.quantity();var productProperties=track.properties();var properties={};del(productProperties,"productId");del(productProperties,"price");del(productProperties,"quantity");for(var productProperty in productProperties){if(!productProperties.hasOwnProperty(productProperty)){continue}var value=productProperties[productProperty];if(isValidProperty(productProperty,value)){properties[productProperty]=value}}for(var property in extraProperties){if(!extraProperties.hasOwnProperty(property)){continue}var val=extraProperties[property];if(!productProperties.hasOwnProperty(property)&&isValidProperty(property,val)){properties[property]=val}}window.appboy.logPurchase(productId,price,currencyCode,quantity,properties)}function isValidProperty(name,value){if(name.length>255||name.startsWith("$")){return false}if(typeof value==="number"||typeof value==="boolean"){return true}if(isDate(value)){return true}if((typeof value==="string"||value instanceof String)&&value.length<=255){return true}return false}function isDate(value){return typeof value==="object"&&value instanceof Date}},{"./appboyUtil":108,"@ndhoule/clone":7,"@ndhoule/each":10,"@segment/analytics.js-integration":110,"obj-case":1143,"segmentio-facade":1158}],110:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":111,"./statics":112,"@ndhoule/defaults":8,"component-bind":1109,debug:113,dup:49,extend:115,"slug-component":1165}],111:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],112:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:116,dup:51}],113:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":114,_process:1149,dup:43}],114:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:117}],115:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],116:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],117:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],118:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var load=require("@segment/load-script");var Appcues=integration("Appcues").global("Appcues").option("appcuesId","");Appcues.prototype.initialize=function(){this.load(this.ready)};Appcues.prototype.loaded=function(){return isObject(window.Appcues)};Appcues.prototype.load=function(callback){var id=this.options.appcuesId||"appcues";load("//fast.appcues.com/"+id+".js",callback)};Appcues.prototype.page=function(page){window.Appcues.page(page.name(),page.properties())};Appcues.prototype.identify=function(identify){window.Appcues.identify(identify.userId(),identify.traits())};Appcues.prototype.track=function(track){window.Appcues.track(track.event(),track.properties())};module.exports=exports=function(analytics){analytics.addIntegration(Appcues)};exports.Integration=Appcues},{"@segment/analytics.js-integration":119,"@segment/load-script":1093,isobject:125}],119:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":120,"./statics":121,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],120:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":122,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],121:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:123,dup:42}],122:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],123:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],124:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},{}],125:[function(require,module,exports){"use strict";var isArray=require("isarray");module.exports=function isObject(val){return val!=null&&typeof val==="object"&&isArray(val)===false}},{isarray:124}],126:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var querystring=require("component-querystring");var useHttps=require("use-https");var toNoCase=require("to-no-case");var AppNexus=module.exports=integration("AppNexus").tag("http",'<script src="http://ib.adnxs.com/px?{{ vars }}">').tag("https",'<script src="https://secure.adnxs.com/px?{{ vars }}">');AppNexus.prototype.loaded=function(){return true};AppNexus.prototype.track=function(track){var events=[];if(!this.options.events||!this.options.events.length)return;for(var i=0;i<this.options.events.length;i++){var item=this.options.events[i];if(item.value){if(toNoCase(item.key)===toNoCase(track.event()))events.push(item.value)}else if(toNoCase(item.event)===toNoCase(track.event())){events.push(item)}}var self=this;each(function(event){return self.conversion(track,event)},events)};AppNexus.prototype.conversion=function(track,event){var params=event.parameters||{};var revenue=track.revenue()||track.total();var vars={t:1,id:event.pixelId,seg:event.segmentId,order_id:track.orderId(),value:(revenue||0).toFixed(2)};each(function(value,key){vars[value]=track.proxy("properties."+key)},params);var name=useHttps()?"https":"http";this.load(name,{vars:querystring.stringify(vars)})}},{"@ndhoule/each":10,"@segment/analytics.js-integration":127,"component-querystring":1118,"to-no-case":1171,"use-https":1180}],127:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":128,"./statics":129,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:130,dup:40,"slug-component":1165}],128:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":132,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],129:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:133,dup:42}],130:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":131,_process:1149,dup:43}],131:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:134}],132:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],133:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],134:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],135:[function(require,module,exports){"use strict";var Group=require("segmentio-facade").Group;var Identify=require("segmentio-facade").Identify;var integration=require("@segment/analytics.js-integration");var Aptrinsic=module.exports=integration("Aptrinsic").global("aptrinsic").option("apiKey","").option("dataCenter","united_states").tag("united_states",'<script src="https://web-sdk.aptrinsic.com/api/aptrinsic.js?a={{ apiKey }}">').tag("eu",'<script src="https://web-sdk-eu.aptrinsic.com/api/aptrinsic.js?a={{ apiKey }}">');Aptrinsic.prototype.initialize=function(){var apiKey=this.options.apiKey;window.aptrinsic=window.aptrinsic||function(){window.aptrinsic.q=window.aptrinsic.q||[];window.aptrinsic.q.push(arguments)};window.aptrinsic.p=apiKey;var tagName=this.options.dataCenter==="eu"?"eu":"united_states";this.load(tagName,this.ready)};var integrationContext={name:"aptrinsic-segment",version:"1.0.0"};Aptrinsic.prototype.loaded=function(){return!!window.aptrinsic};Aptrinsic.prototype.identify=function(identify){var group=this.analytics.group();var identifyGroup=new Group({groupId:group.id(),traits:group.traits()});_identify(identify,identifyGroup)};Aptrinsic.prototype.group=function(group){var user=this.analytics.user();var identify=new Identify({userId:user.id(),traits:user.traits()});_identify(identify,group)};Aptrinsic.prototype.track=function(track){window.aptrinsic("event",track.event(),track.properties(),integrationContext)};function _identify(user,group){window.aptrinsic("identify",user,group,integrationContext)}},{"@segment/analytics.js-integration":136,"segmentio-facade":1158}],136:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":137,"./statics":138,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],137:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":139,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],138:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:140,dup:42}],139:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],140:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],141:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var Atatus=module.exports=integration("Atatus").global("atatus").option("apiKey","").option("disableAjaxMonitoring",false).option("disableSpa",false).option("allowedDomains",[]).option("enableOffline",false).tag('<script src="//dmc1acwvwny3.cloudfront.net/{{ lib }}.js">');Atatus.prototype.initialize=function(){var lib=this.options.disableSpa?"atatus":"atatus-spa";var self=this;this.load({lib:lib},function(){var configOptions={disableAjaxMonitoring:self.options.disableAjaxMonitoring,disableSPA:self.options.disableSpa};window.atatus.config(self.options.apiKey,configOptions).install();if(Array.isArray(self.options.allowedDomains)&&self.options.allowedDomains.length>0){window.atatus.setAllowedDomains(self.options.allowedDomains)}window.atatus.enableOffline(self.options.enableOffline);self.ready()})};Atatus.prototype.loaded=function(){return isObject(window.atatus)};Atatus.prototype.identify=function(identify){var uid=identify.userId();var traits=identify.traits()||{};var email=traits.email;var name=traits.name;if(uid){window.atatus.setUser(uid,email,name)}window.atatus.setCustomData(traits)}},{"@segment/analytics.js-integration":142,isobject:148}],142:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":143,"./statics":144,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],143:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":145,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],144:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:146,dup:42}],145:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],146:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],147:[function(require,module,exports){arguments[4][124][0].apply(exports,arguments)},{dup:124}],148:[function(require,module,exports){arguments[4][125][0].apply(exports,arguments)},{dup:125,isarray:147}],149:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Autosend=module.exports=integration("Autosend").global("_autosend").option("appKey","").tag('<script id="asnd-tracker" src="https://d2zjxodm1cz8d6.cloudfront.net/js/v1/autosend.js" data-auth-key="{{ appKey }}">');Autosend.prototype.initialize=function(){window._autosend=window._autosend||[];(function(){var a,b,c;a=function(f){return function(){window._autosend.push([f].concat(Array.prototype.slice.call(arguments,0)))}};b=["identify","track","cb"];for(c=0;c<b.length;c++){window._autosend[b[c]]=a(b[c])}})();this.load(this.ready)};Autosend.prototype.loaded=function(){return!!window._autosend};Autosend.prototype.identify=function(identify){var id=identify.userId();if(!id)return;var traits=identify.traits();traits.id=id;window._autosend.identify(traits)};Autosend.prototype.track=function(track){window._autosend.track(track.event())}},{"@segment/analytics.js-integration":150}],150:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":151,"./statics":152,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],151:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":153,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],152:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:154,dup:42}],153:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],154:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],155:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var Awesm=module.exports=integration("awe.sm").assumesPageview().global("AWESM").option("apiKey","").tag('<script src="//widgets.awe.sm/v3/widgets.js?key={{ apiKey }}&async=true">').mapping("events");Awesm.prototype.initialize=function(){window.AWESM={api_key:this.options.apiKey};this.load(this.ready)};Awesm.prototype.loaded=function(){return!!(window.AWESM&&window.AWESM._exists)};Awesm.prototype.track=function(track){var user=this.analytics.user();var goals=this.events(track.event());each(function(goal){window.AWESM.convert(goal,track.cents(),null,user.id())},goals)}},{"@ndhoule/each":10,"@segment/analytics.js-integration":156}],156:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":157,"./statics":158,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],157:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":159,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],158:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:160,dup:42}],159:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],160:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],161:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Bing=module.exports=integration("Bing Ads").global("UET").global("uetq").option("tagId","").tag('<script src="//bat.bing.com/bat.js">');Bing.prototype.initialize=function(){window.uetq=window.uetq||[];var self=this;self.load(function(){var setup={ti:self.options.tagId,q:window.uetq};window.uetq=new window.UET(setup);self.ready()})};Bing.prototype.loaded=function(){return!!(window.uetq&&window.uetq.push!==Array.prototype.push)};Bing.prototype.page=function(){window.uetq.push("pageLoad")};Bing.prototype.track=function(track){var event={ea:"track",el:track.event()};if(track.category())event.ec=track.category();if(track.revenue())event.gv=track.revenue();window.uetq.push(event)}},{"@segment/analytics.js-integration":162}],162:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":163,"./statics":164,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],163:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":165,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],164:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:166,dup:42}],165:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],166:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],167:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var foldl=require("@ndhoule/foldl");var Blueshift=module.exports=integration("Blueshift").global("blueshift").global("_blueshiftid").option("apiKey","").option("retarget",false).tag('<script src="https://cdn.getblueshift.com/blueshift.js">');Blueshift.prototype.initialize=function(){window.blueshift=window.blueshift||[];window.blueshift.load=function(a){window._blueshiftid=a;var d=function(a){return function(){blueshift.push([a].concat(Array.prototype.slice.call(arguments,0)))}},e=["identify","track","click","pageload","capture","retarget"];for(var f=0;f<e.length;f++)blueshift[e[f]]=d(e[f])};window.blueshift.load(this.options.apiKey);this.load(this.ready)};Blueshift.prototype.loaded=function(){return!!(window.blueshift&&window._blueshiftid)};Blueshift.prototype.page=function(page){if(this.options.retarget)window.blueshift.retarget();var properties=page.properties();properties._bsft_source="segment.com";properties.customer_id=this.analytics.user().id();properties.anonymousId=this.analytics.user().anonymousId();properties.category=page.category();properties.name=page.name();window.blueshift.pageload(removeBlankAttributes(properties))};var traitAliases={created:"created_at",firstName:"firstname",lastName:"lastname"};Blueshift.prototype.identify=function(identify){if(!identify.userId()&&!identify.anonymousId()){return this.debug("user id required")}var traits=identify.traits(traitAliases);traits._bsft_source="segment.com";traits.customer_id=identify.userId();traits.anonymousId=identify.anonymousId();window.blueshift.identify(removeBlankAttributes(traits))};Blueshift.prototype.track=function(track){var properties=track.properties();properties._bsft_source="segment.com";properties.customer_id=this.analytics.user().id();properties.anonymousId=this.analytics.user().anonymousId();window.blueshift.track(track.event(),removeBlankAttributes(properties))};Blueshift.prototype.alias=function(alias){window.blueshift.track("alias",removeBlankAttributes({_bsft_source:"segment.com",customer_id:alias.userId(),previous_customer_id:alias.previousId(),anonymousId:alias.anonymousId()}))};function removeBlankAttributes(obj){return foldl(function(r,val,key){var results=r;if(val!==null&&val!==undefined)results[key]=val;return results},{},obj)}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":168}],168:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":169,"./statics":170,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],169:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":171,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],170:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:172,dup:42}],171:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],172:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],173:[function(require,module,exports){"use strict";var convertDates=require("@segment/convert-dates");var integration=require("@segment/analytics.js-integration");var md5=require("spark-md5").hash;var Boomtrain=module.exports=integration("Boomtrain").global("_bt").option("apiKey","").tag('<script src="https://cdn.boomtrain.com/analyticstrain/{{ apiKey }}/analyticstrain.min.js"><\/script>');Boomtrain.prototype.initialize=function(){window._bt=window._bt||[];this.load(this.ready)};Boomtrain.prototype.loaded=function(){return!!(window._bt&&window._bt.push!==Array.prototype.push)};Boomtrain.prototype.identify=function(identify){var userId=identify.userId();if(!userId)return this.debug("user id required");var traits=identify.traits({createdAt:"created_at"});traits=convertDates(traits,convertDate);traits.email=identify.email();window._bt.person.set(traits)};Boomtrain.prototype.page=function(page){var properties=page.properties();if(!properties.model)properties.model=getModel()||undefined;if(!properties.id)properties.id=md5(page.url());window._bt.track("viewed",properties)};Boomtrain.prototype.track=function(track){var properties=track.properties();window._bt.track(track.event(),properties)};function convertDate(date){return Math.floor(date.getTime()/1e3)}function getModel(){var elements=window.document.getElementsByTagName("meta");var data={};var pattern="og:";var key="property";for(var i=elements.length-1;i>=0;i--){var property=elements[i].getAttribute&&elements[i].getAttribute(key);if(property&&property.match(pattern)){data[property.replace(pattern,"")]=elements[i].getAttribute("content")}}return data.type}},{"@segment/analytics.js-integration":174,"@segment/convert-dates":1087,"spark-md5":1166}],174:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":175,"./statics":176,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],175:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":177,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],176:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:178,dup:42}],177:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],178:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],179:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var Track=require("segmentio-facade").Track;var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var qs=require("component-querystring");var Bronto=module.exports=integration("Bronto").global("__bta").option("siteId","").option("host","").tag('<script src="//p.bm23.com/bta.js">');Bronto.prototype.initialize=function(){var self=this;var params=qs.parse(window.location.search);if(!params._bta_tid&&!params._bta_c){this.debug("missing tracking URL parameters `_bta_tid` and `_bta_c`.")}this.load(function(){var opts=self.options;self.bta=new window.__bta(opts.siteId);if(opts.host)self.bta.setHost(opts.host);self.ready()})};Bronto.prototype.loaded=function(){return this.bta};Bronto.prototype.orderCompleted=function(track){var user=this.analytics.user();var products=track.products();var items=[];var identify=new Identify({userId:user.id(),traits:user.traits()});var email=identify.email();each(function(product){var track=new Track({properties:product});items.push({item_id:track.productId()||track.id()||track.sku(),desc:product.description||track.name(),quantity:track.quantity(),amount:track.price()})},products);this.bta.addOrder({order_id:track.orderId(),email:email,items:items})}},{"@ndhoule/each":10,"@segment/analytics.js-integration":180,"component-querystring":1118,"segmentio-facade":1158}],180:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":181,"./statics":182,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:184,"slug-component":1165}],181:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],182:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:183,dup:51}],183:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],184:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],185:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var BugHerd=module.exports=integration("BugHerd").assumesPageview().global("BugHerdConfig").global("_bugHerd").option("apiKey","").option("showFeedbackTab",true).tag('<script src="//www.bugherd.com/sidebarv2.js?apikey={{ apiKey }}">');BugHerd.prototype.initialize=function(){window.BugHerdConfig={feedback:{hide:!this.options.showFeedbackTab}};var ready=this.ready;this.load(function(){tick(ready)})};BugHerd.prototype.loaded=function(){return!!window._bugHerd}},{"@segment/analytics.js-integration":186,"next-tick":1142}],186:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":187,"./statics":188,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],187:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":189,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],188:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:190,dup:42}],189:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],190:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],191:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var extend=require("@ndhoule/extend");var umd=typeof window.define==="function"&&window.define.amd;var src="//d2wy8f7a9ursnm.cloudfront.net/bugsnag-3.min.js";var Bugsnag=module.exports=integration("Bugsnag").global("Bugsnag").option("apiKey","").option("releaseStage",null).tag('<script src="'+src+'">');Bugsnag.prototype.initialize=function(){var self=this;if(umd){window.require([src],function(bsg){var bugsnag=bsg;bugsnag.apiKey=self.options.apiKey;if(self.options.releaseStage)bugsnag.releaseStage=self.options.releaseStage;window.Bugsnag=bugsnag;self.ready()});return}this.load(function(){window.Bugsnag.apiKey=self.options.apiKey;if(self.options.releaseStage)window.Bugsnag.releaseStage=self.options.releaseStage;self.ready()})};Bugsnag.prototype.loaded=function(){return isObject(window.Bugsnag)};Bugsnag.prototype.identify=function(identify){window.Bugsnag.user=window.Bugsnag.user||{};extend(window.Bugsnag.user,identify.traits())}},{"@ndhoule/extend":13,"@segment/analytics.js-integration":192,isobject:198}],192:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":193,"./statics":194,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],193:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":195,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],194:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:196,dup:42}],195:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],196:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],197:[function(require,module,exports){arguments[4][124][0].apply(exports,arguments)},{dup:124}],198:[function(require,module,exports){arguments[4][125][0].apply(exports,arguments)},{dup:125,isarray:197}],199:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Castle=module.exports=integration("Castle").option("publishableKey","").option("autoPageview",false).option("cookieDomain",false).tag('<script src="//d2t77mnxyo7adj.cloudfront.net/v1/cs.js">');Castle.prototype.initialize=function(){window._castle=window._castle||{};window._castle.q=window._castle.q||[];window._castle.q.push(["setKey",this.options.publishableKey]);if(this.options.cookieDomain){window._castle.q.push(["setCookieDomain",this.options.cookieDomain])}if(this.options.autoPageview===false){window._castle.q.push(["autoTrack",this.options.autoPageview])}this._identifyFromCache();this.load(this.ready)};Castle.prototype.loaded=function(){return typeof window._castle==="function"};Castle.prototype.identify=function(identify){var traits=identify.traits();var castleOptions=identify.options(this.name);if(castleOptions&&castleOptions.secure){window._castle("secure",castleOptions.secure)}delete traits.id;window._castle("identify",identify.userId(),traits)};Castle.prototype.page=function(page){if(this.options.autoPageview)return;window._castle("page",page.url(),page.title())};Castle.prototype.track=function(track){window._castle("track",track.event(),track.properties())};Castle.prototype._identifyFromCache=function(){var user=this.analytics.user();if(user.id()){window._castle.q.push(["identify",user.id(),user.traits()])}}},{"@segment/analytics.js-integration":200}],200:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":201,"./statics":202,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:204,"slug-component":1165}],201:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],202:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:203,dup:51}],203:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],204:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],205:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Chameleon=module.exports=integration("Chameleon").readyOnInitialize().readyOnLoad().global("chmln").option("apiKey",null).tag('<script src="https://fast.trychameleon.com/messo/{{apiKey}}/messo.min.js"><\/script>');Chameleon.prototype.initialize=function(){var that=this;!function(){var c=window.chmln||(window.chmln={});if(c.root){return}c.location=window.location.href.toString();c.accountToken=that.options.apiKey;var names="setup identify alias track set show on off custom help _data".split(" ");for(var i=0;i<names.length;i++){(function(){var t=c[names[i]+"_a"]=[];c[names[i]]=function(){t.push(arguments)}})()}}();this.ready();this.load()};Chameleon.prototype.loaded=function(){return!!window.chmln};Chameleon.prototype.identify=function(identify){var traits=identify.traits();delete traits.id;window.chmln.identify(identify.userId(),traits)};Chameleon.prototype.group=function(group){window.chmln.set({company:group.traits({id:"uid"})})};Chameleon.prototype.track=function(track){window.chmln.track(track.event(),track.properties())};Chameleon.prototype.alias=function(alias){window.chmln.alias({from:alias.previousId()||alias.anonymousId(),to:alias.userId()})}},{"@segment/analytics.js-integration":206}],206:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":207,"./statics":208,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],207:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":209,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],208:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:210,dup:42}],209:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],210:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],211:[function(require,module,exports){"use strict";var defaults=require("@ndhoule/defaults");var integration=require("@segment/analytics.js-integration");var onBody=require("on-body");var Chartbeat=module.exports=integration("Chartbeat").global("_sf_async_config").global("_sf_endpt").global("pSUPERFLY").option("domain","").option("uid",null).option("video",false).option("sendNameAndCategoryAsTitle",false).option("subscriberEngagementKeys",[]).tag('<script src="//static.chartbeat.com/js/{{ script }}">');Chartbeat.prototype.loaded=function(){return!!window.pSUPERFLY};Chartbeat.prototype.initialize=function(){this.pageCalledYet=false;this._ready=true};Chartbeat.prototype.page=function(page){this.updateConfig(page);if(!this.pageCalledYet){this._ready=false;this.pageCalledYet=true;this._initialize()}else{var props=page.properties();window.pSUPERFLY.virtualPage(props.path)}};Chartbeat.prototype.updateConfig=function(page){var category=page.category();var author=page.proxy("properties.author");var props=page.properties();var title;if(this.options.sendNameAndCategoryAsTitle){title=page.fullName()||props.title}else{title=props.title}window._sf_async_config=window._sf_async_config||{};if(category)window._sf_async_config.sections=category;if(author)window._sf_async_config.authors=author;if(title)window._sf_async_config.title=title;var _cbq=window._cbq=window._cbq||[];for(var key in props){if(!props.hasOwnProperty(key))continue;if(this.options.subscriberEngagementKeys.indexOf(key)>-1){_cbq.push([key,props[key]])}}};Chartbeat.prototype._initialize=function(){var self=this;var script=this.options.video?"chartbeat_video.js":"chartbeat.js";window._sf_async_config.useCanonical=true;defaults(window._sf_async_config,{domain:this.options.domain,uid:this.options.uid});onBody(function(){window._sf_endpt=(new Date).getTime();self.load({script:script},self.ready)})}},{"@ndhoule/defaults":8,"@segment/analytics.js-integration":212,"on-body":1147}],212:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":213,"./statics":214,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:216,"slug-component":1165}],213:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],214:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:215,dup:51}],215:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],216:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],217:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var each=require("@ndhoule/each");var is=require("is");var CleverTap=module.exports=integration("CleverTap").global("clevertap").option("clevertap_account_id","").option("region","").tag("http",'<script src="http://static.clevertap.com/js/a.js">').tag("https",'<script src="https://d2r1yp2w7bby2u.cloudfront.net/js/a.js">');CleverTap.prototype.initialize=function(){window.clevertap={event:[],profile:[],account:[],onUserLogin:[],notifications:[]};window.clevertap.enablePersonalization=true;window.clevertap.account.push({id:this.options.clevertap_account_id});var region=this.options.region;if(region&&is.string(region)){window.clevertap.region=region.replace(".","")}var protocol=useHttps()?"https":"http";this.load(protocol,this.ready)};CleverTap.prototype.loaded=function(){return!!window.clevertap&&window.clevertap.logout!=="undefined"};CleverTap.prototype.identify=function(identify){var traitAliases={id:"Identity",name:"Name",email:"Email",phone:"Phone",gender:"Gender",birthday:"DOB",avatar:"Photo"};var traits=identify.traits(traitAliases);var supportedTraits={};each(function(value,key){if(!is.object(value))supportedTraits[key]=value},traits);window.clevertap.profile.push({Site:supportedTraits})};CleverTap.prototype.alias=function(alias){window.clevertap.profile.push({Site:{Identity:alias.to()}})};CleverTap.prototype.track=function(track){var props=track.properties();var supportedProps={};each(function(value,key){if(!is.object(value)&&!is.array(value))supportedProps[key]=value},props);window.clevertap.event.push(track.event(),supportedProps)};CleverTap.prototype.orderCompleted=function(track){var transaction=track.properties({order_id:"Charged ID",products:"Items"});transaction.Amount=track.total()||track.properties().revenue;window.clevertap.event.push("Charged",transaction)}},{"@ndhoule/each":10,"@segment/analytics.js-integration":218,is:1131,"use-https":1180}],218:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":219,"./statics":220,"@ndhoule/defaults":8,"component-bind":1109,debug:221,dup:49,extend:224,"slug-component":1165}],219:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],220:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:223,dup:51}],221:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":222,_process:1149,dup:43}],222:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:225}],223:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],224:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],225:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],226:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var Clicky=module.exports=integration("Clicky").assumesPageview().global("clicky").global("clicky_site_ids").global("clicky_custom").option("siteId",null).tag('<script src="//static.getclicky.com/js"><\/script>');Clicky.prototype.initialize=function(){var user=this.analytics.user();window.clicky_site_ids=window.clicky_site_ids||[this.options.siteId];this.identify(new Identify({userId:user.id(),traits:user.traits()}));this.load(this.ready)};Clicky.prototype.loaded=function(){return isObject(window.clicky)};Clicky.prototype.page=function(page){var properties=page.properties();var name=page.fullName();window.clicky.log(properties.path,name||properties.title)};Clicky.prototype.identify=function(identify){window.clicky_custom=window.clicky_custom||{};window.clicky_custom.session=window.clicky_custom.session||{};var traits=identify.traits();var username=identify.username();var email=identify.email();var name=identify.name();if(username||email||name)traits.username=username||email||name;extend(window.clicky_custom.session,traits)};Clicky.prototype.track=function(track){window.clicky.goal(track.event(),track.revenue())}},{"@ndhoule/extend":13,"@segment/analytics.js-integration":227,isobject:233,"segmentio-facade":1158}],227:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":228,"./statics":229,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],228:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":230,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],229:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:231,dup:42}],230:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],231:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],232:[function(require,module,exports){arguments[4][124][0].apply(exports,arguments)},{dup:124}],233:[function(require,module,exports){arguments[4][125][0].apply(exports,arguments)},{dup:125,isarray:232}],234:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var trample=require("@segment/trample");var Comscore=module.exports=integration("comScore").global("_comscore").global("COMSCORE").option("c1","2").option("c2","").option("comscorekw","").option("consentFlag","").tag("https",'<script src="https://sb.scorecardresearch.com/cs/{{ c2 }}/beacon.js">').tag("http",'<script src="https://sb.scorecardresearch.com/cs/{{ c2 }}/beacon.js">');Comscore.prototype.initialize=function(){this.pageCalledYet=false;this._ready=true};Comscore.prototype.loaded=function(){return!!window.COMSCORE};Comscore.prototype.page=function(page){this.comScoreParams=this.mapComscoreParams(page);if(!this.pageCalledYet){this._ready=false;this.pageCalledYet=true;this._initialize()}else{window.COMSCORE.beacon(this.comScoreParams)}};Comscore.prototype._initialize=function(){window._comscore=window._comscore||[];if(Object.keys(this.comScoreParams).length>0){window._comscore.push(this.comScoreParams)}var tagName=useHttps()?"https":"http";this.load(tagName,this.ready)};Comscore.prototype.mapComscoreParams=function(page){var beaconParamMap=this.options.beaconParamMap;var properties=page.properties();var flatProperties=trample(page.properties());var flatContext=trample(page.context());var consentValue;var comScoreParams={};Object.keys(beaconParamMap).forEach(function(property){if(property in properties){var key=beaconParamMap[property];var value=properties[property];comScoreParams[key]=value}});if(this.options.consentFlag){if(flatProperties.hasOwnProperty(this.options.consentFlag)){consentValue=page.proxy("properties."+this.options.consentFlag)}else if(flatContext.hasOwnProperty(this.options.consentFlag)){consentValue=page.proxy("context."+this.options.consentFlag)}if(consentValue!==undefined&&!(String(consentValue).match(/^1(-|Y|N){3}/g)&&String(consentValue).split("")[2]==="-")){if(String(consentValue)==="true"||String(consentValue)==="1"||String(consentValue).match(/^1(-|Y|N){3}/g)&&String(consentValue).split("")[2]==="N"){consentValue="1"}else if(String(consentValue)==="false"||String(consentValue)==="0"||String(consentValue).match(/^1(-|Y|N){3}/g)&&String(consentValue).split("")[2]==="Y"){consentValue="0"}else{consentValue=""}comScoreParams.cs_ucfr=consentValue}}comScoreParams.c1=this.options.c1;comScoreParams.c2=this.options.c2;if(this.options.comscorekw.length){comScoreParams.comscorekw=this.options.comscorekw}return comScoreParams}},{"@segment/analytics.js-integration":235,"@segment/trample":1105,"use-https":1180}],235:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":236,"./statics":237,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],236:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":238,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],237:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:239,dup:42}],238:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],239:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],240:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("$CVO");var Convertro=module.exports=integration("Convertro").global("$CVO").global("__cvo").option("account","").option("hybridAttributionModel",false).mapping("events").tag('<script src="//d1ivexoxmp59q7.cloudfront.net/{{ account }}/live.js">');Convertro.prototype.initialize=function(){this.load(this.ready)};Convertro.prototype.loaded=function(){return typeof(window.$CVO&&window.$CVO.trackEvent)==="function"};Convertro.prototype.identify=function(identify){if(!identify.userId())return;push("trackUser",identify.traits())};Convertro.prototype.track=function(track){var events=this.events(track.event());var revenue=track.revenue();var total=track.total();each(function(type){push("trackEvent",{amount:total||revenue,id:track.orderId(),type:type})},events)};Convertro.prototype.orderCompleted=function(track){var repeat=track.proxy("properties.repeat");var amount=track.total()||track.revenue();var id=track.orderId();if(typeof repeat==="boolean"){push("trackEvent",{id:id,type:repeat?"sale.repeat":"sale.new",amount:amount})}if(typeof repeat!=="boolean"||this.options.hybridAttributionModel){push("trackEvent",{id:id,type:"sale",amount:amount})}}},{"@ndhoule/each":10,"@segment/analytics.js-integration":241,"global-queue":1127}],241:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":242,"./statics":243,"@ndhoule/defaults":8,"component-bind":1109,debug:244,dup:49,extend:247,"slug-component":1165}],242:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],243:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:246,dup:51}],244:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":245,_process:1149,dup:43}],245:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:248}],246:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],247:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],248:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],249:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var CrazyEgg=module.exports=integration("Crazy Egg").assumesPageview().global("CE2").option("accountNumber","").tag('<script src="//script.crazyegg.com/pages/scripts/{{ path }}.js?{{ cacheBuster }}">');CrazyEgg.prototype.initialize=function(){var number=this.options.accountNumber;var path=number.slice(0,4)+"/"+number.slice(4);var cacheBuster=Math.floor((new Date).getTime()/36e5);this.load({path:path,cacheBuster:cacheBuster},this.ready)};CrazyEgg.prototype.loaded=function(){return!!window.CE2}},{"@segment/analytics.js-integration":250}],250:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":251,"./statics":252,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],251:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":253,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],252:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:254,dup:42}],253:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],254:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],255:[function(require,module,exports){"use strict";var objCase=require("obj-case");var extend=require("@ndhoule/extend");var values=require("@ndhoule/values");var pick=require("@ndhoule/pick");var each=require("@ndhoule/each");var md5=require("md5");var isEmail=require("is-email");var useHttps=require("use-https");var is=require("is");var integration=require("@segment/analytics.js-integration");var ipadRegex=/iPad/;var mobileRegex=/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Silk/;var Criteo=module.exports=integration("Criteo").option("account","").option("homeUrl","").option("supportingUserData",{}).option("supportingPageData",{}).tag("http",'<script src="http://static.criteo.net/js/ld/ld.js">').tag("https",'<script src="https://static.criteo.net/js/ld/ld.js">');Criteo.prototype.initialize=function(){var account=this.options.account;window.criteo_q=window.criteo_q||[];window.criteo_q.push({event:"setAccount",account:account});window.criteo_q.push({event:"setSiteType",type:getDeviceType()});var protocol=useHttps()?"https":"http";this.load(protocol,this.ready)};Criteo.prototype.loaded=function(){return!!(window.criteo_q&&window.criteo_q.push!==Array.prototype.push)};Criteo.prototype.page=function(page){var homeUrl=this.options.homeUrl;var pageName=(page.name()||"").toLowerCase();var path=page.path();var url=page.url();var event=[{event:"viewHome"}];var payload=[];var supportingPageData=this.options.supportingPageData;var properties=page.properties(this.options.supportingPageData);var extraData=pick(values(supportingPageData),properties);if(!is.empty(extraData)){window.criteo_q.push(extend(extraData,{event:"setData"}))}if(url===homeUrl||pageName==="home"||path==="/"){payload=event.concat(this.setExtraData(page));window.criteo_q.push.apply(window.criteo_q,payload)}};Criteo.prototype.track=function(track){var eventMappings=this.options.eventMappings||{};var event=track.event();var eventTypeMappings={viewItem:"productViewed",viewList:"productListViewed",viewBasket:"cartViewed",trackTransaction:"orderCompleted"};var eventType=eventMappings[event];if(eventTypeMappings[eventType]){return this[eventTypeMappings[eventType]](track)}};Criteo.prototype.productViewed=function(track){var productId=track.productId()||"";if(typeof productId==="string"){productId=productId.trim()}if(!productId){return}var event=[{event:"viewItem",item:productId}];var payload=[];payload=event.concat(this.setExtraData());window.criteo_q.push.apply(window.criteo_q,payload)};Criteo.prototype.productListViewed=function(track){var products=track.products()||[];var productIds=[];each(function(product){var id=objCase.find(product,"productId");if(id)productIds.push(id)},products);var event=[{event:"viewList",item:productIds}];var payload=[];payload=event.concat(this.setExtraData());window.criteo_q.push.apply(window.criteo_q,payload)};Criteo.prototype.cartViewed=function(track){var products=getProductMetadata(track);var event=[{event:"viewBasket",item:products}];var payload=[];payload=event.concat(this.setExtraData());window.criteo_q.push.apply(window.criteo_q,payload)};Criteo.prototype.orderCompleted=function(track){var orderId=objCase.find(track.properties(),"orderId");var products=getProductMetadata(track);var event=[{event:"trackTransaction",id:orderId||"",item:products}];var payload=[];payload=event.concat(this.setExtraData());window.criteo_q.push.apply(window.criteo_q,payload)};Criteo.prototype.setExtraData=function(){var ret=[];var extraData={};var userId=this.analytics.user().id();var traits=this.analytics.user().traits();if(traits.email){ret.push({event:"setHashedEmail",email:md5(traits.email)});delete traits.email}else if(userId&&!isEmail(userId)){ret.push({event:"setCustomerId",id:userId})}var supportingUserData=this.options.supportingUserData;each(function(value,key){var trait=objCase.find(traits,key);if(trait)extraData[value]=trait},supportingUserData);if(!is.empty(extraData)){ret.push(extend(extraData,{event:"setData"}))}return ret};function getProductMetadata(track){var products=track.proxy("properties.products")||[];products=products.map(function(product){var id=objCase.find(product,"productId")||"";var price=product.price||"";var quantity=product.quantity||"";return{id:id,price:price,quantity:quantity}});return products}function getDeviceType(){if(!navigator||!navigator.userAgent){return"d"}if(ipadRegex.test(navigator.userAgent)){return"t"}if(mobileRegex.test(navigator.userAgent)){return"m"}return"d"}},{"@ndhoule/each":10,"@ndhoule/extend":13,"@ndhoule/pick":18,"@ndhoule/values":20,"@segment/analytics.js-integration":256,is:1131,"is-email":263,md5:1137,"obj-case":1143,"use-https":1180}],256:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":257,"./statics":258,"@ndhoule/defaults":8,"component-bind":1109,debug:259,dup:49,extend:262,"slug-component":1165}],257:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],258:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:261,dup:51}],259:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":260,_process:1149,dup:43}],260:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:264}],261:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],262:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],263:[function(require,module,exports){"use strict";var matcher=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function isEmail(string){return matcher.test(string)}module.exports=isEmail},{}],264:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],265:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var Track=require("segmentio-facade").Track;var bind=require("component-bind");var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var iso=require("@segment/to-iso-string");var push=require("global-queue")("_curebitq");var throttle=require("throttleit");var when=require("do-when");var Curebit=module.exports=integration("Curebit").global("_curebitq").global("curebit").option("campaigns",{}).option("device","").option("iframeBorder",0).option("iframeHeight","480").option("iframeId","curebit_integration").option("iframeWidth","100%").option("insertIntoId","").option("responsive",true).option("server","https://www.curebit.com").option("siteId","").option("customUrl","").tag('<script src="{{ src }}">');Curebit.prototype.initialize=function(){var url=this.options.customUrl||"//d2jjzw81hqbuqv.cloudfront.net/integration/curebit-1.0.min.js";push("init",{site_id:this.options.siteId,server:this.options.server});this.load({src:url},this.ready);this.page=throttle(bind(this,this.page),250)};Curebit.prototype.loaded=function(){return!!window.curebit};Curebit.prototype.injectIntoId=function(url,id,fn){when(function(){return document.getElementById(id)},function(){var script=document.createElement("script");script.src=url;var parent=document.getElementById(id);parent.appendChild(script);onload(script,fn)})};Curebit.prototype.page=function(){var user=this.analytics.user();var campaigns=this.options.campaigns;var path=window.location.pathname;if(!campaigns[path])return;var tags=(campaigns[path]||"").split(",");if(!tags.length)return;var settings={responsive:this.options.responsive,device:this.options.device,campaign_tags:tags,iframe:{width:this.options.iframeWidth,height:this.options.iframeHeight,id:this.options.iframeId,frameborder:this.options.iframeBorder,container:this.options.insertIntoId}};var identify=new Identify({userId:user.id(),traits:user.traits()});if(identify.email()){settings.affiliate_member={email:identify.email(),first_name:identify.firstName(),last_name:identify.lastName(),customer_id:identify.userId()}}push("register_affiliate",settings)};Curebit.prototype.orderCompleted=function(track){var user=this.analytics.user();var orderId=track.orderId();var products=track.products();var props=track.properties();var items=[];var identify=new Identify({traits:user.traits(),userId:user.id()});each(function(product){var track=new Track({properties:product});items.push({product_id:track.productId()||track.id()||track.sku(),quantity:track.quantity(),image_url:product.image,price:track.price(),title:track.name(),url:product.url})},products);push("register_purchase",{order_date:iso(props.date||new Date),order_number:orderId,coupon_code:track.coupon(),subtotal:track.total(),customer_id:identify.userId(),first_name:identify.firstName(),last_name:identify.lastName(),email:identify.email(),items:items})}},{"@ndhoule/each":10,"@segment/analytics.js-integration":266,"@segment/to-iso-string":1103,"component-bind":1109,"do-when":1125,"global-queue":1127,"segmentio-facade":1158,throttleit:1167}],266:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":267,"./statics":268,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:270,"slug-component":1165}],267:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],268:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:269,dup:51}],269:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],270:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],271:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var alias=require("@segment/alias");var convertDates=require("@segment/convert-dates");var integration=require("@segment/analytics.js-integration");var MAX_YEAR_SUPPORTED_AS_UNIX=1970;var Customerio=module.exports=integration("Customer.io").global("_cio").option("siteId","").option("datacenter","").tag("eu-tag",'<script id="cio-tracker" src="https://assets.customer.io/assets/track-eu.js" data-site-id="{{ siteId }}">').tag("global-tag",'<script id="cio-tracker" src="https://assets.customer.io/assets/track.js" data-site-id="{{ siteId }}">');Customerio.prototype.initialize=function(){window._cio=window._cio||[];(function(){var a,b,c;a=function(f){return function(){window._cio.push([f].concat(Array.prototype.slice.call(arguments,0)))}};b=["identify","track"];for(c=0;c<b.length;c++){window._cio[b[c]]=a(b[c])}})();if(this.options.datacenter==="eu"&&this.templates["eu-tag"]){this.load("eu-tag",this.ready)}else{this.load("global-tag",this.ready)}};Customerio.prototype.loaded=function(){return!!(window._cio&&window._cio.push!==Array.prototype.push)};Customerio.prototype.page=function(page){var name=page.name()||page.url();window._cio.page(name,page.properties())};Customerio.prototype.identify=function(identify){if(!identify.userId())return this.debug("user id required");var traits=identify.traits({createdAt:"created"});traits=alias(traits,{created:"created_at"});traits=convertDates(traits,convertDate);window._cio.identify(traits)};Customerio.prototype.group=function(group){var traits=group.traits();var user=this.analytics.user();traits=alias(traits,function(trait){return"Group "+trait});this.identify(new Identify({userId:user.id(),traits:traits}))};Customerio.prototype.track=function(track){var properties=track.properties();properties=convertDates(properties,convertDate);window._cio.track(track.event(),properties)};function convertDate(date){if(date.getFullYear()<MAX_YEAR_SUPPORTED_AS_UNIX){return date.toISOString()}return Math.floor(date.getTime()/1e3)}},{"@segment/alias":21,"@segment/analytics.js-integration":272,"@segment/convert-dates":1087,"segmentio-facade":1158}],272:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":273,"./statics":274,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],273:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":275,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],274:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:276,dup:42}],275:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],276:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],277:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var Cxense=module.exports=integration("Cxense").option("customerPrefix","").option("siteId","").option("persistedQueryId","").option("origin","").option("setExternalId",false).tag('<script src="//cdn.cxense.com/cx.js">');Cxense.prototype.initialize=function(){window.cX=window.cX||{};window.cX.callQueue=window.cX.callQueue||[];window.cX.callQueue.push(["setSiteId",this.options.siteId]);window.cX.callQueue.push(["setEventAttributes",{origin:this.options.customerPrefix+"-"+this.options.origin,persistedQueryId:this.options.persistedQueryId}]);this.load(this.ready)};Cxense.prototype.loaded=function(){return!!(window.cX&&window.cX.callQueue.push!==Array.prototype.push)};Cxense.prototype.page=function(page){var properties=page.properties();delete properties.url;delete properties.referrer;var payload={};for(var key in properties){if(properties.hasOwnProperty(key)){var property=properties[key];if(is.object(property))continue;if(is.array(property)&&property.some(is.object))continue;payload[key]=property}}window.cX.callQueue.push(["setCustomParameters",payload]);var id=this.analytics.user().id();if(id&&this.options.setExternalId){window.cX.callQueue.push(["addExternalId",{id:id,type:this.options.customerPrefix}])}var latitude=page.proxy("context.location.latitude");var longitude=page.proxy("context.location.longitude");if(latitude&&longitude){window.cX.callQueue.push(["setGeoPosition",latitude,longitude])}window.cX.callQueue.push(["sendPageViewEvent",{location:page.url(),referrer:page.referrer(),useAutoRefreshCheck:false}])};Cxense.prototype.track=function(track){var properties=track.properties();var payload={};for(var key in properties){if(properties.hasOwnProperty(key)){var property=properties[key];if(is.number(property)||is.string(property)){payload[key]=property}else if(is.bool(property)||is.date(property)){payload[key]=property.toString()}}}window.cX.callQueue.push(["sendEvent",track.event(),payload])}},{"@segment/analytics.js-integration":278,is:1131}],278:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":279,"./statics":280,"@ndhoule/defaults":8,"component-bind":1109,debug:281,dup:49,extend:284,"slug-component":1165}],279:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],280:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:283,dup:51}],281:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":282,_process:1149,dup:43}],282:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:285}],283:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],284:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],285:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],286:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("@ndhoule/each");var foldl=require("@ndhoule/foldl");var qs=require("component-querystring");var find=require("obj-case").find;var toNoCase=require("to-no-case");var Floodlight=module.exports=integration("DoubleClick Floodlight").option("source","").option("getDoubleClickId",false).option("googleNetworkId","").option("segmentWriteKey","").option("useTransactionCounting",false).tag("counter",'<iframe src="https://{{ src }}.fls.doubleclick.net/activityi;src={{ src }};type={{ type }};cat={{ cat }};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord={{ ord }}{{ customVariables }}?">').tag("sales",'<iframe src="https://{{ src }}.fls.doubleclick.net/activityi;src={{ src }};type={{ type }};cat={{ cat }};qty={{ qty }};cost={{ cost }};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord={{ ord }}{{ customVariables }}?">').tag("doubleclick id",'<img src="//cm.g.doubleclick.net/pixel?google_nid={{ googleNetworkId }}&segment_write_key={{ segmentWriteKey }}&google_hm={{ partnerProvidedId }}"/>');Floodlight.prototype.initialize=function(){if(this.options.getDoubleClickId&&this.options.googleNetworkId){this.load("doubleclick id",{googleNetworkId:this.options.googleNetworkId,segmentWriteKey:this.options.segmentWriteKey,partnerProvidedId:btoa(this.analytics.user().anonymousId())})}this.ready()};Floodlight.prototype.track=function(track){var mappedEvents=[];if(!this.options.events||!this.options.events.length)return;for(var i=0;i<this.options.events.length;i++){var item=this.options.events[i];if(item.value){if(toNoCase(item.key)===toNoCase(track.event()))mappedEvents.push(item.value)}else if(toNoCase(item.event)===toNoCase(track.event())){mappedEvents.push(item)}}var settings=this.options;if(!mappedEvents.length||!settings.source)return;var properties=track.properties();var self=this;var tags=foldl(function(conversions,tag){var type=tag.type||settings.groupTag;var event=tag.event;var cat=tag.cat||settings.activityTag;if(!event||!cat||!type)return conversions;var matchedVariables={};each(function(variable){var floodlightProp=variable.value;var segmentProp=variable.key.match(/{{(.*)}}/)||variable.key;if(variable.key.includes("$")){segmentProp=variable.key.split(".$.")}var segmentPropValue;if(Array.isArray(segmentProp)&&segmentProp[0]==="products"){segmentProp=segmentProp.pop();var productPropArray=[];each(function(product){if(product[segmentProp]){productPropArray.push(product[segmentProp])}},track.products());segmentPropValue=productPropArray.join(",")}else if(Array.isArray(segmentProp)){segmentProp=segmentProp.pop();if(segmentProp==="userId"){segmentPropValue=self.analytics.user().id()}else{segmentPropValue=find(track.json(),segmentProp)}}else{segmentPropValue=properties[segmentProp]}if(segmentPropValue){matchedVariables[floodlightProp]=segmentPropValue}},tag.customVariable);var customVariables=qs.stringify(matchedVariables).replace(/&/g,";");if(tag.customVariable.length)customVariables=";"+customVariables;var tagParams={src:settings.source,type:type,cat:cat,customVariables:customVariables};if(tag.isSalesTag){tagParams._type="sales";var quantity=0;if(track.products().length){each(function(product){quantity+=product.quantity||0},track.products())}else if(properties.quantity){quantity=properties.quantity}if(quantity)tagParams.qty=quantity;if(settings.useTransactionCounting)tagParams.qty=1;if(track.revenue())tagParams.cost=track.revenue();tagParams.ord=track.proxy(tag.ordKey)}else{tagParams.ord=Math.random()*1e19}conversions.push(tagParams);return conversions},[],mappedEvents);each(function(tagParams){if(tagParams._type==="sales")return self.load("sales",tagParams);return self.load("counter",tagParams)},tags)};Floodlight.prototype.page=function(page){var name=page.fullName();if(name)this.track(page.track(name))}},{"@ndhoule/each":10,"@ndhoule/foldl":14,"@segment/analytics.js-integration":287,"component-querystring":1118,"obj-case":1143,"to-no-case":1171}],287:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":288,"./statics":289,"@ndhoule/defaults":8,"component-bind":1109,debug:290,dup:49,extend:293,"slug-component":1165}],288:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],289:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:292,dup:51}],290:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":291,_process:1149,dup:43}],291:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:294}],292:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],293:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],294:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],295:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var isObject=require("isobject");var push=require("global-queue")("_dcq");var each=require("@ndhoule/each");var find=require("obj-case").find;var Drip=module.exports=integration("Drip").global("_dc").global("_dcq").global("_dcqi").global("_dcs").option("account","").tag('<script src="//tag.getdrip.com/{{ account }}.js">');Drip.prototype.initialize=function(){window._dcq=window._dcq||[];window._dcs=window._dcs||{};window._dcs.account=this.options.account;this.load(this.ready)};Drip.prototype.loaded=function(){return isObject(window._dc)};Drip.prototype.track=function(track){var props=format(track.properties());var cents=Math.round(track.revenue()*100);if(cents)props.value=cents;delete props.revenue;push("track",track.event(),props)};Drip.prototype.identify=function(identify){if(!identify.email())return;push("identify",format(identify.traits()));var dripCampaignId=find(identify.options(this.name),"campaignId")||this.options.campaignId;if(dripCampaignId)push("subscribe",{campaign_id:dripCampaignId,fields:identify.traits()})};function format(obj){var ret={};each(function(value,key){var formattedKey=key.replace(/\s/g,"_");ret[formattedKey]=value},obj);return ret}},{"@ndhoule/each":10,"@segment/analytics.js-integration":296,"global-queue":1127,isobject:302,"obj-case":1143}],296:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":297,"./statics":298,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:300,"slug-component":1165}],297:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],298:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:299,dup:51}],299:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],300:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],301:[function(require,module,exports){arguments[4][124][0].apply(exports,arguments)},{dup:124}],302:[function(require,module,exports){arguments[4][125][0].apply(exports,arguments)},{dup:125,isarray:301}],303:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var objCase=require("obj-case");var each=require("@ndhoule/each");var objectKeys=require("@ndhoule/keys");var Elevio=module.exports=integration("Elevio").option("accountId","").global("_elev").tag('<script src="//static.elev.io/js/v3.js">');Elevio.prototype.initialize=function(){var self=this;window._elev=window._elev||{};window._elev.account_id=this.options.accountId;window._elev.segment=true;this.load(function(){tick(self.ready)})};Elevio.prototype.loaded=function(){return!!window._elev};Elevio.prototype.identify=function(identify){var name=identify.name();var email=identify.email();var plan=identify.proxy("traits.plan");var traits=identify.traits();var removeTraits=["id","name","firstName","lastName","email"];each(function(traitItem){if(traits.hasOwnProperty(traitItem)){objCase.del(traits,traitItem)}},removeTraits);var user={};user.via="segment";if(email)user.email=email;if(name)user.name=name;if(plan)user.plan=[plan];if(plan)user.groups=[plan];if(objectKeys(traits).length>0)user.traits=traits;window._elev.user=user;if(typeof window._elev.setUser==="function"){window._elev.setUser(user)}}},{"@ndhoule/each":10,"@ndhoule/keys":16,"@segment/analytics.js-integration":304,"next-tick":310,"obj-case":1143}],304:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":305,"./statics":306,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:309,"slug-component":1165}],305:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":307,"to-no-case":1171}],306:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:308,dup:51}],307:[function(require,module,exports){(function(process,setImmediate){(function(){"use strict";var callable,byObserver;callable=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn};byObserver=function(Observer){var node=document.createTextNode(""),queue,i=0;new Observer(function(){var data;if(!queue)return;data=queue;queue=null;if(typeof data==="function"){data();return}data.forEach(function(fn){fn()})}).observe(node,{characterData:true});return function(fn){callable(fn);if(queue){if(typeof queue==="function")queue=[queue,fn];else queue.push(fn);return}queue=fn;node.data=i=++i%2}};module.exports=function(){if(typeof process!=="undefined"&&process&&typeof process.nextTick==="function"){return process.nextTick}if(typeof document==="object"&&document){if(typeof MutationObserver==="function"){return byObserver(MutationObserver)}if(typeof WebKitMutationObserver==="function"){return byObserver(WebKitMutationObserver)}}if(typeof setImmediate==="function"){return function(cb){setImmediate(callable(cb))}}if(typeof setTimeout==="function"){return function(cb){setTimeout(callable(cb),0)}}return null}()}).call(this)}).call(this,require("_process"),require("timers").setImmediate)},{_process:1149,timers:1168}],308:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],309:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],310:[function(require,module,exports){(function(process,setImmediate){(function(){"use strict";var callable,byObserver;callable=function(fn){if(typeof fn!=="function")throw new TypeError(fn+" is not a function");return fn};byObserver=function(Observer){var node=document.createTextNode(""),queue,currentQueue,i=0;new Observer(function(){var callback;if(!queue){if(!currentQueue)return;queue=currentQueue}else if(currentQueue){queue=currentQueue.concat(queue)}currentQueue=queue;queue=null;if(typeof currentQueue==="function"){callback=currentQueue;currentQueue=null;callback();return}node.data=i=++i%2;while(currentQueue){callback=currentQueue.shift();if(!currentQueue.length)currentQueue=null;callback()}}).observe(node,{characterData:true});return function(fn){callable(fn);if(queue){if(typeof queue==="function")queue=[queue,fn];else queue.push(fn);return}queue=fn;node.data=i=++i%2}};module.exports=function(){if(typeof process==="object"&&process&&typeof process.nextTick==="function"){return process.nextTick}if(typeof document==="object"&&document){if(typeof MutationObserver==="function")return byObserver(MutationObserver);if(typeof WebKitMutationObserver==="function")return byObserver(WebKitMutationObserver)}if(typeof setImmediate==="function"){return function(cb){setImmediate(callable(cb))}}if(typeof setTimeout==="function"||typeof setTimeout==="object"){return function(cb){setTimeout(callable(cb),0)}}return null}()}).call(this)}).call(this,require("_process"),require("timers").setImmediate)},{_process:1149,timers:1168}],311:[function(require,module,exports){"use strict";var push=require("global-queue")("_elqQ");var integration=require("@segment/analytics.js-integration");var Eloqua=module.exports=integration("Eloqua").assumesPageview().global("_elq").global("_elqQ").option("siteId","").tag('<script src="//img.en25.com/i/elqCfg.min.js">');Eloqua.prototype.initialize=function(){push("elqSetSiteId",this.options.siteId);this.load(this.ready)};Eloqua.prototype.loaded=function(){return!!window._elqQ};Eloqua.prototype.page=function(page){var props=page.properties();push("elqTrackPageView",props.url,props.referrer)}},{"@segment/analytics.js-integration":312,"global-queue":1127}],312:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":313,"./statics":314,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:315,dup:40,"slug-component":1165}],313:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":317,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],314:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:318,dup:42}],315:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":316,_process:1149,dup:43}],316:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:319}],317:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],318:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],319:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],320:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var EmailAptitude=module.exports=integration("Email Aptitude").assumesPageview().global("_ea").global("EmailAptitudeTracker").option("accountId","").tag('<script src="//tracker.emailaptitude.com/ea.js">');EmailAptitude.prototype.initialize=function(){window._ea=window._ea||{};window._ea.accountId=this.options.accountId;this.load(this.ready)};EmailAptitude.prototype.loaded=function(){return!!window.EmailAptitudeTracker}},{"@segment/analytics.js-integration":321}],321:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":322,"./statics":323,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:324,dup:40,"slug-component":1165}],322:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":326,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],323:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:327,dup:42}],324:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":325,_process:1149,dup:43}],325:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:328}],326:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],327:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],328:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],329:[function(require,module,exports){"use strict";var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_errs");var Errorception=module.exports=integration("Errorception").assumesPageview().global("_errs").option("projectId","").option("meta",true).tag('<script src="//beacon.errorception.com/{{ projectId }}.js">');Errorception.prototype.initialize=function(){window._errs=window._errs||[this.options.projectId];if(typeof window.onerror==="function"&&window.onerror!==push){var oldOnerror=window.onerror;window.onerror=function(){oldOnerror.apply(window,arguments);push.apply(window,arguments)}}else{window.onerror=push}this.load(this.ready)};Errorception.prototype.loaded=function(){return!!(window._errs&&window._errs.push!==Array.prototype.push)};Errorception.prototype.identify=function(identify){if(!this.options.meta)return;var traits=identify.traits();window._errs=window._errs||[];window._errs.meta=window._errs.meta||{};extend(window._errs.meta,traits)}},{"@ndhoule/extend":330,"@segment/analytics.js-integration":331,"global-queue":1127}],330:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],331:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":332,"./statics":333,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":334,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],332:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":335,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],333:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:336,dup:42}],334:[function(require,module,exports){arguments[4][13][0].apply(exports,arguments)},{dup:13}],335:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],336:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],337:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_aaq");var Evergage=module.exports=integration("Evergage").assumesPageview().global("_aaq").option("account","").option("dataset","").tag('<script src="//cdn.evergage.com/beacon/{{ account }}/{{ dataset }}/scripts/evergage.min.js">');Evergage.prototype.initialize=function(){var account=this.options.account;var dataset=this.options.dataset;window._aaq=window._aaq||[];push("setEvergageAccount",account);push("setDataset",dataset);push("setUseSiteConfig",true);this.load(this.ready)};Evergage.prototype.loaded=function(){return!!window._aaq};Evergage.prototype.page=function(page){var props=page.properties();var name=page.name();if(name)push("namePage",name);each(function(value,key){push("setCustomField",key,value,"page")},props);window.Evergage.init(true)};Evergage.prototype.identify=function(identify){var id=identify.userId();if(!id)return;push("setUser",id);var traits=identify.traits({email:"userEmail",name:"userName"});each(function(value,key){push("setUserField",key,value,"page")},traits)};Evergage.prototype.group=function(group){var props=group.traits();var id=group.groupId();if(!id)return;push("setCompany",id);each(function(value,key){push("setAccountField",key,value,"page")},props)};Evergage.prototype.track=function(track){push("trackAction",track.event(),track.properties())}},{"@ndhoule/each":10,"@segment/analytics.js-integration":338,"global-queue":1127}],338:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":339,"./statics":340,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],339:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":341,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],340:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:342,dup:42}],341:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],342:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],343:[function(require,module,exports){"use strict";var domify=require("domify");var each=require("@ndhoule/each");var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var json=JSON;var Extole=module.exports=integration("Extole").global("extole").option("clientId","").mapping("events").tag("main",'<script src="//tags.extole.com/{{ clientId }}/core.js">');Extole.prototype.initialize=function(){if(this.loaded())return this.ready();this.load("main",this.ready)};Extole.prototype.loaded=function(){return!!window.extole};Extole.prototype.track=function(track){var user=this.analytics.user();var traits=user.traits();var userId=user.id();var email=traits.email;var self=this;if(!userId&&!email){return this.debug("User must be identified before `#track` calls")}var event=track.event();var extoleEvents=this.events(event);if(!extoleEvents.length){return this.debug("No events found for %s",event)}each(function(extoleEvent){self._registerConversion(self._createConversionTag({type:extoleEvent,params:self._formatConversionParams(event,email,userId,track.properties())}))},extoleEvents)};Extole.prototype._registerConversion=function(conversionTag){if(window.extole.main&&window.extole.main.fireConversion){return window.extole.main.fireConversion(conversionTag)}if(window.extole.initializeGo){window.extole.initializeGo().andWhenItsReady(function(){window.extole.main.fireConversion(conversionTag)})}};Extole.prototype._formatConversionParams=function(event,email,userId,props){var properties=props;var total;if(properties.total){total=properties.total;delete properties.total;properties["tag:cart_value"]=total}return extend({"tag:segment_event":event,e:email,partner_conversion_id:userId},properties)};Extole.prototype._createConversionTag=function(conversion){return domify('<script type="extole/conversion">'+json.stringify(conversion)+"<\/script>")}},{"@ndhoule/each":10,"@ndhoule/extend":13,"@segment/analytics.js-integration":344,domify:348}],344:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":345,"./statics":346,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],345:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":347,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],346:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:348,dup:42}],347:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],348:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],349:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_fbq");var Facebook=module.exports=integration("Facebook Conversion Tracking").global("_fbq").option("currency","USD").tag('<script src="//connect.facebook.net/en_US/fbds.js">').mapping("events");Facebook.prototype.initialize=function(){window._fbq=window._fbq||[];this.load(this.ready);window._fbq.loaded=true};Facebook.prototype.loaded=function(){return!!(window._fbq&&window._fbq.loaded)};Facebook.prototype.page=function(page){this.track(page.track(page.fullName()))};Facebook.prototype.track=function(track){var event=track.event();var events=this.events(event);var revenue=track.revenue()||0;var self=this;each(function(event){push("track",event,{currency:self.options.currency,value:revenue.toFixed(2)})},events)}},{"@ndhoule/each":10,"@segment/analytics.js-integration":350,"global-queue":1127}],350:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":351,"./statics":352,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],351:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":353,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],352:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:354,dup:42}],353:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],354:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],355:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_fbq");var foldl=require("@ndhoule/foldl");var Track=require("segmentio-facade").Track;var FacebookCustomAudiences=module.exports=integration("Facebook Custom Audiences").global("_fbds").global("_fbq").option("pixelId","").option("currency","USD").mapping("events").tag('<script src="//connect.facebook.net/en_US/fbds.js">');FacebookCustomAudiences.prototype.initialize=function(){var pixelId=this.options.pixelId;window._fbds=window._fbds||{};window._fbds.pixelId=pixelId;window._fbq=window._fbq||[];window._fbq.push(["track","PixelInitialized",{}]);this.load(this.ready)};FacebookCustomAudiences.prototype.loaded=function(){return!!(window._fbq&&Array.prototype.push!==window._fbq.push)};FacebookCustomAudiences.prototype.track=function(track){var event=track.event();var properties=track.properties();window._fbq.push(["track",event,properties])};FacebookCustomAudiences.prototype.productListViewed=function(track){push("track","ViewContent",{content_ids:[String(track.category()||"")],content_type:"product_group"})};FacebookCustomAudiences.prototype.productViewed=function(track){push("track","ViewContent",{content_ids:[String(track.productId()||track.id()||track.sku()||"")],content_type:"product",content_name:String(track.name()),content_category:String(track.category()),currency:String(track.currency()),value:Number(track.value())})};FacebookCustomAudiences.prototype.productAdded=function(track){push("track","AddToCart",{content_ids:[String(track.productId()||track.id()||track.sku()||"")],content_type:"product",content_name:String(track.name()),content_category:String(track.category()),currency:String(track.currency()),value:Number(track.value())})};FacebookCustomAudiences.prototype.orderCompleted=function(track){var contentIds=foldl(function(ret,product){var item=new Track({properties:product});var id=item.productId()||item.id()||item.sku()||"";ret.push(id);return ret},[],track.products());push("track","Purchase",{content_ids:contentIds,content_type:"product",currency:String(track.currency()),value:Number(track.value())})}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":356,"global-queue":1127,"segmentio-facade":1158}],356:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":357,"./statics":358,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:360,"slug-component":1165}],357:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],358:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:359,dup:51}],359:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],360:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],361:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("@ndhoule/each");var reject=require("reject");var camel=require("to-camel-case");var is=require("is");var dateformat=require("dateformat");var Track=require("segmentio-facade").Track;var sha256=require("js-sha256");var FacebookPixel=module.exports=integration("Facebook Pixel").global("fbq").option("pixelId","").option("agent","seg").option("valueIdentifier","value").option("initWithExistingTraits",false).option("traverse",false).option("automaticConfiguration",true).option("whitelistPiiProperties",[]).option("blacklistPiiProperties",[]).option("standardEventsCustomProperties",[]).option("keyForExternalId","").option("userIdAsExternalId",false).option("limitedDataUse",true).mapping("standardEvents").mapping("legacyEvents").mapping("contentTypes").tag('<script src="//connect.facebook.net/en_US/fbevents.js">');var dateFields=["checkinDate","checkoutDate","departingArrivalDate","departingDepartureDate","returningArrivalDate","returningDepartureDate","travelEnd","travelStart"];var defaultPiiProperties=["email","firstName","lastName","gender","city","country","phone","state","zip","birthday"];FacebookPixel.prototype.initialize=function(){window._fbq=function(){if(window.fbq.callMethod){window.fbq.callMethod.apply(window.fbq,arguments)}else{window.fbq.queue.push(arguments)}};window.fbq=window.fbq||window._fbq;window.fbq.push=window.fbq;window.fbq.loaded=true;window.fbq.disablePushState=true;window.fbq.allowDuplicatePageViews=true;window.fbq.agent=this.options.agent;window.fbq.version="2.0";window.fbq.queue=[];this.load(this.ready);if(!this.options.automaticConfiguration){window.fbq("set","autoConfig",false,this.options.pixelId)}if(this.options.limitedDataUse){this.validateAndSetDataProcessing(this.options.dataProcessingOptions||[["LDU"],0,0])}else{window.fbq("dataProcessingOptions",[])}if(this.options.initWithExistingTraits){var traits=this.formatTraits(this.analytics);window.fbq("init",this.options.pixelId,traits)}else{window.fbq("init",this.options.pixelId)}};FacebookPixel.prototype.loaded=function(){return!!(window.fbq&&window.fbq.callMethod)};FacebookPixel.prototype.page=function(){window.fbq("track","PageView")};FacebookPixel.prototype.track=function(track){var self=this;var event=track.event();var revenue=formatRevenue(track.revenue());var payload=this.buildPayload(track);if(track.properties().hasOwnProperty("revenue")){payload.value=formatRevenue(track.revenue());delete payload.revenue}var standard=this.standardEvents(event);var legacy=this.legacyEvents(event);if(![].concat(standard,legacy).length){window.fbq("trackSingleCustom",this.options.pixelId,event,payload,{eventID:track.proxy("messageId")});return}each(function(event){if(event==="Purchase")payload.currency=track.currency();window.fbq("trackSingle",self.options.pixelId,event,payload,{eventID:track.proxy("messageId")})},standard);each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:revenue},{eventID:track.proxy("messageId")})},legacy)};FacebookPixel.prototype.productListViewed=function(track){var self=this;var contentType;var contentIds=[];var contents=[];var products=track.products();var customProperties=this.buildPayload(track,true);if(Array.isArray(products)){products.forEach(function(product){var track=new Track({properties:product});var productId=track.proxy("properties.product_id")||track.productId()||track.id();if(productId){contentIds.push(productId);contents.push({id:productId,quantity:track.quantity()})}})}if(contentIds.length){contentType=["product"]}else{contentIds.push(track.category()||"");contents.push({id:track.category()||"",quantity:1});contentType=["product_group"]}window.fbq("trackSingle",this.options.pixelId,"ViewContent",merge({content_ids:contentIds,content_type:this.getContentType(track,contentType),contents:contents},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.productViewed=function(track){var self=this;var useValue=this.options.valueIdentifier==="value";var customProperties=this.buildPayload(track,true);window.fbq("trackSingle",this.options.pixelId,"ViewContent",merge({content_ids:[track.productId()||track.id()||track.sku()||""],content_type:this.getContentType(track,["product"]),content_name:track.name()||"",content_category:track.category()||"",currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price()),contents:[{id:track.productId()||track.id()||track.sku()||"",quantity:track.quantity(),item_price:track.price()}]},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.productAdded=function(track){var self=this;var useValue=this.options.valueIdentifier==="value";var customProperties=this.buildPayload(track,true);window.fbq("trackSingle",this.options.pixelId,"AddToCart",merge({content_ids:[track.productId()||track.id()||track.sku()||""],content_type:this.getContentType(track,["product"]),content_name:track.name()||"",content_category:track.category()||"",currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price()),contents:[{id:track.productId()||track.id()||track.sku()||"",quantity:track.quantity(),item_price:track.price()}]},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:useValue?formatRevenue(track.value()):formatRevenue(track.price())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.orderCompleted=function(track){var self=this;var products=track.products();var customProperties=this.buildPayload(track,true);var revenue=formatRevenue(track.revenue());var contentType=this.getContentType(track,["product"]);var contentIds=[];var contents=[];for(var i=0;i<products.length;i++){var trackItem=new Track({properties:products[i]});var pId=trackItem.productId()||trackItem.id()||trackItem.sku();contentIds.push(pId);var content={id:pId,quantity:trackItem.quantity()};if(trackItem.price()){content.item_price=trackItem.price()}contents.push(content)}window.fbq("trackSingle",this.options.pixelId,"Purchase",merge({content_ids:contentIds,content_type:contentType,currency:track.currency(),value:revenue,contents:contents,num_items:contentIds.length},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.productsSearched=function(track){var self=this;var customProperties=this.buildPayload(track,true);window.fbq("trackSingle",this.options.pixelId,"Search",merge({search_string:track.proxy("properties.query")},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.checkoutStarted=function(track){var self=this;var products=track.products();var contentIds=[];var contents=[];var contentCategory=track.category();var customProperties=this.buildPayload(track,true);for(var i=0;i<products.length;i++){var trackItem=new Track({properties:products[i]});var pId=trackItem.productId()||trackItem.id()||trackItem.sku();contentIds.push(pId);var content={id:pId,quantity:trackItem.quantity(),item_price:track.price()};if(trackItem.price()){content.item_price=trackItem.price()}contents.push(content)}if(!contentCategory&&products[0]&&products[0].category){contentCategory=products[0].category}window.fbq("trackSingle",this.options.pixelId,"InitiateCheckout",merge({content_category:contentCategory,content_ids:contentIds,content_type:this.getContentType(track,["product"]),contents:contents,currency:track.currency(),num_items:contentIds.length,value:formatRevenue(track.revenue())},customProperties),{eventID:track.proxy("messageId")});each(function(event){window.fbq("trackSingle",self.options.pixelId,event,{currency:track.currency(),value:formatRevenue(track.revenue())},{eventID:track.proxy("messageId")})},this.legacyEvents(track.event()))};FacebookPixel.prototype.getContentType=function(track,defaultValue){var options=track.options("Facebook Pixel");if(options&&options.contentType){return[options.contentType]}var category=track.category();if(!category){var products=track.products();if(products&&products.length){category=products[0].category}}if(category){var mapped=this.contentTypes(category);if(mapped.length){return mapped}}return defaultValue};function formatRevenue(revenue){return Number(revenue||0).toFixed(2)}FacebookPixel.prototype.formatTraits=function formatTraits(analytics){var traits=analytics&&analytics.user().traits();if(!traits)return{};var firstName;var lastName;if(traits.firstName||traits.first_name){firstName=traits.firstName||traits.first_name;lastName=traits.lastName||traits.last_name}else{var nameArray=traits.name&&traits.name.toLowerCase().split(" ")||[];firstName=nameArray.shift();lastName=nameArray.pop()}var gender;if(traits.gender&&is.string(traits.gender)){gender=traits.gender.slice(0,1).toLowerCase()}var birthday=traits.birthday&&dateformat(traits.birthday,"yyyymmdd");var address=traits.address||{};var city=address.city&&address.city.split(" ").join("").toLowerCase();var state=address.state&&address.state.toLowerCase();var postalCode=address.postalCode||address.postal_code;var external_id;if(this.options.keyForExternalId){external_id=traits[this.options.keyForExternalId]}if(!external_id&&this.options.userIdAsExternalId&&analytics){external_id=analytics.user().id()||analytics.user().anonymousId()}return reject({em:traits.email,fn:firstName,ln:lastName,ph:traits.phone,ge:gender,db:birthday,ct:city,st:state,zp:postalCode,external_id:external_id})};FacebookPixel.prototype.buildPayload=function(track,isStandardEvent){var whitelistPiiProperties=this.options.whitelistPiiProperties||[];var blacklistPiiProperties=this.options.blacklistPiiProperties||[];var standardEventsCustomProperties=this.options.standardEventsCustomProperties||[];var customPiiProperties={};for(var i=0;i<blacklistPiiProperties.length;i++){var configuration=blacklistPiiProperties[i];customPiiProperties[configuration.propertyName]=configuration.hashProperty}var payload={};var properties=track.properties();for(var property in properties){if(!properties.hasOwnProperty(property)){continue}if(isStandardEvent&&standardEventsCustomProperties.indexOf(property)<0){continue}var value=properties[property];if(dateFields.indexOf(camel(property))>=0){if(is.date(value)){payload[property]=value.toISOString().split("T")[0];continue}}if(customPiiProperties.hasOwnProperty(property)){if(customPiiProperties[property]&&typeof value==="string"){payload[property]=sha256(value)}continue}var isPropertyPii=defaultPiiProperties.indexOf(property)>=0;var isPropertyWhitelisted=whitelistPiiProperties.indexOf(property)>=0;if(!isPropertyPii||isPropertyWhitelisted){payload[property]=value}}return payload};FacebookPixel.prototype.validateAndSetDataProcessing=function(params){var lenOk=params.length===3;var valOk=Array.isArray(params[0])&&typeof params[1]==="number"&&typeof params[2]==="number";if(lenOk&&valOk){window.fbq("dataProcessingOptions",params[0],params[1],params[2])}else{window.fbq("dataProcessingOptions",["LDU"],0,0)}};function merge(obj1,obj2){var res={};for(var propObj1 in obj1){if(obj1.hasOwnProperty(propObj1)){res[propObj1]=obj1[propObj1]}}for(var propObj2 in obj2){if(obj2.hasOwnProperty(propObj2)&&!res.hasOwnProperty(propObj2)){res[propObj2]=obj2[propObj2]}}return res}FacebookPixel.merge=merge},{"@ndhoule/each":10,"@segment/analytics.js-integration":362,dateformat:367,is:1131,"js-sha256":370,reject:1150,"segmentio-facade":1158,"to-camel-case":1169}],362:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":363,"./statics":364,"@ndhoule/defaults":8,"component-bind":1109,debug:365,dup:49,extend:369,"slug-component":1165}],363:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],364:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:368,dup:51}],365:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":366,_process:1149,dup:43}],366:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:371}],367:[function(require,module,exports){(function(global){"use strict";var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g;var timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g;var timezoneClip=/[^-+\dA-Z]/g;return function(date,mask,utc,gmt){if(arguments.length===1&&kindOf(date)==="string"&&!/\d/.test(date)){mask=date;date=undefined}date=date||new Date;if(!(date instanceof Date)){date=new Date(date)}if(isNaN(date)){throw TypeError("Invalid date")}mask=String(dateFormat.masks[mask]||mask||dateFormat.masks["default"]);var maskSlice=mask.slice(0,4);if(maskSlice==="UTC:"||maskSlice==="GMT:"){mask=mask.slice(4);utc=true;if(maskSlice==="GMT:"){gmt=true}}var _=utc?"getUTC":"get";var d=date[_+"Date"]();var D=date[_+"Day"]();var m=date[_+"Month"]();var y=date[_+"FullYear"]();var H=date[_+"Hours"]();var M=date[_+"Minutes"]();var s=date[_+"Seconds"]();var L=date[_+"Milliseconds"]();var o=utc?0:date.getTimezoneOffset();var W=getWeek(date);var N=getDayOfWeek(date);var flags={d:d,dd:pad(d),ddd:dateFormat.i18n.dayNames[D],dddd:dateFormat.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dateFormat.i18n.monthNames[m],mmmm:dateFormat.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(Math.round(L/10)),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:gmt?"GMT":utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:W,N:N};return mask.replace(token,function(match){if(match in flags){return flags[match]}return match.slice(1,match.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};function pad(val,len){val=String(val);len=len||2;while(val.length<len){val="0"+val}return val}function getWeek(date){var targetThursday=new Date(date.getFullYear(),date.getMonth(),date.getDate());targetThursday.setDate(targetThursday.getDate()-(targetThursday.getDay()+6)%7+3);var firstThursday=new Date(targetThursday.getFullYear(),0,4);firstThursday.setDate(firstThursday.getDate()-(firstThursday.getDay()+6)%7+3);var ds=targetThursday.getTimezoneOffset()-firstThursday.getTimezoneOffset();targetThursday.setHours(targetThursday.getHours()-ds);var weekDiff=(targetThursday-firstThursday)/(864e5*7);return 1+Math.floor(weekDiff)}function getDayOfWeek(date){var dow=date.getDay();if(dow===0){dow=7}return dow}function kindOf(val){if(val===null){return"null"}if(val===undefined){return"undefined"}if(typeof val!=="object"){return typeof val}if(Array.isArray(val)){return"array"}return{}.toString.call(val).slice(8,-1).toLowerCase()}if(typeof define==="function"&&define.amd){define(function(){return dateFormat})}else if(typeof exports==="object"){module.exports=dateFormat}else{global.dateFormat=dateFormat}})(this)},{}],368:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],369:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],370:[function(require,module,exports){(function(process,global){(function(){(function(){"use strict";var ERROR="input is invalid type";var WINDOW=typeof window==="object";var root=WINDOW?window:{};if(root.JS_SHA256_NO_WINDOW){WINDOW=false}var WEB_WORKER=!WINDOW&&typeof self==="object";var NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(NODE_JS){root=global}else if(WEB_WORKER){root=self}var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module==="object"&&module.exports;var AMD=typeof define==="function"&&define.amd;var ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var HEX_CHARS="0123456789abcdef".split("");var EXTRA=[-2147483648,8388608,32768,128];var SHIFT=[24,16,8,0];var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var OUTPUT_TYPES=["hex","array","digest","arrayBuffer"];var blocks=[];if(root.JS_SHA256_NO_NODE_JS||!Array.isArray){Array.isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"}}if(ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(obj){return typeof obj==="object"&&obj.buffer&&obj.buffer.constructor===ArrayBuffer}}var createOutputMethod=function(outputType,is224){return function(message){return new Sha256(is224,true).update(message)[outputType]()}};var createMethod=function(is224){var method=createOutputMethod("hex",is224);if(NODE_JS){method=nodeWrap(method,is224)}method.create=function(){return new Sha256(is224)};method.update=function(message){return method.create().update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createOutputMethod(type,is224)}return method};var nodeWrap=function(method,is224){var crypto=eval("require('crypto')");var Buffer=eval("require('buffer').Buffer");var algorithm=is224?"sha224":"sha256";var nodeMethod=function(message){if(typeof message==="string"){return crypto.createHash(algorithm).update(message,"utf8").digest("hex")}else{if(message===null||message===undefined){throw new Error(ERROR)}else if(message.constructor===ArrayBuffer){message=new Uint8Array(message)}}if(Array.isArray(message)||ArrayBuffer.isView(message)||message.constructor===Buffer){return crypto.createHash(algorithm).update(new Buffer(message)).digest("hex")}else{return method(message)}};return nodeMethod};var createHmacOutputMethod=function(outputType,is224){return function(key,message){return new HmacSha256(key,is224,true).update(message)[outputType]()}};var createHmacMethod=function(is224){var method=createHmacOutputMethod("hex",is224);method.create=function(key){return new HmacSha256(key,is224)};method.update=function(key,message){return method.create(key).update(message)};for(var i=0;i<OUTPUT_TYPES.length;++i){var type=OUTPUT_TYPES[i];method[type]=createHmacOutputMethod(type,is224)}return method};function Sha256(is224,sharedMemory){if(sharedMemory){blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0;this.blocks=blocks}else{this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}if(is224){this.h0=3238371032;this.h1=914150663;this.h2=812702999;this.h3=4144912697;this.h4=4290775857;this.h5=1750603025;this.h6=1694076839;this.h7=3204075428}else{this.h0=1779033703;this.h1=3144134277;this.h2=1013904242;this.h3=2773480762;this.h4=1359893119;this.h5=2600822924;this.h6=528734635;this.h7=1541459225}this.block=this.start=this.bytes=this.hBytes=0;this.finalized=this.hashed=false;this.first=true;this.is224=is224}Sha256.prototype.update=function(message){if(this.finalized){return}var notString,type=typeof message;if(type!=="string"){if(type==="object"){if(message===null){throw new Error(ERROR)}else if(ARRAY_BUFFER&&message.constructor===ArrayBuffer){message=new Uint8Array(message)}else if(!Array.isArray(message)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(message)){throw new Error(ERROR)}}}else{throw new Error(ERROR)}notString=true}var code,index=0,i,length=message.length,blocks=this.blocks;while(index<length){if(this.hashed){this.hashed=false;blocks[0]=this.block;blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0}if(notString){for(i=this.start;index<length&&i<64;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3]}}else{for(i=this.start;index<length&&i<64;++index){code=message.charCodeAt(index);if(code<128){blocks[i>>2]|=code<<SHIFT[i++&3]}else if(code<2048){blocks[i>>2]|=(192|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else if(code<55296||code>=57344){blocks[i>>2]|=(224|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else{code=65536+((code&1023)<<10|message.charCodeAt(++index)&1023);blocks[i>>2]|=(240|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>12&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}}}this.lastByteIndex=i;this.bytes+=i-this.start;if(i>=64){this.block=blocks[16];this.start=i-64;this.hash();this.hashed=true}else{this.start=i}}if(this.bytes>4294967295){this.hBytes+=this.bytes/4294967296<<0;this.bytes=this.bytes%4294967296}return this};Sha256.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var blocks=this.blocks,i=this.lastByteIndex;blocks[16]=this.block;blocks[i>>2]|=EXTRA[i&3];this.block=blocks[16];if(i>=56){if(!this.hashed){this.hash()}blocks[0]=this.block;blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0}blocks[14]=this.hBytes<<3|this.bytes>>>29;blocks[15]=this.bytes<<3;this.hash()};Sha256.prototype.hash=function(){var a=this.h0,b=this.h1,c=this.h2,d=this.h3,e=this.h4,f=this.h5,g=this.h6,h=this.h7,blocks=this.blocks,j,s0,s1,maj,t1,t2,ch,ab,da,cd,bc;for(j=16;j<64;++j){t1=blocks[j-15];s0=(t1>>>7|t1<<25)^(t1>>>18|t1<<14)^t1>>>3;t1=blocks[j-2];s1=(t1>>>17|t1<<15)^(t1>>>19|t1<<13)^t1>>>10;blocks[j]=blocks[j-16]+s0+blocks[j-7]+s1<<0}bc=b&c;for(j=0;j<64;j+=4){if(this.first){if(this.is224){ab=300032;t1=blocks[0]-1413257819;h=t1-150054599<<0;d=t1+24177077<<0}else{ab=704751109;t1=blocks[0]-210244248;h=t1-1521486534<<0;d=t1+143694565<<0}this.first=false}else{s0=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10);s1=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7);ab=a&b;maj=ab^a&c^bc;ch=e&f^~e&g;t1=h+s1+ch+K[j]+blocks[j];t2=s0+maj;h=d+t1<<0;d=t1+t2<<0}s0=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10);s1=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7);da=d&a;maj=da^d&b^ab;ch=h&e^~h&f;t1=g+s1+ch+K[j+1]+blocks[j+1];t2=s0+maj;g=c+t1<<0;c=t1+t2<<0;s0=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10);s1=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7);cd=c&d;maj=cd^c&a^da;ch=g&h^~g&e;t1=f+s1+ch+K[j+2]+blocks[j+2];t2=s0+maj;f=b+t1<<0;b=t1+t2<<0;s0=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10);s1=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7);bc=b&c;maj=bc^b&d^cd;ch=f&g^~f&h;t1=e+s1+ch+K[j+3]+blocks[j+3];t2=s0+maj;e=a+t1<<0;a=t1+t2<<0}this.h0=this.h0+a<<0;this.h1=this.h1+b<<0;this.h2=this.h2+c<<0;this.h3=this.h3+d<<0;this.h4=this.h4+e<<0;this.h5=this.h5+f<<0;this.h6=this.h6+g<<0;this.h7=this.h7+h<<0};Sha256.prototype.hex=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4,h5=this.h5,h6=this.h6,h7=this.h7;var hex=HEX_CHARS[h0>>28&15]+HEX_CHARS[h0>>24&15]+HEX_CHARS[h0>>20&15]+HEX_CHARS[h0>>16&15]+HEX_CHARS[h0>>12&15]+HEX_CHARS[h0>>8&15]+HEX_CHARS[h0>>4&15]+HEX_CHARS[h0&15]+HEX_CHARS[h1>>28&15]+HEX_CHARS[h1>>24&15]+HEX_CHARS[h1>>20&15]+HEX_CHARS[h1>>16&15]+HEX_CHARS[h1>>12&15]+HEX_CHARS[h1>>8&15]+HEX_CHARS[h1>>4&15]+HEX_CHARS[h1&15]+HEX_CHARS[h2>>28&15]+HEX_CHARS[h2>>24&15]+HEX_CHARS[h2>>20&15]+HEX_CHARS[h2>>16&15]+HEX_CHARS[h2>>12&15]+HEX_CHARS[h2>>8&15]+HEX_CHARS[h2>>4&15]+HEX_CHARS[h2&15]+HEX_CHARS[h3>>28&15]+HEX_CHARS[h3>>24&15]+HEX_CHARS[h3>>20&15]+HEX_CHARS[h3>>16&15]+HEX_CHARS[h3>>12&15]+HEX_CHARS[h3>>8&15]+HEX_CHARS[h3>>4&15]+HEX_CHARS[h3&15]+HEX_CHARS[h4>>28&15]+HEX_CHARS[h4>>24&15]+HEX_CHARS[h4>>20&15]+HEX_CHARS[h4>>16&15]+HEX_CHARS[h4>>12&15]+HEX_CHARS[h4>>8&15]+HEX_CHARS[h4>>4&15]+HEX_CHARS[h4&15]+HEX_CHARS[h5>>28&15]+HEX_CHARS[h5>>24&15]+HEX_CHARS[h5>>20&15]+HEX_CHARS[h5>>16&15]+HEX_CHARS[h5>>12&15]+HEX_CHARS[h5>>8&15]+HEX_CHARS[h5>>4&15]+HEX_CHARS[h5&15]+HEX_CHARS[h6>>28&15]+HEX_CHARS[h6>>24&15]+HEX_CHARS[h6>>20&15]+HEX_CHARS[h6>>16&15]+HEX_CHARS[h6>>12&15]+HEX_CHARS[h6>>8&15]+HEX_CHARS[h6>>4&15]+HEX_CHARS[h6&15];if(!this.is224){hex+=HEX_CHARS[h7>>28&15]+HEX_CHARS[h7>>24&15]+HEX_CHARS[h7>>20&15]+HEX_CHARS[h7>>16&15]+HEX_CHARS[h7>>12&15]+HEX_CHARS[h7>>8&15]+HEX_CHARS[h7>>4&15]+HEX_CHARS[h7&15]}return hex};Sha256.prototype.toString=Sha256.prototype.hex;Sha256.prototype.digest=function(){this.finalize();var h0=this.h0,h1=this.h1,h2=this.h2,h3=this.h3,h4=this.h4,h5=this.h5,h6=this.h6,h7=this.h7;var arr=[h0>>24&255,h0>>16&255,h0>>8&255,h0&255,h1>>24&255,h1>>16&255,h1>>8&255,h1&255,h2>>24&255,h2>>16&255,h2>>8&255,h2&255,h3>>24&255,h3>>16&255,h3>>8&255,h3&255,h4>>24&255,h4>>16&255,h4>>8&255,h4&255,h5>>24&255,h5>>16&255,h5>>8&255,h5&255,h6>>24&255,h6>>16&255,h6>>8&255,h6&255];if(!this.is224){arr.push(h7>>24&255,h7>>16&255,h7>>8&255,h7&255)}return arr};Sha256.prototype.array=Sha256.prototype.digest;Sha256.prototype.arrayBuffer=function(){this.finalize();var buffer=new ArrayBuffer(this.is224?28:32);var dataView=new DataView(buffer);dataView.setUint32(0,this.h0);dataView.setUint32(4,this.h1);dataView.setUint32(8,this.h2);dataView.setUint32(12,this.h3);dataView.setUint32(16,this.h4);dataView.setUint32(20,this.h5);dataView.setUint32(24,this.h6);if(!this.is224){dataView.setUint32(28,this.h7)}return buffer};function HmacSha256(key,is224,sharedMemory){var i,type=typeof key;if(type==="string"){var bytes=[],length=key.length,index=0,code;for(i=0;i<length;++i){code=key.charCodeAt(i);if(code<128){bytes[index++]=code}else if(code<2048){bytes[index++]=192|code>>6;bytes[index++]=128|code&63}else if(code<55296||code>=57344){bytes[index++]=224|code>>12;bytes[index++]=128|code>>6&63;bytes[index++]=128|code&63}else{code=65536+((code&1023)<<10|key.charCodeAt(++i)&1023);bytes[index++]=240|code>>18;bytes[index++]=128|code>>12&63;bytes[index++]=128|code>>6&63;bytes[index++]=128|code&63}}key=bytes}else{if(type==="object"){if(key===null){throw new Error(ERROR)}else if(ARRAY_BUFFER&&key.constructor===ArrayBuffer){key=new Uint8Array(key)}else if(!Array.isArray(key)){if(!ARRAY_BUFFER||!ArrayBuffer.isView(key)){throw new Error(ERROR)}}}else{throw new Error(ERROR)}}if(key.length>64){key=new Sha256(is224,true).update(key).array()}var oKeyPad=[],iKeyPad=[];for(i=0;i<64;++i){var b=key[i]||0;oKeyPad[i]=92^b;iKeyPad[i]=54^b}Sha256.call(this,is224,sharedMemory);this.update(iKeyPad);this.oKeyPad=oKeyPad;this.inner=true;this.sharedMemory=sharedMemory}HmacSha256.prototype=new Sha256;HmacSha256.prototype.finalize=function(){Sha256.prototype.finalize.call(this);if(this.inner){this.inner=false;var innerHash=this.array();Sha256.call(this,this.is224,this.sharedMemory);this.update(this.oKeyPad);this.update(innerHash);Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports;exports.sha224=createMethod(true);exports.sha256.hmac=createHmacMethod();exports.sha224.hmac=createHmacMethod(true);if(COMMON_JS){module.exports=exports}else{root.sha256=exports.sha256;root.sha224=exports.sha224;if(AMD){define(function(){return exports})}}})()}).call(this)}).call(this,require("_process"),typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{_process:1149}],371:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],372:[function(require,module,exports){"use strict";var Track=require("segmentio-facade").Track;var each=require("component-each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_fxm");var FoxMetrics=module.exports=integration("FoxMetrics").assumesPageview().global("_fxm").option("appId","").tag('<script src="//d35tca7vmefkrc.cloudfront.net/scripts/{{ appId }}.js">');FoxMetrics.prototype.initialize=function(){window._fxm=window._fxm||[];this.load(this.ready)};FoxMetrics.prototype.loaded=function(){return!!(window._fxm&&window._fxm.appId)};FoxMetrics.prototype.page=function(page){var properties=page.properties();var category=page.category();var name=page.name();this._category=category;push("_fxm.pages.view",properties.title,name,category,properties.url,properties.referrer)};FoxMetrics.prototype.identify=function(identify){var id=identify.userId();if(!id)return;push("_fxm.visitor.profile",id,identify.firstName(),identify.lastName(),identify.email(),identify.address(),undefined,undefined,identify.traits())};FoxMetrics.prototype.track=function(track){var props=track.properties();var category=this._category||props.category;push(track.event(),category,props)};FoxMetrics.prototype.productViewed=function(track){ecommerce("productview",track)};FoxMetrics.prototype.productRemoved=function(track){ecommerce("removecartitem",track)};FoxMetrics.prototype.productAdded=function(track){ecommerce("cartitem",track)};FoxMetrics.prototype.orderCompleted=function(track){var orderId=track.orderId();push("_fxm.ecommerce.order",orderId,track.subtotal(),track.shipping(),track.tax(),track.city(),track.state(),track.zip(),track.quantity());each(track.products(),function(product){var track=new Track({properties:product});ecommerce("purchaseitem",track,[track.quantity(),track.price(),orderId])})};function ecommerce(event,track,arr){push.apply(null,["_fxm.ecommerce."+event,track.productId()||track.id()||track.sku(),track.name(),track.category()].concat(arr||[]))}},{"@segment/analytics.js-integration":373,"component-each":1112,"global-queue":1127,"segmentio-facade":1158}],373:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":374,"./statics":375,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:377,"slug-component":1165}],374:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],375:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:376,dup:51}],376:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],377:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],378:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var find=require("obj-case").find;var reject=require("reject");var each=require("@ndhoule/each");var Facade=require("segmentio-facade").Track;var normalize=require("to-no-case");var is=require("is");var FriendBuy=module.exports=integration("FriendBuy").global("friendbuy").option("siteId","").option("widgets",[]).option("siteWideWidgets",[]).tag('<script src="//djnf6e5yyirys.cloudfront.net/js/friendbuy.min.js">');FriendBuy.prototype.initialize=function(){var settings=this.options;window.friendbuy=window.friendbuy||[];window.friendbuy.push(["site",settings.siteId]);this.load(this.ready)};FriendBuy.prototype.loaded=function(){return window.friendbuy};FriendBuy.prototype.page=function(page){var widgetSettings=get(this.options.widgets,page.name());if(widgetSettings.id){var commands=["widget",widgetSettings.id];if(widgetSettings.selector)commands.push(widgetSettings.selector);var config={configuration:{auto_delay:widgetSettings.autoDelay?parseInt(widgetSettings.autoDelay,10):null}};var parameters={};each(function(pair){var segmentKey=pair.key;var fbKey=pair.value;var value=page.proxy("properties."+segmentKey);if(value)return parameters[fbKey]=value},widgetSettings.parameters);if(!is.empty(parameters))config.parameters=parameters;commands.push(config);window.friendbuy.push(commands)}if(this.options.siteWideWidgets.length){each(function(setting){var widget=setting.value||setting||{};var commands=["widget",widget.id];if(widget.selector)commands.push(widget.selector);var configs={configuration:{auto_delay:widget.autoDelay?parseInt(widget.autoDelay,10):null}};var parameters={};each(function(pair){var segmentKey=pair.key;var fbKey=pair.value;var value=page.proxy("properties."+segmentKey);if(value)return parameters[fbKey]=value},widget.parameters);if(!is.empty(parameters))configs.parameters=parameters;commands.push(configs);window.friendbuy.push(commands)},this.options.siteWideWidgets)}};FriendBuy.prototype.identify=function(identify){if(!identify.userId())return;var options=identify.options(this.name);var customerDetail=reject({id:identify.userId(),email:identify.email(),first_name:identify.firstName(),last_name:identify.lastName(),stripe_customer_id:find(options,"stripe_customer_id"),chargebee_customer_id:find(options,"chargebee_customer_id")});window.friendbuy.push(["track","customer",customerDetail])};FriendBuy.prototype.orderCompleted=function(track){if(!track.orderId())return;var options=track.options(this.name);var orderDetail=reject({id:track.orderId(),email:track.email(),amount:track.revenue(),coupon_code:track.proxy("properties.coupon"),new_customer:find(options,"new_customer")});window.friendbuy.push(["track","order",orderDetail]);var orderList=[];each(function(item){var i=new Facade({properties:item});if(i.sku()){orderList.push(reject({sku:i.sku(),price:i.price(),quantity:i.quantity()}))}},track.products());window.friendbuy.push(["track","products",orderList])};function get(events,name){var ret={};var pageName=normalize(name||"");each(function(widget){if(widget.value&&pageName===normalize(widget.value.name)){ret=widget.value}else if(pageName===normalize(widget.name)){ret=widget}},events);return ret}},{"@ndhoule/each":10,"@segment/analytics.js-integration":379,is:1131,"obj-case":1143,reject:1150,"segmentio-facade":1158,"to-no-case":388}],379:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":380,"./statics":381,"@ndhoule/defaults":8,"component-bind":1109,debug:382,dup:49,extend:386,"slug-component":1165}],380:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":384}],381:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:385,dup:51}],382:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":383,_process:1149,dup:43}],383:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:387}],384:[function(require,module,exports){module.exports=toNoCase;var hasSpace=/\s/;var hasSeparator=/[\W_]/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))return(unseparate(string)||string).toLowerCase();return uncamelize(string).toLowerCase()}var separatorSplitter=/[\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}},{}],385:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],386:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],387:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],388:[function(require,module,exports){module.exports=toNoCase;var hasSpace=/\s/;var hasSeparator=/(_|-|\.|:)/;var hasCamel=/([a-z][A-Z]|[A-Z][a-z])/;function toNoCase(string){if(hasSpace.test(string))return string.toLowerCase();if(hasSeparator.test(string))return(unseparate(string)||string).toLowerCase();if(hasCamel.test(string))return uncamelize(string).toLowerCase();return string.toLowerCase()}var separatorSplitter=/[\W_]+(.|$)/g;function unseparate(string){return string.replace(separatorSplitter,function(m,next){return next?" "+next:""})}var camelSplitter=/(.)([A-Z]+)/g;function uncamelize(string){return string.replace(camelSplitter,function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")})}},{}],389:[function(require,module,exports){"use strict";var camel=require("camelcase");var foldl=require("@ndhoule/foldl");var integration=require("@segment/analytics.js-integration");var FullStory=module.exports=integration("FullStory").option("org","").option("debug",false).option("trackAllPages",false).option("trackNamedPages",false).option("trackCategorizedPages",false).option("trackPagesWithEvents",true).tag('<script async src="https://edge.fullstory.com/s/fs.js" crossorigin="anonymous"><\/script>');var apiSource="segment";FullStory.prototype.initialize=function(){window._fs_debug=this.options.debug;window._fs_host="fullstory.com";window._fs_script="edge.fullstory.com/s/fs.js";window._fs_org=this.options.org;window._fs_namespace="FS";(function(m,n,e,t,l,o,g,y){if(e in m){if(m.console&&m.console.log){m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].')}return}g=m[e]=function(a,b,s){g.q?g.q.push([a,b,s]):g._api(a,b,s)};g.q=[];g.identify=function(i,v,s){g(l,{uid:i},s);if(v)g(l,v,s)};g.setUserVars=function(v,s){g(l,v,s)};g.event=function(i,v,s){g("event",{n:i,p:v},s)};g.anonymize=function(){g.identify(!!0)};g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};g.log=function(a,b){g("log",[a,b])};g.consent=function(a){g("consent",!arguments.length||a)};g.identifyAccount=function(i,v){o="account";v=v||{};v.acctId=i;g(o,v)};g.clearUserCookie=function(){};g.setVars=function(n,p){g("setVars",[n,p])};g._w={};y="XMLHttpRequest";g._w[y]=m[y];y="fetch";g._w[y]=m[y];if(m[y])m[y]=function(){return g._w[y].apply(this,arguments)};g._v="1.3.0"})(window,document,window["_fs_namespace"],"script","user");this.load(this.ready)};FullStory.prototype.loaded=function(){return!!window.FS};FullStory.prototype.identify=function(identify){var traits=identify.traits({name:"displayName"});var newTraits=foldl(function(results,value,key){var rs=results;if(key!=="id"){rs[key==="displayName"||key==="email"?key:camelCaseField(key)]=value}return rs},{},traits);if(identify.userId()){window.FS.identify(String(identify.userId()),newTraits,apiSource)}else{newTraits.segmentAnonymousId_str=String(identify.anonymousId());window.FS.setUserVars(newTraits,apiSource)}};FullStory.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;var trackProps=page.track().properties();if(name&&opts.trackNamedPages){if(opts.trackPagesWithEvents){this.track(page.track(name))}window.FS.setVars("page",Object.assign(trackProps,{pageName:name}),apiSource)}else if(category&&opts.trackCategorizedPages){if(opts.trackPagesWithEvents){this.track(page.track(category))}window.FS.setVars("page",Object.assign(trackProps,{pageName:category}),apiSource)}else if(opts.trackAllPages){if(opts.trackPagesWithEvents){this.track(page.track())}window.FS.setVars("page",trackProps,apiSource)}};FullStory.prototype.track=function(track){window.FS.event(track.event(),track.properties(),apiSource)};function camelCaseField(fieldName){var parts=fieldName.split("_");if(parts.length>1){var typeSuffix=parts.pop();switch(typeSuffix){case"str":case"int":case"date":case"real":case"bool":case"strs":case"ints":case"dates":case"reals":case"bools":return camel(parts.join("_"))+"_"+typeSuffix;default:}}return camel(fieldName)}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":390,camelcase:396}],390:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":391,"./statics":392,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:393,dup:40,"slug-component":1165}],391:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":395,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],392:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:397,dup:42}],393:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":394,_process:1149,dup:43}],394:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:398}],395:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],396:[function(require,module,exports){"use strict";function preserveCamelCase(str){var isLastCharLower=false;for(var i=0;i<str.length;i++){var c=str.charAt(i);if(isLastCharLower&&/[a-zA-Z]/.test(c)&&c.toUpperCase()===c){str=str.substr(0,i)+"-"+str.substr(i);isLastCharLower=false;i++}else{isLastCharLower=c.toLowerCase()===c}}return str}module.exports=function(){var str=[].map.call(arguments,function(str){return str.trim()}).filter(function(str){return str.length}).join("-");if(!str.length){return""}if(str.length===1){return str.toLowerCase()}if(!/[_.\- ]+/.test(str)){if(str===str.toUpperCase()){return str.toLowerCase()}if(str[0]!==str[0].toLowerCase()){return str[0].toLowerCase()+str.slice(1)}return str}str=preserveCamelCase(str);return str.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(m,p1){return p1.toUpperCase()})}},{}],397:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],398:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],399:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_gauges");var Gauges=module.exports=integration("Gauges").assumesPageview().global("_gauges").option("siteId","").tag('<script id="gauges-tracker" src="//secure.gaug.es/track.js" data-site-id="{{ siteId }}">');Gauges.prototype.initialize=function(){window._gauges=window._gauges||[];this.load(this.ready)};Gauges.prototype.loaded=function(){return!!(window._gauges&&window._gauges.push!==Array.prototype.push)};Gauges.prototype.page=function(){push("track")}},{"@segment/analytics.js-integration":400,"global-queue":1127}],400:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":401,"./statics":402,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],401:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":403,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],402:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:404,dup:42}],403:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],404:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],405:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var onBody=require("on-body-ready");var GetSatisfaction=module.exports=integration("Get Satisfaction").assumesPageview().global("GSFN").option("widgetId","").tag('<script src="https://loader.engage.gsfn.us/loader.js">');GetSatisfaction.prototype.initialize=function(){var self=this;var widget=this.options.widgetId;var div=document.createElement("div");var id=div.id="getsat-widget-"+widget;onBody(function(body){body.appendChild(div)});this.load(function(){window.GSFN.loadWidget(widget,{containerId:id});self.ready()})};GetSatisfaction.prototype.loaded=function(){return!!window.GSFN}},{"@segment/analytics.js-integration":406,"on-body-ready":1146}],406:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":407,"./statics":408,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],407:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":409,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],408:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:410,dup:42}],409:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],410:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],411:[function(require,module,exports){"use strict";var Track=require("segmentio-facade").Track;var defaults=require("@ndhoule/defaults");var dot=require("obj-case");var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var len=require("object-component").length;var push=require("global-queue")("_gaq");var reject=require("reject");var useHttps=require("use-https");var extend=require("extend");var user;module.exports=exports=function(analytics){analytics.addIntegration(GA);user=analytics.user()};var GA=exports.Integration=integration("Google Analytics").readyOnLoad().global("ga").global("gaplugins").global("_gaq").global("GoogleAnalyticsObject").option("anonymizeIp",false).option("useGoogleAmpClientId",false).option("classic",false).option("contentGroupings",{}).option("dimensions",{}).option("domain","auto").option("doubleClick",false).option("enhancedEcommerce",false).option("enhancedLinkAttribution",false).option("ignoredReferrers",null).option("includeSearch",false).option("setAllMappedProps",true).option("metrics",{}).option("nonInteraction",false).option("sendUserId",false).option("siteSpeedSampleRate",1).option("sampleRate",100).option("trackCategorizedPages",true).option("trackNamedPages",true).option("trackingId","").option("optimize","").option("nameTracker",false).option("resetCustomDimensionsOnPage",[]).tag("library",'<script src="//www.google-analytics.com/analytics.js">').tag("double click",'<script src="//stats.g.doubleclick.net/dc.js">').tag("http",'<script src="http://www.google-analytics.com/ga.js">').tag("https",'<script src="https://ssl.google-analytics.com/ga.js">');GA.on("construct",function(integration){if(integration.options.classic){integration.initialize=integration.initializeClassic;integration.loaded=integration.loadedClassic;integration.page=integration.pageClassic;integration.track=integration.trackClassic;integration.orderCompleted=integration.completedOrderClassic}else if(integration.options.enhancedEcommerce){integration.productViewed=integration.productViewedEnhanced;integration.productClicked=integration.productClickedEnhanced;integration.productAdded=integration.productAddedEnhanced;integration.productRemoved=integration.productRemovedEnhanced;integration.checkoutStarted=integration.checkoutStartedEnhanced;integration.checkoutStepViewed=integration.checkoutStepViewedEnhanced;integration.checkoutStepCompleted=integration.checkoutStepCompletedEnhanced;integration.orderUpdated=integration.orderUpdatedEnhanced;integration.orderCompleted=integration.orderCompletedEnhanced;integration.orderRefunded=integration.orderRefundedEnhanced;integration.promotionViewed=integration.promotionViewedEnhanced;integration.promotionClicked=integration.promotionClickedEnhanced;integration.productListViewed=integration.productListViewedEnhanced;integration.productListFiltered=integration.productListFilteredEnhanced}});GA.prototype.initialize=function(){this.pageCalled=false;var opts=this.options;window.GoogleAnalyticsObject="ga";window.ga=window.ga||function(){window.ga.q=window.ga.q||[];window.ga.q.push(arguments)};window.ga.l=(new Date).getTime();if(window.location.hostname==="localhost")opts.domain="none";var config={cookieDomain:opts.domain||GA.prototype.defaults.domain,siteSpeedSampleRate:opts.siteSpeedSampleRate,sampleRate:opts.sampleRate,allowLinker:true,useAmpClientId:opts.useGoogleAmpClientId};if(opts.nameTracker){config.name="segmentGATracker";this._trackerName="segmentGATracker."}else{this._trackerName=""}window.ga("create",opts.trackingId,config);if(opts.optimize)window.ga(this._trackerName+"require",opts.optimize);if(opts.doubleClick){window.ga(this._trackerName+"require","displayfeatures")}if(opts.enhancedLinkAttribution){window.ga(this._trackerName+"require","linkid","linkid.js")}if(opts.sendUserId&&user.id()){window.ga(this._trackerName+"set","userId",user.id())}if(opts.anonymizeIp)window.ga(this._trackerName+"set","anonymizeIp",true);var userTraits=user.traits();if(user.id()){userTraits.id=user.id()}var custom=metrics(userTraits,opts);if(len(custom))window.ga(this._trackerName+"set",custom);this.load("library",this.ready)};GA.prototype.loaded=function(){return!!window.gaplugins};GA.prototype.page=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var opts=this.options;var campaign=page.proxy("context.campaign")||{};var pageview={};var pagePath=path(props,this.options);var pageTitle=name||props.title;var pageReferrer=page.referrer()||"";var self=this;var track;this._category=category;pageview.page=pagePath;pageview.title=pageTitle;pageview.location=props.url;if(campaign.name)pageview.campaignName=campaign.name;if(campaign.source)pageview.campaignSource=campaign.source;if(campaign.medium)pageview.campaignMedium=campaign.medium;if(campaign.content)pageview.campaignContent=campaign.content;if(campaign.term)pageview.campaignKeyword=campaign.term;var payload={page:pagePath,title:pageTitle};var resetCustomDimensions={};for(var i=0;i<opts.resetCustomDimensionsOnPage.length;i++){var property=opts.resetCustomDimensionsOnPage[i];if(opts.dimensions[property]){resetCustomDimensions[opts.dimensions[property]]=null}}window.ga(self._trackerName+"set",resetCustomDimensions);pageview=extend(pageview,setCustomDimenionsAndMetrics(props,opts,self._trackerName));if(pageReferrer!==document.referrer)payload.referrer=pageReferrer;window.ga(this._trackerName+"set",payload);if(this.pageCalled)delete pageview.location;window.ga(this._trackerName+"send","pageview",pageview);if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}this.pageCalled=true};GA.prototype.identify=function(identify){var opts=this.options;if(opts.sendUserId&&identify.userId()){window.ga(this._trackerName+"set","userId",identify.userId())}var custom=metrics(identify.traits(),opts);if(len(custom))window.ga(this._trackerName+"set",custom)};GA.prototype.track=function(track,options){var contextOpts=track.options(this.name);var interfaceOpts=this.options;var opts=defaults(options||{},contextOpts);opts=defaults(opts,interfaceOpts);var props=track.properties();var campaign=track.proxy("context.campaign")||{};var self=this;var payload={eventAction:track.event(),eventCategory:track.category()||this._category||"All",eventLabel:props.label,eventValue:formatValue(props.value||track.revenue()),nonInteraction:props.nonInteraction!==undefined?!!props.nonInteraction:!!opts.nonInteraction};if(campaign.name)payload.campaignName=campaign.name;if(campaign.source)payload.campaignSource=campaign.source;if(campaign.medium)payload.campaignMedium=campaign.medium;if(campaign.content)payload.campaignContent=campaign.content;if(campaign.term)payload.campaignKeyword=campaign.term;payload=extend(payload,setCustomDimenionsAndMetrics(props,interfaceOpts,self._trackerName));window.ga(this._trackerName+"send","event",payload)};GA.prototype.orderCompleted=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();var self=this;if(!orderId)return;if(!this.ecommerce){window.ga(this._trackerName+"require","ecommerce");this.ecommerce=true}window.ga(this._trackerName+"ecommerce:addTransaction",{affiliation:props.affiliation,shipping:track.shipping(),revenue:total,tax:track.tax(),id:orderId,currency:track.currency()});each(products,function(product){var productTrack=createProductTrack(track,product);window.ga(self._trackerName+"ecommerce:addItem",{category:productTrack.category(),quantity:productTrack.quantity(),price:productTrack.price(),name:productTrack.name(),sku:productTrack.sku(),id:orderId,currency:productTrack.currency()})});window.ga(this._trackerName+"ecommerce:send")};GA.prototype.initializeClassic=function(){var opts=this.options;var anonymize=opts.anonymizeIp;var domain=opts.domain;var enhanced=opts.enhancedLinkAttribution;var ignore=opts.ignoredReferrers;var sample=opts.siteSpeedSampleRate;window._gaq=window._gaq||[];push("_setAccount",opts.trackingId);push("_setAllowLinker",true);if(anonymize)push("_gat._anonymizeIp");if(domain)push("_setDomainName",domain);if(sample)push("_setSiteSpeedSampleRate",sample);if(enhanced){var protocol=document.location.protocol==="https:"?"https:":"http:";var pluginUrl=protocol+"//www.google-analytics.com/plugins/ga/inpage_linkid.js";push("_require","inpage_linkid",pluginUrl)}if(ignore){if(!is.array(ignore))ignore=[ignore];each(ignore,function(domain){push("_addIgnoredRef",domain)})}if(this.options.doubleClick){this.load("double click",this.ready)}else{var name=useHttps()?"https":"http";this.load(name,this.ready)}};GA.prototype.loadedClassic=function(){return!!(window._gaq&&window._gaq.push!==Array.prototype.push)};GA.prototype.pageClassic=function(page){var category=page.category();var props=page.properties();var name=page.fullName();var track;push("_trackPageview",path(props,this.options));if(category&&this.options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}if(name&&this.options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}};GA.prototype.trackClassic=function(track,options){var opts=options||track.options(this.name);var props=track.properties();var revenue=track.revenue();var event=track.event();var category=this._category||track.category()||"All";var label=props.label;var value=formatValue(revenue||props.value);var nonInteraction=!!(props.nonInteraction||opts.nonInteraction);push("_trackEvent",category,event,label,value,nonInteraction)};GA.prototype.completedOrderClassic=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products()||[];var props=track.properties();var currency=track.currency();if(!orderId)return;push("_addTrans",orderId,props.affiliation,total,track.tax(),track.shipping(),track.city(),track.state(),track.country());each(products,function(product){var track=new Track({properties:product});push("_addItem",orderId,track.sku(),track.name(),track.category(),track.price(),track.quantity())});push("_set","currencyCode",currency);push("_trackTrans")};function path(properties,options){if(!properties)return;var str=properties.path;if(options.includeSearch&&properties.search)str+=properties.search;return str}function setCustomDimenionsAndMetrics(props,opts,trackerName){var ret={};var custom=metrics(props,opts);if(len(custom)){if(opts.setAllMappedProps){window.ga(trackerName+"set",custom)}else{each(custom,function(key,value){ret[key]=value});return ret}}}function formatValue(value){if(!value||value<0)return 0;return Math.round(value)}function getProductPosition(item,products){var position=item.properties().position;if(typeof position!=="undefined"&&!Number.isNaN(Number(position))&&Number(position)>-1){return position}return products.map(function(x){return x.product_id}).indexOf(item.productId())+1}function metrics(obj,data){var dimensions=data.dimensions;var metrics=data.metrics;var contentGroupings=data.contentGroupings;var ret={};each([metrics,dimensions,contentGroupings],function(group){each(group,function(prop,key){var value=dot(obj,prop)||obj[prop];if(is.bool(value))value=value.toString();if(value||value===0)ret[key]=value})});return ret}GA.prototype.loadEnhancedEcommerce=function(track){var self=this;if(!this.enhancedEcommerceLoaded){window.ga(self._trackerName+"require","ec");this.enhancedEcommerceLoaded=true}window.ga(self._trackerName+"set","&cu",track.currency())};GA.prototype.pushEnhancedEcommerce=function(track,opts,trackerName){var self=this;var args=reject([self._trackerName+"send","event",track.category()||"EnhancedEcommerce",track.event()||"Action not defined",track.properties().label,extend({nonInteraction:1},setCustomDimenionsAndMetrics(track.properties(),opts,trackerName))]);var event=track.event().toLowerCase();var eventsWithCategoryFieldProductScoped=["product clicked","product added","product viewed","product removed"];if(eventsWithCategoryFieldProductScoped.includes(event)){args[2]="EnhancedEcommerce"}window.ga.apply(window,args)};GA.prototype.checkoutStartedEnhanced=function(track){this.checkoutStepViewed(track)};GA.prototype.orderUpdatedEnhanced=function(track){this.checkoutStartedEnhanced(track)};GA.prototype.checkoutStepViewedEnhanced=function(track){var products=track.products();var props=track.properties();var options=extractCheckoutOptions(track);var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);each(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack,self._trackerName,opts)});window.ga(self._trackerName+"ec:setAction","checkout",{step:props.step||1,option:options||undefined});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.checkoutStepCompletedEnhanced=function(track){var props=track.properties();var options=extractCheckoutOptions(track);var self=this;if(!props.step)return;var params={step:props.step||1,option:options||undefined};this.loadEnhancedEcommerce(track);window.ga(self._trackerName+"ec:setAction","checkout_option",params);window.ga(self._trackerName+"send","event","Checkout","Option")};GA.prototype.orderCompletedEnhanced=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var products=track.products();var props=track.properties();var opts=this.options;var self=this;if(!orderId)return;this.loadEnhancedEcommerce(track);each(products,function(product){var productTrack=createProductTrack(track,product);enhancedEcommerceTrackProduct(productTrack,self._trackerName,opts)});window.ga(self._trackerName+"ec:setAction","purchase",{id:orderId,affiliation:props.affiliation,revenue:total,tax:track.tax(),shipping:track.shipping(),coupon:track.coupon()});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.orderRefundedEnhanced=function(track){var orderId=track.orderId();var products=track.products();var self=this;var opts=this.options;if(!orderId)return;this.loadEnhancedEcommerce(track);each(products,function(product){var track=new Track({properties:product});window.ga(self._trackerName+"ec:addProduct",{id:track.productId()||track.id()||track.sku(),quantity:track.quantity()})});window.ga(self._trackerName+"ec:setAction","refund",{id:orderId});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productAddedEnhanced=function(track){var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,"add",null,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productRemovedEnhanced=function(track){var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);enhancedEcommerceProductAction(track,"remove",null,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productViewedEnhanced=function(track){var props=track.properties();var data={};var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);if(props.list)data.list=props.list;enhancedEcommerceProductAction(track,"detail",data,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productClickedEnhanced=function(track){var props=track.properties();var data={};var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);if(props.list)data.list=props.list;enhancedEcommerceProductAction(track,"click",data,self._trackerName,opts);this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.promotionViewedEnhanced=function(track){var props=track.properties();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);window.ga(self._trackerName+"ec:addPromo",{id:track.promotionId()||track.id(),name:track.name(),creative:props.creative,position:props.position});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.promotionClickedEnhanced=function(track){var props=track.properties();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);window.ga(self._trackerName+"ec:addPromo",{id:track.promotionId()||track.id(),name:track.name(),creative:props.creative,position:props.position});window.ga(self._trackerName+"ec:setAction","promo_click",{});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productListViewedEnhanced=function(track){var props=track.properties();var products=track.products();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);each(products,function(product){var item=new Track({properties:product});if(!(item.productId()||item.sku())&&!item.name())return;var impressionObj={id:item.productId()||item.sku(),name:item.name(),category:item.category()||track.category(),list:props.list_id||track.category()||"products",brand:item.properties().brand,variant:item.properties().variant,price:item.price(),position:getProductPosition(item,products)};impressionObj=extend(impressionObj,metrics(item.properties(),opts));for(var prop in impressionObj){if(impressionObj[prop]===undefined)delete impressionObj[prop]}window.ga(self._trackerName+"ec:addImpression",impressionObj)});this.pushEnhancedEcommerce(track,opts,self._trackerName)};GA.prototype.productListFilteredEnhanced=function(track){var props=track.properties();var products=track.products();props.filters=props.filters||[];props.sorters=props.sorters||[];var filters=props.filters.map(function(obj){return obj.type+":"+obj.value}).join();var sorts=props.sorts.map(function(obj){return obj.type+":"+obj.value}).join();var self=this;var opts=this.options;this.loadEnhancedEcommerce(track);each(products,function(product){var item=new Track({properties:product});if(!(item.productId()||item.sku())&&!item.name())return;var impressionObj={id:item.productId()||item.sku(),name:item.name(),category:item.category()||track.category(),list:props.list_id||track.category()||"search results",brand:item.properties().brand,variant:filters+"::"+sorts,price:item.price(),position:getProductPosition(item,products)};impressionObj=extend(impressionObj,metrics(item.properties(),opts));for(var prop in impressionObj){if(impressionObj[prop]===undefined)delete impressionObj[prop]}window.ga(self._trackerName+"ec:addImpression",impressionObj)});this.pushEnhancedEcommerce(track,opts,self._trackerName)};function enhancedEcommerceTrackProduct(track,trackerName,opts){var props=track.properties();var product={id:track.productId()||track.id()||track.sku(),name:track.name(),category:track.category(),quantity:track.quantity(),price:track.price(),brand:props.brand,variant:props.variant,currency:track.currency()};if(props.position!=null){product.position=Math.round(props.position)}var coupon=track.proxy("properties.coupon");if(coupon)product.coupon=coupon;product=extend(product,metrics(props,opts));window.ga(trackerName+"ec:addProduct",product)}function enhancedEcommerceProductAction(track,action,data,trackerName,opts){enhancedEcommerceTrackProduct(track,trackerName,opts);window.ga(trackerName+"ec:setAction",action,data||{})}var extractCheckoutOptions=function extractCheckoutOptions(msg){var options=[msg.proxy("properties.paymentMethod"),msg.proxy("properties.shippingMethod")];var valid=reject(options);return valid.length>0?valid.join(", "):null};function createProductTrack(track,properties){var props=properties||{};props.currency=properties.currency||track.currency();return new Track({properties:props})}},{"@ndhoule/defaults":8,"@segment/analytics.js-integration":412,"component-each":1112,extend:1126,"global-queue":1127,is:1131,"obj-case":1143,"object-component":1144,reject:1150,"segmentio-facade":1158,"use-https":1180}],412:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":413,"./statics":414,"@ndhoule/defaults":8,"component-bind":1109,debug:415,dup:49,extend:417,"slug-component":1165}],413:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],414:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:418,dup:51}],415:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":416,_process:1149,dup:43}],416:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:419}],417:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],418:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],419:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],420:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("dataLayer",{wrap:false});var GTM=module.exports=integration("Google Tag Manager").global("dataLayer").global("google_tag_manager").option("containerId","").option("environment","").option("trackNamedPages",true).option("trackCategorizedPages",true).tag("no-env",'<script src="//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer">').tag("with-env",'<script src="//www.googletagmanager.com/gtm.js?id={{ containerId }}&l=dataLayer&gtm_preview={{ environment }}">');GTM.prototype.initialize=function(){push({"gtm.start":Number(new Date),event:"gtm.js"});if(this.options.environment.length){this.load("with-env",this.options,this.ready)}else{this.load("no-env",this.options,this.ready)}};GTM.prototype.loaded=function(){return!!(window.dataLayer&&Array.prototype.push!==window.dataLayer.push)};GTM.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};GTM.prototype.track=function(track){var props=track.properties();var userId=this.analytics.user().id();var anonymousId=this.analytics.user().anonymousId();if(userId)props.userId=userId;if(anonymousId)props.segmentAnonymousId=anonymousId;props.event=track.event();push(props)}},{"@segment/analytics.js-integration":421,"global-queue":1127}],421:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":422,"./statics":423,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:425,"slug-component":1165}],422:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],423:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:424,dup:51}],424:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],425:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],426:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var Track=require("segmentio-facade").Track;var each=require("component-each");var integration=require("@segment/analytics.js-integration");var omit=require("omit");var pick=require("pick");var GoSquared=module.exports=integration("GoSquared").assumesPageview().global("_gs").option("anonymizeIP",false).option("apiSecret","").option("cookieDomain",null).option("trackHash",false).option("trackLocal",false).option("trackParams",true).option("useCookies",true).tag('<script src="//d1l6p2sc9645hc.cloudfront.net/tracker.js">');GoSquared.prototype.initialize=function(){var self=this;var options=this.options;var user=this.analytics.user();push(options.apiSecret);each(options,function(name,value){if(name==="apiSecret")return;if(value==null)return;push("set",name,value)});self.identify(new Identify({traits:user.traits(),userId:user.id()}));self.load(this.ready)};GoSquared.prototype.loaded=function(){return!!(window._gs&&window._gs.v)};GoSquared.prototype.page=function(page){var props=page.properties();var name=page.fullName();push("track",props.path,name||props.title)};GoSquared.prototype.identify=function(identify){var traits=identify.traits({createdAt:"created_at",firstName:"first_name",lastName:"last_name",title:"company_position",industry:"company_industry"});var specialKeys=["id","email","name","first_name","last_name","username","description","avatar","phone","created_at","company_name","company_size","company_position","company_industry"];var props=pick.apply(null,[traits].concat(specialKeys));props.custom=omit(specialKeys,traits);var id=identify.userId();if(id){push("identify",id,props)}else{push("properties",props)}};GoSquared.prototype.track=function(track){push("event",track.event(),track.properties())};GoSquared.prototype.orderCompleted=function(track){var products=track.products();var items=[];each(products,function(product){var track=new Track({properties:product});items.push({category:track.category(),quantity:track.quantity(),price:track.price(),name:track.name()})});push("transaction",track.orderId(),{revenue:track.total(),track:true},items)};function push(){window._gs=window._gs||function(){window._gs.q.push(arguments)};window._gs.q=window._gs.q||[];window._gs.apply(null,arguments)}},{"@segment/analytics.js-integration":427,"component-each":1112,omit:1145,pick:1148,"segmentio-facade":1158}],427:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":428,"./statics":429,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:431,"slug-component":1165}],428:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],429:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:430,dup:51}],430:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],431:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],432:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Track=require("segmentio-facade").Track;var reject=require("reject");var defaults=require("@ndhoule/defaults");var extend=require("extend");var GTAG=module.exports=integration("Gtag").global("gtagDataLayer").option("awConversionId","").option("dcFloodLightId","").option("trackNamedPages",true).option("trackCategorizedPages",true).option("includeQueryString",false).option("gaWebMeasurementId","").option("gaWebAppMeasurementId","").option("gaCustomDimensions",{}).option("gaCustomMetrics",{}).option("gaContentGroupings",{}).option("gaEnhancedEcommerce",false).option("gaAnonymizeIp",false).option("gaCookieDomain","auto").option("gaEnhancedLinkAttribution",false).option("gaOptimizeContainerId","").option("gaSampleRate",100).option("gaSendUserId",false).option("gaUseAmpClientId",false).option("gaSiteSpeedSampleRate",1).option("gaSetAllMappedProps",false).tag('<script src="//www.googletagmanager.com/gtag/js?id={{ accountId }}&l=gtagDataLayer">');GTAG.on("construct",function(Integration){if(Integration.options.gaEnhancedEcommerce){Integration.productListViewed=Integration.productListViewedEnhanced;Integration.productClicked=Integration.productClickedEnhanced;Integration.productViewed=Integration.productViewedEnhanced;Integration.productAdded=Integration.productAddedEnhanced;Integration.productRemoved=Integration.productRemovedEnhanced;Integration.promotionViewed=Integration.promotionViewedEnhanced;Integration.promotionClicked=Integration.promotionClickedEnhanced;Integration.checkoutStarted=Integration.checkoutStartedEnhanced;Integration.orderRefunded=Integration.orderRefundedEnhanced;Integration.orderCompleted=Integration.orderCompletedEnhanced;Integration.checkoutStepViewed=Integration.checkoutStepViewedEnhanced;Integration.checkoutStepCompleted=Integration.checkoutStepCompletedEnhanced;Integration.orderUpdated=Integration.orderUpdatedEnhanced;Integration.productAddedToWishlist=Integration.productAddedToWishlistEnhanced;Integration.productShared=Integration.productSharedEnhanced;Integration.productsSearched=Integration.productsSearchedEnhanced;Integration.customEventsMapping={login:Integration.loggedInEnhanced,sign_up:Integration.signedUpEnhanced,exception:Integration.exceptionOccuredEnhanced,timing_complete:Integration.timingCompletedEnhanced,generate_lead:Integration.leadGeneratedEnhanced,set_checkout_option:Integration.setCheckoutOptionEnhanced}}});GTAG.prototype.initialize=function(){window.gtagDataLayer=window.gtagDataLayer||[];window.gtag=function(){window.gtagDataLayer.push(arguments)};window.gtag("js",new Date);var config=[];var that=this;var gaWebMeasurementId=this.options.gaWebMeasurementId;var gaWebAppMeasurementId=this.options.gaWebAppMeasurementId;var awConversionId=this.options.awConversionId;var dcFloodLightId=this.options.dcFloodLightId;var accountId=gaWebMeasurementId||gaWebAppMeasurementId||awConversionId||dcFloodLightId;if(gaWebMeasurementId||gaWebAppMeasurementId){var gaSetting={};var customMap=merge(this.options.gaCustomDimensions||{},this.options.gaCustomMetrics||{});var customMapSwap={};for(var field in customMap){if(customMap.hasOwnProperty(field)){customMapSwap[customMap[field]]=field}}gaSetting.custom_map=customMapSwap;if(this.options.gaAnonymizeIp){gaSetting.anonymize_ip=true}if(this.options.gaCookieDomain){gaSetting.cookie_domain=this.options.gaCookieDomain}if(this.options.gaEnhancedLinkAttribution){gaSetting.link_attribution=true}if(this.options.gaOptimizeContainerId){gaSetting.optimize_id=this.options.gaOptimizeContainerId}if(this.options.gaSampleRate){gaSetting.sample_rate=this.options.gaSampleRate}if(this.options.gaSiteSpeedSampleRate){gaSetting.site_speed_sample_rate=this.options.gaSiteSpeedSampleRate}if(this.options.gaUseAmpClientId){gaSetting.use_amp_client_id=true}var userId=this.analytics.user().id();if(this.options.gaSendUserId&&userId){gaSetting.user_id=userId}if(gaWebMeasurementId){config.push(["config",gaWebMeasurementId,gaSetting])}if(gaWebAppMeasurementId){config.push(["config",gaWebAppMeasurementId,gaSetting])}}if(awConversionId){config.push(["config",awConversionId,{}])}if(dcFloodLightId){config.push(["config",dcFloodLightId,{}])}if(!accountId){return}this.load({accountId:accountId},function(){for(var i=0;i<config.length;i++){window.gtag(config[i][0],config[i][1],config[i][2])}that.ready()})};GTAG.prototype.loaded=function(){return!!(window.gtagDataLayer&&Array.prototype.push!==window.gtagDataLayer.push)};GTAG.prototype.identify=function(identify){var userId=identify.userId();var opts=this.options;if(!userId||!opts.gaSendUserId){return}if(opts.gaWebMeasurementId){window.gtag("config",opts.gaWebMeasurementId,{user_id:userId})}if(opts.gaWebAppMeasurementId){window.gtag("config",opts.gaWebAppMeasurementId,{user_id:userId})}setContentGroups(identify.traits(),opts);setCustomDimensionsAndMetrics(identify.traits(),opts)};GTAG.prototype.track=function(track,params){var event=track.event()||"";if(this.customEventsMapping&&typeof this.customEventsMapping[event]==="function"){this.customEventsMapping[event](track);return}var contextOpts=track.options(this.name);var opts=defaults(params||{},contextOpts);var props=track.properties();props.event=event;setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);props.non_interaction=props.nonInteraction!==undefined?!!props.nonInteraction:!!opts.nonInteraction;delete props.nonInteraction;window.gtag("event",props.event,props)};GTAG.prototype.page=function(page){setContentGroups(page.properties(),this.options);setCustomDimensionsAndMetrics(page.properties(),this.options);this.trackPageViewEvent(page,this.options)};GTAG.prototype.productListViewedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("view_item_list",{items:getFormattedProductList(track)})};GTAG.prototype.productClickedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("select_content",{content_type:"product",items:[getFormattedProduct(track)]})};GTAG.prototype.productViewedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("view_item",{items:[getFormattedProduct(track)]})};GTAG.prototype.productAddedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("add_to_cart",{items:[getFormattedProduct(track)]})};GTAG.prototype.productRemovedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("remove_from_cart",{items:[getFormattedProduct(track)]})};GTAG.prototype.promotionViewedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("view_promotion",{promotions:[getFormattedPromotion(track)]})};GTAG.prototype.promotionClickedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("select_content",{promotions:[getFormattedPromotion(track)]})};GTAG.prototype.checkoutStartedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);var coupon=track.coupon();trackEnhancedEvent("begin_checkout",{value:track.total()||track.revenue()||0,currency:track.currency(),items:getFormattedProductList(track),coupon:coupon})};GTAG.prototype.orderUpdatedEnhanced=function(track){this.checkoutStartedEnhanced(track)};GTAG.prototype.checkoutStepViewedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("checkout_progress",extractCheckoutOptions(track))};GTAG.prototype.checkoutStepCompletedEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("checkout_progress",extractCheckoutOptions(track))};GTAG.prototype.setCheckoutOptionEnhanced=function(track){var props=track.properties();var options=reject([track.paymentMethod(),track.shippingMethod()]);trackEnhancedEvent("set_checkout_option",{value:track.value()||0,checkout_step:props.step||1,checkout_option:options.length?options.join(", "):null})};GTAG.prototype.orderRefundedEnhanced=function(track){var products=track.products();var eventData={transaction_id:track.orderId()};if(products.length){eventData.value=track.total()||track.revenue()||0;eventData.currency=track.currency();eventData.tax=track.tax();eventData.shipping=track.shipping();eventData.affiliation=track.properties().affiliation;eventData.items=getFormattedProductList(track)}setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("refund",eventData)};GTAG.prototype.orderCompletedEnhanced=function(track){var total=track.total()||track.revenue()||0;var orderId=track.orderId();var props=track.properties();setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("purchase",{transaction_id:orderId,affiliation:props.affiliation,value:total,currency:track.currency(),tax:track.tax(),shipping:track.shipping(),items:getFormattedProductList(track)})};GTAG.prototype.productAddedToWishlistEnhanced=function(track){setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("add_to_wishlist",{value:track.price(),currency:track.currency(),items:[getFormattedProduct(track)]})};GTAG.prototype.productSharedEnhanced=function(track){var id=track.productId()||track.id()||track.sku();var props=track.properties();if(!id){return}setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("share",{method:props.share_via,content_type:track.category(),content_id:id})};GTAG.prototype.productsSearchedEnhanced=function(track){var searchQuery=track.proxy("properties.query");if(!searchQuery){return}setContentGroups(track.properties(),this.options);setCustomDimensionsAndMetrics(track.properties(),this.options);trackEnhancedEvent("search",{search_term:searchQuery})};GTAG.prototype.loggedInEnhanced=function(track){var props=track.properties();trackEnhancedEvent("login",{method:props.method})};GTAG.prototype.signedUpEnhanced=function(track){var props=track.properties();trackEnhancedEvent("sign_up",{method:props.method})};GTAG.prototype.leadGeneratedEnhanced=function(track){trackEnhancedEvent("generate_lead",{transaction_id:track.id(),value:track.price(),currency:track.currency()})};GTAG.prototype.exceptionOccuredEnhanced=function(track){var props=track.properties();trackEnhancedEvent("exception",{description:props.description,fatal:props.fatal})};GTAG.prototype.timingCompletedEnhanced=function(track){trackEnhancedEvent("timing_complete",{name:track.name(),value:track.value()})};GTAG.prototype.trackPageViewEvent=function(page,options){var name=page.fullName();var category=page.category();var props=page.properties();var campaign=page.proxy("context.campaign");var track;if(campaign&&options.gaWebMeasurementId){window.gtag("config",options.gaWebMeasurementId,{campaign:reject({name:campaign.name,source:campaign.source,medium:campaign.medium,content:campaign.content,keyword:campaign.term})})}if(campaign&&options.gaWebAppMeasurementId){window.gtag("config",options.gaWebAppMeasurementId,{campaign:reject({name:campaign.name,source:campaign.source,medium:campaign.medium,content:campaign.content,keyword:campaign.term})})}var nonInteraction=!!(options&&options.nonInteraction);var str=props.path;if(options.includeQueryString&&props.search){str+=props.search}window.gtag("event","page_view",{page_title:name||props.title,page_location:props.url,page_path:str,non_interaction:nonInteraction});if(name&&options.trackNamedPages){track=page.track(name);this.track(track,{nonInteraction:1})}if(category&&options.trackCategorizedPages){track=page.track(category);this.track(track,{nonInteraction:1})}};function trackEnhancedEvent(eventName,payload){window.gtag("event",eventName,extend(payload,{non_interaction:true}))}function setCustomDimensionsAndMetrics(props,options){if(options.gaSetAllMappedProps){var customMap=merge(options.gaCustomDimensions||{},options.gaCustomMetrics||{});var customMapValues={};for(var field in customMap){if(customMap.hasOwnProperty(field)){customMapValues[customMap[field]]=props[field]}}if(options.gaWebMeasurementId){window.gtag("config",options.gaWebMeasurementId,{custom_map:reject(customMapValues)})}if(options.gaWebAppMeasurementId){window.gtag("config",options.gaWebAppMeasurementId,{custom_map:reject(customMapValues)})}}}function setContentGroups(props,opts){if(opts.gaContentGroupings&&Object.keys(opts.gaContentGroupings).length){var contentGroupValues={};for(var field in opts.gaContentGroupings){if(opts.gaContentGroupings.hasOwnProperty(field)){contentGroupValues[opts.gaContentGroupings[field]]=props[field]}}if(opts.gaWebMeasurementId){window.gtag("config",opts.gaWebMeasurementId,reject(contentGroupValues))}if(opts.gaWebAppMeasurementId){window.gtag("config",opts.gaWebAppMeasurementId,reject(contentGroupValues))}}}function extractCheckoutOptions(track){var props=track.properties();var total=track.total()||track.revenue()||0;var coupon=track.coupon();var options=reject([track.paymentMethod(),track.shippingMethod()]);return{currency:track.currency(),value:total,items:getFormattedProductList(track),coupon:coupon,checkout_step:props.step||1,checkout_option:options.length?options.join(", "):null}}function getFormattedPromotion(track){var props=track.properties();return{id:track.promotionId()||track.id(),name:track.name(),creative:props.creative,position:props.position}}function getFormattedProduct(track){var props=track.properties();var product={id:track.productId()||track.id()||track.sku(),name:track.name(),category:track.category(),quantity:track.quantity(),price:track.price(),brand:props.brand,variant:props.variant,currency:track.currency()};if(props.position!=null){product.position=Math.round(props.position)}var coupon=track.coupon();if(coupon)product.coupon=coupon;return product}function getFormattedProductList(track){var productList=[];var products=track.products();var props=track.properties();for(var i=0;i<products.length;i++){var product=new Track({properties:products[i]});var productId=product.id()||product.productId()||product.sku();if(productId){productList.push({id:productId,name:product.name(),category:product.category()||track.category(),list_name:props.list_id||track.category()||"products",brand:product.properties().brand,variant:product.properties().variant,quantity:product.quantity(),price:product.price(),list_position:getProductPosition(product,products)})}}return productList}function getProductPosition(item,products){var position=item.properties().position;if(typeof position!=="undefined"&&!Number.isNaN(Number(position))&&Number(position)>-1){return Number(position)}var productIds=products.map(function(x){return x.product_id}).filter(Boolean);if(productIds.length===0){productIds=products.map(function(x){return x.sku});return productIds.indexOf(item.sku())+1}return productIds.indexOf(item.productId())+1}function merge(obj1,obj2){var res={};for(var propObj1 in obj1){if(obj1.hasOwnProperty(propObj1)){res[propObj1]=obj1[propObj1]}}for(var propObj2 in obj2){if(obj2.hasOwnProperty(propObj2)&&!res.hasOwnProperty(propObj2)){res[propObj2]=obj2[propObj2]}}return res}GTAG.merge=merge},{"@ndhoule/defaults":8,"@segment/analytics.js-integration":433,extend:1126,reject:1150,"segmentio-facade":1158}],433:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":434,"./statics":435,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:436,"slug-component":1165}],434:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],435:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:437,dup:51}],436:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],437:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],438:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("component-each");var is=require("is");var extend=require("@ndhoule/extend");var toISOString=require("@segment/to-iso-string");var toString=Object.prototype.toString;var Heap=module.exports=integration("Heap").global("heap").option("appId","").tag('<script src="//cdn.heapanalytics.com/js/heap-{{ appId }}.js">');Heap.prototype.initialize=function(){window.heap=window.heap||[];window.heap.load=function(appid,config){window.heap.appid=appid;window.heap.config=config;var methodFactory=function(type){return function(){window.heap.push([type].concat(Array.prototype.slice.call(arguments,0)))}};var heapMethods=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty","resetIdentity"];each(heapMethods,function(method){window.heap[method]=methodFactory(method)})};window.heap.load(this.options.appId);this.load(this.ready)};Heap.prototype.loaded=function(){return!!(window.heap&&window.heap.appid)};Heap.prototype.identify=function(identify){var traits=identify.traits({email:"_email"});var id=identify.userId();if(id)window.heap.identify(id);window.heap.addUserProperties(clean(traits))};Heap.prototype.track=function(track){window.heap.track(track.event(),clean(track.properties()))};function clean(obj){var ret={};for(var k in obj){if(obj.hasOwnProperty(k)){var value=obj[k];if(value===null||value===undefined)continue;if(is.date(value)){ret[k]=toISOString(value);continue}if(is.bool(value)){ret[k]=value;continue}if(is.number(value)){ret[k]=value;continue}if(toString.call(value)==="[object Array]"){ret=extend(ret,trample(k,value));continue}if(toString.call(value)!=="[object Object]"){ret[k]=value.toString();continue}ret=extend(ret,trample(k,value))}}function trample(key,value){var nestedObj={};nestedObj[key]=value;var flattenedObj=flatten(nestedObj,{safe:true});for(var k in flattenedObj){if(is.array(flattenedObj[k]))flattenedObj[k]=JSON.stringify(flattenedObj[k])}return flattenedObj}return ret}function flatten(target,opts){var options=opts||{};var delimiter=options.delimiter||".";var maxDepth=options.maxDepth;var currentDepth=1;var output={};function step(object,prev){Object.keys(object).forEach(function(key){var value=object[key];var isarray=options.safe&&Array.isArray(value);var type=Object.prototype.toString.call(value);var isobject=type==="[object Object]"||type==="[object Array]";var newKey=prev?prev+delimiter+key:key;if(!options.maxDepth){maxDepth=currentDepth+1}if(!isarray&&isobject&&Object.keys(value).length&&currentDepth<maxDepth){++currentDepth;return step(value,newKey)}output[newKey]=value})}step(target);return output}if(!Object.keys){Object.keys=function(o){if(o!==Object(o)){throw new TypeError("Object.keys called on a non-object")}var k=[];var p;for(p in o)if(Object.prototype.hasOwnProperty.call(o,p))k.push(p);return k}}},{"@ndhoule/extend":13,"@segment/analytics.js-integration":439,"@segment/to-iso-string":1103,"component-each":1112,is:1131}],439:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":440,"./statics":441,"@ndhoule/defaults":8,"component-bind":1109,debug:442,dup:49,extend:444,"slug-component":1165}],440:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],441:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:445,dup:51}],442:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":443,_process:1149,dup:43}],443:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:446}],444:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],445:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],446:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],447:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var each=require("@ndhoule/each");var Hindsight=module.exports=integration("Hindsight").global("RB").option("pixel_code","").option("customTrackingDomain","").option("enableCookieSync",true).tag('<script src="https://{{ host }}/assets/{{ lib }}.js">');Hindsight.prototype.initialize=function(){window.RB={};window.RB.disablePushState=true;window.RB.queue=[];window.RB.track=window.RB.track||function(){window.RB.queue.push(Array.prototype.slice.call(arguments))};window.RB.source=this.options.pixel_code;var hasCustomDomain=!!this.options.customTrackingDomain;var enableCookieSync=this.options.enableCookieSync;var scriptHost=hasCustomDomain?this.options.customTrackingDomain:"getrockerbox.com";var scriptLib=hasCustomDomain&&enableCookieSync?"wxyz.rb":"wxyz.v2";var tagParams={host:scriptHost,lib:scriptLib};this.load(tagParams,this.ready)};Hindsight.prototype.loaded=function(){return!!window.RB&&!!window.RB.loaded};Hindsight.prototype.page=function(page){window.RB.track("view",format(page.properties()))};Hindsight.prototype.track=function(track){window.RB.track(track.event(),format(track.properties()))};Hindsight.prototype.identify=function(identify){window.RB.track("identify",identify.traits())};function format(props){var ret={};each(function(value,key){ret[key]=is.object(value)?window.JSON.stringify(value):value;return ret[key]},props);return ret}},{"@ndhoule/each":10,"@segment/analytics.js-integration":448,is:1131}],448:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":449,"./statics":450,"@ndhoule/defaults":8,"component-bind":1109,debug:451,dup:49,extend:454,"slug-component":1165}],449:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],450:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:453,dup:51}],451:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":452,_process:1149,dup:43}],452:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:455}],453:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],454:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],455:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],456:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var HitTail=module.exports=integration("HitTail").assumesPageview().global("htk").option("siteId","").tag('<script src="//{{ siteId }}.hittail.com/mlt.js">');HitTail.prototype.initialize=function(){this.load(this.ready)};HitTail.prototype.loaded=function(){return isFunction(window.htk)};function isFunction(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==="[object Function]"}},{"@segment/analytics.js-integration":457}],457:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":458,"./statics":459,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],458:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":460,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],459:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:461,dup:42}],460:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],461:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],462:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var Hotjar=module.exports=integration("Hotjar").option("hjid",null).option("hjPlaceholderPolyfill",true);Hotjar.prototype.initialize=function(){function areOptionsValid(options){var validators={isHjidValid:is.number(options.hjid)&&!is.nan(options.hjid)&&options.hjid!==0,isPlaceholderPolyfillValid:is.bool(options.hjPlaceholderPolyfill)};for(var validator in validators){if(!validators[validator]){console.warn("Hotjar Integration - "+validator+" returned false, not loading.");return false}}return true}this.options.hjid=Number(this.options.hjid);if(!areOptionsValid(this.options))return;window._hjSelf=this;(function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:h._hjSelf.options.hjid,hjsv:6,hjPlaceholderPolyfill:h._hjSelf.options.hjPlaceholderPolyfill};a=o.getElementsByTagName("head")[0];r=o.createElement("script");r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r)})(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=");this.ready()};Hotjar.prototype.identify=function(identify){if(!identify.userId()){return this.debug("user id is required")}var traits=identify.traits();delete traits.id;window.hj("identify",identify.userId(),traits)}},{"@segment/analytics.js-integration":463,is:1131}],463:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":464,"./statics":465,"@ndhoule/defaults":8,"component-bind":1109,debug:466,dup:49,extend:469,"slug-component":1165}],464:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],465:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:468,dup:51}],466:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":467,_process:1149,dup:43}],467:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:470}],468:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],469:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],470:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],471:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var convert=require("@segment/convert-dates");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_hsq");var each=require("@ndhoule/each");var HubSpot=module.exports=integration("HubSpot").assumesPageview().global("_hsq").global("hbspt").option("portalId",null).option("loadFormsSdk",false).option("enableEuropeanDataCenter",false).tag("global-tag",'<script id="hs-analytics" src="https://js.hs-analytics.net/analytics/{{ cacheBuster }}/{{ portalId }}.js">').tag("eu-tag",'<script id="hs-analytics" src="https://js-eu1.hs-analytics.net/analytics/{{ cacheBuster }}/{{ portalId }}.js">').tag("forms",'<script src="//js.hsforms.net/forms/shell.js">');HubSpot.prototype.initialize=function(){window._hsq=window._hsq||[];var cacheBuster=Math.ceil(new Date/3e5)*3e5;var shouldLoadLeadForms=this.options.loadFormsSdk;var self=this;var tagName=this.options.enableEuropeanDataCenter?"eu-tag":"global-tag";if(shouldLoadLeadForms){this.load("forms",function(){self.load(tagName,{cacheBuster:cacheBuster},self.ready)})}else{this.load(tagName,{cacheBuster:cacheBuster},this.ready)}};HubSpot.prototype.loaded=function(){var libLoaded=!!(window._hsq&&window._hsq.push!==Array.prototype.push);if(!this.options.loadFormsSdk){return libLoaded}return libLoaded&&!!(window.hbspt&&window.hbspt.forms)};HubSpot.prototype.page=function(){push("trackPageView")};HubSpot.prototype.identify=function(identify){var newIdentify=new Identify({traits:identify.traits(),userId:identify.userId()});if(!newIdentify.email()){return}var traits=newIdentify.traits({firstName:"firstname",lastName:"lastname"});traits=convertDates(traits);traits=formatTraits(traits);if(newIdentify.companyName()!==undefined){traits.company=newIdentify.companyName()}push("identify",traits)};HubSpot.prototype.track=function(track){var props=convertDates(track.properties({id:"_id",revenue:"value"}));props.id=track.event();push("trackEvent",track.event(),props)};function convertDates(properties){return convert(properties,function(date){return date.getTime()})}function formatTraits(traits){var ret={};each(function(value,key){var k=key.toLowerCase().split(" ").join("_").split(".").join("_").split("\n").join("_").split("\v").join("_").split("\t").join("_").split("\f").join("_").split("\r").join("_");ret[k]=value},traits);return ret}},{"@ndhoule/each":10,"@segment/analytics.js-integration":472,"@segment/convert-dates":1087,"global-queue":1127,"segmentio-facade":1158}],472:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":473,"./statics":474,"@ndhoule/defaults":8,"component-bind":1109,debug:475,dup:49,extend:477,"slug-component":1165}],473:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],474:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:478,dup:51}],475:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":476,_process:1149,dup:43}],476:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:479}],477:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],478:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],479:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],480:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Improvely=module.exports=integration("Improvely").assumesPageview().global("_improvely").global("improvely").option("domain","").option("projectId",null).tag('<script src="//{{ domain }}.iljmp.com/improvely.js">');Improvely.prototype.initialize=function(){window._improvely=[];window.improvely={init:function(e,t){window._improvely.push(["init",e,t])},goal:function(e){window._improvely.push(["goal",e])},label:function(e){window._improvely.push(["label",e])}};var domain=this.options.domain;var id=this.options.projectId;window.improvely.init(domain,id);this.load(this.ready)};Improvely.prototype.loaded=function(){return!!(window.improvely&&window.improvely.identify)};Improvely.prototype.identify=function(identify){var id=identify.userId();if(id)window.improvely.label(id)};Improvely.prototype.track=function(track){var props=track.properties({revenue:"amount"});props.type=track.event();window.improvely.goal(props)}},{"@segment/analytics.js-integration":481}],481:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":482,"./statics":483,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],482:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":484,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],483:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:485,dup:42}],484:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],485:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],486:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("__insp");var Inspectlet=module.exports=integration("Inspectlet").assumesPageview().global("__insp").global("__insp_").option("wid","").tag('<script src="//cdn.inspectlet.com/inspectlet.js">');Inspectlet.prototype.initialize=function(){push("wid",this.options.wid);this.load(this.ready)};Inspectlet.prototype.loaded=function(){return!!(window.__insp_&&window.__insp)};Inspectlet.prototype.identify=function(identify){var traits=identify.traits({id:"userid"});var email=identify.email();if(email)push("identify",email);push("tagSession",traits)};Inspectlet.prototype.track=function(track){push("tagSession",track.event(),track.properties())};Inspectlet.prototype.page=function(){push("virtualPage")}},{"@segment/analytics.js-integration":487,"global-queue":1127}],487:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":488,"./statics":489,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],488:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":490,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],489:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:491,dup:42}],490:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],491:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],492:[function(require,module,exports){"use strict";var convertDates=require("@segment/convert-dates");var defaults=require("@ndhoule/defaults");var del=require("obj-case").del;var integration=require("@segment/analytics.js-integration");var is=require("is");var extend=require("@ndhoule/extend");var clone=require("@ndhoule/clone");var each=require("@ndhoule/each");var pick=require("@ndhoule/pick");var Intercom=module.exports=integration("Intercom").global("Intercom").option("activator","#IntercomDefaultWidget").option("appId","").option("richLinkProperties",[]).tag('<script src="https://widget.intercom.io/widget/{{ appId }}">');Intercom.prototype.initialize=function(){window.Intercom=function(){window.Intercom.q.push(arguments)};window.Intercom.q=[];this.load(this.ready)};Intercom.prototype.loaded=function(){return typeof window.Intercom==="function"};Intercom.prototype.page=function(page){var integrationSettings=page.options(this.name);this.bootOrUpdate({},integrationSettings)};Intercom.prototype.identify=function(identify){var traits=identify.traits({userId:"user_id"});var integrationSettings=identify.options(this.name);var companyCreated=identify.companyCreated();var created=identify.created();var name=identify.name();var id=identify.userId();var group=this.analytics.group();var settings=this.options;if(!id&&!identify.email()){return}if(traits.company!==null&&!is.object(traits.company)){delete traits.company}if(traits.company){defaults(traits.company,group.traits())}if(name)traits.name=name;if(created){del(traits,"created");del(traits,"createdAt");traits.created_at=created}if(companyCreated){del(traits.company,"created");del(traits.company,"createdAt");traits.company.created_at=companyCreated}traits=convertDates(traits,formatDate);traits=formatNestedCustomTraits(traits,settings);if(integrationSettings.userHash)traits.user_hash=integrationSettings.userHash;if(integrationSettings.user_hash)traits.user_hash=integrationSettings.user_hash;this.bootOrUpdate(traits,integrationSettings)};Intercom.prototype.group=function(group){var settings=this.options;var props=group.traits({createdAt:"created",created:"created_at",monthlySpend:"monthly_spend"});props=convertDates(props,formatDate);var id=group.groupId();if(id)props.id=id;var integrationSettings=group.options(this.name);props=formatNestedCustomTraits(props,settings);var traits=extend({company:props},hideDefaultLauncher(integrationSettings));api("update",traits)};Intercom.prototype.track=function(track){var settings=this.options;var props=track.properties();var revenue=track.revenue();var revenueData;if(revenue){revenueData={price:{amount:revenue*100,currency:track.currency()}}}props=formatNestedCustomTraits(props,settings);props=extend(props,revenueData);del(props,"revenue");del(props,"currency");api("trackEvent",track.event(),props)};Intercom.prototype.bootOrUpdate=function(opts,integrationSettings){var options=opts||{};var method=this.booted===true?"update":"boot";var activator=this.options.activator;options.app_id=this.options.appId;if(activator!=="#IntercomDefaultWidget"){options.widget={activator:activator}}options=extend(options,hideDefaultLauncher(integrationSettings));api(method,options);this.booted=true};function formatDate(date){return Math.floor(date/1e3)}function formatNestedCustomTraits(obj,settings){var richLinkProperties=settings.richLinkProperties;var basicIntercomTraits=["companies","company","created_at","created","custom_attributes","company_id","id","name","monthly_spend","plan","remote_created_at","remove","user_id","email"];var semanticTraits=basicIntercomTraits.concat(richLinkProperties);var customTraits=clone(obj);each(function(trait){del(customTraits,trait)},semanticTraits);var standardTraits=pick(semanticTraits,obj);var supportedTraits={};each(function(value,key){if(!is.object(value)&&!is.array(value))supportedTraits[key]=value},customTraits);return extend(supportedTraits,standardTraits)}function api(){window.Intercom.apply(window.Intercom,arguments)}function hideDefaultLauncher(options){var ret={};var setting=options.hideDefaultLauncher;if(setting===undefined||typeof setting!=="boolean")return ret;ret.hide_default_launcher=setting;return ret}},{"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/each":10,"@ndhoule/extend":13,"@ndhoule/pick":18,"@segment/analytics.js-integration":493,"@segment/convert-dates":1087,is:1131,"obj-case":1143}],493:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":494,"./statics":495,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],494:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":496,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],495:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:497,dup:42}],496:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],497:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],498:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var clone=require("@ndhoule/clone");var Keen=module.exports=integration("Keen IO").global("KeenSegment").option("ipAddon",false).option("projectId","").option("readKey","").option("referrerAddon",false).option("trackAllPages",false).option("trackCategorizedPages",true).option("trackNamedPages",true).option("uaAddon",false).option("urlAddon",false).option("writeKey","").tag('<script src="//d26b395fwzu5fz.cloudfront.net/3.4.0/{{ lib }}.min.js">');Keen.prototype.initialize=function(){var lib=this.options.readKey?"keen":"keen-tracker";var options=this.options;var previousKeen=window.Keen||null;var self=this;if(!window.Keen||window.Keen.version!=="3.4.0"){window.Keen=undefined;!function(a,b){if(void 0===b[a]){b["_"+a]={},b[a]=function(c){b["_"+a].clients=b["_"+a].clients||{},b["_"+a].clients[c.projectId]=this,this._config=c},b[a].ready=function(c){b["_"+a].ready=b["_"+a].ready||[],b["_"+a].ready.push(c)};for(var c=["addEvent","setGlobalProperties","trackExternalLink","on"],d=0;d<c.length;d++){var e=c[d],f=function(a){return function(){return this["_"+a]=this["_"+a]||[],this["_"+a].push(arguments),this}};b[a].prototype[e]=f(e)}}}("Keen",window)}window.KeenSegment=window.Keen;this.client=new window.KeenSegment({projectId:options.projectId,readKey:options.readKey,writeKey:options.writeKey});this.load({lib:lib},function(){window.KeenSegment=window.Keen;if(previousKeen){window.Keen=previousKeen;previousKeen=undefined}self.ready()})};Keen.prototype.loaded=function(){return!!(window.KeenSegment&&window.KeenSegment.prototype.configure)};Keen.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(opts.trackAllPages){this.track(page.track())}if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};Keen.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var user={};if(id)user.userId=id;if(traits)user.traits=traits;var props={user:user};props=this.addons(props,identify);this.client.setGlobalProperties(function(){return clone(props)})};Keen.prototype.track=function(track){var props=track.properties();props=this.addons(props,track);this.client.addEvent(track.event(),props)};Keen.prototype.addons=function(properties,msg){var obj=properties;var options=this.options;var addons=[];if(options.ipAddon){addons.push({name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"ip_geo_info"});obj.ip_address="${keen.ip}"}if(options.uaAddon){addons.push({name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"parsed_user_agent"});obj.user_agent="${keen.user_agent}"}if(options.urlAddon){addons.push({name:"keen:url_parser",input:{url:"page_url"},output:"parsed_page_url"});obj.page_url=document.location.href}if(options.referrerAddon){addons.push({name:"keen:referrer_parser",input:{referrer_url:"referrer_url",page_url:"page_url"},output:"referrer_info"});obj.referrer_url=document.referrer;obj.page_url=document.location.href}obj.keen={timestamp:msg.timestamp(),addons:addons};return obj}},{"@ndhoule/clone":7,"@segment/analytics.js-integration":499}],499:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":500,"./statics":501,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],500:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":502,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],501:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:503,dup:42}],502:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],503:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],504:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var reject=require("reject");var each=require("@ndhoule/each");var remove=require("obj-case").del;var extend=require("@ndhoule/extend");var keys=require("@ndhoule/keys");var trample=require("@segment/trample");var KenshooInfinity=module.exports=integration("Kenshoo Infinity").option("subdomain","").option("cid","").mapping("events").tag('<script src="https://services.xg4ken.com/js/kenshoo.js?cid={{ cid }}">');KenshooInfinity.prototype.initialize=function(){this.load({cid:this.options.cid},this.ready)};KenshooInfinity.prototype.loaded=function(){return!!(window.kenshoo&&window.kenshoo.trackConversion)};KenshooInfinity.prototype.track=function(track){var conversionType=this.events(track.event());if(!conversionType.length)return;var subdomain=this.options.subdomain;var cid=this.options.cid;var revenue=track.revenue()||"0";var orderId=track.orderId();var promoCode=track.options(this.name).promoCode;var currency=track.currency();var customProperties=track.properties();remove(customProperties,"conversionType");remove(customProperties,"revenue");remove(customProperties,"currency");remove(customProperties,"orderId");remove(customProperties,"promoCode");customProperties=format(trample(customProperties,{delimiter:"_"}));var params=reject({conversionType:limitChars(conversionType,100)||"conv",revenue:revenue,currency:currency,orderId:limitChars(orderId,64),promoCode:limitChars(promoCode,1024)});params=extend(params,customProperties);var encodedParams={};each(function(value,key){encodedParams[key]=encodeURIComponent(value)},params);window.kenshoo.trackConversion(subdomain,cid,encodedParams)};function limitChars(string,limit){if(!string)return string;var ret=string.toString();return ret.substring(0,limit)}function format(properties){var ret={};var sortedKeys=keys(properties).sort().slice(0,15);each(function(key){var formattedKey=key.replace(/\s/g,"_");formattedKey=formattedKey.replace(/\W/g,"");formattedKey=limitChars(formattedKey,100);ret[formattedKey]=limitChars(properties[key],1024)},sortedKeys);return ret}},{"@ndhoule/each":10,"@ndhoule/extend":13,"@ndhoule/keys":16,"@segment/analytics.js-integration":505,"@segment/trample":1105,"obj-case":1143,reject:1150}],505:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":506,"./statics":507,"@ndhoule/defaults":8,"component-bind":1109,debug:508,dup:49,extend:511,"slug-component":1165}],506:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],507:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:510,dup:51}],508:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":509,_process:1149,dup:43}],509:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:512}],510:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],511:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],512:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],513:[function(require,module,exports){"use strict";var includes=require("@ndhoule/includes");var integration=require("@segment/analytics.js-integration");var is=require("is");var Kenshoo=module.exports=integration("Kenshoo").global("k_trackevent").option("cid","").option("events",[]).option("subdomain","").tag('<script src="//{{ subdomain }}.xg4ken.com/media/getpx.php?cid={{ cid }}">');Kenshoo.prototype.initialize=function(){this.load(this.ready)};Kenshoo.prototype.loaded=function(){return is.fn(window.k_trackevent)};Kenshoo.prototype.track=function(track){var events=this.options.events;var event=track.event();var revenue=track.revenue()||0;if(!includes(event,events))return;var params=["id="+this.options.cid,"type=conv","val="+revenue,"orderId="+track.orderId(),"promoCode="+track.coupon(),"valueCurrency="+track.currency(),"GCID=","kw=","product="];window.k_trackevent(params,this.options.subdomain)}},{"@ndhoule/includes":15,"@segment/analytics.js-integration":514,is:1131}],514:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":515,"./statics":516,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],515:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":517,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],516:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:518,dup:42}],517:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],518:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],519:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var push=require("global-queue")("_kmq");var extend=require("@ndhoule/extend");var del=require("obj-case").del;var KISSmetrics=module.exports=integration("KISSmetrics").global("KM").global("_kmil").global("_kmq").option("apiKey","").option("prefixProperties",true).option("trackCategorizedPages",true).option("trackNamedPages",true).tag("library",'<script src="//scripts.kissmetrics.com/{{ apiKey }}.2.js">');exports.isMobile=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone|iPod/i);KISSmetrics.prototype.initialize=function(){window._kmq=window._kmq||[];if(exports.isMobile)push("set",{"Mobile Session":"Yes"});this.load("library",this.ready)};KISSmetrics.prototype.loaded=function(){return is.object(window.KM)};KISSmetrics.prototype.page=function(page){if(!window.KM_SKIP_PAGE_VIEW){push("record","Page View",{"Viewed URL":page.url(),Referrer:page.referrer()||"Direct"})}this.trackPage(page)};KISSmetrics.prototype.trackPage=function(page){var category=page.category();var name=page.fullName();var opts=this.options;var e;if(opts.trackCategorizedPages&&category){e=page.category()}if(opts.trackNamedPages&&name){e=page.name()}if(!e){return}var event="Viewed "+e+" Page";var properties=prefix("Page",page.properties());push("record",event,properties)};KISSmetrics.prototype.identify=function(identify){var traits=clean(identify.traits());var id=identify.userId();if(id)push("identify",id);if(traits)push("set",traits)};KISSmetrics.prototype.track=function(track){var mapping={revenue:"Billing Amount"};var event=track.event();var properties=clean(track.properties(mapping));var revenue=track.revenue();if(revenue){properties.revenue=revenue}if(this.options.prefixProperties)properties=prefix(event,properties);push("record",event,properties)};KISSmetrics.prototype.alias=function(alias){push("alias",alias.to(),alias.from())};KISSmetrics.prototype.group=function(group){push("set",prefix("Group",group.traits()))};KISSmetrics.prototype.completedOrder=function(track){var opts=this.options;var event=track.event();var products=track.products();var timestamp=toUnixTimestamp(track.timestamp()||new Date);var properties=track.properties();del(properties,"products");if(opts.prefixProperties)properties=prefix(event,properties);push("record",event,properties);window._kmq.push(function(){each(products,function(product,i){var item=product;if(opts)item=prefix(event,item);item._t=timestamp+i;item._d=1;window.KM.set(item)})})};function prefix(event,properties){var prefixed={};each(properties,function(key,val){if(key==="Billing Amount"){prefixed[key]=val}else if(key==="revenue"){prefixed[event+" - "+key]=val;prefixed["Billing Amount"]=val}else{prefixed[event+" - "+key]=val}});return prefixed}function toUnixTimestamp(date){var d=new Date(date);return Math.floor(d.getTime()/1e3)}function clean(obj){var ret={};for(var k in obj){if(obj.hasOwnProperty(k)){var value=obj[k];if(value===null||typeof value==="undefined")continue;if(is.date(value)){ret[k]=toUnixTimestamp(value);continue}if(is.bool(value)){ret[k]=value;continue}if(is.number(value)){ret[k]=value;continue}if(value.toString()!=="[object Object]"){ret[k]=value.toString();continue}var nestedObj={};nestedObj[k]=value;var flattenedObj=flatten(nestedObj,{safe:true});for(var key in flattenedObj){if(is.array(flattenedObj[key])){flattenedObj[key]=flattenedObj[key].toString()}}ret=extend(ret,flattenedObj);delete ret[k]}}return ret}function flatten(target,options){var opts=options||{};var delimiter=opts.delimiter||".";var maxDepth=opts.maxDepth;var currentDepth=1;var output={};function step(object,prev){for(var key in object){if(object.hasOwnProperty(key)){var value=object[key];var isarray=opts.safe&&is.array(value);var type=Object.prototype.toString.call(value);var isobject=type==="[object Object]"||type==="[object Array]";var arr=[];var newKey=prev?prev+delimiter+key:key;if(!opts.maxDepth){maxDepth=currentDepth+1}for(var keys in value){if(value.hasOwnProperty(keys)){arr.push(keys)}}if(!isarray&&isobject&&arr.length&&currentDepth<maxDepth){++currentDepth;return step(value,newKey)}output[newKey]=value}}}step(target);return output}},{"@ndhoule/extend":13,"@segment/analytics.js-integration":520,"component-each":1112,"global-queue":1127,is:1131,"obj-case":1143}],520:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":521,"./statics":522,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],521:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":523,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],522:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:524,dup:42}],523:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],524:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],525:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_learnq");var tick=require("next-tick");var Track=require("segmentio-facade").Track;var foldl=require("@ndhoule/foldl");var remove=require("obj-case").del;var extend=require("@ndhoule/extend");var Klaviyo=module.exports=integration("Klaviyo").assumesPageview().global("_learnq").option("apiKey","").option("enforceEmail",false).tag('<script src="//static.klaviyo.com/onsite/js/klaviyo.js">');Klaviyo.prototype.initialize=function(){var self=this;push("account",this.options.apiKey);this.load(function(){tick(self.ready)})};Klaviyo.prototype.loaded=function(){return!!(window._learnq&&window._learnq.push!==Array.prototype.push)};Klaviyo.prototype.identify=function(identify){var traitAliases={email:"$email",id:"$id",firstName:"$first_name",lastName:"$last_name",phone:"$phone_number",title:"$title",exchangeId:"$exchange_id"};var traits=identify.traits(traitAliases);if(!identify.userId()&&!identify.email()&&!traits.$exchange_id)return;if(this.options.enforceEmail){remove(traits,"id");remove(traits,"$id")}if(this.options.enforceEmail&&!traits.$email)return;push("identify",traits)};Klaviyo.prototype.group=function(group){var props=group.properties();if(!props.name)return;push("identify",{$organization:props.name})};Klaviyo.prototype.track=function(track){push("track",track.event(),track.properties({revenue:"$value"}))};Klaviyo.prototype.orderCompleted=function(track){var products=formatProducts(track.products());var payload={$event_id:track.orderId(),$value:track.revenue(),Categories:products.categories,ItemNames:products.names,Items:products.items};var whitelist=["$event_id","$value","orderId","order_id","categories","itemNames","items","revenue","total","products"];var topLevelCustomProps=filter(track,whitelist);payload=extend(payload,topLevelCustomProps);push("track",track.event(),payload);var productProperties=formatItems(track);for(var x=0;x<productProperties.length;x++){push("track","Ordered Product",productProperties[x])}};function filter(facade,list){var ret=facade.properties();for(var x=0;x<list.length;x++){remove(ret,list[x])}return ret}function formatItems(track){return foldl(function(payloads,props){var product=new Track({properties:props});var itemWhitelist=["$event_id","$value","name","product categories","category","id","productId","product_id","sku","quantity","price","productUrl","imageUrl"];var itemCustomProps=filter(product,itemWhitelist);var item=reject({$value:product.price(),Name:product.name(),Quantity:product.quantity(),ProductCategories:[product.category()],ProductURL:product.proxy("properties.productUrl"),ImageURL:product.proxy("properties.imageUrl"),SKU:product.sku()});var identifier=product.productId()||product.id()||product.sku();item.$event_id=track.orderId()+"_"+identifier;item=extend(item,itemCustomProps);payloads.push(item);return payloads},[],track.products())}function formatProducts(products){return foldl(function(payloads,props){var product=new Track({properties:props});var whitelist=["id","product_id","productId","sku","name","quantity","itemPrice","price","rowTotal","categories","category","productUrl","imageUrl"];var customProps=filter(product,whitelist);var item=reject({id:product.productId()||product.id(),SKU:product.sku(),Name:product.name(),Quantity:product.quantity(),ItemPrice:product.price(),RowTotal:product.price(),Categories:[product.category()],ProductURL:product.proxy("properties.productUrl"),ImageURL:product.proxy("properties.imageUrl")});item=extend(item,customProps);payloads.items.push(item);payloads.categories.push(product.category());payloads.names.push(product.name());return payloads},{categories:[],names:[],items:[]},products)}function reject(obj){return foldl(function(res,val,key){var result=res;if(val!==undefined){result[key]=val}return result},{},obj)}},{"@ndhoule/extend":13,"@ndhoule/foldl":14,"@segment/analytics.js-integration":526,"global-queue":1127,"next-tick":1142,"obj-case":1143,"segmentio-facade":1158}],526:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":527,"./statics":528,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:530,"slug-component":1165}],527:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],528:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:529,dup:51}],529:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],530:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],531:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Linkedin=module.exports=integration("LinkedIn Insight Tag").option("partnerId","").tag('<script src="https://snap.licdn.com/li.lms-analytics/insight.min.js"><\/script>');Linkedin.prototype.initialize=function(){if(!this.options.partnerId)return;window._linkedin_data_partner_id=this.options.partnerId;this.load(this.ready)};Linkedin.prototype.loaded=function(){return window._linkedin_data_partner_id}},{"@segment/analytics.js-integration":532}],532:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":533,"./statics":534,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:535,dup:40,"slug-component":1165}],533:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":537,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],534:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:538,dup:42}],535:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":536,_process:1149,dup:43}],536:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:539}],537:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],538:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],539:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],540:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var clone=require("component-clone");var each=require("component-each");var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var when=require("do-when");var LiveChat=module.exports=integration("LiveChat").assumesPageview().global("LC_API").global("__lc").global("__lc_inited").option("group",0).option("license","").option("listen",false).tag('<script src="//cdn.livechatinc.com/tracking.js">');var integrationContext={name:"livechat",version:"1.0.0"};LiveChat.prototype.initialize=function(){var self=this;var user=this.analytics.user();var identify=new Identify({userId:user.id(),traits:user.traits()});window.__lc=clone(this.options);window.__lc.visitor={name:identify.name(),email:identify.email()};delete window.__lc.listen;this.load(function(){when(function(){return self.loaded()},function(){if(self.options.listen)self.attachListeners();tick(self.ready)})})};LiveChat.prototype.loaded=function(){return!!window.LC_API};LiveChat.prototype.identify=function(identify){var traits=identify.traits({userId:"User ID"});window.LC_API.set_custom_variables(convert(traits))};LiveChat.prototype.attachListeners=function(){var self=this;window.LC_API=window.LC_API||{};window.LC_API.on_chat_started=function(data){self.analytics.track("Live Chat Conversation Started",{agentName:data.agent_name},{context:{integration:integrationContext}})};window.LC_API.on_message=function(data){if(data.user_type==="visitor"){self.analytics.track("Live Chat Message Sent",{},{context:{integration:integrationContext}})}else{self.analytics.track("Live Chat Message Received",{agentName:data.agent_name,agentUsername:data.agent_login},{context:{integration:integrationContext}})}};window.LC_API.on_chat_ended=function(){self.analytics.track("Live Chat Conversation Ended")}};function convert(traits){var arr=[];each(traits,function(key,value){arr.push({name:key,value:value})});return arr}},{"@segment/analytics.js-integration":541,"component-clone":1110,"component-each":1112,"do-when":1125,"next-tick":1142,"segmentio-facade":1158}],541:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":542,"./statics":543,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:544,dup:40,"slug-component":1165}],542:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":547,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],543:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:548,dup:42}],544:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":545,_process:1149,dup:43}],545:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:546}],546:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],547:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],548:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],549:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("component-each");var has=Object.prototype.hasOwnProperty;var Localytics=module.exports=integration("Localytics").assumesPageview().global("LocalyticsGlobal").option("appKey","").option("namespace",null).option("polling",null).option("appVersion",null).option("networkCarrier",null).option("uploadTimeout",null).option("sessionTimeoutSeconds",null).option("storage",null).option("logger",null).option("trackAllPages",false).option("trackNamedPages",true).option("trackCategorizedPages",true).option("dimensions",{}).tag("localytics",'<script src="//web.localytics.com/v3/localytics.js">');Localytics.prototype.initialize=function(){var self=this;window.LocalyticsGlobal="ll";window.ll=window.ll||function(){window.ll.q=window.ll.q||[];window.ll.q.push(arguments)};window.ll.t=+new Date;window.ll("init",self.options.appKey,{});this.load("localytics",this.ready)};Localytics.prototype.loaded=function(){return!!window.LocalyticsGlobal};Localytics.prototype.identify=function(identify){var id=identify.userId();var email=identify.email();var name=identify.name();var firstName=identify.firstName();var lastName=identify.lastName();if(id)window.ll("setCustomerId",id);if(name)window.ll("setCustomerName",name);if(email)window.ll("setCustomerEmail",email);if(firstName)window.ll("setCustomerFirstName",firstName);if(lastName)window.ll("setCustomerLastName",lastName);this.setCustomDimensions(identify.traits())};Localytics.prototype.page=function(page){var category=page.category();var name=page.fullName();var event=page.event();var opts=this.options;if(opts.trackAllPages)window.ll("tagScreen",event);if(name&&opts.trackNamedPages)window.ll("tagScreen",name);if(category&&opts.trackCategorizedPages)window.ll("tagScreen",category)};Localytics.prototype.track=function(track){this.setCustomDimensions(track.properties());var value=track.revenue()||track.value();window.ll("tagEvent",track.event(),track.properties(),value)};Localytics.prototype.setCustomDimensions=function(props){var opts=this.options.dimensions;each(props,function(name,value){if(has.call(opts,name)){window.ll("setCustomDimension",opts[name],value)}})}},{"@segment/analytics.js-integration":550,"component-each":1112}],550:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":551,"./statics":552,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:553,dup:40,"slug-component":1165}],551:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":555,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],552:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:556,dup:42}],553:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":554,_process:1149,dup:43}],554:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:557}],555:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],556:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],557:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],558:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var LuckyOrange=module.exports=integration("Lucky Orange").assumesPageview().global("_loq").global("__lo_cs_added").global("__wtw_lucky_site_id").global("__wtw_lucky_is_segment_io").global("__wtw_custom_user_data").option("siteId",null).tag("http",'<script src="http://www.luckyorange.com/w.js?{{ cacheBuster }}">').tag("https",'<script src="https://ssl.luckyorange.com/w.js?{{ cacheBuster }}">');LuckyOrange.prototype.initialize=function(){if(!window._loq)window._loq=[];window.__wtw_lucky_site_id=this.options.siteId;var user=this.analytics.user();this.identify(new Identify({traits:user.traits(),userId:user.id()}));var cacheBuster=Math.floor((new Date).getTime()/6e4);var tagName=useHttps()?"https":"http";this.load(tagName,{cacheBuster:cacheBuster},this.ready)};LuckyOrange.prototype.loaded=function(){return!!window.__lo_cs_added};LuckyOrange.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();if(email)traits.email=email;var name=identify.name();if(name)traits.name=name;window.__wtw_custom_user_data=traits}},{"@segment/analytics.js-integration":559,"segmentio-facade":1158,"use-https":1180}],559:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":560,"./statics":561,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:563,"slug-component":1165}],560:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],561:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:562,dup:51}],562:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],563:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],564:[function(require,module,exports){"use strict";var alias=require("@segment/alias");var integration=require("@segment/analytics.js-integration");var Lytics=module.exports=integration("Lytics").global("jstag").option("cid","").option("stream","default").option("cookie","seerid").option("blockload",false).option("loadid",false).option("delay",2e3).option("sessionTimeout",1800).option("url","//c.lytics.io").tag('<script src="https://c.lytics.io/api/tag/{{ cid }}/lio.js">');var aliases={sessionTimeout:"sessecs"};Lytics.prototype.initialize=function(){var options=alias(this.options,aliases);var self=this;window.jstag=function(){function t(t){return function(){return t.apply(this,arguments),this}}function n(){var n=["ready"].concat(c.call(arguments));return t(function(){n.push(c.call(arguments)),this._q.push(n)})}var i={_q:[],_c:{},ts:(new Date).getTime(),ver:"2.0.0"},c=Array.prototype.slice;return i.init=function(t){return i._c=t,t.synchronous||i.loadtagmgr(t),this},i.loadtagmgr=function(t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=t.url+"/api/tag/"+t.cid+"/lio.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)},i.ready=n(),i.send=n("send"),i.mock=n("mock"),i.identify=n("identify"),i.pageView=n("pageView"),i.bind=t(function(t){i._q.push([t,c.call(arguments,1)])}),i.block=t(function(){i._c.blockload=!0}),i.unblock=t(function(){i._c.blockload=!1}),i}();this.load(function(){window.jstag.init(options);self.ready()})};Lytics.prototype.loaded=function(){return!!(window.jstag&&window.jstag.bind)};Lytics.prototype.page=function(page){window.jstag.send(this.options.stream,page.properties({name:"_e"}))};Lytics.prototype.identify=function(identify){window.jstag.send(this.options.stream,identify.traits({id:"user_id"}))};Lytics.prototype.track=function(track){var props=track.properties();props._e=track.event();window.jstag.send(this.options.stream,props)}},{"@segment/alias":21,"@segment/analytics.js-integration":565}],565:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":566,"./statics":567,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],566:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":568,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],567:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:569,dup:42}],568:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],569:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],570:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var umd=typeof window.define==="function"&&window.define.amd;var MadKudu=module.exports=integration("Madkudu").global("madkudu").option("apiKey","").readyOnLoad().tag('<script src="//cdn.madkudu.com/madkudu.js/v1/{{ apiKey }}/madkudu.min.js">');MadKudu.prototype.initialize=function(){!function(){var madkudu=window.madkudu=window.madkudu||[];if(!madkudu.initialize)if(madkudu.invoked)window.console&&console.error&&console.error("MadKudu snippet included twice.");else{madkudu.invoked=!0;madkudu.methods=["identify","reset","group","ready","page","track","once","on"];madkudu.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);madkudu.push(e);return madkudu}};for(var t=0;t<madkudu.methods.length;t++){var e=madkudu.methods[t];madkudu[e]=madkudu.factory(e)}madkudu.SNIPPET_VERSION="0.3.0"}}();var self=this;if(umd){window.require(["//cdn.madkudu.com/madkudu.js/v1/"+self.options.apiKey+"/madkudu.min.js"],function(madkudu){window.madkudu=madkudu;self.ready()});return}this.load({apiKey:this.options.apiKey},function(){self.ready()})};MadKudu.prototype.loaded=function(){return!!(window.madkudu&&window.madkudu.options)};MadKudu.prototype.page=function(){window.madkudu.page()};MadKudu.prototype.identify=function(identify){var id=identify.userId();var traits=identify.traits();if(id){window.madkudu.identify(id,traits)}else{window.madkudu.identify(traits)}}},{"@segment/analytics.js-integration":571}],571:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":572,"./statics":573,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],572:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":574,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],573:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:575,dup:42}],574:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],575:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],576:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var url=require("component-url");var when=require("do-when");var each=require("@ndhoule/each");var apiNameMapping={annualRevenue:"AnnualRevenue",anonymousIP:"AnonymousIP",billingCity:"BillingCity",billingCountry:"BillingCountry",billingPostalCode:"BillingPostalCode",billingState:"BillingState",billingStreet:"BillingStreet",department:"Department",doNotCall:"DoNotCall",doNotCallReason:"DoNotCallReason",emailInvalid:"EmailInvalid",emailInvalidCause:"EmailInvalidCause",fax:"Fax",industry:"Industry",inferredCompany:"InferredCompany",inferredCountry:"InferredCountry",leadRole:"LeadRole",leadScore:"LeadScore",leadSource:"LeadSource",leadStatus:"LeadStatus",mainPhone:"MainPhone",facebookDisplayName:"MarketoSocialFacebookDisplayName",facebookId:"MarketoSocialFacebookId",facebookPhotoURL:"MarketoSocialFacebookPhotoURL",facebookProfileURL:"MarketoSocialFacebookProfileURL",facebookReach:"MarketoSocialFacebookReach",facebookReferredEnrollments:"MarketoSocialFacebookReferredEnrollments",facebookReferredVisits:"MarketoSocialFacebookReferredVisits",lastReferredEnrollment:"MarketoSocialLastReferredEnrollment",lastReferredVisit:"MarketoSocialLastReferredVisit",linkedInDisplayName:"MarketoSocialLinkedInDisplayName",linkedInId:"MarketoSocialLinkedInId",linkedInPhotoURL:"MarketoSocialLinkedInPhotoURL",linkedInProfileURL:"MarketoSocialLinkedInProfileURL",linkedInReach:"MarketoSocialLinkedInReach",linkedInReferredEnrollments:"MarketoSocialLinkedInReferredEnrollments",linkedInReferredVisits:"MarketoSocialLinkedInReferredVisits",syndicationId:"MarketoSocialSyndicationId",totalReferredEnrollments:"MarketoSocialTotalReferredEnrollments",totalReferredVisits:"MarketoSocialTotalReferredVisits",twitterDisplayName:"MarketoSocialTwitterDisplayName",twitterId:"MarketoSocialTwitterId",twitterPhotoURL:"MarketoSocialTwitterPhotoURL",twitterProfileURL:"MarketoSocialTwitterProfileURL",twitterReach:"MarketoSocialTwitterReach",twitterReferredEnrollments:"MarketoSocialTwitterReferredEnrollments",twitterReferredVisits:"MarketoSocialTwitterReferredVisits",middleName:"MiddleName",mktoCompanyNotes:"MktoCompanyNotes",mktoPersonNotes:"MktoPersonNotes",mobilePhone:"MobilePhone",numberOfEmployees:"NumberOfEmployees",rating:"Rating",salutation:"Salutation",sicCode:"SICCode",site:"Site",title:"Title",unsubscribed:"Unsubscribed",unsubscribedReason:"UnsubscribedReason",website:"Website"};var Marketo=module.exports=integration("Marketo V2").assumesPageview().global("Munchkin").global("MktForms2").option("host","https://api.segment.io").option("accountId","").option("projectId","").option("marketoHostUrl","").option("marketoFormId","").option("traits",[]).tag('<script src="//munchkin.marketo.net/munchkin.js">').tag("forms",'<script src="{{marketoHostUrl}}/js/forms2/js/forms2.min.js">');var disableFormSubmitRedirects=function(form){if(form){form.onSuccess(function(){return false})}};Marketo.prototype.initialize=function(){var munchkinId=this.options.accountId;var marketoHostUrl=this.options.marketoHostUrl;var marketoFormId=parseInt(this.options.marketoFormId,10);var identifySettingsAreInvalid=marketoHostUrl===undefined||marketoHostUrl===""||Number.isNaN(marketoFormId)||marketoFormId<=0;if(identifySettingsAreInvalid){console.warn("Invalid settings for identify method. Please review your Marketo V2 destination settings.");return}var self=this;this.load(function(){if(window.Munchkin===undefined){return}window.Munchkin.init(munchkinId,{asyncOnly:true});when(self.loaded,self.ready)});this.load("forms",{marketoHostUrl:marketoHostUrl},function(){if(window.MktoForms2===undefined){return}var marketoForm=document.createElement("form");marketoForm.setAttribute("id","mktoForm_"+marketoFormId);marketoForm.setAttribute("style","display:none");document.body.appendChild(marketoForm);window.MktoForms2.loadForm(marketoHostUrl,munchkinId,marketoFormId,function(form){disableFormSubmitRedirects(form)})})};Marketo.prototype.loaded=function(){return is.object(window.Munchkin)&&!!window.MunchkinTracker};Marketo.prototype.page=function(page){if(!page.enabled("Marketo"))return;var properties=page.properties();var parsed=url.parse(properties.url);if(window.mktoMunchkinFunction===undefined){return}window.mktoMunchkinFunction("visitWebPage",{url:properties.url,params:parsed.query})};Marketo.prototype.setupAndSubmitForm=function(traits,form){form.addHiddenFields(traits,form);disableFormSubmitRedirects(form);form.submit()};Marketo.prototype.identify=function(identify){if(!identify.enabled("Marketo")){return}var self=this;var settings=this.options;var email=identify.email();if(!email)return;var traitsToSendMarketo={};var traits=identify.traits();var company=identify.proxy("traits.company");var address=identify.address();traitsToSendMarketo.Email=email;if(identify.birthday())traitsToSendMarketo.DateofBirth=identify.birthday();if(identify.firstName())traitsToSendMarketo.FirstName=identify.firstName();if(identify.gender())traitsToSendMarketo.MarketoSocialGender=identify.gender();if(identify.lastName())traitsToSendMarketo.LastName=identify.lastName();if(identify.phone())traitsToSendMarketo.Phone=identify.phone();if(identify.userId())traitsToSendMarketo.userId=identify.userId();if(identify.anonymousId())traitsToSendMarketo.anonymousId=identify.anonymousId();if(address){if(is.object(address)){traitsToSendMarketo.City=address.city;traitsToSendMarketo.Country=address.country;traitsToSendMarketo.PostalCode=address.zip||address.postalCode;traitsToSendMarketo.State=address.state}else{traitsToSendMarketo.Address=address}}if(company){if(is.object(company)){traitsToSendMarketo.Company=company.name}else{traitsToSendMarketo.Company=company}}each(function(trait){var segmentTrait=trait.value?trait.value.segmentTrait:trait.segmentTrait;var marketoField=trait.value?trait.value.marketoFieldName:trait.marketoFieldName;if(apiNameMapping[marketoField]){marketoField=apiNameMapping[marketoField]}if(traits[segmentTrait]!==undefined){traitsToSendMarketo[marketoField]=traits[segmentTrait]}},settings.traits);if(window.MktoForms2===undefined){return}window.MktoForms2.whenReady(function(form){var marketoFormId=parseInt(settings.marketoFormId,10);var validFormId=!(Number.isNaN(marketoFormId)||marketoFormId<=0);if(validFormId&&form.getId()===marketoFormId){self.setupAndSubmitForm(traitsToSendMarketo,form)}})}},{"@ndhoule/each":10,"@segment/analytics.js-integration":577,"component-url":1121,"do-when":1125,is:1131}],577:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":578,"./statics":579,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:580,dup:40,"slug-component":1165}],578:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":582,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],579:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:583,dup:42}],580:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":581,_process:1149,dup:43}],581:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:584}],582:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],583:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],584:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],585:[function(require,module,exports){"use strict";var fmt=require("@segment/fmt");var integration=require("@segment/analytics.js-integration");var is=require("is");var jsonp=require("jsonp");var url=require("component-url");var when=require("do-when");var has=Object.prototype.hasOwnProperty;var Marketo=module.exports=integration("Marketo").assumesPageview().global("Munchkin").option("host","https://api.segment.io").option("accountId","").option("projectId","").tag('<script src="//munchkin.marketo.net/munchkin.js">');Marketo.prototype.initialize=function(){var self=this;this.load(function(){window.Munchkin.init(self.options.accountId,{asyncOnly:true});when(self.loaded,self.ready)})};Marketo.prototype.loaded=function(){return is.object(window.Munchkin)&&!!window.MunchkinTracker};Marketo.prototype.page=function(page){var properties=page.properties();var parsed=url.parse(properties.url);window.mktoMunchkinFunction("visitWebPage",{url:properties.url,params:parsed.query})};Marketo.prototype.identify=function(identify){if(!identify.email())return;var traits=identify.traits({address:"Address",company:"Company",email:"Email",firstName:"FirstName",industry:"Industry",lastName:"LastName",phone:"Phone"});if(identify.userId())traits.userId=identify.userId();if(is.object(traits.Address)){traits.City=identify.proxy("address.city");traits.Country=identify.proxy("address.country");traits.PostalCode=identify.proxy("address.postalCode");traits.State=identify.proxy("address.state");delete traits.Address}this.requestHash(traits.Email,function(err,hash){var marketoFn=window.mktoMunchkinFunction;if(marketoFn)marketoFn("associateLead",traits,hash)})};Marketo.prototype.track=function(track){var properties=track.properties();var event=track.event();var url=event.replace(/[ _]/g,"-");if(event.match(/^\/event\//)===null){url=fmt("/event/%s",url)}var params="";for(var prop in properties){if(has.call(properties,prop)){params+=prop+"="+encodeURIComponent(properties[prop])+"&"}}window.mktoMunchkinFunction("visitWebPage",{url:url,params:params})};Marketo.prototype.emailHashUrl=function(email){var host=this.options.host;var projectId=this.options.projectId;return fmt("%s/integrations/marketo/v1/%s/%s/hash",host,projectId,email)};Marketo.prototype.requestHash=function(email,callback){var url=this.emailHashUrl(email);jsonp(url,callback)}},{"@segment/analytics.js-integration":586,"@segment/fmt":1089,"component-url":1121,"do-when":1125,is:1131,jsonp:1135}],586:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":587,"./statics":588,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:589,dup:40,"slug-component":1165}],587:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":591,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],588:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:592,dup:42}],589:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":590,_process:1149,dup:43}],590:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:593}],591:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],592:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],593:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],594:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var qs=require("component-querystring");var foldl=require("@ndhoule/foldl");var each=require("component-each");var toNoCase=require("to-no-case");var MediaMath=module.exports=integration("MediaMath").option("allPagesMtId","").option("allPagesMtAdId","").option("events",[]).tag("page",'<script src="//pixel.mathtag.com/event/js?mt_id={{ allPagesMtId }}&mt_adid={{ allPagesMtAdId }}&v1=&v2=&v3=&s1=&s2=&s3=">').tag("conversion",'<script src="//pixel.mathtag.com/event/js?{{ query }}">');MediaMath.prototype.initialize=function(){var allPagesMtId=this.options.allPagesMtId;var allPagesMtAdId=this.options.allPagesMtAdId;if(allPagesMtId&&allPagesMtAdId)this.load("page");this.ready()};MediaMath.prototype.loaded=function(){return true};MediaMath.prototype.track=function(track){var events=[];if(!this.options.events||!this.options.events.length)return;for(var i=0;i<this.options.events.length;i++){var item=this.options.events[i];if(item.value){if(toNoCase(item.key)===toNoCase(track.event()))events.push(item.value)}else if(toNoCase(item.event)===toNoCase(track.event())){events.push(item)}}var self=this;each(events,function(event){var queryParamPropertyMap=[].concat(event.vParameters||[],event.sParameters||[]);var query=foldl(function(query,kv){var property=kv&&kv.key;var mappedKey=kv&&kv.value;if(!(property&&mappedKey))return query;var value;if(property==="revenue"){value=(track.revenue()||0).toFixed(2)}else{value=track.proxy("properties."+property)}if(value!==undefined&&value!==null){query[mappedKey]=value}return query},{mt_id:event.mtId||"",mt_adid:event.mtAdId||"",v1:"",v2:"",v3:"",s1:"",s2:"",s3:""},queryParamPropertyMap);self.load("conversion",{query:qs.stringify(query)})})}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":595,"component-each":1112,"component-querystring":1118,"to-no-case":1171}],595:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":596,"./statics":597,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:598,dup:40,"slug-component":1165}],596:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":600,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],597:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:601,dup:42}],598:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":599,_process:1149,dup:43}],599:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:602}],600:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],601:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],602:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],603:[function(require,module,exports){"use strict";var alias=require("@segment/alias");var dates=require("@segment/convert-dates");var del=require("obj-case").del;var includes=require("@ndhoule/includes");var integration=require("@segment/analytics.js-integration");var iso=require("@segment/to-iso-string");var pick=require("@ndhoule/pick");var is=require("is");var indexOf=require("component-indexof");var Mixpanel=module.exports=integration("Mixpanel").global("mixpanel").option("eventIncrements",[]).option("propIncrements",[]).option("peopleProperties",[]).option("superProperties",[]).option("cookieName","").option("crossSubdomainCookie",false).option("secureCookie",false).option("persistence","cookie").option("nameTag",true).option("pageview",false).option("people",false).option("token","").option("setAllTraitsByDefault",true).option("consolidatedPageCalls",true).option("trackAllPages",false).option("trackNamedPages",false).option("trackCategorizedPages",false).option("groupIdentifierTraits",[]).option("sourceName","").option("enableEuropeanUnionEndpoint",false).tag('<script src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js">');var optionsAliases={cookieName:"cookie_name",crossSubdomainCookie:"cross_subdomain_cookie",secureCookie:"secure_cookie"};Mixpanel.prototype.initialize=function(){(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2}})(document,window.mixpanel||[]);this.options.eventIncrements=lowercase(this.options.eventIncrements);this.options.propIncrements=lowercase(this.options.propIncrements);var options=alias(this.options,optionsAliases);if(this.options.enableEuropeanUnionEndpoint){options.api_host="https://api-eu.mixpanel.com"}options.loaded=function(mixpanel){mixpanel.register({mp_lib:"Segment: web"})};window.mixpanel.init(options.token,options);this.load(this.ready)};Mixpanel.prototype.loaded=function(){return!!(window.mixpanel&&window.mixpanel.config)};Mixpanel.prototype.page=function(page){var category=page.category();var name=page.name();var opts=this.options;if(opts.consolidatedPageCalls){this.track(page.track());return}if(opts.trackAllPages){this.track(page.track());return}if(opts.trackCategorizedPages&&category){if(name){this.track(page.track(page.fullName()));return}this.track(page.track(category));return}if(name&&opts.trackNamedPages){this.track(page.track(name))}};var traitAliases={created:"$created",email:"$email",firstName:"$first_name",lastName:"$last_name",lastSeen:"$last_seen",name:"$name",username:"$username",phone:"$phone"};Mixpanel.prototype.identify=function(identify){var username=identify.username();var email=identify.email();var id=identify.userId();var setAllTraitsByDefault=this.options.setAllTraitsByDefault;var people=this.options.people;var peopleProperties=extendTraits(this.options.peopleProperties);var superProperties=this.options.superProperties;if(id)window.mixpanel.identify(id);var nametag=email||username||id;if(nametag)window.mixpanel.name_tag(nametag);var traits=identify.traits(traitAliases);if(traits.$created)del(traits,"createdAt");traits=dates(traits,iso);var traitsToUnion={};var traitsToSet={};for(var key in traits){if(!traits.hasOwnProperty(key))continue;var trait=traits[key];if(Array.isArray(trait)&&trait.length>0){traitsToUnion[key]=trait;var existingTrait=window.mixpanel.get_property(key);if(existingTrait&&Array.isArray(existingTrait)){traits[key]=unionArrays(existingTrait,trait)}}else{traitsToSet[key]=trait}}if(setAllTraitsByDefault){window.mixpanel.register(traits);if(people){window.mixpanel.people.set(traitsToSet);window.mixpanel.people.union(traitsToUnion)}}else{var mappedSuperProps=mapTraits(superProperties);var superProps=pick(mappedSuperProps||[],traits);if(!is.empty(superProps))window.mixpanel.register(superProps);if(people){var mappedPeopleProps=mapTraits(peopleProperties);var peoplePropsToSet=pick(mappedPeopleProps||[],traitsToSet);var peoplePropsToUnion=pick(mappedPeopleProps||[],traitsToUnion);if(!is.empty(peoplePropsToSet))window.mixpanel.people.set(peoplePropsToSet);if(!is.empty(peoplePropsToUnion))window.mixpanel.people.union(peoplePropsToUnion)}}};Mixpanel.prototype.track=function(track){var eventIncrements=this.options.eventIncrements||this.options.increments;var propIncrements=this.options.propIncrements;var eventLowercase=track.event().toLowerCase();var people=this.options.people;var props=track.properties();var revenue=track.revenue();var superProps=pick(this.options.superProperties,props);var sourceName=this.options.sourceName;if(sourceName)props.segment_source_name=sourceName;delete props.distinct_id;delete props.ip;delete props.mp_name_tag;delete props.mp_note;delete props.token;props=dates(props,iso);invertObjectArrays(props);if(people){if(includes(eventLowercase,eventIncrements)){window.mixpanel.people.increment(track.event());window.mixpanel.people.set("Last "+track.event(),new Date)}for(var key in props){if(!Object.prototype.hasOwnProperty.call(props,key)){continue}var prop=props[key];if(includes(key.toLowerCase(),propIncrements)){window.mixpanel.people.increment(key,prop)}}if(revenue){window.mixpanel.people.track_charge(revenue)}}var query;if(props.link_query){query=props.link_query;delete props.link_query;window.mixpanel.track_links(query,track.event(),props)}else if(props.form_query){query=props.form_query;delete props.form_query;window.mixpanel.track_forms(query,track.event(),props)}else{window.mixpanel.track(track.event(),props)}if(!is.empty(superProps)){window.mixpanel.register(superProps)}};Mixpanel.prototype.alias=function(alias){var mp=window.mixpanel;var to=alias.to();if(mp.get_distinct_id&&mp.get_distinct_id()===to)return;if(mp.get_property&&mp.get_property("$people_distinct_id")===to)return;mp.alias(to,alias.from())};Mixpanel.prototype.group=function(group){var groupIdentifierTraits=this.options.groupIdentifierTraits;var groupId=group.groupId();var userId=this.analytics.user().id();var traits=group.properties();if(!groupId||!userId||!groupIdentifierTraits.length){return}if(traits&&Object.keys(traits).length){for(var ind=0;ind<groupIdentifierTraits.length;ind++){window.mixpanel.get_group(groupIdentifierTraits[ind],groupId).set_once(traits)}}for(var i=0;i<groupIdentifierTraits.length;i++){window.mixpanel.set_group(groupIdentifierTraits[i],[groupId])}};function lowercase(arr){var ret=new Array(arr.length);for(var i=0;i<arr.length;++i){ret[i]=String(arr[i]).toLowerCase()}return ret}function mapTraits(arr){var ret=new Array(arr.length);for(var i=0;i<arr.length;++i){if(traitAliases.hasOwnProperty(arr[i])){ret.push(traitAliases[arr[i]])}else{ret.push(arr[i])}}return ret}function extendTraits(arr){var keys=[];for(var key in traitAliases){if(traitAliases.hasOwnProperty(key)){keys.push(key)}}for(var i=0;i<keys.length;++i){if(indexOf(arr,keys[i])<0){arr.push(keys[i])}}return arr}function invertObjectArrays(props){var properties=props;for(var propName in properties){var propValue=properties[propName];if(!properties.hasOwnProperty(propName)||!Array.isArray(propValue)){continue}var invertedArrays=invertObjectArray(propName,propValue);if(Object.keys(invertedArrays).length!==0){mergeArraysIntoObj(properties,invertedArrays);delete properties[propName]}}}function invertObjectArray(propName,arr){var invertedArrays={};for(var i=0;i<arr.length;i++){var elem=arr[i];if(typeof elem!=="object"){return{}}for(var key in elem){if(!elem.hasOwnProperty(key)){continue}var attrKey=propName+"_"+key+"s";if(attrKey in invertedArrays){invertedArrays[attrKey].push(elem[key])}else{invertedArrays[attrKey]=[elem[key]]}}}return invertedArrays}function mergeArraysIntoObj(destination,source){var d=destination;for(var arrayName in source){if(source.hasOwnProperty(arrayName)){var arr=source[arrayName];d[arrayName]=arrayName in d?d[arrayName].concat(arr):arr}}}function unionArrays(x,y){var obj={};var i;for(i=0;i<x.length;i++){obj[x[i]]=x[i]}for(i=0;i<y.length;i++){obj[y[i]]=y[i]}return Object.keys(obj)}},{"@ndhoule/includes":15,"@ndhoule/pick":18,"@segment/alias":21,"@segment/analytics.js-integration":604,"@segment/convert-dates":1087,"@segment/to-iso-string":1103,"component-indexof":1116,is:1131,"obj-case":1143}],604:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":605,"./statics":606,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],605:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":607,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],606:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:608,dup:42}],607:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],608:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],609:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var del=require("obj-case").del;var each=require("@ndhoule/each");var when=require("do-when");var reject=require("reject");var find=require("obj-case").find;var MoEngage=module.exports=integration("MoEngage").option("apiKey","").option("debugMode",false).tag('<script src="https://cdn.moengage.com/webpush/moe_webSdk.min.latest.js">');MoEngage.prototype.initialize=function(){var self=this;(function(i,s,o,g,r,a,m,n){i["moengage_object"]=r;i["moengage_q"]=[];var t={};var q=function(f){return function(){(i["moengage_q"]=i["moengage_q"]||[]).push({f:f,a:arguments})}};var f=["track_event","add_user_attribute","add_first_name","add_last_name","add_email","add_mobile","add_user_name","add_gender","add_birthday","destroy_session","add_unique_user_id","moe_events","call_web_push","track"];for(var k in f){t[f[k]]=q(f[k])}i["moe"]=i["moe"]||function(){n=arguments[0];return t}})(window,document,"script",null,"Moengage");this.load(function(){when(self.loaded,function(){self._client=window.moe({app_id:self.options.apiKey,debug_logs:self.options.debugMode?1:0});self.initializedAnonymousId=self.analytics.user().anonymousId();self.ready()})})};MoEngage.prototype.loaded=function(){return!!window.moeBannerText};MoEngage.prototype.identify=function(identify){var self=this;if(identify.userId())this._client.add_unique_user_id(identify.userId());var traitsMethodMap={firstName:"first_name",lastName:"last_name",email:"email",phone:"mobile",name:"user_name",username:"user_name",gender:"gender",birthday:"birthday",id:null};var traits=reject(identify.traits());each(function(value,key){if(key==="name"){if(identify.name())self._client.add_user_name(identify.name());if(identify.name()&&identify.username())return self._client.add_user_attribute("username",identify.username())}if(find(traitsMethodMap,key)){var method="add_"+traitsMethodMap[key];var trait=identify[key]();self._client[method](trait)}},traits);each(function(value,key){del(traits,key)},traitsMethodMap);each(function(value,key){self._client.add_user_attribute(key,value)},traits)};MoEngage.prototype.track=function(track){this._client.track_event(track.event(),track.properties())};MoEngage.prototype.alias=function(alias){if(alias.to())this._client.update_unique_user_id(alias.to())}},{"@ndhoule/each":10,"@segment/analytics.js-integration":610,"do-when":1125,"obj-case":1143,reject:1150}],610:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":611,"./statics":612,"@ndhoule/defaults":8,"component-bind":1109,debug:613,dup:49,extend:616,"slug-component":1165}],611:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],612:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:615,dup:51}],613:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":614,_process:1149,dup:43}],614:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:617}],615:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],616:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],617:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],618:[function(require,module,exports){"use strict";var bind=require("component-bind");var integration=require("@segment/analytics.js-integration");var is=require("is");var when=require("do-when");var Mojn=module.exports=integration("Mojn").global("_mojnTrack").option("customerCode","").option("region","eu").option("sync",false).tag("main",'<script src="https://cdn.idtargeting.com/track/{{region}}.js">').tag("custom",'<script src="https://cdn.idtargeting.com/track/{{customerCode}}.js">').tag("identify",'<img width="1" height="1" src="https://matcher.idtargeting.com/identify.gif?cid={{cid}}&_mjnctid={{mjnctid}}">').tag("sync",'<img width="1" height="1" src="http://ho.idtargeting.com/c/{{cid}}?u={{uid}}&_chk">');Mojn.prototype.initialize=function(){window._mojnTrack=window._mojnTrack||[];window._mojnTrack.push({cid:this.options.customerCode});var loaded=bind(this,this.loaded);var ready=this.ready;var self=this;this.load("main",function(){self.load("custom",function(){when(loaded,ready)})})};Mojn.prototype.loaded=function(){return is.object(window._mojnTrack)};Mojn.prototype.identify=function(identify){var email=identify.email();if(!email)return;this.load("identify",{cid:this.options.customerCode,mjnctid:email})};Mojn.prototype.track=function(track){var properties=track.properties();var revenue=properties.revenue;if(!revenue)return;var currency=properties.currency||"";var conv=currency+revenue;window._mojnTrack.push({conv:conv})};Mojn.prototype.page=function(){if(!this.options.sync)return;this.load("sync",{cid:this.options.customerCode,uid:this.analytics.user().anonymousId()})}},{"@segment/analytics.js-integration":619,"component-bind":1109,"do-when":1125,is:1131}],619:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":620,"./statics":621,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],620:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":622,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],621:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:623,dup:42}],622:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],623:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],624:[function(require,module,exports){"use strict";var Track=require("segmentio-facade").Track;var each=require("component-each");var integration=require("@segment/analytics.js-integration");var mq=require("global-queue")("monetateQ");var events={productViewed:"addItems",productAdded:"addReviewRows",orderCompleted:"addConversionRows"};var Monetate=module.exports=integration("Monetate").option("retail",false).option("siteId","").option("domain","").option("events",events).global("monetateQ");Monetate.prototype.initialize=function(){if(this.options.retail){this.options.events={orderCompleted:"addPurchaseRows",productViewed:"addProductDetails",productListViewed:"addProducts",productAdded:"addCartRows"}}window.monetateQ=window.monetateQ||[];this.ready()};Monetate.prototype.loaded=function(){return!!window.monetateQ};Monetate.prototype.page=function(page){push("setPageType",page.category()||page.name()||"unknown")};Monetate.prototype.productListViewed=function(track){var products=track.products();var items=[];each(products,function(product){var track=new Track({properties:product});var p=toProducts(track);items.push(p)});push(this.options.events.productListViewed,items)};Monetate.prototype.productViewed=function(track){var id=track.productId()||track.id();push(this.options.events.productViewed,[id])};Monetate.prototype.productAdded=function(track){push(this.options.events.productAdded,[toProduct(track)])};Monetate.prototype.orderCompleted=function(track){var products=track.products();var orderId=track.orderId();var items=[];each(products,function(product){var track=new Track({properties:product});var p=toProduct(track);p.conversionId=orderId;items.push(p)});push(this.options.events.orderCompleted,items)};function toProducts(track){return{itemId:track.productId()||track.id(),sku:track.sku()}}function toProduct(track){return{unitPrice:Number(track.price()).toFixed(2),quantity:track.quantity(),itemId:track.productId()||track.id(),sku:track.sku()}}function push(){mq.apply(null,arguments);if(push.tid)return;push.tid=setTimeout(function(){clearTimeout(push.tid);mq("trackData");push.tid=null})}},{"@segment/analytics.js-integration":625,"component-each":1112,"global-queue":1127,"segmentio-facade":1158}],625:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":626,"./statics":627,"@ndhoule/defaults":8,"component-bind":1109,debug:628,dup:49,extend:631,"slug-component":1165}],626:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],627:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:630,dup:51}],628:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":629,_process:1149,dup:43}],629:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:632}],630:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],631:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],632:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],633:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_mfq");var Mouseflow=module.exports=integration("Mouseflow").assumesPageview().global("_mfq").global("mouseflow").global("mouseflowHtmlDelay").option("apiKey","").option("mouseflowHtmlDelay",0).tag('<script src="//cdn.mouseflow.com/projects/{{ apiKey }}.js">');Mouseflow.prototype.initialize=function(){window.mouseflowHtmlDelay=this.options.mouseflowHtmlDelay;this.load(this.ready)};Mouseflow.prototype.loaded=function(){return!!window.mouseflow};Mouseflow.prototype.page=function(page){push("newPageView",page.path())};Mouseflow.prototype.identify=function(identify){set(identify.traits())};Mouseflow.prototype.track=function(track){var props=track.properties();props.event=track.event();set(props)};function set(obj){each(obj,function(key,value){push("setVariable",key,value)})}},{"@segment/analytics.js-integration":634,"component-each":1112,"global-queue":1127}],634:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":635,"./statics":636,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:1126,"slug-component":1165}],635:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],636:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:637,dup:51}],637:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],638:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var useHttps=require("use-https");var MouseStats=module.exports=integration("MouseStats").assumesPageview().global("msaa").global("MouseStatsVisitorPlaybacks").option("accountNumber","").tag("http",'<script src="http://www2.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}">').tag("https",'<script src="https://ssl.mousestats.com/js/{{ path }}.js?{{ cacheBuster }}">');MouseStats.prototype.initialize=function(){var accountNumber=this.options.accountNumber;var path=accountNumber.slice(0,1)+"/"+accountNumber.slice(1,2)+"/"+accountNumber;var cacheBuster=Math.floor((new Date).getTime()/6e4);var tagName=useHttps()?"https":"http";this.load(tagName,{path:path,cacheBuster:cacheBuster},this.ready)};MouseStats.prototype.loaded=function(){return is.array(window.MouseStatsVisitorPlaybacks)};MouseStats.prototype.identify=function(identify){each(identify.traits(),function(key,value){window.MouseStatsVisitorPlaybacks.customVariable(key,value)})}},{"@segment/analytics.js-integration":639,"component-each":1112,is:1131,"use-https":1180}],639:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":640,"./statics":641,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],640:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":642,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],641:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:643,dup:42}],642:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],643:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],644:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var Track=require("segmentio-facade").Track;var integration=require("@segment/analytics.js-integration");var normalize=require("to-no-case");var qs=require("component-querystring");var sha256=require("js-sha256");var Nanigans=module.exports=integration("Nanigans").option("appId","").option("events",{}).tag("page",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type=visit&name=landing">').tag("track",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type={{ type }}&name={{ name }}&user_id={{ userId }}&ut1={{ ut1 }}">').tag("track_no_user_id",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type={{ type }}&name={{ name }}&ut1={{ ut1 }}">').tag("product",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type=purchase&name={{ name }}&user_id={{ userId }}&ut1={{ ut1 }}&sku={{ sku }}">').tag("add_to_cart",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type=user&name={{ name }}&user_id={{ userId }}&ut1={{ ut1 }}&{{ products }}">').tag("add_to_cart_no_user_id",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type=user&name={{ name }}&ut1={{ ut1 }}&{{ products }}">').tag("purchase",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type={{ type }}&name={{ name }}&user_id={{ userId }}&ut1={{ ut1 }}&unique={{ orderId }}&{{ products }}">').tag("purchase_no_user_id",'<img src="//api.nanigans.com/event.php?app_id={{ appId }}&type={{ type }}&name={{ name }}&ut1={{ ut1 }}&unique={{ orderId }}&{{ products }}">');Nanigans.prototype.initialize=function(){this.ready()};Nanigans.prototype.loaded=function(){return true};Nanigans.prototype.page=function(){this.load("page")};Nanigans.prototype.track=function(track){var user=this.analytics.user();var events=get(this.options.events,track.event());if(!events.length)return;var products=track.products();var data={};data.app_id=this.options.appId;data.user_id=user.id();data.unique=track.orderId();data.sku=Array(products.length);data.qty=Array(products.length);data.value=Array(products.length);if(email(user)!=null){data.ut1=sha256(email(user))}for(var i=0;i<products.length;i++){var item=new Track({properties:products[i]});data.qty[i]=item.quantity();data.sku[i]=item.sku();data.value[i]=item.price()}for(var j=0;j<events.length;j++){var event=events[j];var params={appId:data.app_id,name:renderByProxy(event.name,track),type:event.type,ut1:data.ut1,products:{}};if(data.user_id)params.userId=data.user_id;switch(event.type){case"purchase":params.orderId=data.unique;params.products.qty=data.qty;params.products.value=data.value;params.products.sku=data.sku;params.products=qs.stringify(params.products);if(params.userId){this.load("purchase",params)}else{this.load("purchase_no_user_id",params)}break;case"user":switch(event.name){case"product":params.sku=data.sku;break;case"add_to_cart":params.products.qty=data.qty;params.products.value=data.value;params.products.sku=data.sku;params.products=qs.stringify(params.products);if(params.userId){this.load("add_to_cart",params)}else{this.load("add_to_cart_no_user_id",params)}break;default:if(params.userId){this.load("track",params)}else{this.load("track_no_user_id",params)}break}break;default:if(params.userId){this.load("track",params)}else{this.load("track_no_user_id",params)}break}}};function get(events,name){var a=normalize(name);var ret=[];for(var i=0;i<events.length;++i){var b=normalize(events[i].key||events[i].event);if(b===a)ret.push(events[i].value||events[i])}return ret}function email(user){var identify=new Identify({userId:user.id(),traits:user.traits()});return identify.email()}function renderByProxy(template,facade){return template.replace(/\{\{\ *(\w+?[\.\w+]*?)\ *\}\}/g,function(_,$1){return facade.proxy($1)||""})}},{"@segment/analytics.js-integration":645,"component-querystring":1118,"js-sha256":1133,"segmentio-facade":1158,"to-no-case":651}],645:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":646,"./statics":647,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],646:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":649,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":648}],647:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:650,dup:42}],648:[function(require,module,exports){arguments[4][384][0].apply(exports,arguments)},{dup:384}],649:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],650:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],651:[function(require,module,exports){arguments[4][388][0].apply(exports,arguments)},{dup:388}],652:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("__nls");var Navilytics=module.exports=integration("Navilytics").assumesPageview().global("__nls").option("memberId","").option("projectId","").tag('<script src="//www.navilytics.com/nls.js?mid={{ memberId }}&pid={{ projectId }}">');Navilytics.prototype.initialize=function(){window.__nls=window.__nls||[];this.load(this.ready)};Navilytics.prototype.loaded=function(){return!!(window.__nls&&Array.prototype.push!==window.__nls.push)};Navilytics.prototype.track=function(track){push("tagRecording",track.event())}},{"@segment/analytics.js-integration":653,"global-queue":1127}],653:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":654,"./statics":655,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],654:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":656,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],655:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:657,dup:42}],656:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],657:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],658:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var find=require("obj-case").find;var reject=require("reject");var dateformat=require("dateformat");var sha256=require("js-sha256");var NielsenDCR=module.exports=integration("Nielsen DCR").option("appId","").option("instanceName","").option("nolDevDebug",false).option("assetIdPropertyName","").option("contentAssetIdPropertyName","").option("adAssetIdPropertyName","").option("subbrandPropertyName","").option("clientIdPropertyName","").option("customSectionProperty","").option("sendCurrentTimeLivestream",false).option("contentLengthPropertyName","total_length").option("optout",false).tag("http",'<script src="http://cdn-gl.imrworldwide.com/conf/{{ appId }}.js#name={{ instanceName }}&ns=NOLBUNDLE">').tag("https",'<script src="https://cdn-gl.imrworldwide.com/conf/{{ appId }}.js#name={{ instanceName }}&ns=NOLBUNDLE">');NielsenDCR.prototype.initialize=function(){var protocol=window.location.protocol==="https:"||window.location.protocol==="chrome-extension:"?"https":"http";var config={};!function(t,n){t[n]=t[n]||{nlsQ:function(e,o,c,r,s,i){return t[n][o]=t[n][o]||{g:c||{},ggPM:function(e,c,r,s,i){(t[n][o].q=t[n][o].q||[]).push([e,c,r,s,i])}},t[n][o]}}}(window,"NOLBUNDLE");if(this.options.nolDevDebug)config.nol_sdkDebug="debug";if(this.options.optout)config.optout=true;this._client=window.NOLBUNDLE.nlsQ(this.options.appId,this.options.instanceName,config);this.currentAssetId=null;this.currentPosition=0;this.isDCRStream=false;this.heartbeatId=null;this.load(protocol,this.ready)};NielsenDCR.prototype.loaded=function(){return this._client&&typeof this._client.ggPM==="function"};NielsenDCR.prototype.page=function(page){var integrationOpts=page.options(this.name);var customSectionName;if(this.options.customSectionProperty){customSectionName=page.proxy("properties."+this.options.customSectionProperty)}var defaultSectionName=page.fullName()||page.name()||page.event();var sectionName=customSectionName||defaultSectionName;var url=page.url();var staticMetadata=reject({type:"static",assetid:sha256(url),section:sectionName,segA:integrationOpts.segA,segB:integrationOpts.segB,segC:integrationOpts.segC});this._client.ggPM("staticstart",staticMetadata)};NielsenDCR.prototype.heartbeat=function(assetId,position,livestream){var self=this;try{if(typeof position!=="number"){position=parseInt(position,10)}}catch(e){return}if(assetId&&this.currentAssetId!==assetId){this.currentAssetId=assetId}if(livestream){this.currentPosition=getOffsetTime(position,self.options)}else if(position>=0){this.currentPosition=position}this.heartbeatId=setInterval(function(){self._client.ggPM("setPlayheadPosition",self.currentPosition);self.currentPosition++},1e3)};NielsenDCR.prototype.getContentMetadata=function(track,type){var propertiesPath="properties.";if(type&&type==="contentEvent")propertiesPath="properties.content.";var integrationOpts=track.options(this.name);var adLoadType=formatLoadType(integrationOpts,track,propertiesPath);if(!adLoadType)return;this.isDCRStream=true;var customAssetId;if(this.options.contentAssetIdPropertyName){customAssetId=track.proxy(propertiesPath+this.options.contentAssetIdPropertyName)}var assetIdProp=track.proxy(propertiesPath+"content_asset_id")||track.proxy(propertiesPath+"asset_id");var assetId=customAssetId||assetIdProp;var contentMetadata={type:"content",assetid:assetId,program:track.proxy(propertiesPath+"program"),title:track.proxy(propertiesPath+"title"),isfullepisode:track.proxy(propertiesPath+"full_episode")?"y":"n",mediaURL:track.proxy("context.page.url"),airdate:formatAirdate(track.proxy(propertiesPath+"airdate")),adloadtype:adLoadType,crossId1:find(integrationOpts,"crossId1"),crossId2:find(integrationOpts,"crossId2"),hasAds:find(integrationOpts,"hasAds")===true?"1":"0"};if(this.options.contentLengthPropertyName&&this.options.contentLengthPropertyName!=="total_length"){var contentLengthKey=this.options.contentLengthPropertyName;contentMetadata.length=track.proxy(propertiesPath+contentLengthKey)}else{contentMetadata.length=track.proxy(propertiesPath+"total_length")}contentMetadata.length=contentMetadata.length||0;if(this.options.subbrandPropertyName){var subbrandProp=this.options.subbrandPropertyName;contentMetadata.subbrand=track.proxy(propertiesPath+subbrandProp)}if(this.options.clientIdPropertyName){var clientIdProp=this.options.clientIdPropertyName;contentMetadata.clientid=track.proxy(propertiesPath+clientIdProp)}var segB=find(integrationOpts,"segB");var segC=find(integrationOpts,"segC");if(segB)contentMetadata.segB=segB;if(segC)contentMetadata.segC=segC;return reject(contentMetadata)};NielsenDCR.prototype.getAdMetadata=function(track){var integrationOpts=track.options(this.name);var adLoadType=formatLoadType(integrationOpts,track,"properties");if(!adLoadType)return;var type=track.proxy("properties.type");if(typeof type==="string")type=type.replace("-","");var customAssetId;if(this.options.adAssetIdPropertyName){customAssetId=track.proxy("properties."+this.options.adAssetIdPropertyName)}var assetIdProp=track.proxy("properties.ad_asset_id")||track.proxy("properties.asset_id");var assetId=customAssetId||assetIdProp;var adMetadata={assetid:assetId,type:type||"ad"};return adMetadata};NielsenDCR.prototype.videoContentStarted=function(track){clearInterval(this.heartbeatId);var contentMetadata=this.getContentMetadata(track);if(!contentMetadata)return;var position=track.proxy("properties.position");var livestream=track.proxy("properties.livestream");if(this.currentAssetId&&contentMetadata.assetid&&this.currentAssetId!==contentMetadata.assetid){this._client.ggPM("end",this.currentPosition)}this._client.ggPM("loadMetadata",contentMetadata);this.heartbeat(contentMetadata.assetid,position,livestream)};NielsenDCR.prototype.videoContentPlaying=function(track){clearInterval(this.heartbeatId);if(!this.isDCRStream)return;var assetId=this.options.contentAssetIdPropertyName?track.proxy("properties."+this.options.contentAssetIdPropertyName):track.proxy("properties.asset_id");var position=track.proxy("properties.position");var livestream=track.proxy("properties.livestream");this.heartbeat(assetId,position,livestream)};NielsenDCR.prototype.videoContentCompleted=function(track){var self=this;clearInterval(this.heartbeatId);if(!this.isDCRStream)return;var position=track.proxy("properties.position");var livestream=track.proxy("properties.livestream");if(livestream)position=getOffsetTime(position,self.options);this._client.ggPM("setPlayheadPosition",position);this._client.ggPM("stop",position)};NielsenDCR.prototype.videoAdStarted=function(track){clearInterval(this.heartbeatId);var type=track.proxy("properties.type");if(typeof type==="string")type=type.replace("-","");var contentMetadata={};if(type==="preroll"){contentMetadata=this.getContentMetadata(track,"contentEvent");if(!contentMetadata)return;this._client.ggPM("loadMetadata",contentMetadata)}if(!this.isDCRStream)return;var adAssetId=this.options.adAssetIdPropertyName?track.proxy("properties."+this.options.adAssetIdPropertyName):track.proxy("properties.asset_id");var position=track.proxy("properties.position");var adMetadata={assetid:adAssetId,type:type||"ad"};this._client.ggPM("loadMetadata",adMetadata);this.heartbeat(contentMetadata.assetid,position)};NielsenDCR.prototype.videoAdPlaying=function(track){clearInterval(this.heartbeatId);if(!this.isDCRStream)return;var position=track.proxy("properties.position");this.heartbeat(null,position)};NielsenDCR.prototype.videoAdCompleted=function(track){clearInterval(this.heartbeatId);if(!this.isDCRStream)return;var position=track.proxy("properties.position");this._client.ggPM("setPlayheadPosition",position);this._client.ggPM("stop",position)};NielsenDCR.prototype.videoPlaybackPaused=NielsenDCR.prototype.videoPlaybackSeekStarted=NielsenDCR.prototype.videoPlaybackBufferStarted=NielsenDCR.prototype.videoPlaybackInterrupted=NielsenDCR.prototype.videoPlaybackExited=function(track){var self=this;clearInterval(this.heartbeatId);if(!this.isDCRStream)return;var position=track.proxy("properties.position");var livestream=track.proxy("properties.livestream");if(livestream)position=getOffsetTime(position,self.options);this._client.ggPM("stop",position)};NielsenDCR.prototype.videoPlaybackResumed=NielsenDCR.prototype.videoPlaybackSeekCompleted=NielsenDCR.prototype.videoPlaybackBufferCompleted=function(track){clearInterval(this.heartbeatId);if(!this.isDCRStream)return;var contentAssetId=this.options.contentAssetIdPropertyName?track.proxy("properties."+this.options.contentAssetIdPropertyName):track.proxy("properties.content_asset_id");var position=track.proxy("properties.position");var livestream=track.proxy("properties.livestream");var type=contentAssetId?"content":"ad";if(this.currentAssetId&&contentAssetId&&this.currentAssetId!==contentAssetId){this._client.ggPM("end",this.currentPosition);if(type==="ad"){var adMetadata=this.getAdMetadata(track);if(!adMetadata)return;this._client.ggPM("loadMetadata",adMetadata)}else if(type==="content"){var contentMetadata=this.getContentMetadata(track,"contentEvent");if(!contentMetadata)return;this._client.ggPM("loadMetadata",contentMetadata)}}this.heartbeat(contentAssetId,position,livestream)};NielsenDCR.prototype.videoPlaybackCompleted=function(track){var self=this;clearInterval(this.heartbeatId);if(!this.isDCRStream)return;var position=track.proxy("properties.position");var livestream=track.proxy("properties.livestream");if(livestream)position=getOffsetTime(position,self.options);this._client.ggPM("setPlayheadPosition",position);this._client.ggPM("end",position);this.currentPosition=0;this.currentAssetId=null;this.isDCRStream=false;this.heartbeatId=null};function formatAirdate(airdate){var date;try{date=dateformat(airdate,"yyyymmdd hh:MM:ss",true)}catch(e){}return date}function formatLoadType(integrationOpts,track,propertiesPath){var loadType=find(integrationOpts,"ad_load_type")||track.proxy(propertiesPath+"load_type")||track.proxy(propertiesPath+"loadType");loadType=loadType==="dynamic"?"2":false;return loadType}function getOffsetTime(position,options){var date=Math.floor(Date.now()/1e3);if(!position||options.sendCurrentTimeLivestream)return date;try{if(typeof position!=="number"){position=parseInt(position,10)}}catch(e){return date}return date+position}},{"@segment/analytics.js-integration":659,dateformat:664,"js-sha256":1133,"obj-case":1143,reject:1150}],659:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":660,"./statics":661,"@ndhoule/defaults":8,"component-bind":1109,debug:662,dup:49,extend:666,"slug-component":1165}],660:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],661:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:665,dup:51}],662:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":663,_process:1149,dup:43}],663:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:667}],664:[function(require,module,exports){(function(global){"use strict";var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|'[^']*'|'[^']*'/g;var timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g;var timezoneClip=/[^-+\dA-Z]/g;return function(date,mask,utc,gmt){if(arguments.length===1&&kindOf(date)==="string"&&!/\d/.test(date)){mask=date;date=undefined}date=date||new Date;if(!(date instanceof Date)){date=new Date(date)}if(isNaN(date)){throw TypeError("Invalid date")}mask=String(dateFormat.masks[mask]||mask||dateFormat.masks["default"]);var maskSlice=mask.slice(0,4);if(maskSlice==="UTC:"||maskSlice==="GMT:"){mask=mask.slice(4);utc=true;if(maskSlice==="GMT:"){gmt=true}}var _=utc?"getUTC":"get";var d=date[_+"Date"]();var D=date[_+"Day"]();var m=date[_+"Month"]();var y=date[_+"FullYear"]();var H=date[_+"Hours"]();var M=date[_+"Minutes"]();var s=date[_+"Seconds"]();var L=date[_+"Milliseconds"]();var o=utc?0:date.getTimezoneOffset();var W=getWeek(date);var N=getDayOfWeek(date);var flags={d:d,dd:pad(d),ddd:dateFormat.i18n.dayNames[D],dddd:dateFormat.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dateFormat.i18n.monthNames[m],mmmm:dateFormat.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(Math.round(L/10)),t:H<12?dateFormat.i18n.timeNames[0]:dateFormat.i18n.timeNames[1],tt:H<12?dateFormat.i18n.timeNames[2]:dateFormat.i18n.timeNames[3],T:H<12?dateFormat.i18n.timeNames[4]:dateFormat.i18n.timeNames[5],TT:H<12?dateFormat.i18n.timeNames[6]:dateFormat.i18n.timeNames[7],Z:gmt?"GMT":utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:W,N:N};return mask.replace(token,function(match){if(match in flags){return flags[match]}return match.slice(1,match.length-1)})}}();dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};function pad(val,len){val=String(val);len=len||2;while(val.length<len){val="0"+val}return val}function getWeek(date){var targetThursday=new Date(date.getFullYear(),date.getMonth(),date.getDate());targetThursday.setDate(targetThursday.getDate()-(targetThursday.getDay()+6)%7+3);var firstThursday=new Date(targetThursday.getFullYear(),0,4);firstThursday.setDate(firstThursday.getDate()-(firstThursday.getDay()+6)%7+3);var ds=targetThursday.getTimezoneOffset()-firstThursday.getTimezoneOffset();targetThursday.setHours(targetThursday.getHours()-ds);var weekDiff=(targetThursday-firstThursday)/(864e5*7);return 1+Math.floor(weekDiff)}function getDayOfWeek(date){var dow=date.getDay();if(dow===0){dow=7}return dow}function kindOf(val){if(val===null){return"null"}if(val===undefined){return"undefined"}if(typeof val!=="object"){return typeof val}if(Array.isArray(val)){return"array"}return{}.toString.call(val).slice(8,-1).toLowerCase()}if(typeof define==="function"&&define.amd){define(function(){return dateFormat})}else if(typeof exports==="object"){module.exports=dateFormat}else{global.dateFormat=dateFormat}})(this)},{}],665:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],666:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],667:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],668:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var NielsenDTVR=module.exports=integration("Nielsen DTVR").option("appId","").option("instanceName","").option("id3Property","id3").option("sendId3Events",[]).option("debug",false).option("optout",false).tag("http",'<script src="http://cdn-gl.imrworldwide.com/conf/{{ appId }}.js#name={{ instanceName }}&ns=NOLBUNDLE">').tag("https",'<script src="https://cdn-gl.imrworldwide.com/conf/{{ appId }}.js#name={{ instanceName }}&ns=NOLBUNDLE">');NielsenDTVR.prototype.initialize=function(){var protocol=window.location.protocol==="https:"||window.location.protocol==="chrome-extension:"?"https":"http";var config={};this.ID3=null;this.previousEvent=null;this.isDTVRStream=false;!function(t,n){t[n]=t[n]||{nlsQ:function(e,o,c,r,s,i){return t[n][o]=t[n][o]||{g:c||{},ggPM:function(e,c,r,s,i){(t[n][o].q=t[n][o].q||[]).push([e,c,r,s,i])}},t[n][o]}}}(window,"NOLBUNDLE");if(this.options.debug)config.nol_sdkDebug="debug";if(this.options.optout)config.optout=true;this.client=window.NOLBUNDLE.nlsQ(this.options.appId,this.options.instanceName,config);this.load(protocol,this.ready)};NielsenDTVR.prototype.loaded=function(){return this.client&&typeof this.client.ggPM==="function"};NielsenDTVR.prototype.track=function(track){this.sendID3(track)};NielsenDTVR.prototype.videoContentStarted=function(track){var metadata;if(this.previousEvent&&track!==this.previousEvent){this.ID3=null;this.previousEvent=null;this.isDTVRStream=null}metadata=this.mapMetadata(track);if(!metadata)return;this.client.ggPM("loadMetadata",metadata);this.sendID3(track);this.previousEvent=track};NielsenDTVR.prototype.videoContentCompleted=NielsenDTVR.prototype.videoPlaybackCompleted=NielsenDTVR.prototype.videoPlaybackExited=function(){if(!this.isDTVRStream)return;this.ID3=null;this.previousEvent=null;this.isDTVRStream=null};NielsenDTVR.prototype.videoPlaybackInterrupted=NielsenDTVR.prototype.videoPlaybackSeekStarted=NielsenDTVR.prototype.videoPlaybackBufferStarted=NielsenDTVR.prototype.videoPlaybackPaused=function(track){if(!this.isDTVRStream)return;this.sendID3(track)};NielsenDTVR.prototype.videoPlaybackSeekCompleted=NielsenDTVR.prototype.videoPlaybackBufferCompleted=NielsenDTVR.prototype.videoPlaybackResumed=function(track){var metadata=this.mapMetadata(track);if(!metadata||!this.isDTVRStream)return;this.client.ggPM("loadMetadata",metadata);this.sendID3(track)};NielsenDTVR.prototype.sendID3=function(event){var id3Events=this.options.sendId3Events;var id3Prop;var id3Tags;var found=false;if(id3Events.length<=0)return;for(var i=0;i<id3Events.length;i+=1){if(id3Events[i]===event.event()){found=true;break}}if(!found)return;id3Prop=this.options.id3Property;id3Tags=event.proxy("properties."+id3Prop);if(id3Tags){if(!this.ID3||id3Tags!==this.ID3){this.ID3=id3Tags;this.client.ggPM("sendID3",this.ID3)}}};function validate(metadata){var isValid=true;var keys=Object.keys(metadata);var key;for(var i=0;i<keys.length;i+=1){key=keys[i];if(typeof metadata[key]!=="string"||metadata[key].length<=0){isValid=false}}return isValid?metadata:false}NielsenDTVR.prototype.mapMetadata=function(event){var loadType=event.proxy("properties.loadType")||event.proxy("properties.load_type")||event.proxy("properties.content.loadType")||event.proxy("properties.content.load_type");if(loadType!=="linear"){this.isDTVRStream=false;return false}this.isDTVRStream=true;return validate({type:"content",channelName:event.proxy("properties.channel"),adModel:"1"})}},{"@segment/analytics.js-integration":669}],669:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":670,"./statics":671,"@ndhoule/defaults":8,"component-bind":1109,debug:672,dup:49,extend:675,"slug-component":1165}],670:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],671:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:674,dup:51}],672:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":673,_process:1149,dup:43}],673:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:676}],674:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],675:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],676:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],677:[function(require,module,exports){"use strict";var alias=require("@segment/alias");var integration=require("@segment/analytics.js-integration");var Nudgespot=module.exports=integration("Nudgespot").assumesPageview().global("nudgespot").option("clientApiKey","").tag('<script id="nudgespot" src="//cdn.nudgespot.com/nudgespot.js">');Nudgespot.prototype.initialize=function(){window.nudgespot=window.nudgespot||[];!function(e){e.init=function(p){function t(e,p){var t=p.split(".");2==t.length&&(e=e[t[0]],p=t[1]),e[p]=function(){e.push([p].concat(Array.prototype.slice.call(arguments,0)))}}e._version=.1,e._globals=[p],e.people=e.people||[],e.params=e.params||[];for(var o="track register unregister identify set_config people.delete people.create people.update people.create_property people.tag people.remove_Tag".split(" "),r=0;r<o.length;r++)t(e,o[r])}}(window.nudgespot);window.nudgespot.init(this.options.clientApiKey);this.load(this.ready)};Nudgespot.prototype.loaded=function(){return!!(window.nudgespot&&window.nudgespot.push!==Array.prototype.push)};Nudgespot.prototype.identify=function(identify){if(!identify.userId())return this.debug("user id required");var traits=identify.traits({createdAt:"created"});traits=alias(traits,{created:"created_at"});window.nudgespot.identify(identify.userId(),traits)};Nudgespot.prototype.track=function(track){window.nudgespot.track(track.event(),track.properties())}},{"@segment/alias":21,"@segment/analytics.js-integration":678}],678:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":679,"./statics":680,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],679:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":681,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],680:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:682,dup:42}],681:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],682:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],683:[function(require,module,exports){"use strict";var https=require("use-https");var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var Olark=module.exports=integration("Olark").assumesPageview().global("olark").option("groupId","").option("identify",true).option("listen",false).option("page",true).option("siteId","").option("track",false).option("inline",false);var integrationContext={name:"olark",version:"1.0.0"};Olark.prototype.initialize=function(){var self=this;this.load(function(){tick(self.ready)});var groupId=this.options.groupId;if(groupId)api("chat.setOperatorGroup",{group:groupId});api("box.onExpand",function(){self._open=true});api("box.onShrink",function(){self._open=false});if(this.options.listen)this.attachListeners()};Olark.prototype.load=function(callback){window.olark||function(c){var f=window,d=document,l=https()?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i," onl"+'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()}({loader:"static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});if(this.options.inline)configure("box.inline",true);window.olark.identify(this.options.siteId);callback()};Olark.prototype.loaded=function(){return!!window.olark};Olark.prototype.page=function(page){if(!this.options.page)return;var props=page.properties();var name=page.fullName();if(!name&&!props.url)return;name=name?name+" page":props.url;this.notify("looking at "+name)};Olark.prototype.identify=function(identify){if(!this.options.identify)return;var username=identify.username();var traits=identify.traits();var id=identify.userId();var email=identify.email();var phone=identify.phone();var name=identify.name()||identify.firstName();if(traits)api("visitor.updateCustomFields",traits);if(email)api("visitor.updateEmailAddress",{emailAddress:email});if(phone)api("visitor.updatePhoneNumber",{phoneNumber:phone});if(name)api("visitor.updateFullName",{fullName:name});var nickname=name||email||username||id;if(name&&email)nickname+=" ("+email+")";if(nickname)api("chat.updateVisitorNickname",{snippet:nickname})};Olark.prototype.track=function(track){if(!this.options.track)return;this.notify('visitor triggered "'+track.event()+'"')};Olark.prototype.attachListeners=function(){var self=this;api("chat.onBeginConversation",function(){self.analytics.track("Live Chat Conversation Started",{},{context:{integration:integrationContext},integrations:{Olark:false}})});api("chat.onMessageToOperator",function(){self.analytics.track("Live Chat Message Sent",{},{context:{integration:integrationContext},integrations:{Olark:false}})});api("chat.onMessageToVisitor",function(){self.analytics.track("Live Chat Message Received",{},{context:{integration:integrationContext},integrations:{Olark:false}})})};Olark.prototype.notify=function(msg){if(!this._open)return;var message=msg.toLowerCase();api("visitor.getDetails",function(data){if(!data||!data.isConversing)return;api("chat.sendNotificationToOperator",{body:message})})};function api(action,value){window.olark("api."+action,value)}function configure(action,value){window.olark.configure(action,value)}},{"@segment/analytics.js-integration":684,"next-tick":1142,"use-https":1180}],684:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":685,"./statics":686,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],685:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":687,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],686:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:688,dup:42}],687:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],688:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],689:[function(require,module,exports){"use strict";var dot=require("obj-case");var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var iso=require("@segment/to-iso-string");var map=require("@ndhoule/map");var type=require("type-of");var has=Object.prototype.hasOwnProperty;var dynamicKeys=[];var omnitureEventMap={prodView:[/viewed product/i,/product viewed/i],scAdd:[/added product/i,/product added/i],scRemove:[/removed product/i,/product removed/i],purchase:[/completed order/i,/order completed/i],scView:[/viewed cart/i,/cart viewed/i],scOpen:[/opened cart/i,/cart opened/i],scCheckout:[/viewed checkout/i,/started checkout/i,/checkout started/i]};var Omniture=module.exports=integration("Omniture");Omniture.sOption=function(field,value){var s=window.s;var isValid=s&&has.call(s,field)&&!isEmptyString(field);value=isValid?s[field]:value;this.prototype.sOptions=this.prototype.sOptions||{};this.prototype.sOptions[field]=value;return this.option(field,value)};Omniture.global("s").global("s_gi").option("initialPage",true).option("events",{}).option("eVars",{}).option("props",{}).option("hVars",{}).option("reportSuiteId",window.s_account).option("includeTimestamp",true).sOption("visitorID").sOption("channel").sOption("campaign").sOption("state").sOption("zip").sOption("pageName").sOption("trackingServer").sOption("trackingServerSecure").sOption("visitorMigrationKey").sOption("visitorMigrationServer").sOption("visitorNamespace").sOption("dc").sOption("charSet","ISO-8859-1").sOption("currencyCode","USD").sOption("trackDownloadLinks",true).sOption("trackExternalLinks",true).sOption("trackInlineStats",true).sOption("linkDownloadFileTypes","exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx").sOption("linkInternalFilters").sOption("linkLeaveQueryString",false).sOption("linkTrackVars","None").sOption("linkTrackEvents","None").sOption("usePlugins",true).tag('<script src="//cdn.segment.io/integrations/omniture/H.26.2/omniture.min.js">');Omniture.prototype.initialize=function(){var options=this.options;lowercaseKeys(options.events);window.s_account=window.s_account||options.reportSuiteId;var self=this;this.loadedBySegmentio=true;this.load(function(){var s=window.s;s.trackingServer=s.trackingServer||options.trackingServerUrl;s.trackingServerSecure=s.trackingServerSecure||options.trackingServerSecureUrl;self.ready()})};Omniture.prototype.loaded=function(){return!!window.s_gi};Omniture.prototype.track=function(track){if(!window.s_gi)return;var event=aliasEvent(track.event(),this.options.events);if(!event)return;var properties=track.properties();window.s.linkTrackEvents=event;clearKeys(dynamicKeys);function update(value,key){if(!key||value===undefined||value===null)return;dynamicKeys.push(key);window.s[key]=value.toString()}update(event,"events");update(properties.channel||this.options.channel,"channel");update(properties.campaign||this.options.campaign,"campaign");update(properties.pageName||this.options.pageName,"pageName");update(properties.state||this.options.state,"state");update(properties.zip||this.options.zip,"zip");update(properties.purchaseId,"purchaseID");update(properties.transactionId,"transactionId");if(this.options.includeTimestamp){var timestamp=properties.timestamp||track.timestamp();if(typeof timestamp!=="string")timestamp=iso(timestamp);update(timestamp,"timestamp")}if(omnitureEventMap[event]){if(properties.product||track.sku()){update(formatProduct(properties),"products")}else{var products=properties.products;if(products&&type(products)==="array"){var productStrings=map(formatProduct,products);update(productStrings.join(", "),"products")}}}var props=extractProperties(properties,this.options);each(update,props);var eventEVar=dot(this.options.eVars,track.event());update(track.event(),eventEVar);window.s.linkTrackVars=dynamicKeys.join(",");window.s.tl(true,"o",track.event())};Omniture.prototype.page=function(page){var options=this.options;if(options.page==null)options.page=options.initialPage;if(!options.page){options.page=true;return}if(!this.loaded()){var self=this;setTimeout(function(){self.page(page)},100);return}var name=page.fullName();window.s.pageName=name;var user=this.analytics.user();if(user.id())window.s.visitorID=user.id();var track=page.track();var properties=track.properties();clearKeys(dynamicKeys);function update(value,key){if(!key||value===undefined||value===null)return;dynamicKeys.push(key);window.s[key]=value.toString()}update(name,"events");update(properties.channel||this.options.channel,"channel");update(properties.campaign||this.options.campaign,"campaign");update(properties.state||this.options.state,"state");update(properties.zip||this.options.zip,"zip");update(properties.purchaseId,"purchaseID");update(properties.transactionId,"transactionId");if(this.options.includeTimestamp){var timestamp=properties.timestamp||track.timestamp();if(typeof timestamp!=="string")timestamp=iso(timestamp);update(timestamp,"timestamp")}var props=extractProperties(properties,this.options);each(update,props);window.s.t()};function aliasEvent(name,events){var aliased=null;each(function(value,key){if(name===key){aliased=key;return}var regexes=omnitureEventMap[key];for(var i=0;i<regexes.length;i++){if(regexes[i].test(name)){aliased=key;return}}},omnitureEventMap);if(aliased)return aliased;if(events[name.toLowerCase()])return events[name.toLowerCase()];if(/event\d+/.test(name))return name}function formatProduct(description){var quantity=description.quantity||1;var total=((description.price||0)*quantity).toFixed(2);return[description.category,description.product||description.sku,quantity,total].join("; ")}function isEmptyString(str){return typeof str==="string"&&str.length===0}function clearKeys(keys){each(function(linkVar){delete window.s[linkVar]},keys);keys.length=0}function extractProperties(props,options){var result={};each(function(mappedValue,mappedKey){var value=dot(props,mappedKey);if(value!=null)result[mappedValue]=value},options.eVars);each(function(mappedValue,mappedKey){var value=dot(props,mappedKey);if(value!=null)result[mappedValue]=value},options.props);each(function(mappedValue,mappedKey){var value=dot(props,mappedKey);if(value!=null)result[mappedValue]=value},options.hVars);each(function(value,key){if(/prop\d+/i.test(key)||/eVar\d+/i.test(key)||/hier\d+/i.test(key)){result[key]=value;return}var prop=dot(options.props,key);var eVar=dot(options.eVars,key);var hVar=dot(options.hVars,key);if(!eVar&&prop)eVar=options.eVars[prop];if(prop)result[prop]=value;if(eVar)result[eVar]=value;if(hVar)result[hVar]=value},props);return result}function lowercaseKeys(obj){obj=obj||{};each(function(value,key){delete obj[key];obj[key.toLowerCase()]=value},obj);return obj}},{"@ndhoule/each":10,"@ndhoule/map":17,"@segment/analytics.js-integration":690,"@segment/to-iso-string":1103,"obj-case":1143,"type-of":1178}],690:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":691,"./statics":692,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:693,dup:40,"slug-component":1165}],691:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":695,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],692:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:696,dup:42}],693:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":694,_process:1149,dup:43}],694:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:697}],695:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],696:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],697:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],698:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var OneSpot=module.exports=integration("OneSpot").option("accountId","").tag('<script src="//d3xl0zyjyljwa.cloudfront.net/px/t/os-{{ accountId }}-0.js"><\/script>');OneSpot.prototype.loaded=function(){return!!window.osANSegCode};OneSpot.prototype.initialize=function(){this.load({accountId:this.options.accountId},this.ready)}},{"@segment/analytics.js-integration":699}],699:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":700,"./statics":701,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:702,dup:40,"slug-component":1165}],700:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":704,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],701:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:705,dup:42}],702:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":703,_process:1149,dup:43}],703:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:706}],704:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],705:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],706:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],707:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var values=require("@ndhoule/values");var foldl=require("@ndhoule/foldl");var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("optimizely",{wrap:false});var tick=require("next-tick");var Optimizely=module.exports=integration("Optimizely").option("trackCategorizedPages",true).option("trackNamedPages",true).option("variations",false).option("listen",true).option("nonInteraction",false).option("sendRevenueOnlyForOrderCompleted",true).option("customExperimentProperties",{}).option("customCampaignProperties",{});var optimizelyContext={name:"optimizely",version:"2.0.0"};Optimizely.prototype.initialize=function(){var self=this;push({type:"integration",OAuthClientId:"5360906403"});tick(function(){Optimizely.initOptimizelyIntegration({referrerOverride:self.setEffectiveReferrer.bind(self),sendExperimentData:self.sendClassicDataToSegment.bind(self),sendCampaignData:self.sendNewDataToSegment.bind(self)})});this.ready()};Optimizely.prototype.track=function(track){var opts=this.options;var eventProperties=track.properties();if(eventProperties.revenue&&opts.sendRevenueOnlyForOrderCompleted){if(track.event()==="Order Completed"){eventProperties.revenue=Math.round(eventProperties.revenue*100)}else if(track.event()!=="Order Completed"){delete eventProperties.revenue}}else if(opts.sendRevenueOnlyForOrderCompleted===false&&eventProperties.revenue){eventProperties.revenue=Math.round(eventProperties.revenue*100)}var eventName=track.event().replace(/:/g,"_");var payload={type:"event",eventName:eventName,tags:eventProperties};push(payload);var optimizelyClientInstance=window.optimizelyClientInstance;if(optimizelyClientInstance&&optimizelyClientInstance.track){var optimizelyOptions=track.options("Optimizely");var userId=optimizelyOptions.userId||track.userId()||this.analytics.user().id();var attributes=optimizelyOptions.attributes||track.traits()||this.analytics.user().traits();if(userId){optimizelyClientInstance.track(eventName,userId,attributes,payload.tags)}}};Optimizely.prototype.page=function(page){var category=page.category();var name=page.fullName();var opts=this.options;if(category&&opts.trackCategorizedPages){this.track(page.track(category))}if(name&&opts.trackNamedPages){this.track(page.track(name))}};Optimizely.prototype.sendClassicDataToSegment=function(experimentState){var experiment=experimentState.experiment;var variations=experimentState.variations;var sections=experimentState.sections;var context={integration:optimizelyContext};var variationsMap=foldl(function(results,variation){var res=results;res[variation.id]=variation.name;return res},{},variations);var variationIds=keys(variationsMap).sort();var variationNames=values(variationsMap).sort();if(this.options.listen){var props={experimentId:experiment.id,experimentName:experiment.name,variationId:variationIds.join(),variationName:variationNames.join(", ")};if(experiment.referrer){props.referrer=experiment.referrer;context.page={referrer:experiment.referrer}}if(sections){var activeSections={};var variationIdsToSectionsMap=foldl(function(results,section,sectionId){var res=results;each(function(variationId){res[variationId]={id:sectionId,name:section.name}},section.variation_ids);return res},{},sections);for(var j=0;j<variationIds.length;j++){var activeVariation=variationIds[j];var activeSection=variationIdsToSectionsMap[activeVariation];if(activeSection)activeSections[activeSection.id]=activeSection.name}props.sectionId=keys(activeSections).sort().join();props.sectionName=values(activeSections).sort().join(", ")}if(this.options.nonInteraction)props.nonInteraction=1;var customExperimentProperties=this.options.customExperimentProperties;var customPropsKeys=Object.keys(customExperimentProperties);var data=window.optimizely&&window.optimizely.data;if(data&&customPropsKeys.length){for(var index=0;index<customPropsKeys.length;index++){var segmentProp=customPropsKeys[index];var optimizelyProp=customExperimentProperties[segmentProp];if(typeof data[optimizelyProp]!=="undefined"){props[segmentProp]=data[optimizelyProp]}}}this.analytics.track("Experiment Viewed",props,context)}if(this.options.variations){var traits={};traits["Experiment: "+experiment.name]=variationNames.join(", ");this.analytics.identify(traits)}};Optimizely.prototype.sendNewDataToSegment=function(campaignState){var experiment=campaignState.experiment;var variation=campaignState.variation;var context={integration:optimizelyContext};var audiencesMap=foldl(function(results,audience){var res=results;res[audience.id]=audience.name;return res},{},campaignState.audiences);var audienceIds=keys(audiencesMap).sort().join();var audienceNames=values(audiencesMap).sort().join(", ");if(this.options.listen){var props={campaignName:campaignState.campaignName,campaignId:campaignState.id,experimentId:experiment.id,experimentName:experiment.name,variationName:variation.name,variationId:variation.id,audienceId:audienceIds,audienceName:audienceNames,isInCampaignHoldback:campaignState.isInCampaignHoldback};if(experiment.referrer){props.referrer=experiment.referrer;context.page={referrer:experiment.referrer}}if(this.options.nonInteraction)props.nonInteraction=1;var customCampaignProperties=this.options.customCampaignProperties;var customPropsKeys=Object.keys(customCampaignProperties);var data=window.optimizely&&window.optimizely.newMockData;if(data&&customPropsKeys.length){for(var index=0;index<customPropsKeys.length;index++){var segmentProp=customPropsKeys[index];var optimizelyProp=customCampaignProperties[segmentProp];if(typeof data[optimizelyProp]!=="undefined"){props[segmentProp]=data[optimizelyProp]}}}this.analytics.track("Experiment Viewed",props,context)}if(this.options.variations){var traits={};traits["Experiment: "+experiment.name]=variation.name;this.analytics.identify(traits)}};Optimizely.prototype.setEffectiveReferrer=function(referrer){if(referrer){window.optimizelyEffectiveReferrer=referrer;return referrer}};Optimizely.initOptimizelyIntegration=function(handlers){var initClassicOptimizelyIntegration=function(referrerOverride,sendExperimentData){var data=window.optimizely&&window.optimizely.data;var state=data&&data.state;if(state){var activeExperiments=state.activeExperiments;if(state.redirectExperiment){var redirectExperimentId=state.redirectExperiment.experimentId;var index=-1;for(var i=0;i<state.activeExperiments.length;i++){if(state.activeExperiments[i]===redirectExperimentId){index=i;break}}if(index===-1){activeExperiments.push(redirectExperimentId)}referrerOverride(state.redirectExperiment.referrer)}for(var k=0;k<activeExperiments.length;k++){var currentExperimentId=activeExperiments[k];var activeExperimentState={experiment:{id:currentExperimentId,name:data.experiments[currentExperimentId].name},variations:[],sections:data.sections};if(state.redirectExperiment&&currentExperimentId===state.redirectExperiment.experimentId&&state.redirectExperiment.referrer){activeExperimentState.experiment.referrer=state.redirectExperiment.referrer}var variationIds=state.variationIdsMap[activeExperimentState.experiment.id];for(var j=0;j<variationIds.length;j++){var id=variationIds[j];var name=data.variations[id].name;activeExperimentState.variations.push({id:id,name:name})}sendExperimentData(activeExperimentState)}}};var initNewOptimizelyIntegration=function(referrerOverride,sendCampaignData){var newActiveCampaign=function(id,referrer){var state=window.optimizely.get&&window.optimizely.get("state");if(state){var activeCampaigns=state.getCampaignStates({isActive:true});var campaignState=activeCampaigns[id];if(referrer)campaignState.experiment.referrer=referrer;sendCampaignData(campaignState)}};var checkReferrer=function(){var state=window.optimizely.get&&window.optimizely.get("state");if(state){var referrer=state.getRedirectInfo()&&state.getRedirectInfo().referrer;if(referrer){referrerOverride(referrer);return referrer}}};var registerFutureActiveCampaigns=function(){window.optimizely=window.optimizely||[];window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(event){var id=event.data.campaign.id;newActiveCampaign(id)}})};var registerCurrentlyActiveCampaigns=function(){window.optimizely=window.optimizely||[];var state=window.optimizely.get&&window.optimizely.get("state");if(state){var referrer=checkReferrer();var activeCampaigns=state.getCampaignStates({isActive:true});for(var id in activeCampaigns){if({}.hasOwnProperty.call(activeCampaigns,id)){if(referrer){newActiveCampaign(id,referrer)}else{newActiveCampaign(id)}}}}else{window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"initialized"},handler:function(){checkReferrer()}})}};registerCurrentlyActiveCampaigns();registerFutureActiveCampaigns()};initClassicOptimizelyIntegration(handlers.referrerOverride,handlers.sendExperimentData);initNewOptimizelyIntegration(handlers.referrerOverride,handlers.sendCampaignData)}},{"@ndhoule/each":10,"@ndhoule/foldl":14,"@ndhoule/keys":16,"@ndhoule/values":20,"@segment/analytics.js-integration":708,"global-queue":1127,"next-tick":717}],708:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":709,"./statics":710,"@ndhoule/defaults":8,"component-bind":1109,debug:711,dup:49,extend:713,"slug-component":1165}],709:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":714,"to-no-case":1171}],710:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:715,dup:51}],711:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":712,_process:1149,dup:43}],712:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:716}],713:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],714:[function(require,module,exports){arguments[4][307][0].apply(exports,arguments)},{_process:1149,dup:307,timers:1168}],715:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],716:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],717:[function(require,module,exports){arguments[4][310][0].apply(exports,arguments)},{_process:1149,dup:310,timers:1168}],718:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var uncase=require("to-no-case");var foldl=require("@ndhoule/foldl");var Identify=require("segmentio-facade").Identify;var Outbound=module.exports=integration("Outbound").global("outbound").option("publicApiKey","").option("trackReferrer",false).tag('<script src="//cdn.outbound.io/{{ publicApiKey }}.js">');Outbound.prototype.initialize=function(){window.outbound=window.outbound||[];window.outbound.methods=["identify","track","alias","registerApnsToken","registerGcmToken","disableApnsToken","disableGcmToken","disableAllGcmTokens","disableAllApnsTokens","unsubscribeAll","unsubscribeCampaigns","subscribeAll","subscribeCampaigns","hasIdentified"];window.outbound.factory=function(method){return function(){var args=Array.prototype.slice.call(arguments);args.unshift(method);window.outbound.push(args);return window.outbound}};for(var i=0;i<window.outbound.methods.length;i++){var key=window.outbound.methods[i];window.outbound[key]=window.outbound.factory(key)}this.load(this.ready)};Outbound.prototype.loaded=function(){return!!(window.outbound&&window.outbound.reset)};Outbound.prototype.identify=function(identify){var specialTraits={id:true,email:true,phone:true,"user id":true,"last name":true,"first name":true};var userId=identify.userId()||identify.anonymousId();var attributes=foldl(function(acc,val,key){if(!specialTraits.hasOwnProperty(uncase(key)))acc.attributes[key]=val;return acc},{attributes:{},email:identify.email(),phoneNumber:identify.phone(),firstName:identify.firstName(),lastName:identify.lastName()},identify.traits());window.outbound.identify(userId,attributes)};Outbound.prototype.track=function(track){if(!window.outbound.hasIdentified()){var user=new Identify({userId:track.userId()||track.anonymousId()});this.identify(user)}window.outbound.track(track.event(),track.properties(),track.timestamp())};Outbound.prototype.alias=function(alias){window.outbound.identify(alias.userId(),{previousId:alias.previousId()})};Outbound.prototype.page=function(page){var props=page.properties();var evtName="[Segment Page]";if(!this.options.trackReferrer){delete props.referrer}if(props.name||props.url){evtName+=" "+props.name||props.url}if(!window.outbound.hasIdentified()){var user=new Identify({userId:page.userId()||page.anonymousId()});this.identify(user)}window.outbound.track(evtName,props,page.timestamp())}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":719,"segmentio-facade":1158,"to-no-case":725}],719:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":720,"./statics":721,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],720:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":723,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":722}],721:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:724,dup:42}],722:[function(require,module,exports){arguments[4][384][0].apply(exports,arguments)},{dup:384}],723:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],724:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],725:[function(require,module,exports){arguments[4][388][0].apply(exports,arguments)},{dup:388}],726:[function(require,module,exports){"use strict";var cookie=require("component-cookie");var each=require("@ndhoule/each");var integration=require("@segment/analytics.js-integration");var load=require("@segment/load-script");var querystring=require("component-querystring");var useHttps=require("use-https");var has=Object.prototype.hasOwnProperty;var Pardot=module.exports=integration("Pardot").assumesPageview().global("pi").global("piAId").global("piCId").global("piTracker").option("projectId","").option("piAId","").option("piCId","").tag("http",'<script src="http://cdn.pardot.com/pd.js">').tag("https",'<script src="https://pi.pardot.com/pd.js">');Pardot.prototype.initialize=function(){window.piAId=this.options.piAId;window.piCId=this.options.piCId;var name=useHttps()?"https":"http";this.load(name,this.ready)};Pardot.prototype.loaded=function(){return!!window.piTracker};Pardot.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();if(email)traits.email=email;if(doNotTrack())return;if(!traits.email)return;var variables=this.getRequestVariables();variables.pi_email=traits.email;load("//pi.pardot.com/analytics?"+querystring.stringify(variables))};Pardot.prototype.getRequestVariables=function(){var variables={account_id:window.piAId,campaign_id:window.piCId,pi_opt_in:cookie("pi_opt_in"+(this.options.piAId-1e3)),ver:3,visitor_id:cookie("visitor_id"+(this.options.piAId-1e3))};var queryParams=query();var queryKeys=["pi_email"];each(function(key){if(key in queryParams)variables[key]=queryParams[key]},queryKeys);if(window.piIncludeInActivities!==undefined){variables.pi_include_in_activies=window.piIncludeInActivities}if(window.piProfileId!==undefined){variables.pi_profile_id=window.piProfileId}if(window.pi&&window.pi.tracker){for(var property in variables){if(has.call(variables,property)){var val=window.pi.tracker[property];if(val)variables[property]=val}}}return variables};function doNotTrack(){var p=window.pi;if(!p)return false;if(!p.tracker)return false;if(String(p.tracker.pi_opt_in)==="false")return false;if(!p.tracker.title)return false;if(!p.tracker.notify_pi)return false;return true}function query(){return querystring.parse(location.search.slice(1))}},{"@ndhoule/each":10,"@segment/analytics.js-integration":727,"@segment/load-script":1093,"component-cookie":1111,"component-querystring":733,"use-https":1180}],727:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":728,"./statics":729,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:730,dup:40,"slug-component":1165}],728:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":732,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],729:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:735,dup:42}],730:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":731,_process:1149,dup:43}],731:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:736}],732:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],733:[function(require,module,exports){var encode=encodeURIComponent;var decode=decodeURIComponent;var trim=require("trim");var type=require("type");var pattern=/(\w+)\[(\d+)\]/;exports.parse=function(str){if("string"!=typeof str)return{};str=trim(str);if(""==str)return{};if("?"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split("&");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");var key=decode(parts[0]);var m;if(m=pattern.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}continue}pairs.push(encode(key)+"="+encode(obj[key]))}return pairs.join("&")}},{trim:737,type:734}],734:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val}},{}],735:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],736:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],737:[function(require,module,exports){exports=module.exports=trim;function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports.left=function(str){return str.replace(/^\s*/,"")};exports.right=function(str){return str.replace(/\s*$/,"")}},{}],738:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var when=require("do-when");var reject=require("reject");var json=JSON;var is=require("is");var defaults=require("@ndhoule/defaults");var Parsely=module.exports=integration("Parsely").global("PARSELY").option("apiKey","").option("dynamicTracking",false).option("trackEvents",false).option("inPixelMetadata",false).tag('<script src="//d1z2jf7jlzjs58.cloudfront.net/p.js">');Parsely.prototype.initialize=function(){window.PARSELY=window.PARSELY||{};if(this.options.dynamicTracking)window.PARSELY.autotrack=false;var self=this;var meta=document.createElement("meta");meta.id="parsely-cfg";meta.setAttribute("data-parsely-site",this.options.apiKey);var head=document.getElementsByTagName("head")[0];if(!head)return;head.appendChild(meta);this.load(function(){when(self.loaded,self.ready)})};Parsely.prototype.loaded=function(){return!!window.PARSELY.beacon};Parsely.prototype.page=function(page){if(!this.options.dynamicTracking)return;var properties=page.properties();var data={url:page.url(),urlref:page.referrer(),data:properties,js:1};if(this.options.inPixelMetadata){var aliasedProps=page.properties(this.options.customMapping);var metadata={section:aliasedProps.section||page.category(),image_url:aliasedProps.image_url||aliasedProps.imageUrl,pub_date_tmsp:aliasedProps.pub_date_tmsp||aliasedProps.created,title:aliasedProps.title||page.title(),tags:aliasedProps.tags,authors:aliasedProps.authors,link:aliasedProps.link||page.url(),page_type:aliasedProps.page_type||"post"};var authors=metadata.authors;var tags=metadata.tags;if(authors&&!is.array(authors))metadata.authors=[authors];if(tags&&!is.array(tags))metadata.tags=[tags];data.metadata=json.stringify(reject(metadata))}window.PARSELY.beacon.trackPageView(data)};Parsely.prototype.track=function(track){return this.trackDynamicEvent(track)};var CURRENT_VIDEO_METADATA={};Parsely.prototype.videoContentStarted=function(track){if(window.PARSELY.video){var vidId=track.proxy("properties.assetId");var urlOverride=track.proxy("context.page.url");var metadata=this.parseVideoMetadata(track);CURRENT_VIDEO_METADATA=metadata;window.PARSELY.video.trackPlay(vidId,metadata,urlOverride)}return this.trackDynamicEvent(track)};Parsely.prototype.videoPlaybackPaused=function(track){if(window.PARSELY.video){var vidId=track.proxy("properties.assetId");var urlOverride=track.proxy("context.page.url");var metadata=this.parseVideoMetadata(track);metadata=defaults(metadata,CURRENT_VIDEO_METADATA);window.PARSELY.video.trackPause(vidId,metadata,urlOverride)}return this.trackDynamicEvent(track)};Parsely.prototype.videoPlaybackInterrupted=function(track){if(window.PARSELY.video){var vidId=track.proxy("properties.assetId");window.PARSELY.video.reset(vidId)}return this.trackDynamicEvent(track)};Parsely.prototype.trackDynamicEvent=function(track){if(this.options.trackEvents){window.PARSELY.beacon.trackPageView({data:track.properties(),action:track.event(),url:track.proxy("context.page.url"),urlref:track.proxy("context.page.referrer"),js:1})}};Parsely.prototype.parseVideoMetadata=function(track){var options=track.options(this.name)||{};var authors=track.proxy("properties.publisher");if(authors)authors=Array.isArray(authors)?authors:[authors];return reject({title:track.proxy("properties.title"),pub_date_tmsp:+new Date(track.proxy("properties.airdate"))||null,image_url:options.imageUrl,section:track.proxy("properties.genre"),authors:authors,tags:track.proxy("properties.keywords")})}},{"@ndhoule/defaults":8,"@segment/analytics.js-integration":739,"do-when":1125,is:744,reject:1150}],739:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":740,"./statics":741,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:1126,"slug-component":1165}],740:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:742,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],741:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:743,dup:51}],742:[function(require,module,exports){"use strict";var objProto=Object.prototype;var owns=objProto.hasOwnProperty;var toStr=objProto.toString;var symbolValueOf;if(typeof Symbol==="function"){symbolValueOf=Symbol.prototype.valueOf}var bigIntValueOf;if(typeof BigInt==="function"){bigIntValueOf=BigInt.prototype.valueOf}var isActualNaN=function(value){return value!==value};var NON_HOST_TYPES={boolean:1,number:1,string:1,undefined:1};var base64Regex=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;var hexRegex=/^[A-Fa-f0-9]+$/;var is={};is.a=is.type=function(value,type){return typeof value===type};is.defined=function(value){return typeof value!=="undefined"};is.empty=function(value){var type=toStr.call(value);var key;if(type==="[object Array]"||type==="[object Arguments]"||type==="[object String]"){return value.length===0}if(type==="[object Object]"){for(key in value){if(owns.call(value,key)){return false}}return true}return!value};is.equal=function equal(value,other){if(value===other){return true}var type=toStr.call(value);var key;if(type!==toStr.call(other)){return false}if(type==="[object Object]"){for(key in value){if(!is.equal(value[key],other[key])||!(key in other)){return false}}for(key in other){if(!is.equal(value[key],other[key])||!(key in value)){return false}}return true}if(type==="[object Array]"){key=value.length;if(key!==other.length){return false}while(key--){if(!is.equal(value[key],other[key])){return false}}return true}if(type==="[object Function]"){return value.prototype===other.prototype}if(type==="[object Date]"){return value.getTime()===other.getTime()}return false};is.hosted=function(value,host){var type=typeof host[value];return type==="object"?!!host[value]:!NON_HOST_TYPES[type]};is.instance=is["instanceof"]=function(value,constructor){return value instanceof constructor};is.nil=is["null"]=function(value){return value===null};is.undef=is.undefined=function(value){return typeof value==="undefined"};is.args=is.arguments=function(value){var isStandardArguments=toStr.call(value)==="[object Arguments]";var isOldArguments=!is.array(value)&&is.arraylike(value)&&is.object(value)&&is.fn(value.callee);return isStandardArguments||isOldArguments};is.array=Array.isArray||function(value){return toStr.call(value)==="[object Array]"};is.args.empty=function(value){return is.args(value)&&value.length===0};is.array.empty=function(value){return is.array(value)&&value.length===0};is.arraylike=function(value){return!!value&&!is.bool(value)&&owns.call(value,"length")&&isFinite(value.length)&&is.number(value.length)&&value.length>=0};is.bool=is["boolean"]=function(value){return toStr.call(value)==="[object Boolean]"};is["false"]=function(value){return is.bool(value)&&Boolean(Number(value))===false};is["true"]=function(value){return is.bool(value)&&Boolean(Number(value))===true};is.date=function(value){return toStr.call(value)==="[object Date]"};is.date.valid=function(value){return is.date(value)&&!isNaN(Number(value))};is.element=function(value){return value!==undefined&&typeof HTMLElement!=="undefined"&&value instanceof HTMLElement&&value.nodeType===1};is.error=function(value){return toStr.call(value)==="[object Error]"};is.fn=is["function"]=function(value){var isAlert=typeof window!=="undefined"&&value===window.alert;if(isAlert){return true}var str=toStr.call(value);return str==="[object Function]"||str==="[object GeneratorFunction]"||str==="[object AsyncFunction]"};is.number=function(value){return toStr.call(value)==="[object Number]"};is.infinite=function(value){return value===Infinity||value===-Infinity};is.decimal=function(value){return is.number(value)&&!isActualNaN(value)&&!is.infinite(value)&&value%1!==0};is.divisibleBy=function(value,n){var isDividendInfinite=is.infinite(value);var isDivisorInfinite=is.infinite(n);var isNonZeroNumber=is.number(value)&&!isActualNaN(value)&&is.number(n)&&!isActualNaN(n)&&n!==0;return isDividendInfinite||isDivisorInfinite||isNonZeroNumber&&value%n===0};is.integer=is["int"]=function(value){return is.number(value)&&!isActualNaN(value)&&value%1===0};is.maximum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value<others[len]){return false}}return true};is.minimum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value>others[len]){return false}}return true};is.nan=function(value){return!is.number(value)||value!==value};is.even=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2===0};is.odd=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2!==0};is.ge=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>=other};is.gt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>other};is.le=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<=other};is.lt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<other};is.within=function(value,start,finish){if(isActualNaN(value)||isActualNaN(start)||isActualNaN(finish)){throw new TypeError("NaN is not a valid value")}else if(!is.number(value)||!is.number(start)||!is.number(finish)){throw new TypeError("all arguments must be numbers")}var isAnyInfinite=is.infinite(value)||is.infinite(start)||is.infinite(finish);return isAnyInfinite||value>=start&&value<=finish};is.object=function(value){return toStr.call(value)==="[object Object]"};is.primitive=function isPrimitive(value){if(!value){return true}if(typeof value==="object"||is.object(value)||is.fn(value)||is.array(value)){return false}return true};is.hash=function(value){return is.object(value)&&value.constructor===Object&&!value.nodeType&&!value.setInterval};is.regexp=function(value){return toStr.call(value)==="[object RegExp]"};is.string=function(value){return toStr.call(value)==="[object String]"};is.base64=function(value){return is.string(value)&&(!value.length||base64Regex.test(value))};is.hex=function(value){return is.string(value)&&(!value.length||hexRegex.test(value))};is.symbol=function(value){return typeof Symbol==="function"&&toStr.call(value)==="[object Symbol]"&&typeof symbolValueOf.call(value)==="symbol"};is.bigint=function(value){return typeof BigInt==="function"&&toStr.call(value)==="[object BigInt]"&&typeof bigIntValueOf.call(value)==="bigint"};module.exports=is},{}],743:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],744:[function(require,module,exports){"use strict";var objProto=Object.prototype;var owns=objProto.hasOwnProperty;var toStr=objProto.toString;var symbolValueOf;if(typeof Symbol==="function"){symbolValueOf=Symbol.prototype.valueOf}var isActualNaN=function(value){return value!==value};var NON_HOST_TYPES={boolean:1,number:1,string:1,undefined:1};var base64Regex=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;var hexRegex=/^[A-Fa-f0-9]+$/;var is={};is.a=is.type=function(value,type){return typeof value===type};is.defined=function(value){return typeof value!=="undefined"};is.empty=function(value){var type=toStr.call(value);var key;if(type==="[object Array]"||type==="[object Arguments]"||type==="[object String]"){return value.length===0}if(type==="[object Object]"){for(key in value){if(owns.call(value,key)){return false}}return true}return!value};is.equal=function equal(value,other){if(value===other){return true}var type=toStr.call(value);var key;if(type!==toStr.call(other)){return false}if(type==="[object Object]"){for(key in value){if(!is.equal(value[key],other[key])||!(key in other)){return false}}for(key in other){if(!is.equal(value[key],other[key])||!(key in value)){return false}}return true}if(type==="[object Array]"){key=value.length;if(key!==other.length){return false}while(key--){if(!is.equal(value[key],other[key])){return false}}return true}if(type==="[object Function]"){return value.prototype===other.prototype}if(type==="[object Date]"){return value.getTime()===other.getTime()}return false};is.hosted=function(value,host){var type=typeof host[value];return type==="object"?!!host[value]:!NON_HOST_TYPES[type]};is.instance=is["instanceof"]=function(value,constructor){return value instanceof constructor};is.nil=is["null"]=function(value){return value===null};is.undef=is.undefined=function(value){return typeof value==="undefined"};is.args=is.arguments=function(value){var isStandardArguments=toStr.call(value)==="[object Arguments]";var isOldArguments=!is.array(value)&&is.arraylike(value)&&is.object(value)&&is.fn(value.callee);return isStandardArguments||isOldArguments};is.array=Array.isArray||function(value){return toStr.call(value)==="[object Array]"};is.args.empty=function(value){return is.args(value)&&value.length===0};is.array.empty=function(value){return is.array(value)&&value.length===0};is.arraylike=function(value){return!!value&&!is.bool(value)&&owns.call(value,"length")&&isFinite(value.length)&&is.number(value.length)&&value.length>=0};is.bool=is["boolean"]=function(value){return toStr.call(value)==="[object Boolean]"};is["false"]=function(value){return is.bool(value)&&Boolean(Number(value))===false};is["true"]=function(value){return is.bool(value)&&Boolean(Number(value))===true};is.date=function(value){return toStr.call(value)==="[object Date]"};is.date.valid=function(value){return is.date(value)&&!isNaN(Number(value))};is.element=function(value){return value!==undefined&&typeof HTMLElement!=="undefined"&&value instanceof HTMLElement&&value.nodeType===1};is.error=function(value){return toStr.call(value)==="[object Error]"};is.fn=is["function"]=function(value){var isAlert=typeof window!=="undefined"&&value===window.alert;if(isAlert){return true}var str=toStr.call(value);return str==="[object Function]"||str==="[object GeneratorFunction]"||str==="[object AsyncFunction]"};is.number=function(value){return toStr.call(value)==="[object Number]"};is.infinite=function(value){return value===Infinity||value===-Infinity};is.decimal=function(value){return is.number(value)&&!isActualNaN(value)&&!is.infinite(value)&&value%1!==0};is.divisibleBy=function(value,n){var isDividendInfinite=is.infinite(value);var isDivisorInfinite=is.infinite(n);var isNonZeroNumber=is.number(value)&&!isActualNaN(value)&&is.number(n)&&!isActualNaN(n)&&n!==0;return isDividendInfinite||isDivisorInfinite||isNonZeroNumber&&value%n===0};is.integer=is["int"]=function(value){return is.number(value)&&!isActualNaN(value)&&value%1===0};is.maximum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value<others[len]){return false}}return true};is.minimum=function(value,others){if(isActualNaN(value)){throw new TypeError("NaN is not a valid value")}else if(!is.arraylike(others)){throw new TypeError("second argument must be array-like")}var len=others.length;while(--len>=0){if(value>others[len]){return false}}return true};is.nan=function(value){return!is.number(value)||value!==value};is.even=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2===0};is.odd=function(value){return is.infinite(value)||is.number(value)&&value===value&&value%2!==0};is.ge=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>=other};is.gt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value>other};is.le=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<=other};is.lt=function(value,other){if(isActualNaN(value)||isActualNaN(other)){throw new TypeError("NaN is not a valid value")}return!is.infinite(value)&&!is.infinite(other)&&value<other};is.within=function(value,start,finish){if(isActualNaN(value)||isActualNaN(start)||isActualNaN(finish)){throw new TypeError("NaN is not a valid value")}else if(!is.number(value)||!is.number(start)||!is.number(finish)){throw new TypeError("all arguments must be numbers")}var isAnyInfinite=is.infinite(value)||is.infinite(start)||is.infinite(finish);return isAnyInfinite||value>=start&&value<=finish};is.object=function(value){return toStr.call(value)==="[object Object]"};is.primitive=function isPrimitive(value){if(!value){return true}if(typeof value==="object"||is.object(value)||is.fn(value)||is.array(value)){return false}return true};is.hash=function(value){return is.object(value)&&value.constructor===Object&&!value.nodeType&&!value.setInterval};is.regexp=function(value){return toStr.call(value)==="[object RegExp]"};is.string=function(value){return toStr.call(value)==="[object String]"};is.base64=function(value){return is.string(value)&&(!value.length||base64Regex.test(value))};is.hex=function(value){return is.string(value)&&(!value.length||hexRegex.test(value))};is.symbol=function(value){return typeof Symbol==="function"&&toStr.call(value)==="[object Symbol]"&&typeof symbolValueOf.call(value)==="symbol"};module.exports=is},{}],745:[function(require,module,exports){"use strict";var Group=require("segmentio-facade").Group;var Identify=require("segmentio-facade").Identify;var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var obj=require("obj-case");var Pendo=module.exports=integration("Pendo").global("pendo").option("apiKey","").tag('<script src="https://cdn.pendo.io/agent/static/{{ apiKey }}/pendo.js">');Pendo.prototype.initialize=function(){window.pendo=window.pendo||{};window.pendo_options=window.pendo_options||{apiKey:this.options.apiKey,usePendoAgentAPI:true};this.load(this.ready,{apiKey:this.options.apiKey})};Pendo.prototype.loaded=function(){return!!window.pendo};Pendo.prototype.identify=function(identify){var group=this.analytics.group();var identifyGroup=new Group({groupId:group.id(),traits:group.traits()});_identify(identify,identifyGroup)};Pendo.prototype.group=function(group){var user=this.analytics.user();var identify=new Identify({userId:user.id(),traits:user.traits()});_identify(identify,group)};function isUserAnonymous(identify){return!identify.userId()}function pendoifyAnonymousId(anonymousId){return"_PENDO_T_"+anonymousId}function _identify(identify,group){var id=isUserAnonymous(identify)?pendoifyAnonymousId(identify.anonymousId()):identify.userId();var vObj=extend({id:id},identify.traits());var options={visitor:vObj};var groupTraits=group.traits();var parentAccount=obj.find(groupTraits,"parentAccount");if(parentAccount){obj.delete(groupTraits,"parentAccount");options.parentAccount=parentAccount}var account=extend({id:group.groupId()},groupTraits);options.account=account;extend(window.pendo_options,options);window.pendo.identify(window.pendo_options)}},{"@ndhoule/extend":13,"@segment/analytics.js-integration":746,"obj-case":1143,"segmentio-facade":1158}],746:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":747,"./statics":748,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:750,"slug-component":1165}],747:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],748:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:749,dup:51}],749:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],750:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],751:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_pq");var PerfectAudience=module.exports=integration("Perfect Audience").assumesPageview().global("_pq").option("siteId","").tag('<script src="//tag.perfectaudience.com/serve/{{ siteId }}.js">');PerfectAudience.prototype.initialize=function(){window._pq=window._pq||[];this.load(this.ready)};PerfectAudience.prototype.loaded=function(){return!!(window._pq&&window._pq.push)};PerfectAudience.prototype.track=function(track){var total=track.total()||track.revenue();var orderId=track.orderId();var props={};var sendProps=false;if(total){props.revenue=total;sendProps=true}if(orderId){props.orderId=orderId;sendProps=true}if(!sendProps)return push("track",track.event());return push("track",track.event(),props)};PerfectAudience.prototype.productViewed=function(track){var product=track.productId()||track.id()||track.sku();push("track",track.event());push("trackProduct",product)};PerfectAudience.prototype.orderCompleted=function(track){var total=track.total()||track.revenue();var orderId=track.orderId();var props={};if(total)props.revenue=total;if(orderId)props.orderId=orderId;push("track",track.event(),props)}},{"@segment/analytics.js-integration":752,"global-queue":1127}],752:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":753,"./statics":754,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:756,"slug-component":1165}],753:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],754:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:755,dup:51}],755:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],756:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],757:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var each=require("@ndhoule/each");var Perimeterx=module.exports=integration("Perimeterx").global("PX").global("_pxAppId").option("appId","").option("customTraits",{}).tag('<script src="//client.perimeterx.net/{{ appId }}/main.min.js">');Perimeterx.prototype.initialize=function(){var options=this.options;var self=this;window._pxAppId=options.appId||"";this.globals.push(options.appId+"_asyncInit",options.appId);window[options.appId+"_asyncInit"]=function(px){px.Events.on("score",function(result){var traits={};traits.pxResult=result;self.analytics.identify(traits,{integrations:{Perimeterx:false}})})};this.load(this.ready)};Perimeterx.prototype.loaded=function(){return!!window.PX};Perimeterx.prototype.identify=function(identify){var customTraits=this.options.customTraits;var traits=identify.traits();each(function(trait,key){if(traits[key]){window[trait]=traits[key]}},customTraits)}},{"@ndhoule/each":10,"@segment/analytics.js-integration":758}],758:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":759,"./statics":760,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:762,"slug-component":1165}],759:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],760:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:761,dup:51}],761:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],762:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],763:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_prum");var Pingdom=module.exports=integration("Pingdom").assumesPageview().global("_prum").global("PRUM_EPISODES").option("id","").tag('<script src="//rum-static.pingdom.net/prum.min.js">');Pingdom.prototype.initialize=function(){window._prum=window._prum||[];push("id",this.options.id);var date=new Date;push("mark","firstbyte",date.getTime());this.load(this.ready)};Pingdom.prototype.loaded=function(){return!!(window._prum&&window._prum.push!==Array.prototype.push)}},{"@segment/analytics.js-integration":764,"global-queue":1127}],764:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":765,"./statics":766,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],765:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":767,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],766:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:768,dup:42}],767:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],768:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],769:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var analyticsEvents=require("analytics-events");var Pinterest=module.exports=integration("Pinterest Tag").global("pintrk").option("tid","").option("pinterestCustomProperties",[]).option("useEnhancedMatchLoad",false).mapping("pinterestEventMapping").tag('<script src="https://s.pinimg.com/ct/core.js"><\/script>');Pinterest.prototype.initialize=function(){if(!this.options.tid)return;(function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};var n=window.pintrk;n.queue=[],n.version="3.0"}})();this.load(this.ready);var traits=this.analytics.user().traits();if(traits&&traits.email&&this.options.useEnhancedMatchLoad){var email=this.analytics.user().traits().email;window.pintrk("load",this.options.tid,{em:email})}else{window.pintrk("load",this.options.tid)}window.pintrk("page");this.createPropertyMapping()};Pinterest.prototype.loaded=function(){return!!(window.pintrk&&window.pintrk.queue)};Pinterest.prototype.identify=function(identify){if(identify.email()){window.pintrk("set",{np:"segment",em:identify.email()})}};Pinterest.prototype.page=function(page){if(page.category()){window.pintrk("track","ViewCategory",{category:page.category(),name:page.name()||""})}else{window.pintrk("track","PageVisit",{name:page.name()||""})}};Pinterest.prototype.track=function(track){var segmentEvent=track.event();var pinterestEvent=this.getPinterestEvent(segmentEvent);var pinterestObject=this.generatePropertiesObject(track);if(pinterestEvent){window.pintrk("track",pinterestEvent,pinterestObject)}else{window.pintrk("track",segmentEvent,pinterestObject)}};Pinterest.prototype.getPinterestEvent=function(segmentEvent){for(var mappedEvent in this.options.pinterestEventMapping){if(mappedEvent.toLowerCase()===segmentEvent.toLowerCase()){return this.options.pinterestEventMapping[mappedEvent]}}var eventMap=[[analyticsEvents.productsSearched,"Search"],[analyticsEvents.productListFiltered,"Search"],[analyticsEvents.productAdded,"AddToCart"],[analyticsEvents.orderCompleted,"Checkout"],[analyticsEvents.videoPlaybackStarted,"WatchVideo"]];for(var index in eventMap){if(!eventMap.hasOwnProperty(index))continue;var eventRegex=eventMap[index][0];var pinterestEvent=eventMap[index][1];if(eventRegex.test(segmentEvent)){return pinterestEvent}}};Pinterest.prototype.createPropertyMapping=function(){this.propertyMap={query:"search_query",order_id:"order_id",coupon:"coupon",value:"value",currency:"currency"};this.productPropertyMap={name:"product_name",product_id:"product_id",sku:"product_id",category:"product_category",variant:"product_variant",price:"product_price",quantity:"product_quantity",brand:"product_brand"}};Pinterest.prototype.generatePropertiesObject=function(track){var pinterestProps={};var trackValue;for(var prop in this.propertyMap){if(!this.propertyMap.hasOwnProperty(prop))continue;trackValue=track.proxy("properties."+prop);if(trackValue)pinterestProps[this.propertyMap[prop]]=trackValue}var products=track.proxy("properties.products");var lineItemsArray;if(Array.isArray(products)){lineItemsArray=[];for(var i=0;i<products.length;i++){for(var productProperty in this.productPropertyMap){if(!this.productPropertyMap.hasOwnProperty(productProperty))continue;trackValue=products[i][productProperty];if(trackValue){if(lineItemsArray[i]===undefined)lineItemsArray[i]={};lineItemsArray[i][this.productPropertyMap[productProperty]]=trackValue}}}if(lineItemsArray.length)pinterestProps.line_items=lineItemsArray}else{lineItemsArray=[{}];var propAdded=false;for(var productProp in this.productPropertyMap){if(!this.productPropertyMap.hasOwnProperty(productProp))continue;trackValue=track.proxy("properties."+productProp);if(trackValue){lineItemsArray[0][this.productPropertyMap[productProp]]=trackValue;propAdded=true}}if(propAdded)pinterestProps.line_items=lineItemsArray}var customProps=this.options.pinterestCustomProperties;for(var j=0;j<customProps.length;j++){var customProperty=customProps[j];trackValue=track.proxy("properties."+customProperty);if(trackValue)pinterestProps[customProperty]=trackValue}return pinterestProps}},{"@segment/analytics.js-integration":770,"analytics-events":1106}],770:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":771,"./statics":772,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:774,dup:40,"slug-component":1165}],771:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":773,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],772:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:776,dup:42}],773:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],774:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":775,_process:1149,dup:43}],775:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:777}],776:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],777:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],778:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var is=require("is");var push=require("global-queue")("_paq");var Piwik=module.exports=integration("Piwik").global("_paq").option("url",null).option("siteId","").option("customVariableLimit",5).mapping("goals").tag('<script src="{{ url }}/piwik.js">');Piwik.prototype.initialize=function(){window._paq=window._paq||[];push("setSiteId",this.options.siteId);push("setTrackerUrl",this.options.url+"/piwik.php");push("enableLinkTracking");this.load(this.ready)};Piwik.prototype.loaded=function(){return!!(window._paq&&window._paq.push!==Array.prototype.push)};Piwik.prototype.page=function(){push("trackPageView")};Piwik.prototype.identify=function(identify){if(!identify.userId())return;push("setUserId",identify.userId().toString())};Piwik.prototype.track=function(track){var goals=this.goals(track.event());var revenue=track.revenue();var category=track.category()||"All";var action=track.event();var name=track.proxy("properties.name")||track.proxy("properties.label");var value=track.value()||track.revenue();var options=track.options("Piwik");var customVariables=options.customVars||options.cvar;if(!is.object(customVariables)){customVariables={}}for(var i=1;i<=this.options.customVariableLimit;i+=1){if(customVariables[i]){push("setCustomVariable",i.toString(),customVariables[i][0],customVariables[i][1],"page")}}each(goals,function(goal){push("trackGoal",goal,revenue)});push("trackEvent",category,action,name,value)}},{"@segment/analytics.js-integration":779,"component-each":1112,"global-queue":1127,is:1131}],779:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":780,"./statics":781,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],780:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":782,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],781:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:783,dup:42}],782:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],783:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],784:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_kiq");var when=require("do-when");var Qualaroo=module.exports=integration("Qualaroo").assumesPageview().global("_kiq").option("customerId","").option("siteToken","").option("track",false).tag('<script src="https://cl.qualaroo.com/ki.js/{{ customerId }}/{{ siteToken }}.js">');Qualaroo.prototype.initialize=function(){window._kiq=window._kiq||[];var loaded=this.loaded;var ready=this.ready;this.load(function(){when(loaded,ready)})};Qualaroo.prototype.loaded=function(){return!!(window._kiq&&window._kiq.push!==Array.prototype.push)};Qualaroo.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var email=identify.email();if(email)id=email;if(id)push("identify",id);if(traits)push("set",traits)};Qualaroo.prototype.track=function(track){if(!this.options.track)return;var event=track.event();var traits={};traits["Triggered: "+event]=true;this.identify(new Identify({traits:traits}))}},{"@segment/analytics.js-integration":785,"do-when":1125,"global-queue":1127,"segmentio-facade":1158}],785:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":786,"./statics":787,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:788,dup:40,"slug-component":1165}],786:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":790,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],787:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:791,dup:42}],788:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":789,_process:1149,dup:43}],789:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:792}],790:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],791:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],792:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],793:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_iva");var QuanticMind=module.exports=integration("QuanticMind").global("_iva").option("clientId","").option("domain","").tag('<script src="//analytics.staticiv.com/iva.js">').mapping("events");QuanticMind.prototype.initialize=function(){var domain=this.options.domain;window._iva=window._iva||[];push("setClientId",this.options.clientId);var userId=this.analytics.user().anonymousId();if(userId)push("setUserId",userId);if(domain)push("setDomain",domain);this.load(this.ready)};QuanticMind.prototype.loaded=function(){return!!(window._iva&&window._iva.push!==Array.prototype.push)};QuanticMind.prototype.identify=function(identify){push("setUserId",identify.anonymousId())};QuanticMind.prototype.page=function(){push("trackEvent","click")};QuanticMind.prototype.track=function(track){var user=this.analytics.user();var events=this.events(track.event());var value=track.revenue()||track.value()||0;var eventId=track.orderId()||user.anonymousId()||"";each(events,function(event){if(event!=="sale"){push("trackEvent",event,value,eventId)}})}},{"@segment/analytics.js-integration":794,"component-each":1112,"global-queue":1127}],794:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":795,"./statics":796,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],795:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":797,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],796:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:798,dup:42}],797:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],798:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],799:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Quora=module.exports=integration("Quora Conversion Pixel").global("qp").option("writeKey","").option("trackEvents",[]).tag('<script src="https://a.quora.com/qevents.js"><\/script>');Quora.prototype.initialize=function(){if(!this.options.writeKey)return;(function(){if(window.qp)return;var n=window.qp=function(){n.qp?n.qp.apply(n,arguments):n.queue.push(arguments)};n.queue=[]})();this.load(this.ready);window.qp("init",this.options.writeKey);window.qp("track","ViewContent")};Quora.prototype.loaded=function(){return window.qp};Quora.prototype.track=function(track){for(var i=0;i<this.options.trackEvents.length;i++){var currentPermittedEvent=this.options.trackEvents[i];if(currentPermittedEvent.toLowerCase()===track.event().toLowerCase()){window.qp("track","Generic");return}}}},{"@segment/analytics.js-integration":800}],800:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":801,"./statics":802,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:803,dup:40,"slug-component":1165}],801:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":805,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],802:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:806,dup:42}],803:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":804,_process:1149,dup:43}],804:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:807}],805:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],806:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],807:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],808:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var convertDates=require("@segment/convert-dates");var del=require("obj-case").del;var alias=require("@segment/alias");var Ramen=module.exports=integration("Ramen").global("Ramen").global("_ramen").option("organization_id","").tag('<script src="//cdn.ramen.is/assets/ramen.js">');Ramen.prototype.initialize=function(){window._ramen=window._ramen||[];(function(){var a,b,c;a=function(f){return function(){window._ramen.push([f].concat(Array.prototype.slice.call(arguments,0)))}};b=["boot","ready","identify","group","track","page","reset","ask"];for(c=0;c<b.length;c++){window._ramen[b[c]]=a(b[c])}})();window._ramen.boot(this.options.organization_id,this.options);this.load(this.ready)};Ramen.prototype.loaded=function(){return!!(window._ramen&&window._ramen.push!==Array.prototype.push)};Ramen.prototype.group=function(group){if(!this.identified){window._ramen.identify();this.identified=true}var props=group.traits({createdAt:"created",created:"created_at"});if(group.groupId())props.id=group.groupId();window._ramen.group(props)};Ramen.prototype.page=function(){if(!this.identified){window._ramen.identify();this.identified=true}window._ramen.page()};Ramen.prototype.track=function(track){if(!this.identified){window._ramen.identify();this.identified=true}window._ramen.track(track.event())};Ramen.prototype.identify=function(identify){if(!identify.userId())return;var user;var traits;var opts;traits=identify.traits();opts=identify.options(this.name);user={id:identify.userId()};if(traits.email){user.email=traits.email}if(identify.created()){user.created_at=identify.created()}if(identify.name()){user.name=identify.name()}if(traits.company&&traits.company.id){user.company=alias(traits.company,{createdAt:"created",created:"created_at"})}del(traits,"email");del(traits,"name");del(traits,"id");del(traits,"created");del(traits,"createdAt");del(traits,"company");user.traits=traits;user=convertDates(user,function(date){return Math.floor(date/1e3)});user.traits=alias(user.traits,{createdAt:"created"});user.traits=alias(user.traits,{created:"created_at"});opts=alias(opts,{auth_hash_timestamp:"timestamp"});window._ramen.identify(user,opts);this.identified=true}},{"@segment/alias":21,"@segment/analytics.js-integration":809,"@segment/convert-dates":1087,"obj-case":1143}],809:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":810,"./statics":811,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],810:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":812,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],811:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:813,dup:42}],812:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],813:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],814:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var each=require("component-each");var integration=require("@segment/analytics.js-integration");var Rockerbox=module.exports=integration("Rockerbox").option("source","").option("allAnSeg","").option("customerAnSeg","").option("conversionId","").option("segmentId","").mapping("events").tag("page",'<script src="https://getrockerbox.com/pixel?source={{ source }}&type=imp&an_seg={{ allAnSeg }}">').tag("user",'<script src="https://getrockerbox.com/pixel?source={{ source }}&type=imp&an_seg={{ customerAnSeg }}">').tag("appnexus",'<script src="https://secure.adnxs.com/px?id={{ conversionId }}&seg={{ segmentId }}&t=1&order_id={{ id }}">').tag("track",'<script src="https://getrockerbox.com/pixel?source={{ source }}&type=conv&id={{ conversionId }}&an_seg={{ segmentId }}&order_type={{ id }}">');Rockerbox.prototype.initialize=function(){this.ready()};Rockerbox.prototype.page=function(){var user=this.analytics.user();this.load("page");if(user.id())this.load("user")};Rockerbox.prototype.track=function(track){var user=this.analytics.user();var events=this.events(track.event());var self=this;each(events,function(event){var conversionId=event.conversionId;var segmentId=event.segmentId;var property=event.property||"email";var id;switch(property){case"email":id=user&&email(user);break;case"orderId":id=track.orderId();break;case"userId":id=user&&user.id();break;case"revenue":id=track.revenue();break;default:}var params={conversionId:conversionId,segmentId:segmentId,id:id};self.load("appnexus",params);self.load("track",params)})};function email(user){var identify=new Identify({userId:user.id(),traits:user.traits()});return identify.email()}},{"@segment/analytics.js-integration":815,"component-each":1112,"segmentio-facade":1158}],815:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":816,"./statics":817,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:818,dup:40,"slug-component":1165}],816:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":820,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],817:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:821,dup:42}],818:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":819,_process:1149,dup:43}],819:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:822}],820:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],821:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],822:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],823:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var RocketFuel=module.exports=integration("Rocket Fuel").option("accountId","").option("universalActionId","").tag("universal",'<img src="//{{ universalActionId }}p.rfihub.com/ca.gif?rb={{ accountId }}&ca={{ universalActionId }}&ra={{ cacheBuster }}&custtype={{ custType }}"/>').tag("conversion",'<img src="//p.rfihub.com/ca.gif?rb={{ accountId }}&ca={{ actionId }}&ra={{ cacheBuster }}"/>').tag("completed order",'<img src="//p.rfihub.com/ca.gif?rb={{ accountId }}&ca={{ actionId }}&ra={{ cacheBuster }}&transid={{ orderId }}&revenue={{ orderTotal }}&pid={{ productIds }}"/>').mapping("events");RocketFuel.prototype.page=function(){var user=this.analytics.user();var custType="new";if(user.id())custType="existing";this.load("universal",{custType:custType,cacheBuster:this.cacheBuster()})};RocketFuel.prototype.track=function(track){var orderId=track.orderId();var total=(track.total()||0).toFixed(2);var productIds=this.productIds(track.products());var events=this.events(track.event());var self=this;each(events,function(event){if(orderId&&total){return self.load("completed order",{actionId:event,orderTotal:total,orderId:orderId,productIds:productIds,cacheBuster:self.cacheBuster()})}return self.load("conversion",{actionId:event,cacheBuster:self.cacheBuster()})})};RocketFuel.prototype.productIds=function(products){var ids=[];each(products,function(product){ids.push(product.id)});return ids.join(",")};RocketFuel.prototype.cacheBuster=function(){return Math.round(Math.random()*99999999)}},{"@segment/analytics.js-integration":824,"component-each":1112}],824:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":825,"./statics":826,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:827,dup:40,"slug-component":1165}],825:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":829,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],826:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:830,dup:42}],827:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":828,_process:1149,dup:43}],828:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:831}],829:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],830:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],831:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],832:[function(require,module,exports){"use strict";var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var RollbarIntegration=module.exports=integration("Rollbar").global("Rollbar").global("rollbar").option("identify",true).option("accessToken","").option("environment","unknown").option("captureUncaught",true).option("captureUnhandledRejections",false).option("sourceMapEnabled",false).option("codeVersion","").option("guessUncaughtFrames",false).option("ignoredMessages",[]).option("loadTimeout",6e4).option("verbose",false);RollbarIntegration.prototype.initialize=function(){window._rollbarConfig=this.config={accessToken:this.options.accessToken,captureUncaught:this.options.captureUncaught,captureUnhandledRejections:this.options.captureUnhandledRejections,verbose:this.options.verbose,payload:{environment:this.options.environment,client:{javascript:{source_map_enabled:this.options.sourceMapEnabled,code_version:this.options.codeVersion,guess_uncaught_frames:this.options.guessUncaughtFrames}}}};var msg=this.options.ignoredMessages;if(msg.length>0){var ret=[];for(var x=0;x<msg.length;x++){if(msg[x]!==null&&msg[x]!=="")ret.push(msg[x])}window._rollbarConfig.ignoredMessages=ret}!function(r){var e={};function o(n){if(e[n])return e[n].exports;var t=e[n]={i:n,l:!1,exports:{}};return r[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=e,o.d=function(r,e,n){o.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:n})},o.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},o.t=function(r,e){if(1&e&&(r=o(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var t in r)o.d(n,t,function(e){return r[e]}.bind(null,t));return n},o.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return o.d(e,"a",e),e},o.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},o.p="",o(o.s=0)}([function(r,e,o){"use strict";var n=o(1),t=o(5);_rollbarConfig=_rollbarConfig||{},_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||"https://cdn.rollbar.com/rollbarjs/refs/tags/v2.21.1/rollbar.min.js",_rollbarConfig.async=void 0===_rollbarConfig.async||_rollbarConfig.async;var a=n.setupShim(window,_rollbarConfig),l=t(_rollbarConfig);window.rollbar=n.Rollbar,a.loadFull(window,document,!_rollbarConfig.async,_rollbarConfig,l)},function(r,e,o){"use strict";var n=o(2),t=o(3);function a(r){return function(){try{return r.apply(this,arguments)}catch(r){try{console.error("[Rollbar]: Internal error",r)}catch(r){}}}}var l=0;function i(r,e){this.options=r,this._rollbarOldOnError=null;var o=l++;this.shimId=function(){return o},"undefined"!=typeof window&&window._rollbarShims&&(window._rollbarShims[o]={handler:e,messages:[]})}var s=o(4),d=function(r,e){return new i(r,e)},c=function(r){return new s(d,r)};function u(r){return a(function(){var e=this,o=Array.prototype.slice.call(arguments,0),n={shim:e,method:r,args:o,ts:new Date};window._rollbarShims[this.shimId()].messages.push(n)})}i.prototype.loadFull=function(r,e,o,n,t){var l=!1,i=e.createElement("script"),s=e.getElementsByTagName("script")[0],d=s.parentNode;i.crossOrigin="",i.src=n.rollbarJsUrl,o||(i.async=!0),i.onload=i.onreadystatechange=a(function(){if(!(l||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){i.onload=i.onreadystatechange=null;try{d.removeChild(i)}catch(r){}l=!0,function(){var e;if(void 0===r._rollbarDidLoad){e=new Error("rollbar.js did not load");for(var o,n,a,l,i=0;o=r._rollbarShims[i++];)for(o=o.messages||[];n=o.shift();)for(a=n.args||[],i=0;i<a.length;++i)if("function"==typeof(l=a[i])){l(e);break}}"function"==typeof t&&t(e)}()}}),d.insertBefore(i,s)},i.prototype.wrap=function(r,e,o){try{var n;if(n="function"==typeof e?e:function(){return e||{}},"function"!=typeof r)return r;if(r._isWrap)return r;if(!r._rollbar_wrapped&&(r._rollbar_wrapped=function(){o&&"function"==typeof o&&o.apply(this,arguments);try{return r.apply(this,arguments)}catch(o){var e=o;throw e&&("string"==typeof e&&(e=new String(e)),e._rollbarContext=n()||{},e._rollbarContext._wrappedSource=r.toString(),window._rollbarWrappedError=e),e}},r._rollbar_wrapped._isWrap=!0,r.hasOwnProperty))for(var t in r)r.hasOwnProperty(t)&&(r._rollbar_wrapped[t]=r[t]);return r._rollbar_wrapped}catch(e){return r}};for(var p="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleAnonymousErrors,handleUnhandledRejection,captureEvent,captureDomContentLoaded,captureLoad".split(","),f=0;f<p.length;++f)i.prototype[p[f]]=u(p[f]);r.exports={setupShim:function(r,e){if(r){var o=e.globalAlias||"Rollbar";if("object"==typeof r[o])return r[o];r._rollbarShims={},r._rollbarWrappedError=null;var l=new c(e);return a(function(){e.captureUncaught&&(l._rollbarOldOnError=r.onerror,n.captureUncaughtExceptions(r,l,!0),e.wrapGlobalEventHandlers&&t(r,l,!0)),e.captureUnhandledRejections&&n.captureUnhandledRejections(r,l,!0);var a=e.autoInstrument;return!1!==e.enabled&&(void 0===a||!0===a||"object"==typeof a&&a.network)&&r.addEventListener&&(r.addEventListener("load",l.captureLoad.bind(l)),r.addEventListener("DOMContentLoaded",l.captureDomContentLoaded.bind(l))),r[o]=l,l})()}},Rollbar:c}},function(r,e,o){"use strict";function n(r,e,o,n){r._rollbarWrappedError&&(n[4]||(n[4]=r._rollbarWrappedError),n[5]||(n[5]=r._rollbarWrappedError._rollbarContext),r._rollbarWrappedError=null);var t=e.handleUncaughtException.apply(e,n);o&&o.apply(r,n),"anonymous"===t&&(e.anonymousErrorsPending+=1)}r.exports={captureUncaughtExceptions:function(r,e,o){if(r){var t;if("function"==typeof e._rollbarOldOnError)t=e._rollbarOldOnError;else if(r.onerror){for(t=r.onerror;t._rollbarOldOnError;)t=t._rollbarOldOnError;e._rollbarOldOnError=t}e.handleAnonymousErrors();var a=function(){var o=Array.prototype.slice.call(arguments,0);n(r,e,t,o)};o&&(a._rollbarOldOnError=t),r.onerror=a}},captureUnhandledRejections:function(r,e,o){if(r){"function"==typeof r._rollbarURH&&r._rollbarURH.belongsToShim&&r.removeEventListener("unhandledrejection",r._rollbarURH);var n=function(r){var o,n,t;try{o=r.reason}catch(r){o=void 0}try{n=r.promise}catch(r){n="[unhandledrejection] error getting `promise` from event"}try{t=r.detail,!o&&t&&(o=t.reason,n=t.promise)}catch(r){}o||(o="[unhandledrejection] error getting `reason` from event"),e&&e.handleUnhandledRejection&&e.handleUnhandledRejection(o,n)};n.belongsToShim=o,r._rollbarURH=n,r.addEventListener("unhandledrejection",n)}}}},function(r,e,o){"use strict";function n(r,e,o){if(e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){for(var n=e.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var t=function(e,o,t){n.call(this,e,r.wrap(o),t)};t._rollbarOldAdd=n,t.belongsToShim=o,e.addEventListener=t;for(var a=e.removeEventListener;a._rollbarOldRemove&&a.belongsToShim;)a=a._rollbarOldRemove;var l=function(r,e,o){a.call(this,r,e&&e._rollbar_wrapped||e,o)};l._rollbarOldRemove=a,l.belongsToShim=o,e.removeEventListener=l}}r.exports=function(r,e,o){if(r){var t,a,l="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(t=0;t<l.length;++t)r[a=l[t]]&&r[a].prototype&&n(e,r[a].prototype,o)}}},function(r,e,o){"use strict";function n(r,e){this.impl=r(e,this),this.options=e,function(r){for(var e=function(r){return function(){var e=Array.prototype.slice.call(arguments,0);if(this.impl[r])return this.impl[r].apply(this.impl,e)}},o="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleAnonymousErrors,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureEvent,captureDomContentLoaded,captureLoad".split(","),n=0;n<o.length;n++)r[o[n]]=e(o[n])}(n.prototype)}n.prototype._swapAndProcessMessages=function(r,e){var o,n,t;for(this.impl=r(this.options);o=e.shift();)n=o.method,t=o.args,this[n]&&"function"==typeof this[n]&&("captureDomContentLoaded"===n||"captureLoad"===n?this[n].apply(this,[t[0],o.ts]):this[n].apply(this,t));return this},r.exports=n},function(r,e,o){"use strict";r.exports=function(r){return function(e){if(!e&&!window._rollbarInitialized){for(var o,n,t=(r=r||{}).globalAlias||"Rollbar",a=window.rollbar,l=function(r){return new a(r)},i=0;o=window._rollbarShims[i++];)n||(n=o.handler),o.handler._swapAndProcessMessages(l,o.messages);window[t]=n,window._rollbarInitialized=!0}}}}]);this.load(this.ready)};RollbarIntegration.prototype.loaded=function(){return!!window._rollbarDidLoad};RollbarIntegration.prototype.load=function(callback){var loadedCheck=this.loaded;var startTime=(new Date).getTime();var timeout=this.options.loadTimeout;function timer(){if(loadedCheck()){return callback()}if((new Date).getTime()-startTime>=timeout){return callback(new Error("Rollbar timed out while loading"))}setTimeout(timer,1)}timer()};RollbarIntegration.prototype.identify=function(identify){if(!this.options.identify)return;var uid=identify.userId();if(uid===null||uid===undefined)return;var rollbar=window.Rollbar;var person={id:uid};extend(person,identify.traits());rollbar.configure({payload:{person:person}})}},{"@ndhoule/extend":13,"@segment/analytics.js-integration":833}],833:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":834,"./statics":835,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],834:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":836,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],835:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:837,dup:42}],836:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],837:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],838:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Route=module.exports=integration("Route").global("_rq").global("_route").option("organizationId","").tag('<script id="rtracker" data-organization-id="{{ organizationId }}" data-source="segment.com" src="//www.routecdn.com/tracker/route-tracker-min.js">');Route.prototype.initialize=function(){window._rq=window._rq||[];window._route=window._route||[];window._route.methods=["identify","track","trackById"];window._route.factory=function(method){return function(){var args=Array.prototype.slice.call(arguments);args.unshift(method);window._rq.push(args);return window._rq}};for(var i=0;i<window._route.methods.length;i++){var key=window._route.methods[i];window._route[key]=window._route.factory(key)}this.load(this.ready)};Route.prototype.loaded=function(){return window._rq&&window._rq.push!==Array.prototype.push};Route.prototype.identify=function(identify){window._route.identify(identify.traits())};Route.prototype.track=function(track){window._route.track(track.event())}},{"@segment/analytics.js-integration":839}],839:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":840,"./statics":841,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],840:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":842,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],841:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:843,dup:42}],842:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],843:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],844:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var objCase=require("obj-case");var SaaSquatch=module.exports=integration("SaaSquatch").option("tenantAlias","").option("referralImage","").global("_sqh").tag('<script src="//d2rcp9ak152ke1.cloudfront.net/assets/javascripts/squatch.min.js">');SaaSquatch.prototype.initialize=function(){window._sqh=window._sqh||[];window._sqh.push(["init",{tenant_alias:this.options.tenantAlias}]);this.load(this.ready)};SaaSquatch.prototype.loaded=function(){return window._sqh&&window._sqh.push!==Array.prototype.push};SaaSquatch.prototype.identify=function(identify){var sqh=window._sqh;var opts=identify.options(this.name);var id=identify.userId();var email=identify.email();if(!(id||email))return;if(this.called)return;var init=identify.traits();init.email=email;init.user_id=id;objCase.del(init,"id");init.tenant_alias=this.options.tenantAlias;init.first_name=identify.firstName();init.last_name=identify.lastName();init.user_image=identify.avatar();var properties=["account_id","payment_provider_id","account_status","referral_code","user_referral_code","checksum","mode","locale"];for(var i=0;i<properties.length;i++){var prop=properties[i];var value=objCase.find(opts,prop)||objCase.find(init,prop);objCase.del(init,prop);if(value){init[prop]=value}}if(init.payment_provider_id==="null"){init.payment_provider_id=null}var image=objCase.find(opts,"referralImage")||objCase.find(init,"referralImage")||this.options.referralImage;if(image){objCase.del(init,"referralImage");init.fb_share_image=image}sqh.push(["init",init]);this.called=true;this.load()};SaaSquatch.prototype.group=function(group){var sqh=window._sqh;var id=group.groupId();var image=group.proxy("traits.referralImage")||this.options.referralImage;var opts=group.options(this.name);if(this.called)return;var init={tenant_alias:this.options.tenantAlias,account_id:id};if(opts.checksum)init.checksum=opts.checksum;if(image)init.fb_share_image=image;sqh.push(["init",init]);this.called=true;this.load()}},{"@segment/analytics.js-integration":845,"obj-case":1143}],845:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":846,"./statics":847,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],846:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":848,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],847:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:849,dup:42}],848:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],849:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],850:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var SalesforceDMP=module.exports=integration("Salesforce DMP").option("confId","").option("trackFireEvents",[]).option("eventAttributeMap",{}).option("namespace","").tag("init",'<script src="//cdn.krxd.net/controltag/{{ confId }}.js">').tag("usermatch",'<img src="https://beacon.krxd.net/usermatch.gif?partner=segment_io&partner_uid={{ userId }}">');SalesforceDMP.prototype.initialize=function(){if(!this.options.confId)return;if(this.options.useV2LogicClient){this.identify=this.identifyV2;this.page=this.pageV2;this.track=this.trackV2}var self=this;window.Krux||((window.Krux=function(){window.Krux.q.push(arguments)}).q=[]);this.load("init",function(){self.ready()})};SalesforceDMP.prototype.loaded=function(){return!!(window.Krux&&window.Krux.q&&window.Krux.ns)};SalesforceDMP.prototype.identify=function(identify){var userId=identify.userId()||identify.anonymousId();this.load("usermatch",{userId:userId})};SalesforceDMP.prototype.page=function(page){var userId=page.anonymousId()||page.userId();this.load("usermatch",{userId:userId})};SalesforceDMP.prototype.track=function(track){if(!this.options.namespace)return;var resetDataLayer=false;if(!window.kruxDataLayer){resetDataLayer=true;window.kruxDataLayer={}}if(this.options.trackFireEvents.length){for(var i=0;i<this.options.trackFireEvents.length;i++){var event=this.options.trackFireEvents[i];if(event.toLowerCase()===track.event().toLowerCase())break;if(i===this.options.trackFireEvents.length-1)return}}for(var segmentProp in this.options.eventAttributeMap){var kruxKey=this.options.eventAttributeMap[segmentProp];var value=track.proxy("properties."+segmentProp);if(value)window.kruxDataLayer[kruxKey]=value}var namespace=this.options.namespace;if(namespace.length<=3||namespace.toLowerCase().slice(0,3)!=="ns:")namespace="ns:"+namespace;window.Krux(namespace,"page:load",function(err){if(err)console.error(err);if(resetDataLayer)delete window.kruxDataLayer},{pageView:false})};SalesforceDMP.prototype.identifyV2=SalesforceDMP.prototype.trackV2=function(msg){if(!this.options.namespace)return;var resetDataLayer;var type=msg.type();if(type==="track"){if(this.options.trackFireEvents.length>0){for(var i=0;i<this.options.trackFireEvents.length;i++){var event=this.options.trackFireEvents[i];if(event.toLowerCase()===msg.event().toLowerCase()){resetDataLayer=createDataLayer();break}if(i===this.options.trackFireEvents.length-1)return}}else{return}for(var segmentProp in this.options.eventAttributeMap){var kruxKey=this.options.eventAttributeMap[segmentProp];var value=msg.proxy("properties."+segmentProp);if(value)window.kruxDataLayer[kruxKey]=value}for(segmentProp in this.options.contextTraitsMap){kruxKey=this.options.contextTraitsMap[segmentProp];value=msg.proxy("context.traits."+segmentProp);if(value)window.kruxDataLayer[kruxKey]=value}}else{resetDataLayer=createDataLayer()}if(window.kruxDataLayer){if(this.options.sendEventNames&&!window.kruxDataLayer.event_name){var name;if(type==="track"){name=msg.event()}else if(this.options.sendIdentifyAsEventName){name=type}if(name)window.kruxDataLayer.event_name=name}if(msg.userId())window.kruxDataLayer.segmentio_user_id=msg.userId();if(msg.anonymousId())window.kruxDataLayer.segmentio_anonymous_id=msg.anonymousId();if(msg.proxy("context.traits.crossDomainId"))window.kruxDataLayer.segmentio_xid=msg.proxy("context.traits.crossDomainId")}this.firePixel(resetDataLayer)};SalesforceDMP.prototype.pageV2=function(page){};SalesforceDMP.prototype.firePixel=function(resetDataLayer){var namespace=this.options.namespace;if(namespace.length<=3||namespace.toLowerCase().slice(0,3)!=="ns:")namespace="ns:"+namespace;window.Krux(namespace,"page:load",function(err){if(err)console.error(err);if(resetDataLayer)delete window.kruxDataLayer},{pageView:false})};function createDataLayer(){if(!window.kruxDataLayer){window.kruxDataLayer={};return true}return false}},{"@segment/analytics.js-integration":851}],851:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":852,"./statics":853,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:854,dup:40,"slug-component":1165}],852:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":856,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],853:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:857,dup:42}],854:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":855,_process:1149,dup:43}],855:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:858}],856:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],857:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],858:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],859:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var SalesforceLiveAgent=module.exports=integration("Salesforce Live Agent").global("liveagent").option("deploymentId","").option("orgId","").option("enableLogging",false).option("liveAgentEndpointUrl","").option("hostname","").option("contactMappings",[]).option("caseMappings",[]).option("accountMappings",[]).tag('<script src="https://{{ hostname }}.salesforceliveagent.com/content/g/js/36.0/deployment.js">');SalesforceLiveAgent.prototype.initialize=function(){this.load(function(){this.ready()}.bind(this))};SalesforceLiveAgent.prototype.track=function(track){if(track.event()!=="Live Chat Conversation Started")return;var traits=this.analytics.user().traits();var group=this.analytics.group().traits();var properties=track.properties();var options=this.options;var caseMappings=options.caseMappings||[];var contactMappings=options.contactMappings||[];var accountMappings=options.accountMappings||[];var findOrCreate;function addCustomDetail(mapping,value){var label=mapping.label;var displayToAgent=!!mapping.displayToAgent;var fieldName=mapping.fieldName;var doFind=!!mapping.doFind;var isExactMatch=!!mapping.isExactMatch;var doCreate=!!mapping.doCreate;window.liveagent.addCustomDetail(label,value,displayToAgent);findOrCreate.map(fieldName,label,doFind,isExactMatch,doCreate)}if(Object.keys(traits).length&&contactMappings.length){findOrCreate=window.liveagent.findOrCreate("Contact");contactMappings.forEach(function(mapping){var m=mapping;m=m.value||m;var trait=m.trait;var value=traits[trait];addCustomDetail(m,value)});if(traits.firstName&&traits.lastName){window.liveagent.setName(traits.firstName+" "+traits.lastName)}}if(Object.keys(properties).length&&caseMappings.length){findOrCreate=window.liveagent.findOrCreate("Case");caseMappings.forEach(function(mapping){var m=mapping.value||mapping;var propertyName=m.property;var value=properties[propertyName];addCustomDetail(m,value)})}if(Object.keys(group).length&&accountMappings.length){findOrCreate=window.liveagent.findOrCreate("Account");accountMappings.forEach(function(mapping){var m=mapping.value||mapping;var propertyName=m.property;var value=group[propertyName];addCustomDetail(m,value)})}var endpoint="https://"+options.liveAgentEndpointUrl+".salesforceliveagent.com/chat";window.liveagent.init(endpoint,options.deploymentId,options.orgId);if(options.enableLogging){window.liveagent.enableLogging()}};SalesforceLiveAgent.prototype.loaded=function(){return!!window.liveagent}},{"@segment/analytics.js-integration":860}],860:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":861,"./statics":862,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:863,dup:40,"slug-component":1165}],861:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":865,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],862:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:866,dup:42}],863:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":864,_process:1149,dup:43}],864:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:867}],865:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],866:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],867:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],868:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var when=require("do-when");var SatisMeter=module.exports=integration("SatisMeter").global("satismeter").option("token","").option("apiKey","").tag('<script src="https://app.satismeter.com/js">');SatisMeter.prototype.initialize=function(){var self=this;var options=this.options;this.load(function(){when(function(){return self.loaded()},function(){window.satismeter("load",{writeKey:options.apiKey||options.token,source:"analytics.js"});self.ready()})})};SatisMeter.prototype.loaded=function(){return!!window.satismeter};SatisMeter.prototype.identify=function(identify){window.satismeter("identify",{userId:identify.userId(),anonymousId:identify.anonymousId(),traits:this.analytics.user().traits()})};SatisMeter.prototype.page=function(page){window.satismeter("page",{userId:this.analytics.user().id(),anonymousId:this.analytics.user().anonymousId(),name:page.name(),category:page.category(),properties:page.properties()})};SatisMeter.prototype.track=function(track){window.satismeter("track",{userId:this.analytics.user().id(),anonymousId:this.analytics.user().anonymousId(),event:track.event(),properties:track.properties()})};SatisMeter.prototype.group=function(group){window.satismeter("group",{userId:this.analytics.user().id(),anonymousId:this.analytics.user().anonymousId(),groupId:group.groupId(),traits:group.properties()})}},{"@segment/analytics.js-integration":869,"do-when":1125}],869:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":870,"./statics":871,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],870:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":872,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],871:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:873,dup:42}],872:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],873:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],874:[function(require,module,exports){function ads(query){var queryIds={btid:"dataxu",urid:"millennial-media"};if(query.lastIndexOf("?",0)===0){query=query.substring(1)}query=query.replace(/\?/g,"&");var parts=query.split("&");for(var i=0;i<parts.length;i++){var k=parts[i].split("=")[0];var v=parts[i].split("=")[1];if(queryIds[k]){return{id:v,type:queryIds[k]}}}}module.exports=ads},{}],875:[function(require,module,exports){"use strict";var ads=require("./ads");var clone=require("component-clone");var cookie=require("component-cookie");var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var json=require("json3");var keys=require("@ndhoule/keys");var localstorage=require("yields-store");var protocol=require("@segment/protocol");var send=require("@segment/send-json");var topDomain=require("@segment/top-domain");var utm=require("./utm");var uuid=require("uuid").v4;var Queue=require("@segment/localstorage-retry");var cookieOptions={maxage:31536e6,secure:false,path:"/"};var MAX_SIZE=32*1e3;var queueOptions={maxRetryDelay:36e4,minRetryDelay:1e3,backoffFactor:2,maxAttempts:10,maxItems:100};var Segment=(exports=module.exports=integration("Segment.io").option("apiKey","").option("apiHost","api.segment.io/v1").option("crossDomainIdServers",[]).option("deleteCrossDomainId",false).option("saveCrossDomainIdInLocalStorage",true).option("retryQueue",true).option("addBundledMetadata",false).option("unbundledIntegrations",[])).option("unbundledConfigIds",[]).option("maybeBundledConfigIds",{});exports.storage=function(){return protocol()==="file:"||protocol()==="chrome-extension:"?localstorage:cookie};exports.global=window;exports.sendJsonWithTimeout=function(url,obj,headers,timeout,fn){if(send.type!=="xhr"){send(url,obj,headers,fn);return}var req=new XMLHttpRequest;req.onerror=fn;req.onreadystatechange=done;req.open("POST",url,true);req.timeout=timeout;req.ontimeout=fn;for(var k in headers){req.setRequestHeader(k,headers[k])}req.send(json.stringify(obj));function done(){if(req.readyState===4){if(req.status===429||req.status>=500&&req.status<600){fn(new Error("HTTP Error "+req.status+" ("+req.statusText+")"))}else{fn(null,req)}}}};Segment.prototype.initialize=function(){var self=this;if(this.options.retryQueue){this._lsqueue=new Queue("segmentio",queueOptions,function(elem,done){var item=elem;item.msg.sentAt=new Date;Segment.sendJsonWithTimeout(item.url,item.msg,item.headers,10*1e3,function(err,res){self.debug("sent %O, received %O",item.msg,[err,res]);if(err)return done(err);done(null,res)})});this._lsqueue.start()}this.ready();this.analytics.on("invoke",function(msg){var action=msg.action();var listener="on"+msg.action();self.debug("%s %o",action,msg);if(self[listener])self[listener](msg);self.ready()});this.deleteCrossDomainIdIfNeeded();if(this.isCrossDomainAnalyticsEnabled()){this.retrieveCrossDomainId()}};Segment.prototype.loaded=function(){return true};Segment.prototype.onpage=function(page){this.enqueue("/p",page.json())};Segment.prototype.onidentify=function(identify){this.enqueue("/i",identify.json())};Segment.prototype.ongroup=function(group){this.enqueue("/g",group.json())};Segment.prototype.ontrack=function(track){var json=track.json();delete json.traits;this.enqueue("/t",json)};Segment.prototype.onalias=function(alias){var json=alias.json();var user=this.analytics.user();json.previousId=json.previousId||json.from||user.id()||user.anonymousId();json.userId=json.userId||json.to;delete json.from;delete json.to;this.enqueue("/a",json)};Segment.prototype.normalize=function(message){var msg=message;this.debug("normalize %o",msg);var user=this.analytics.user();var global=exports.global;var query=global.location.search;var ctx=msg.context=msg.context||msg.options||{};delete msg.options;msg.writeKey=this.options.apiKey;ctx.userAgent=navigator.userAgent;var locale=navigator.userLanguage||navigator.language;if(typeof ctx.locale==="undefined"&&typeof locale!=="undefined"){ctx.locale=locale}if(!ctx.library)ctx.library={name:"analytics.js",version:this.analytics.VERSION};if(this.isCrossDomainAnalyticsEnabled()){var crossDomainId=this.getCachedCrossDomainId();if(crossDomainId){if(!ctx.traits){ctx.traits={crossDomainId:crossDomainId}}else if(!ctx.traits.crossDomainId){ctx.traits.crossDomainId=crossDomainId}}}if(query&&!ctx.campaign){ctx.campaign=utm(query)}this.referrerId(query,ctx);msg.userId=msg.userId||user.id();msg.anonymousId=user.anonymousId();msg.sentAt=new Date;var failedInitializations=this.analytics.failedInitializations||[];if(failedInitializations.length>0){msg._metadata={failedInitializations:failedInitializations}}if(this.options.addBundledMetadata){var bundled=keys(this.analytics.Integrations);var maybeBundledConfigIds=this.options.maybeBundledConfigIds;var bundledConfigIds=[];for(var i=0;i<bundled.length;i++){var name=bundled[i];if(!maybeBundledConfigIds){break}if(!maybeBundledConfigIds[name]){continue}for(var j=0;j<maybeBundledConfigIds[name].length;j++){var id=maybeBundledConfigIds[name][j];bundledConfigIds.push(id)}}msg._metadata=msg._metadata||{};msg._metadata.bundled=bundled;msg._metadata.unbundled=this.options.unbundledIntegrations;msg._metadata.bundledIds=bundledConfigIds}this.debug("normalized %o",msg);this.ampId(ctx);return msg};Segment.prototype.ampId=function(ctx){var ampId=this.cookie("_ga");if(ampId){if(ampId.slice(0,3)==="amp")ctx.amp={id:ampId}}};Segment.prototype.enqueue=function(path,message,fn){var url="https://"+this.options.apiHost+path;var headers={"Content-Type":"text/plain"};var msg=this.normalize(message);if(json.stringify(msg).length>MAX_SIZE){this.debug("message must be less than 32kb %O",msg)}this.debug("enqueueing %O",msg);var self=this;if(this.options.retryQueue){this._lsqueue.addItem({url:url,headers:headers,msg:msg})}else{send(url,msg,headers,function(err,res){self.debug("sent %O, received %O",msg,[err,res]);if(fn){if(err)return fn(err);fn(null,res)}})}};Segment.prototype.cookie=function(name,val){var store=Segment.storage();if(arguments.length===1)return store(name);var global=exports.global;var href=global.location.href;var domain="."+topDomain(href);if(domain===".")domain="";this.debug("store domain %s -> %s",href,domain);var opts=clone(cookieOptions);opts.domain=domain;this.debug("store %s, %s, %o",name,val,opts);store(name,val,opts);if(store(name))return;delete opts.domain;this.debug("fallback store %s, %s, %o",name,val,opts);store(name,val,opts)};Segment.prototype.referrerId=function(query,ctx){var stored=this.cookie("s:context.referrer");var ad;if(stored)stored=json.parse(stored);if(query)ad=ads(query);ad=ad||stored;if(!ad)return;ctx.referrer=extend(ctx.referrer||{},ad);this.cookie("s:context.referrer",json.stringify(ad))};Segment.prototype.isCrossDomainAnalyticsEnabled=function(){if(!this.options.crossDomainIdServers){return false}return this.options.crossDomainIdServers.length>0};Segment.prototype.retrieveCrossDomainId=function(callback){if(!this.isCrossDomainAnalyticsEnabled()){if(callback){callback("crossDomainId not enabled",null)}return}var cachedCrossDomainId=this.getCachedCrossDomainId();if(cachedCrossDomainId){if(callback){callback(null,{crossDomainId:cachedCrossDomainId})}return}var self=this;var writeKey=this.options.apiKey;var domains=[];for(var i=0;i<this.options.crossDomainIdServers.length;i++){var domain=this.options.crossDomainIdServers[i];domains.push(domain)}getCrossDomainIdFromServerList(domains,writeKey,function(err,res){if(err){if(callback){callback(err,null)}return}var crossDomainId=null;var fromDomain=null;if(res){crossDomainId=res.id;fromDomain=res.domain}else{crossDomainId=uuid();fromDomain=window.location.hostname}self.saveCrossDomainId(crossDomainId);self.analytics.identify({crossDomainId:crossDomainId});if(callback){callback(null,{crossDomainId:crossDomainId,fromDomain:fromDomain})}})};Segment.prototype.getCachedCrossDomainId=function(){if(this.options.saveCrossDomainIdInLocalStorage){return localstorage("seg_xid")}return this.cookie("seg_xid")};Segment.prototype.saveCrossDomainId=function(crossDomainId){if(!this.options.saveCrossDomainIdInLocalStorage){this.cookie("seg_xid",crossDomainId);return}var self=this;var currentTld=getTld(window.location.hostname);for(var i=0;i<this.options.crossDomainIdServers.length;i++){var domain=this.options.crossDomainIdServers[i];if(getTld(domain)===currentTld){var writeKey=this.options.apiKey;var url="https://"+domain+"/v1/saveId?writeKey="+writeKey+"&xid="+crossDomainId;httpGet(url,function(err,res){if(err){self.debug("could not save id on %O, received %O",url,[err,res]);return}localstorage("seg_xid",crossDomainId)});return}}};Segment.prototype.deleteCrossDomainIdIfNeeded=function(){if(!this.options.deleteCrossDomainId){return}if(this.cookie("seg_xid")){this.cookie("seg_xid",null);this.cookie("seg_xid_fd",null);this.cookie("seg_xid_ts",null)}if(localstorage("seg_xid")){localstorage("seg_xid",null)}if(this.analytics.user().traits().crossDomainId){var traits=this.analytics.user().traits();delete traits.crossDomainId;this.analytics.user()._setTraits(traits)}};function getCrossDomainIdFromServerList(domains,writeKey,callback){if(domains.length===0){callback(null,null)}var crossDomainIdFound=false;var finishedRequests=0;var error=null;for(var i=0;i<domains.length;i++){var domain=domains[i];getCrossDomainIdFromSingleServer(domain,writeKey,function(err,res){finishedRequests++;if(err){error=err}else if(res&&res.id&&!crossDomainIdFound){crossDomainIdFound=true;callback(null,res)}if(finishedRequests===domains.length&&!crossDomainIdFound){callback(error,null)}})}}function getCrossDomainIdFromSingleServer(domain,writeKey,callback){var endpoint="https://"+domain+"/v1/id/"+writeKey;getJson(endpoint,function(err,res){if(err){callback(err,null)}else{callback(null,{domain:domain,id:res&&res.id||null})}})}function getJson(url,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.withCredentials=true;xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE){if(xhr.status>=200&&xhr.status<300){callback(null,xhr.responseText?json.parse(xhr.responseText):null)}else{callback(xhr.statusText||"Unknown Error",null)}}};xhr.send()}function httpGet(url,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.withCredentials=true;xhr.onreadystatechange=function(){if(xhr.readyState===XMLHttpRequest.DONE){if(xhr.status>=200&&xhr.status<300){callback(null,xhr.responseText)}else{callback(xhr.statusText||xhr.responseText||"Unknown Error",null)}}};xhr.send()}function getTld(domain){return domain.split(".").splice(-2).join(".")}},{"./ads":874,"./utm":876,"@ndhoule/extend":13,"@ndhoule/keys":16,"@segment/analytics.js-integration":877,"@segment/localstorage-retry":1095,"@segment/protocol":1100,"@segment/send-json":1101,"@segment/top-domain":882,"component-clone":1110,"component-cookie":884,json3:1134,uuid:890,"yields-store":1187}],876:[function(require,module,exports){function utm(query){if(query.lastIndexOf("?",0)===0){query=query.substring(1)}query=query.replace(/\?/g,"&");var split=query.split("&");var acc={};for(var i=0;i<split.length;i++){var k=split[i].split("=")[0];var v=split[i].split("=")[1]||"";if(k.indexOf("utm_")!==-1&&k.length>4){var utmParam=k.substr(4);if(utmParam==="campaign"){utmParam="name"}acc[utmParam]=decodeURIComponent(v.replace(/\+/g," "))}}return acc}module.exports=utm},{}],877:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":878,"./statics":879,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:880,dup:40,"slug-component":1165}],878:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":883,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],879:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:887,dup:42}],880:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":881,_process:1149,dup:43}],881:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:888}],882:[function(require,module,exports){"use strict";var parse=require("component-url").parse;var cookie=require("component-cookie");function domain(url){var cookie=exports.cookie;var levels=exports.levels(url);for(var i=0;i<levels.length;++i){var cname="__tld__";var domain=levels[i];var opts={domain:"."+domain};cookie(cname,1,opts);if(cookie(cname)){cookie(cname,null,opts);return domain}}return""}domain.levels=function(url){var host=parse(url).hostname;var parts=host.split(".");var last=parts[parts.length-1];var levels=[];if(parts.length===4&&last===parseInt(last,10)){return levels}if(parts.length<=1){return levels}for(var i=parts.length-2;i>=0;--i){levels.push(parts.slice(i).join("."))}return levels};domain.cookie=cookie;exports=module.exports=domain},{"component-cookie":884,"component-url":1121}],883:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],884:[function(require,module,exports){var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(null==value)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.secure)str+="; secure";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(""==pairs[0])return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:885}],885:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":886,_process:1149,dup:43}],886:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:888}],887:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],888:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],889:[function(require,module,exports){(function(global){(function(){var rng;var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function whatwgRNG(){crypto.getRandomValues(_rnds8);return _rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;_rnds[i]=r>>>((i&3)<<3)&255}return _rnds}}module.exports=rng}).call(this)}).call(this,typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{}],890:[function(require,module,exports){var _rng=require("./rng");var _byteToHex=[];var _hexToByte={};for(var i=0;i<256;i++){_byteToHex[i]=(i+256).toString(16).substr(1);_hexToByte[_byteToHex[i]]=i}function parse(s,buf,offset){var i=buf&&offset||0,ii=0;buf=buf||[];s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){if(ii<16){buf[i+ii++]=_hexToByte[oct]}});while(ii<16){buf[i+ii++]=0}return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}var _seedBytes=_rng();var _nodeId=[_seedBytes[0]|1,_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]];var _clockseq=(_seedBytes[6]<<8|_seedBytes[7])&16383;var _lastMSecs=0,_lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;var node=options.node||_nodeId;for(var n=0;n<6;n++){b[i+n]=node[n]}return buf?buf:unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options=="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||_rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;ii++){buf[i+ii]=rnds[ii]}}return buf||unparse(rnds)}var uuid=v4;uuid.v1=v1;uuid.v4=v4;uuid.parse=parse;uuid.unparse=unparse;module.exports=uuid},{"./rng":889}],891:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var foldl=require("@ndhoule/foldl");var Sentry=module.exports=integration("Sentry").global("Sentry").option("config","").option("environment",null).option("serverName",null).option("release",null).option("ignoreErrors",[]).option("ignoreUrls",[]).option("whitelistUrls",[]).option("includePaths",[]).option("maxMessageLength",null).option("logger",null).option("customVersionProperty",null).option("debug",false).tag("sentry",'<script src="https://browser.sentry-cdn.com/5.12.1/bundle.min.js" integrity="sha384-y+an4eARFKvjzOivf/Z7JtMJhaN6b+lLQ5oFbBbUwZNNVir39cYtkjW1r6Xjbxg3" crossorigin="anonymous"><\/script>').tag("plugin",'<script src="https://browser.sentry-cdn.com/5.12.1/rewriteframes.min.js" crossorigin="anonymous"><\/script>');Sentry.prototype.initialize=function(){var customRelease=this.options.customVersionProperty?window[this.options.customVersionProperty]:null;var config={dsn:this.options.config,environment:this.options.environment,release:customRelease||this.options.release,serverName:this.options.serverName,whitelistUrls:this.options.whitelistUrls,blacklistUrls:this.options.ignoreUrls,ignoreErrors:this.options.ignoreErrors,integrations:[],debug:this.options.debug};var logger=this.options.logger;var includePaths=[];if(this.options.includePaths.length>0){includePaths=this.options.includePaths.map(function(path){var regex;try{regex=new RegExp(path)}catch(e){}return regex})}var self=this;this.load("sentry",function(){self.load("plugin",function(){if(includePaths.length>0){config.integrations.push(new window.Sentry.Integrations.RewriteFrames({iteratee:function(frame){for(var i=0;i<includePaths.length;i++){try{if(frame.filename.match(includePaths[i])){frame.in_app=true;return frame}}catch(e){}}frame.in_app=false;return frame}}))}window.Sentry.init(reject(config));if(logger){window.Sentry.setTag("logger",logger)}self.ready()})})};Sentry.prototype.loaded=function(){return is.object(window.Sentry)};Sentry.prototype.identify=function(identify){window.Sentry.setUser(identify.traits())};function reject(obj){return foldl(function(result,val,key){var payload=result;if(val!==null&&val!==""&&!is.array(val)){payload[key]=val}if(is.array(val)){var ret=[];for(var x=0;x<val.length;x++){if(val[x]!==null&&val[x]!=="")ret.push(val[x])}if(!is.empty(ret)){payload[key]=ret}}return payload},{},obj)}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":892,is:1131}],892:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":893,"./statics":894,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],893:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":895,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],894:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:896,dup:42}],895:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],896:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],897:[function(require,module,exports){"use strict";var Track=require("segmentio-facade").Track;var each=require("component-each");var integration=require("@segment/analytics.js-integration");var ShareASale=module.exports=integration("ShareASale").option("merchantId","").option("currency","USD").option("createLeads",false).option("useTotalAsAmount",false).tag("orderCompleted",'<img src="https://shareasale.com/sale.cfm?amount={{ orderTotal }}&tracking={{ orderId }}&transtype=sale&merchantID={{ merchantId }}{{ repeat }}&skulist={{ skulist }}&quantitylist={{ quantitylist }}&pricelist={{ pricelist }}&currency={{ currency }}&couponcode={{ couponcode }}">').tag("leadCreated",'<img src="https://shareasale.com/sale.cfm?amount=0.00&tracking={{ userId }}&transtype=lead&merchantID={{ merchantId }}">');ShareASale.prototype.orderCompleted=function(track){var orderId=track.orderId();var isRepeat=track.proxy("properties.repeat");var subtotal=(track.subtotal()||0).toFixed(2);var discount=(track.discount()||0).toFixed(2);var orderTotal=this.options.useTotalAsAmount&&track.total()?track.total().toFixed(2):(subtotal-discount).toFixed(2);var products=track.products();var currency=track.currency()||this.options.currency;var coupon=track.coupon()||"";var skus=[];var quantities=[];var prices=[];if(!orderId){this.debug("must pass `orderId`");return}if(!subtotal){this.debug("must pass `subtotal`, `total`, or `revenue`");return}each(products,function(product){var track=new Track({properties:product});skus.push(track.sku());quantities.push(track.quantity());prices.push(track.price())});var repeat="";if(typeof isRepeat==="boolean"){repeat=isRepeat?"&newcustomer=0":"&newcustomer=1"}this.load("orderCompleted",{orderTotal:orderTotal,orderId:orderId,skulist:skus.join(","),quantitylist:quantities.join(","),pricelist:prices.join(","),currency:currency,couponcode:coupon,repeat:repeat})};ShareASale.prototype.identify=function(identify){var userId=identify.userId();var opts=this.options;if(opts.createLeads){if(!userId){this.debug("must pass `userId`");return}this.load("leadCreated",{userId:userId})}}},{"@segment/analytics.js-integration":898,"component-each":1112,"segmentio-facade":1158}],898:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":899,"./statics":900,"@ndhoule/defaults":8,"component-bind":1109,debug:901,dup:49,extend:904,"slug-component":1165}],899:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],900:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:903,dup:51}],901:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":902,_process:1149,dup:43}],902:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:905}],903:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],904:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],905:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],906:[function(require,module,exports){"use strict";var defaults=require("@ndhoule/defaults");var integration=require("@segment/analytics.js-integration");var SimpleReach=module.exports=integration("SimpleReach").global("__reach_config").global("SPR").option("pid","").tag('<script src="//d8rk54i4mohrb.cloudfront.net/js/reach.js">');SimpleReach.prototype.initialize=function(){window.__reach_config=window.__reach_config||{};defaults(window.__reach_config,{pid:this.options.pid,reach_tracking:false});this.load(this.ready)};SimpleReach.prototype.loaded=function(){return!!window.SPR};SimpleReach.prototype.page=function(page){defaults(window.__reach_config,{url:page.url(),title:page.title()});if(window.__reach_config.url===false){window.__reach_config.url=page.url()}window.SPR.collect(window.__reach_config)};SimpleReach.prototype.track=function(track){window.SPR.collect({pid:this.options.pid,reach_tracking:false,url:track.proxy("context.page.url"),title:track.proxy("context.page.title"),ctx_revenue:track.revenue(),ctx_order_id:track.orderId(),ctx_event_name:track.event()})}},{"@ndhoule/defaults":8,"@segment/analytics.js-integration":907}],907:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":908,"./statics":909,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],908:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":910,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],909:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:911,dup:42}],910:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],911:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],912:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var Simplifi=module.exports=integration("Simpli.fi").option("advertiserId","").option("optInSegment","").option("optOutSegment","").tag("opt-in",'<script src="//i.simpli.fi/dpx.js?cid={{ advertiserId }}&action=100&segment={{ optInSegment }}&m=1"><\/script>').tag("opt-out",'<script src="//i.simpli.fi/dpx.js?cid={{ advertiserId }}&action=101&segment={{ optOutSegment }}&m=1"><\/script>').tag("conversion",'<script src="//i.simpli.fi/dpx.js?cid={{ advertiserId }}&conversion={{ conversionId }}&campaign_id={{ campaignId }}&m=1&tid={{ tid }}&sifi_tuid={{ sifi_tuid }}">').mapping("events");Simplifi.prototype.loaded=function(){return true};Simplifi.prototype.identify=function(identify){if(!identify.userId())return this.debug("id required");this.load("opt-out")};Simplifi.prototype.page=function(){var user=this.analytics.user();if(user.id()){this.load("opt-out")}else{this.load("opt-in")}};Simplifi.prototype.track=function(track){var events=this.events(track.event());var self=this;each(events,function(event){return self.conversion(track,event)})};Simplifi.prototype.conversion=function(track,event){var campaignId=event.campaignId||0;this.load("conversion",{conversionId:event.conversionId,campaignId:campaignId,tid:event.tid,sifi_tuid:event.sifi_tuid})}},{"@segment/analytics.js-integration":913,"component-each":1112}],913:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":914,"./statics":915,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:916,dup:40,"slug-component":1165}],914:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":918,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],915:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:919,dup:42}],916:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":917,_process:1149,dup:43}],917:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:920}],918:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],919:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],920:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],921:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var tick=require("next-tick");var SnapEngage=module.exports=integration("SnapEngage").assumesPageview().global("SnapABug").global("SnapEngage").option("apiKey","").option("listen",false).tag('<script src="//www.snapengage.com/cdn/js/{{ apiKey }}.js">');var integrationContext={name:"snapengage",version:"1.0.0"};SnapEngage.prototype.initialize=function(){var self=this;this.load(function(){if(self.options.listen)self.attachListeners();tick(self.ready)})};SnapEngage.prototype.loaded=function(){return is.object(window.SnapABug)&&is.object(window.SnapEngage)};SnapEngage.prototype.identify=function(identify){var email=identify.email();if(!email)return;window.SnapABug.setUserEmail(email)};SnapEngage.prototype.attachListeners=function(){var self=this;window.SnapEngage.setCallback("StartChat",function(){self.analytics.track("Live Chat Conversation Started",{},{context:{integration:integrationContext}})});window.SnapEngage.setCallback("ChatMessageReceived",function(agent){self.analytics.track("Live Chat Message Received",{agentUsername:agent},{context:{integration:integrationContext}})});window.SnapEngage.setCallback("ChatMessageSent",function(){self.analytics.track("Live Chat Message Sent",{},{context:{integration:integrationContext}})});window.SnapEngage.setCallback("Close",function(){self.analytics.track("Live Chat Conversation Ended",{},{context:{integration:integrationContext}})})}},{"@segment/analytics.js-integration":922,is:1131,"next-tick":1142}],922:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":923,"./statics":924,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],923:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":925,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],924:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:926,dup:42}],925:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],926:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],927:[function(require,module,exports){"use strict";var bind=require("component-bind");var integration=require("@segment/analytics.js-integration");var when=require("do-when");var Spinnakr=module.exports=integration("Spinnakr").assumesPageview().global("_spinnakr_site_id").global("_spinnakr").option("siteId","").tag('<script src="//d3ojzyhbolvoi5.cloudfront.net/js/so.js">');Spinnakr.prototype.initialize=function(){window._spinnakr_site_id=this.options.siteId;var loaded=bind(this,this.loaded);var ready=this.ready;this.load(function(){when(loaded,ready)})};Spinnakr.prototype.loaded=function(){return!!window._spinnakr}},{"@segment/analytics.js-integration":928,"component-bind":1109,"do-when":1125}],928:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":929,"./statics":930,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],929:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":931,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],930:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:932,dup:42}],931:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],932:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],933:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Track=require("segmentio-facade").Track;var foldl=require("@ndhoule/foldl");var each=require("component-each");var Steelhouse=module.exports=integration("Steelhouse").option("advertiserId","").mapping("events").tag("page",'<script src="//dx.steelhousemedia.com/spx?dxver=4.0.0&shaid={{ advertiserId }}&tdr={{ referrer }}&plh={{ location }}&cb={{ cacheBuster }}">').tag("conversion",'<script src="//dx.steelhousemedia.com/spx?conv=1&shaid={{ advertiserId }}&tdr={{ referrer }}&plh={{ location }}&cb={{ cacheBuster }}&shoid={{ orderId }}&shoamt={{ total }}&shocur={{ currency }}&shopid={{ productIds }}&shoq={{ quantities }}&shoup={{ prices }}&shpil=">');Steelhouse.prototype.page=function(page){var referrer=page.referrer()||"";var href=page.url()||"";this.load("page",{referrer:safeEncode(referrer.substring(0,2048)),location:safeEncode(href.substring(0,2048)),advertiserId:this.options.advertiserId,cacheBuster:this.cacheBuster()})};Steelhouse.prototype.track=function(track){var referrer=track.proxy("context.page.referrer")||"";var href=track.proxy("context.page.url")||"";var productInfo=foldl(function(info,product){product=new Track({properties:product});info.skus.push(product.sku());info.quantities.push(product.quantity());info.prices.push(product.price());return info},{skus:[],quantities:[],prices:[]},track.products());var advertiserId=this.options.advertiserId;var events=this.events(track.event());var self=this;each(events,function(){self.load("conversion",{referrer:safeEncode(referrer.substring(0,512)),location:safeEncode(href.substring(0,512)),quantities:productInfo.quantities.join(","),productIds:productInfo.skus.join(","),prices:productInfo.prices.join(","),currency:track.currency()||"",orderId:track.orderId()||"",total:track.total()||"",advertiserId:advertiserId,cacheBuster:self.cacheBuster()})})};Steelhouse.prototype.cacheBuster=function(){return Math.round(Math.random()*99999999)};function safeEncode(string){try{return encodeURIComponent(string)}catch(e){return""}}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":934,"component-each":1112,"segmentio-facade":1158}],934:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":935,"./statics":936,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:937,dup:40,"slug-component":1165}],935:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":939,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],936:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:940,dup:42}],937:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":938,_process:1149,dup:43}],938:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:941}],939:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],940:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],941:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],942:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var when=require("do-when");var StripeRadar=module.exports=integration("Stripe Radar").option("apiKey","").tag('<script src="https://js.stripe.com/v2/">');StripeRadar.prototype.initialize=function(){var self=this;if(window.Stripe&&window.Stripe.setPublishableKey){window.Stripe.setPublishableKey(this.options.apiKey);this.ready()}else{this.load(function(){when(self.loaded,function(){window.Stripe.setPublishableKey(self.options.apiKey);self.ready()})})}};StripeRadar.prototype.loaded=function(){return window.Stripe&&window.Stripe.setPublishableKey}},{"@segment/analytics.js-integration":943,"do-when":1125}],943:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":944,"./statics":945,"@ndhoule/defaults":8,"component-bind":1109,debug:946,dup:49,extend:949,"slug-component":1165}],944:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],945:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:948,dup:51}],946:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":947,_process:1149,dup:43}],947:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:950}],948:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],949:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],950:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],951:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var SupportHero=module.exports=integration("SupportHero").assumesPageview().global("supportHeroWidget").option("token","").option("track",false).tag('<script src="https://d29l98y0pmei9d.cloudfront.net/js/widget.min.js?k={{ token }}">');SupportHero.prototype.initialize=function(){window.supportHeroWidget={};window.supportHeroWidget.setUserId=window.supportHeroWidget.setUserId||function(){};window.supportHeroWidget.setUserTraits=window.supportHeroWidget.setUserTraits||function(){};this.load(this.ready)};SupportHero.prototype.loaded=function(){return!!window.supportHeroWidget};SupportHero.prototype.identify=function(identify){var id=identify.userId();var traits=identify.traits();if(id){window.supportHeroWidget.setUserId(id)}if(traits){window.supportHeroWidget.setUserTraits(traits)}}},{"@segment/analytics.js-integration":952}],952:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":953,"./statics":954,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],953:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":955,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],954:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:956,dup:42}],955:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],956:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],957:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var TagInjector=module.exports=integration("Tag Injector").option("tags",[]);TagInjector.prototype.initialize=function(){var documentHead=document.getElementsByTagName("head")[0];if(documentHead!==undefined){for(var i=0;i<this.options.tags.length;i++){var tag=this.options.tags[i];documentHead.appendChild(createElementFromTag(tag))}}this.hasLoaded=true;this.ready()};TagInjector.prototype.loaded=function(){return this.hasLoaded===true};function createElementFromTag(tag){var element=document.createElement("script");element.setAttribute("data-injected-by","segment");if(tag.tagKind==="url"){element.src=tag.tagValue}else if(tag.tagKind==="variable"){var scriptBody=mergeVariableTagBody(tag);element.appendChild(document.createTextNode(scriptBody))}return element}function mergeVariableTagBody(tag){var target=tag.variableName;var source=tag.tagValue;return["window."+target+" = "+"window."+target+" || {}","(function merge (target, source) {","  for (var property in source) {",'    if (typeof source[property] === "object") {',"      target[property] = target[property] || source[property];","      merge(target[property], source[property]);","    } else {","      target[property] = source[property];","    }","  }","})(window."+target+" || {},"+source+")"].join(";\n")}},{"@segment/analytics.js-integration":958}],958:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":959,"./statics":960,"@ndhoule/defaults":8,"component-bind":1109,debug:961,dup:49,extend:964,"slug-component":1165}],959:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],960:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:963,dup:51}],961:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":962,_process:1149,dup:43}],962:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:965}],963:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],964:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],965:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],966:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var is=require("is");var keys=require("@ndhoule/keys");var push=require("global-queue")("_tlq");var Taplytics=module.exports=integration("Taplytics").global("_tlq").global("Taplytics").option("apiKey","").option("options",{}).tag('<script id="taplytics" src="//cdn.taplytics.com/taplytics.min.js">').assumesPageview();Taplytics.prototype.initialize=function(){var options=this.options.options;var apiKey=this.options.apiKey;window._tlq=window._tlq||[];push("init",apiKey,options);this.load(this.ready)};Taplytics.prototype.loaded=function(){return window.Taplytics&&is.object(window.Taplytics._in)};Taplytics.prototype.identify=function(identify){var userId=identify.userId();var attrs=identify.traits()||{};if(userId)attrs.id=userId;if(keys(attrs).length){push("identify",attrs)}};Taplytics.prototype.group=function(group){var attrs={};var groupId=group.groupId();var traits=group.traits();var user=this.analytics.user();var userId=user.id();if(groupId)attrs.groupId=groupId;if(traits)attrs.groupTraits=traits;if(userId)attrs.id=userId;if(keys(attrs).length)push("identify",attrs)};Taplytics.prototype.track=function(track){var properties=track.properties()||{};var total=track.revenue()||track.total()||0;push("track",track.event(),total,properties)};Taplytics.prototype.page=function(page){var category=page.category()||undefined;var name=page.fullName()||undefined;var properties=page.properties()||{};push("page",category,name,properties)};Taplytics.prototype.reset=function(){push("reset")}},{"@ndhoule/keys":16,"@segment/analytics.js-integration":967,"global-queue":1127,is:1131}],967:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":968,"./statics":969,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],968:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":970,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],969:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:971,dup:42}],970:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],971:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],972:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_tsq");var slug=require("slug-component");var Tapstream=module.exports=integration("Tapstream").assumesPageview().global("_tsq").option("accountName","").option("trackAllPages",true).option("trackNamedPages",true).option("trackCategorizedPages",true).tag('<script src="//cdn.tapstream.com/static/js/tapstream.js">');Tapstream.prototype.initialize=function(){window._tsq=window._tsq||[];push("setAccountName",this.options.accountName);this.load(this.ready)};Tapstream.prototype.loaded=function(){return!!(window._tsq&&window._tsq.push!==Array.prototype.push)};Tapstream.prototype.page=function(page){var category=page.category();var opts=this.options;var name=page.fullName();if(opts.trackAllPages){this.track(page.track())}if(name&&opts.trackNamedPages){this.track(page.track(name))}if(category&&opts.trackCategorizedPages){this.track(page.track(category))}};Tapstream.prototype.track=function(track){var props=track.properties();push("fireHit",slug(track.event()),[props.url])}},{"@segment/analytics.js-integration":973,"global-queue":1127,"slug-component":1165}],973:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":974,"./statics":975,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],974:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":976,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],975:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:977,dup:42}],976:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],977:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],978:[function(require,module,exports){"use strict";var Page=require("segmentio-facade").Page;var convert=require("@segment/convert-dates");var extend=require("@ndhoule/extend");var integration=require("@segment/analytics.js-integration");var iso=require("@segment/to-iso-string");var Totango=module.exports=integration("Totango").assumesPageview().global("totango").global("totango_options").global("__totango3").option("disableHeartbeat",false).option("serviceId",null).option("trackNamedPages",true).option("trackCategorizedPages",true).tag('<script src="//tracker.totango.com/totango4.0.3.js">');Totango.prototype.initialize=function(page){page=page||new Page({});window.totango={go:function(){return-1},setAccountAttributes:function(){},identify:function(){},track:function(t,o,n,a){window.totango_tmp_stack.push({activity:t,module:o,org:n,user:a});return-1}};window.totango_options={allow_empty_accounts:false,service_id:this.options.serviceId,disable_heartbeat:this.options.disableHeartbeat,module:page.category()};this.load(this.ready)};Totango.prototype.loaded=function(){return!!window.__totango3};Totango.prototype.page=function(page){var user=this.analytics.user();var group=this.analytics.group();var opts=this.options;var category=page.category();var name=page.fullName();if(category&&opts.trackCategorizedPages)this.track(page.track(category));if(name&&opts.trackNamedPages)this.track(page.track(name));this._category=category;if(!user.id()||!group.id())return this.debug("must identify and group first");if(!category)return this.debug("category required");this.go({module:category})};Totango.prototype.identify=function(identify){if(!identify.userId())return this.debug("id required");var traits=identify.traits({created:"Create Date"});this.go({user:convert(traits,iso),username:traits.id})};Totango.prototype.group=function(group){if(!group.groupId())return this.debug("id required");var traits=group.traits({created:"Create Date"});var options={account:convert(traits,iso)};var totangoOptions=group.integrations().Totango;if(totangoOptions){if(totangoOptions.parent){options.account.parent=convert(totangoOptions.parent,iso)}if(totangoOptions.product){options.product=convert(totangoOptions.product,iso)}if(totangoOptions.hasOwnProperty("enableHierarchy")){options.enableHierarchy=totangoOptions.enableHierarchy}}this.go(options)};Totango.prototype.track=function(track){var props=track.properties();window.totango.track(track.event(),props.category||this._category)};Totango.prototype.go=function(options){var defs={allow_empty_accounts:false,service_id:this.options.serviceId,disable_heartbeat:this.options.disableHeartbeat};options=options||{};options=extend({},defs,options);window.totango.go(options)}},{"@ndhoule/extend":13,"@segment/analytics.js-integration":979,"@segment/convert-dates":1087,"@segment/to-iso-string":1103,"segmentio-facade":1158}],979:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":980,"./statics":981,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:982,dup:40,"slug-component":1165}],980:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":984,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],981:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:985,dup:42}],982:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":983,_process:1149,dup:43}],983:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:986}],984:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],985:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],986:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],987:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var TvSquared=module.exports=integration("TV Squared").global("JSON2").global("_tvq").option("brandId","").option("hostname","").option("clientId",0).option("customMetrics",[]).option("trackWhitelist",[]).tag('<script src="{{ tvSquaredUrl }}/tv2track.js">');TvSquared.prototype.initialize=function(){window._tvq=window._tvq||[];var url=useHttps()?"https://":"http://";if(this.options.clientId){url+="collector-"+this.options.clientId+".tvsquared.com"}else{url+=this.options.hostname}window._tvq.push(["setSiteId",this.options.brandId]);window._tvq.push(["setTrackerUrl",url+"/tv2track.php"]);this.load({tvSquaredUrl:url},this.ready)};TvSquared.prototype.loaded=function(){return!!window._tvq};TvSquared.prototype.page=function(){window._tvq.push(["trackPageView"])};TvSquared.prototype.track=function(track){var event=track.event();var whitelist=this.options.trackWhitelist.slice();for(var i=0;i<whitelist.length;i++){if(whitelist[i]===""){whitelist.splice(i,1)}}for(i=0;i<whitelist.length;i++){if(event.toUpperCase()===whitelist[i].toUpperCase())break;if(i===whitelist.length-1)return}var session={user:track.userId()||track.anonymousId()||""};var action={rev:track.revenue()||"",prod:track.proxy("properties.productType")||"",id:track.orderId()||"",promo:track.proxy("properties.promo")||""};var cmArr=this.options.customMetrics.slice();for(i=0;i<cmArr.length;i++){if(cmArr[i]===""){cmArr.splice(i,1)}}if(cmArr.length){for(var j=0;j<cmArr.length;j++){var key=cmArr[j];var value=track.proxy("properties."+key);if(value){action[key]=value}}}window._tvq.push([function(){this.setCustomVariable(5,"session",JSON.stringify(session),"visit")}]);window._tvq.push([function(){this.setCustomVariable(5,event,JSON.stringify(action),"page")}]);window._tvq.push(["trackPageView"])}},{"@segment/analytics.js-integration":988,"use-https":1180}],988:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":989,"./statics":990,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:991,dup:40,"slug-component":1165}],989:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":993,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],990:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:994,dup:42}],991:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":992,_process:1149,dup:43}],992:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:995}],993:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],994:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],995:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],996:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var defaults=require("@ndhoule/defaults");var foldl=require("@ndhoule/foldl");var each=require("component-each");var get=require("obj-case");var Track=require("segmentio-facade").Track;var extend=require("@ndhoule/extend");var TwitterAds=module.exports=integration("Twitter Ads").option("page","").option("universalTagPixelId","").option("identifier","productId").tag("singleTag",'<img src="//analytics.twitter.com/i/adsct?txn_id={{ pixelId }}&p_id=Twitter&tw_sale_amount={{ revenue }}&tw_order_quantity={{ quantity }}"/>').tag("universalTag",'<script src="//static.ads-twitter.com/uwt.js">').mapping("events");TwitterAds.prototype.initialize=function(){var self=this;if(this.options.universalTagPixelId){(function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments)},s.version="1.1",s.queue=[])})(window,document,"script");this.load("universalTag",function(){window.twq("init",self.options.universalTagPixelId);self.ready()})}else{this.ready()}};TwitterAds.prototype.page=function(page){if(this.options.universalTagPixelId){window.twq("track","PageView")}if(this.options.page){this.load("singleTag",{pixelId:this.options.page,revenue:0,quantity:0})}};TwitterAds.prototype.track=function(track){this.fireLegacyConversionTags(track)};TwitterAds.prototype.productsSearched=function(track){this.fireLegacyConversionTags(track);if(this.options.universalTagPixelId){var payload=setStatus(track.properties());window.twq("track","Search",payload)}};TwitterAds.prototype.productViewed=function(product){this.fireLegacyConversionTags(product);if(this.options.universalTagPixelId){var props=product.properties();var identifier=this.options.identifier;var payload={content_ids:[product[identifier]()],content_type:"product",content_name:product.name(),content_category:product.category()};payload=extend(payload,setStatus(props));window.twq("track","ViewContent",payload)}};TwitterAds.prototype.productAdded=function(product){this.fireLegacyConversionTags(product);if(this.options.universalTagPixelId){var props=product.properties();var identifier=this.options.identifier;var payload={content_ids:[product[identifier]()],content_type:"product",content_name:product.name()};payload=extend(payload,setStatus(props));window.twq("track","AddToCart",payload)}};TwitterAds.prototype.orderCompleted=function(track){var identifier=this.options.identifier;var sumOfQuantities=foldl(function(cartQuantity,product){return cartQuantity+(get(product,"quantity")||0)},0,track.products());this.fireLegacyConversionTags(track,{quantity:sumOfQuantities});if(this.options.universalTagPixelId){var payload={currency:track.currency(),content_type:"product",order_id:track.orderId(),num_items:sumOfQuantities.toString()};if(track.revenue())payload.value=track.revenue().toFixed(2);payload=extend(payload,setStatus(track.properties()));var content=foldl(function(ret,item){var product=new Track({properties:item});var contentId=product[identifier]();ret.ids.push(contentId);ret.names.push(product.name());return ret},{ids:[],names:[]},track.products());payload.content_ids=content.ids.sort();payload.content_name=content.names.sort().join(", ");window.twq("track","Purchase",payload)}};TwitterAds.prototype.productAddedToWishlist=function(product){this.fireLegacyConversionTags(product);if(this.options.universalTagPixelId){var props=product.properties();var identifier=this.options.identifier;var payload={content_name:product.name(),content_category:product.category(),content_ids:[product[identifier]()]};payload=extend(payload,setStatus(props));window.twq("track","AddToWishlist",payload)}};TwitterAds.prototype.checkoutStarted=function(track){var sumOfQuantities=foldl(function(cartQuantity,product){return cartQuantity+(get(product,"quantity")||0)},0,track.products());this.fireLegacyConversionTags(track,{quantity:sumOfQuantities});if(this.options.universalTagPixelId){var identifier=this.options.identifier;var content=foldl(function(ret,item){var product=new Track({properties:item});var contentId=product[identifier]();ret.ids.push(contentId);ret.names.push(product.name());ret.categories.push(product.category());return ret},{ids:[],names:[],categories:[]},track.products());var payload={content_ids:content.ids.sort(),content_name:content.names.sort().join(", "),content_category:content.categories.join(", ")};payload=extend(payload,setStatus(track.properties()));window.twq("track","InitiateCheckout",payload)}};TwitterAds.prototype.paymentInfoEntered=function(track){this.fireLegacyConversionTags(track);var payload=extend({},setStatus(track.properties()));if(this.options.universalTagPixelId)window.twq("track","AddPaymentInfo",payload)};TwitterAds.prototype.fireLegacyConversionTags=function(track,override){var events=this.events(track.event());var self=this;each(events,function(pixelId){var tagParams={pixelId:pixelId,quantity:track.proxy("properties.quantity")||0,revenue:track.revenue()||0};if(override)tagParams=defaults(override,tagParams);self.load("singleTag",tagParams)})};function setStatus(properties){return properties.status?{status:properties.status}:{}}},{"@ndhoule/defaults":8,"@ndhoule/extend":13,"@ndhoule/foldl":14,"@segment/analytics.js-integration":997,"component-each":1112,"obj-case":1143,"segmentio-facade":1158}],997:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":998,"./statics":999,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:1001,"slug-component":1165}],998:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],999:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1e3,dup:51}],1e3:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1001:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],1002:[function(require,module,exports){"use strict";var Identify=require("segmentio-facade").Identify;var clone=require("component-clone");var integration=require("@segment/analytics.js-integration");var Userlike=module.exports=integration("Userlike").assumesPageview().global("userlikeConfig").global("userlikeData").option("secretKey","").option("listen",false).tag('<script src="//userlike-cdn-widgets.s3-eu-west-1.amazonaws.com/{{ secretKey }}.js">');var integrationContext={name:"userlike",version:"1.0.0"};Userlike.prototype.initialize=function(){var self=this;var segmentBaseInfo=clone(this.options);var user=this.analytics.user();var identify=new Identify({userId:user.id(),traits:user.traits()});segmentBaseInfo.visitor={name:identify.name(),email:identify.email()};if(!window.userlikeData)window.userlikeData={custom:{}};window.userlikeData.custom.segmentio=segmentBaseInfo;this.load(function(){if(self.options.listen)self.attachListeners();self.ready()})};Userlike.prototype.loaded=function(){return!!(window.userlikeConfig&&window.userlikeData)};Userlike.prototype.attachListeners=function(){var self=this;window.userlikeTrackingEvent=function(eventName,globalCtx,sessionCtx){if(eventName==="chat_started"){self.analytics.track("Live Chat Conversation Started",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}if(eventName==="message_operator_terminating"){self.analytics.track("Live Chat Message Sent",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}if(eventName==="message_client_terminating"){self.analytics.track("Live Chat Message Received",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}if(eventName==="chat_quit"){self.analytics.track("Live Chat Conversation Ended",{agentId:sessionCtx.operator_id,agentName:sessionCtx.operator_name},{context:{integration:integrationContext}})}}}},{"@segment/analytics.js-integration":1003,"component-clone":1110,"segmentio-facade":1158}],1003:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1004,"./statics":1005,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],1004:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1006,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1005:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1007,dup:42}],1006:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1007:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1008:[function(require,module,exports){"use strict";var alias=require("@segment/alias");var convertDates=require("@segment/convert-dates");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("UserVoice");var unix=require("to-unix-timestamp");var UserVoice=module.exports=integration("UserVoice").assumesPageview().global("UserVoice").global("showClassicWidget").option("apiKey","").option("classic",false).option("forumId",null).option("showWidget",true).option("mode","contact").option("accentColor","#448dd6").option("screenshotEnabled",true).option("smartvote",true).option("trigger",null).option("triggerPosition","bottom-right").option("triggerColor","#ffffff").option("triggerBackgroundColor","rgba(46, 49, 51, 0.6)").option("classicMode","full").option("primaryColor","#cc6d00").option("linkColor","#007dbf").option("defaultMode","support").option("tabLabel","Feedback & Support").option("tabColor","#cc6d00").option("tabPosition","middle-right").option("tabInverted",false).option("customTicketFields",{}).tag('<script src="//widget.uservoice.com/{{ apiKey }}.js">');UserVoice.on("construct",function(integration){if(!integration.options.classic)return;integration.group=undefined;integration.identify=integration.identifyClassic;integration.initialize=integration.initializeClassic});UserVoice.prototype.initialize=function(){var options=this.options;var opts=formatOptions(options);push("set",opts);push("autoprompt",{});if(options.showWidget){if(options.trigger){push("addTrigger",options.trigger,opts)}else{push("addTrigger",opts)}}this.load(this.ready)};UserVoice.prototype.loaded=function(){return!!(window.UserVoice&&window.UserVoice.push!==Array.prototype.push)};UserVoice.prototype.identify=function(identify){var traits=identify.traits({created:"created_at"});traits=convertDates(traits,unix);push("identify",traits)};UserVoice.prototype.group=function(group){var traits=group.traits({created:"created_at"});traits=convertDates(traits,unix);push("identify",{account:traits})};UserVoice.prototype.initializeClassic=function(){var options=this.options;window.showClassicWidget=showClassicWidget;if(options.showWidget)showClassicWidget("showTab",formatClassicOptions(options));this.load(this.ready)};UserVoice.prototype.identifyClassic=function(identify){push("setCustomFields",identify.traits())};function formatOptions(options){return alias(options,{forumId:"forum_id",accentColor:"accent_color",smartvote:"smartvote_enabled",triggerColor:"trigger_color",triggerBackgroundColor:"trigger_background_color",triggerPosition:"trigger_position",screenshotEnabled:"screenshot_enabled",customTicketFields:"ticket_custom_fields"})}function formatClassicOptions(options){return alias(options,{forumId:"forum_id",classicMode:"mode",primaryColor:"primary_color",tabPosition:"tab_position",tabColor:"tab_color",linkColor:"link_color",defaultMode:"default_mode",tabLabel:"tab_label",tabInverted:"tab_inverted"})}function showClassicWidget(type,options){var t=type||"showLightbox";push(t,"classic_widget",options)}},{"@segment/alias":21,"@segment/analytics.js-integration":1009,"@segment/convert-dates":1087,"global-queue":1127,"to-unix-timestamp":1175}],1009:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1010,"./statics":1011,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],1010:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1012,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1011:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1013,dup:42}],1012:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1013:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1014:[function(require,module,exports){"use strict";var cookie=require("component-cookie");var integration=require("@segment/analytics.js-integration");var push=require("global-queue")("_veroq");var Vero=module.exports=integration("Vero").global("_veroq").option("apiKey","").tag('<script src="//d3qxef4rp70elm.cloudfront.net/m.js">');Vero.prototype.initialize=function(){if(!cookie("__veroc4"))cookie("__veroc4","[]");push("init",{api_key:this.options.apiKey});this.load(this.ready)};Vero.prototype.loaded=function(){return!!(window._veroq&&window._veroq.push!==Array.prototype.push)};Vero.prototype.page=function(page){push("trackPageview");var tags=page.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.identify=function(identify){var traits=identify.traits();var email=identify.email();var id=identify.userId();if(!id&&!email)return;push("user",traits);var tags=identify.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.track=function(track){var regex=/[uU]nsubscribe/;if(track.event().match(regex)){push("unsubscribe",{id:track.properties().id})}else{push("track",track.event(),track.properties(),{source:"segment"})}var tags=track.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.orderCompleted=function(track){var products=track.properties().products;if(products&&Array.isArray(products)){for(var x=0;x<products.length;x++){push("track","Ordered Product",products[x],{source:"segment"})}}push("track",track.event(),track.properties(),{source:"segment"});var tags=track.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.alias=function(alias){var to=alias.to();if(alias.from()){push("reidentify",to,alias.from())}else{push("reidentify",to)}var tags=alias.options("Vero").tags;if(tags)this.addOrRemoveTags(tags)};Vero.prototype.addOrRemoveTags=function(tags){var payload={};if(!tags.action||!tags.values)return;var action=tags.action;payload[action]=tags.values;if(tags.id){payload.id=tags.id}push("tags",payload)}},{"@segment/analytics.js-integration":1015,"component-cookie":1111,"global-queue":1127}],1015:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1016,"./statics":1017,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],1016:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1018,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1017:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1019,dup:42}],1018:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1019:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1020:[function(require,module,exports){var each=require("component-each");var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var allowedExperimentTypes=["VISUAL_AB","VISUAL","SPLIT_URL","SURVEY"];var VWO=module.exports=integration("Visual Website Optimizer").global("_vis_opt_queue").global("_vis_opt_revenue_conversion").global("_vwo_exp").global("_vwo_exp_ids").global("VWO").option("accountId").option("useAsyncSmartCode",false).option("settingsTolerance",2e3).option("libraryTolerance",2500).option("useExistingJQuery",false).option("replay",true).option("listen",false).option("experimentNonInteraction",false).option("isSpa",false).option("trackOnlyAbExperiments",false);var integrationContext={name:"visual-website-optimizer",version:"1.0.0"};VWO.prototype.initialize=function(){if(this.options.useAsyncSmartCode){var account_id=this.options.accountId;var settings_tolerance=this.options.settingsTolerance;var library_tolerance=this.options.libraryTolerance;var use_existing_jquery=this.options.useExistingJQuery;var isSPA=this.options.isSpa;window._vwo_code=function(){f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery},library_tolerance:function(){return library_tolerance},finish:function(){if(!f){f=true;var a=d.getElementById("_vis_opt_path_hides");if(a)a.parentNode.removeChild(a)}},finished:function(){return f},load:function(a){var b=d.createElement("script");b.src=a;b.type="text/javascript";b.innerText;b.onerror=function(){_vwo_code.finish()};d.getElementsByTagName("head")[0].appendChild(b)},init:function(){settings_timer=setTimeout("_vwo_code.finish()",settings_tolerance);var a=d.createElement("style"),b="body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}",h=d.getElementsByTagName("head")[0];a.setAttribute("id","_vis_opt_path_hides");a.setAttribute("type","text/css");if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load("//dev.visualwebsiteoptimizer.com/j.php?a="+account_id+"&u="+encodeURIComponent(d.URL)+"&r="+Math.random()+"&f="+ +isSPA);return settings_timer}}}();_vwo_settings_timer=_vwo_code.init()}var self=this;if(this.options.replay){tick(function(){self.replay()})}if(this.options.listen){tick(function(){self.roots()})}if(this.options.useAsyncSmartCode){enqueue(function(){self.ready()})}else{self.ready()}};VWO.prototype.orderCompleted=function(track){var total=track.total()||track.revenue()||0;enqueue(function(){window._vis_opt_revenue_conversion(total)})};VWO.prototype.replay=function(){var analytics=this.analytics;experiments(function(err,traits){if(traits)analytics.identify(traits)})};VWO.prototype.roots=function(){var analytics=this.analytics;var self=this;var identifyCalled=false;var experimentsTracked={};rootExperiments(function(err,data){each(data,function(experimentId,variationName){var uuid=window.VWO.data.vin.uuid;var props={experimentId:experimentId,variationName:variationName,vwoUserId:uuid};if(self.options.experimentNonInteraction)props.nonInteraction=1;if(identifyCalled===false){analytics.identify({vwoUserId:uuid});identifyCalled=true}if(!experimentsTracked[experimentId]){analytics.track("Experiment Viewed",props,{context:{integration:integrationContext}});experimentsTracked[experimentId]=true}})},this.options.trackOnlyAbExperiments)};function rootExperiments(fn,trackOnlyAbExperiments){enqueue(function(){var data={};var experimentIds=window._vwo_exp_ids;if(!experimentIds)return fn();each(experimentIds,function(experimentId){var variationName=variation(experimentId,trackOnlyAbExperiments);if(variationName)data[experimentId]=variationName});fn(null,data)})}function experiments(fn){enqueue(function(){var data={};var ids=window._vwo_exp_ids;if(!ids)return fn();each(ids,function(id){var name=variation(id);if(name)data["Experiment: "+id]=name});fn(null,data)})}function enqueue(fn){window._vis_opt_queue=window._vis_opt_queue||[];window._vis_opt_queue.push(fn)}function isValidExperimentType(experiment){if(!experiment||!experiment.type){return false}return allowedExperimentTypes.indexOf(experiment.type.toUpperCase())!==-1}function variation(id,trackOnlyAbExperiments){var experiments=window._vwo_exp;if(!experiments)return null;var experiment=experiments[id];if(!experiment||!Object.keys(experiment).length){return null}if(trackOnlyAbExperiments&&!isValidExperimentType(experiment,trackOnlyAbExperiments)){return null}var variationId=experiment.combination_chosen;if(experiment.ready&&!window._vis_debug&&variationId){return experiment.comb_n[variationId]}return null}},{"@segment/analytics.js-integration":1021,"component-each":1112,"next-tick":1142}],1021:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":1022,"./statics":1023,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:1025,"slug-component":1165}],1022:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1023:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1024,dup:51}],1024:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1025:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],1026:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var useHttps=require("use-https");var remove=require("obj-case").del;var WebEngage=module.exports=integration("WebEngage").readyOnInitialize().global("webengage").option("licenseCode","").tag("http",'<script src="http://cdn.widgets.webengage.com/js/webengage-min-v-6.0.js">').tag("https",'<script src="https://ssl.widgets.webengage.com/js/webengage-min-v-6.0.js">');WebEngage.prototype.initialize=function(){!function(e,t,n){function o(e,t){e[t[t.length-1]]=function(){r.__queue.push([t.join("."),arguments])}}var i,s,r=e[n],g=" ",l="init options track screen onReady".split(g),a="feedback survey notification".split(g),c="options render clear abort".split(g),p="Open Close Submit Complete View Click".split(g),u="identify login logout setAttribute".split(g);if(!r||!r.__v){for(e[n]=r={__queue:[],__v:"6.0",user:{}},i=0;i<l.length;i++)o(r,[l[i]]);for(i=0;i<a.length;i++){for(r[a[i]]={},s=0;s<c.length;s++)o(r[a[i]],[a[i],c[s]]);for(s=0;s<p.length;s++)o(r[a[i]],[a[i],"on"+p[s]])}for(i=0;i<u.length;i++)o(r.user,["user",u[i]])}}(window,document,"webengage");window.webengage.ixP="Segment";window.webengage.init(this.options.licenseCode);var name=useHttps()?"https":"http";this.load(name,this.ready)};WebEngage.prototype.loaded=function(){return!!window.webengage};WebEngage.prototype.identify=function(identify){var traits=identify.traits();var id=identify.userId();var mappedTraits=mapTraits(traits);if(identify.firstName())mappedTraits.we_first_name=identify.firstName();if(identify.lastName())mappedTraits.we_last_name=identify.lastName();remove(mappedTraits,"name");remove(mappedTraits,"firstName");remove(mappedTraits,"lastName");if(id)window.webengage.user.login(id);if(traits)window.webengage.user.setAttribute(mappedTraits)};WebEngage.prototype.track=function(track){var event=track.event();var properties=track.properties();window.webengage.track(event,properties)};WebEngage.prototype.page=function(page){var name=page.name()||"";var properties=page.properties();window.webengage.screen(name,properties)};function mapTraits(traits){var aliases={email:"we_email",gender:"we_gender",birthday:"we_birth_date",phone:"we_phone",company:"we_company"};var mapped={};for(var k in traits){if(aliases.hasOwnProperty(k)){mapped[aliases[k]]=traits[k]}else{mapped[k]=traits[k]}}if(Object.prototype.toString.call(mapped.we_birth_date)==="[object Date]"){var date=mapped.we_birth_date;mapped.we_birth_date=date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())}return mapped}function pad(number){return number<10?"0"+number:number}},{"@segment/analytics.js-integration":1027,"obj-case":1143,"use-https":1180}],1027:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1028,"./statics":1029,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],1028:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1030,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1029:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1031,dup:42}],1030:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1031:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1032:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var reject=require("reject");var when=require("do-when");var Wigzo=module.exports=integration("Wigzo").global("wigzo").option("orgToken","").tag("tracker",'<script src="https://app.wigzo.com/wigzo.compressed.js">');Wigzo.prototype.initialize=function(){var orgToken=this.options.orgToken;var self=this;window.WigzoObject="wigzo";window.wigzo=window.wigzo||function(){window.wigzo.q=window.wigzo.q||[];window.wigzo.q.push(arguments)};window.wigzo.l=(new Date).getTime();window.wigzo.integrationSource="Segment";window.wigzo("configure",orgToken);this.load("tracker",function(){when(self.loaded,self.ready)})};Wigzo.prototype.loaded=function(){return!!window.wigzo};Wigzo.prototype.productAdded=function(track){var productId=track.productId();if(productId)window.wigzo.track("addtocart",productId)};Wigzo.prototype.productAddedFromWishlistToCart=function(track){var productId=track.productId();if(productId)window.wigzo.track("addtocart",productId)};Wigzo.prototype.productRemoved=function(track){var productId=track.productId();if(productId)window.wigzo.track("removedfromcart",productId)};Wigzo.prototype.productsSearched=function(track){var props=track.properties();if(props.query){window.wigzo.track("search",props.query)}};Wigzo.prototype.productAddedToWishlist=function(track){var productId=track.productId();if(productId)window.wigzo.track("wishlist",productId)};Wigzo.prototype.checkoutStarted=function(track){var productList=track.products();var addedProductIds=[];for(var i=0;i<productList.length;i++){var item=productList[i];addedProductIds.push(item.product_id||item.productId)}if(addedProductIds.length)window.wigzo.track("checkoutstarted",addedProductIds)};Wigzo.prototype.orderCompleted=function(track){var productList=track.products();var addedProductIds=[];for(var i=0;i<productList.length;i++){var item=productList[i];addedProductIds.push(item.product_id||item.productId)}if(addedProductIds.length)window.wigzo.track("buy",addedProductIds)};Wigzo.prototype.productReviewed=function(track){window.wigzo.track("review",track.properties())};Wigzo.prototype.productClicked=function(track){var options=track.options(this.name);var traits=reject({productId:track.productId(),title:track.name(),price:track.currency()+" "+track.price(),category:track.category(),canonicalUrl:track.proxy("context.page.url"),image:options.imageUrl,description:options.description,language:options.language});window.wigzo.index(traits)};Wigzo.prototype.productViewed=function(track){var options=track.options(this.name);var traits=reject({productId:track.productId(),title:track.name(),price:track.currency()+" "+track.price(),category:track.category(),canonicalUrl:track.proxy("context.page.url"),image:options.imageUrl,description:options.description,language:options.language});window.wigzo.index(traits)};Wigzo.prototype.identify=function(identify){var id=identify.userId();if(id)window.wigzo.USER_IDENTIFIER=id;var traits=reject({email:identify.email(),phone:identify.phone(),fullName:identify.name()});window.wigzo.identify(traits)};Wigzo.prototype.track=function(track){window.wigzo.track(track.event(),track.properties())};Wigzo.prototype.page=function(page){var pageData=reject({canonicalUrl:page.url(),title:page.name()});window.wigzo.track("view",pageData)}},{"@segment/analytics.js-integration":1033,"do-when":1125,reject:1150}],1033:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":1034,"./statics":1035,"@ndhoule/defaults":8,"component-bind":1109,debug:1123,dup:49,extend:1037,"slug-component":1165}],1034:[function(require,module,exports){arguments[4][77][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:77,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1035:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1036,dup:51}],1036:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1037:[function(require,module,exports){arguments[4][80][0].apply(exports,arguments)},{dup:80}],1038:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var Wishpond=module.exports=integration("Wishpond").global("Wishpond").option("siteId","").option("apiKey","").tag('<script id="wishpond-tracker" src="//cdn.wishpond.net/connect.js">');Wishpond.prototype.initialize=function(){window.Wishpond=window.Wishpond||[];window.Wishpond.merchantId=this.options.siteId;window.Wishpond.writeKey=this.options.apiKey;(function(){var a,b,c;a=function(f){return function(){window.Wishpond.push([f].concat(Array.prototype.slice.call(arguments,0)))}};b=["identify","track"];for(c=0;c<b.length;c++){window.Wishpond[b[c]]=a(b[c])}})();this.load(this.ready)};Wishpond.prototype.loaded=function(){return!!window.Wishpond.Logger};Wishpond.prototype.identify=function(identify){if(!identify.userId())return this.debug("user id required");window.Wishpond.Tracker.identify(identify.userId(),identify.traits({createdAt:"created_at",updatedAt:"updated_at",firstName:"first_name",lastName:"last_name",phoneNumber:"phone_number",leadScore:"lead_score"}))};Wishpond.prototype.track=function(track){window.Wishpond.Tracker.track(track.event(),track.properties())}},{"@segment/analytics.js-integration":1039}],1039:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1040,"./statics":1041,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],1040:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1042,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1041:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1043,dup:42}],1042:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1043:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1044:[function(require,module,exports){"use strict";var each=require("component-each");var integration=require("@segment/analytics.js-integration");var toSnakeCase=require("to-snake-case");var is=require("is");var foldl=require("@ndhoule/foldl");var isostring=require("isostring");var time=require("unix-time");var Woopra=module.exports=integration("Woopra").global("woopra").option("domain","").option("cookieName","wooTracker").option("cookieDomain",null).option("cookiePath","/").option("ping",true).option("pingInterval",12e3).option("idleTimeout",3e5).option("downloadTracking",true).option("outgoingTracking",true).option("outgoingIgnoreSubdomain",true).option("downloadPause",200).option("outgoingPause",400).option("ignoreQueryUrl",true).option("hideCampaign",false).tag('<script src="//static.woopra.com/js/w.js">');Woopra.prototype.initialize=function(){(function(){var i,s,z,w=window,d=document,a=arguments,q="script",f=["config","track","identify","visit","push","call"],c=function(){var i,self=this;self._e=[];for(i=0;i<f.length;i++){(function(f){self[f]=function(){self._e.push([f].concat(Array.prototype.slice.call(arguments,0)));return self}})(f[i])}};w._w=w._w||{};for(i=0;i<a.length;i++){w._w[a[i]]=w[a[i]]=w[a[i]]||new c}})("woopra");this.load(this.ready);each(this.options,function(key,value){key=toSnakeCase(key);if(value==null)return;if(value==="")return;window.woopra.config(key,value)})};Woopra.prototype.loaded=function(){return!!(window.woopra&&window.woopra.loaded)};Woopra.prototype.page=function(page){setContext(page);var props=page.properties();var name=page.fullName();if(name)props.title=name;window.woopra.track("pv",props)};Woopra.prototype.identify=function(identify){setContext(identify);var traits=identify.traits();each(traits,function(key,val){if(isostring(val)||is.date(val)){traits[key]=time(val)*1e3}});if(identify.name())traits.name=identify.name();window.woopra.identify(traits).push()};Woopra.prototype.track=function(track){setContext(track);window.woopra.track(track.event(),stringifyNested(track.properties()))};function stringifyNested(obj){return foldl(function(results,value,key){if(is.array(obj[key])){results[key]=json.stringify(obj[key])}else{results[key]=obj[key]}return results},{},obj)}function setContext(event){var options=event.options();if(options){window.woopra.config({context:options})}}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":1045,"component-each":1112,is:1131,isostring:1132,"to-snake-case":1172,"unix-time":1179}],1045:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1046,"./statics":1047,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1048,dup:40,"slug-component":1165}],1046:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1050,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1047:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1051,dup:42}],1048:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":1049,_process:1149,dup:43}],1049:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:1052}],1050:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1051:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1052:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],1053:[function(require,module,exports){"use strict";var foldl=require("@ndhoule/foldl");var is=require("is");var integration=require("@segment/analytics.js-integration");var omit=require("omit");var Wootric=module.exports=integration("Wootric").assumesPageview().option("accountToken","").global("wootricSettings").global("wootric_survey_immediately").global("wootric").tag("library",'<script src="//cdn.wootric.com/wootric-sdk.js"><\/script>');Wootric.prototype.initialize=function(){window.wootricSettings=window.wootricSettings||{};window.wootricSettings.account_token=this.options.accountToken;window.wootricSettings.version="wootric-segment-js-2.3.0";var self=this;this.load("library",function(){self.ready()})};Wootric.prototype.loaded=function(){return!!window.wootric};Wootric.prototype.identify=function(identify){var userId=identify.userId();var anonymousId=identify.anonymousId();var traits=identify.traits();var email=identify.email();var createdAt=identify.created();var language=traits.language;window.wootricSettings.segment_user_id=userId||anonymousId;if(language)window.wootricSettings.language=language;survey(email,createdAt,traits,null)};Wootric.prototype.track=function(track){var properties=track.properties();var email=track.email();var eventName=track.event();var language=properties.language;if(language){window.wootricSettings.language=language}survey(email,null,properties,eventName)};Wootric.prototype.page=function(page){window.wootricSettings.page_info=page.properties();window.wootric("page")};Wootric.prototype.group=function(group){window.wootricSettings.group_info=group.traits();window.wootric("group")};function convertKey(key,value){if(is.date(value)&&!key.endsWith("_date"))return key+"_date";return key}function convertDate(date){return Math.round(date.getTime()/1e3)}if(!String.prototype.endsWith){String.prototype.endsWith=function(searchString,position){var subjectString=this.toString();if(typeof position!=="number"||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length){position=subjectString.length}position-=searchString.length;var lastIndex=subjectString.lastIndexOf(searchString,position);return lastIndex!==-1&&lastIndex===position}}function survey(email,createdAt,properties,eventName){if(createdAt&&createdAt.getTime)window.wootricSettings.created_at=Math.round(createdAt.getTime()/1e3);if(email){window.wootricSettings.email=email}window.wootricSettings.event_name=eventName;var newProperties=foldl(function(results,value,key){var r=results;r[convertKey(key,value)]=is.date(value)?convertDate(value):value;return r},{},properties);window.wootricSettings.properties=omit(["created","createdAt","email"],newProperties);window.wootric("run")}},{"@ndhoule/foldl":14,"@segment/analytics.js-integration":1054,is:1131,omit:1145}],1054:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":1055,"./statics":1056,"@ndhoule/defaults":8,"component-bind":1109,debug:1057,dup:49,extend:1059,"slug-component":1165}],1055:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1056:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1060,dup:51}],1057:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":1058,_process:1149,dup:43}],1058:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:1061}],1059:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],1060:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1061:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],1062:[function(require,module,exports){"use strict";var bind=require("component-bind");var integration=require("@segment/analytics.js-integration");var tick=require("next-tick");var when=require("do-when");var Yandex=module.exports=integration("Yandex Metrica").assumesPageview().global("yandex_metrika_callbacks").global("Ya").option("type",0).option("counterId",null).option("clickmap",false).option("webvisor",false).option("trackHash",false).option("trackLinks",false).option("accurateTrackBounce",false).tag('<script src="//mc.yandex.ru/metrika/watch.js">');Yandex.prototype.initialize=function(){var id=this.options.counterId;var type=this.options.type;var clickmap=this.options.clickmap;var webvisor=this.options.webvisor;var trackHash=this.options.trackHash;var trackLinks=this.options.trackLinks;var accurateTrackBounce=this.options.accurateTrackBounce;push(function(){window["yaCounter"+id]=new window.Ya.Metrika({id:id,type:type,clickmap:clickmap,webvisor:webvisor,trackHash:trackHash,trackLinks:trackLinks,accurateTrackBounce:accurateTrackBounce})});var loaded=bind(this,this.loaded);var ready=this.ready;this.load(function(){when(loaded,function(){tick(ready)})})};Yandex.prototype.loaded=function(){return!!(window.Ya&&window.Ya.Metrika)};function push(callback){window.yandex_metrika_callbacks=window.yandex_metrika_callbacks||[];window.yandex_metrika_callbacks.push(callback)}},{"@segment/analytics.js-integration":1063,"component-bind":1109,"do-when":1125,"next-tick":1142}],1063:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1064,"./statics":1065,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1123,dup:40,"slug-component":1165}],1064:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1066,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1065:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1067,dup:42}],1066:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1067:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1068:[function(require,module,exports){"use strict";var integration=require("@segment/analytics.js-integration");var reject=require("reject");var extend=require("extend");var Youbora=module.exports=integration("Youbora").option("accountCode","").tag("youbora-dashjs",'<script src="https://smartplugin.youbora.com/v6/js/adapters/dashjs/6.1.0/sp.min.js">').tag("youbora-html5",'<script src="https://smartplugin.youbora.com/v6/js/adapters/html5/6.1.3/sp.min.js">').tag("youbora-jwplayer",'<script src="https://smartplugin.youbora.com/v6/js/adapters/jwplayer7/6.1.2/sp.min.js">').tag("youbora-theoplayer",'<script src="https://smartplugin.youbora.com/v6/js/adapters/theoplayer2/6.1.2/sp.min.js">').tag("youbora-theplatform",'<script src="https://smartplugin.youbora.com/v6/js/adapters/theplatform/6.1.0/sp.min.js">').tag("youbora-videojs",'<script src="https://smartplugin.youbora.com/v6/js/adapters/videojs5/6.1.7/sp.min.js">').tag("youbora-main",'<script src="https://smartplugin.youbora.com/v6/js/lib/6.1.12/youboralib.min.js">');Youbora.prototype.loaded=function(){return!!window.youbora};Youbora.prototype.initialize=function(){var self=this;this.load("youbora-main",function(){self.hookPlayers();self.pluginMap={};self.ready()})};Youbora.prototype.videoPlaybackStarted=function(track){var youbora=window.youbora;var sessionId=track.proxy("properties.session_id");var plugin=new youbora.Plugin({accountCode:this.options.accountCode,username:this.analytics.user().id()});this.pluginMap[sessionId]={plugin:plugin,data:track.properties()||{}};var adapter=new youbora.Adapter;var adsAdapter=new youbora.Adapter;var data=this.pluginMap[sessionId].data;adapter.getBitrate=function(){return data.bitrate};adapter.getPlayhead=function(){return data.position};adapter.getFramesPerSecond=function(){return data.framerate};adsAdapter.getPosition=function(){if(data.ad_type==="pre"||data.ad_type==="mid"||data.ad_type==="post"){return data.ad_type}};plugin.setAdapter(adapter);plugin.setAdsAdapter(adsAdapter);var options=reject({"content.isLive":track.proxy("properties.livestream"),"content.resource":track.proxy("context.page.url")});plugin.setOptions(options);plugin.fireInit();adapter.monitorPlayhead()};Youbora.prototype.videoContentStarted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;var adapter=plugin.getAdapter();var metadata=reject({content_id:track.proxy("properties.asset_id"),genre:track.proxy("properties.genre"),owner:track.proxy("properties.publisher")});var options=reject({"content.title":track.proxy("properties.title"),"content.title2":track.proxy("properties.program"),"content.duration":track.proxy("properties.total_length"),"content.metadata":metadata});plugin.setOptions(options);adapter.fireStart();adapter.fireJoin()};Youbora.prototype.videoContentPlaying=function(track){var sessionId=track.proxy("properties.session_id");var pluginObj=this.pluginMap[sessionId];if(!pluginObj)return;Object.assign(pluginObj.data,track.properties())};Youbora.prototype.videoPlaybackBufferStarted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;if(track.proxy("properties.ad_asset_id")){plugin.getAdsAdapter().fireBufferBegin()}else{plugin.getAdapter().fireBufferBegin()}};Youbora.prototype.videoPlaybackBufferCompleted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;if(track.proxy("properties.ad_asset_id")){plugin.getAdsAdapter().fireBufferEnd()}else{plugin.getAdapter().fireBufferEnd()}};Youbora.prototype.videoPlaybackPaused=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;if(track.proxy("properties.ad_asset_id")){plugin.getAdsAdapter().firePause()}else{plugin.getAdapter().firePause()}};Youbora.prototype.videoPlaybackResumed=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;if(track.proxy("properties.ad_asset_id")){plugin.getAdsAdapter().fireResume()}else{plugin.getAdapter().fireResume()}};Youbora.prototype.videoPlaybackSeekStarted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;if(track.proxy("properties.ad_asset_id")){plugin.getAdsAdapter().fireSeekBegin()}else{plugin.getAdapter().fireSeekBegin()}};Youbora.prototype.videoPlaybackSeekCompleted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;if(track.proxy("properties.ad_asset_id")){plugin.getAdsAdapter().fireSeekEnd()}else{plugin.getAdapter().fireSeekEnd()}};Youbora.prototype.videoPlaybackCompleted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;plugin.fireStop()};Youbora.prototype.videoPlaybackInterrupted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;plugin.fireError()};Youbora.prototype.videoAdStarted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;plugin.setOptions({"ad.title":track.proxy("properties.title")});plugin.getAdsAdapter().fireStart()};Youbora.prototype.videoAdCompleted=function(track){var plugin=this.updatePlayerData(track);if(!plugin)return;plugin.getAdsAdapter().fireStop()};Youbora.prototype.track=function(track){if(track.event()!=="Video Ad Clicked")return;var plugin=this.updatePlayerData(track);if(!plugin)return;plugin.getAdsAdapter().fireClick()};Youbora.prototype.hookPlayers=function(){if(!this.options.players)return;var self=this;var players=this.options.players;if(Array.isArray(players.dashjs)){this.load("youbora-dashjs",function(){players.dashjs.forEach(function(playerObj){self.hookPlayer(playerObj.options,new window.youbora.adapters.DashJS(playerObj.player))})})}if(Array.isArray(players.html5)){this.load("youbora-html5",function(){players.html5.forEach(function(playerObj){self.hookPlayer(playerObj.options,new window.youbora.adapters.Html5(playerObj.player))})})}if(Array.isArray(players.jwplayer)){this.load("youbora-jwplayer",function(){players.jwplayer.forEach(function(playerObj){self.hookPlayer(playerObj.options,new window.youbora.adapters.JWPlayer7(playerObj.player))})})}if(Array.isArray(players.theoplayer)){this.load("youbora-theoplayer",function(){players.theoplayer.forEach(function(playerObj){self.hookPlayer(playerObj.options,new window.youbora.adapters.TheoPlayer2(playerObj.player))})})}if(Array.isArray(players.theplatform)){this.load("youbora-theplatform",function(){players.theplatform.forEach(function(playerObj){self.hookPlayer(playerObj.options,new window.youbora.adapters.ThePlatform(playerObj.player))})})}if(Array.isArray(players.videojs)){this.load("youbora-videojs",function(){players.videojs.forEach(function(playerObj){self.hookPlayer(playerObj.options,new window.youbora.adapters.Videojs5(playerObj.player))})})}};Youbora.prototype.hookPlayer=function(playerOptions,adapter,adsAdapter){var plugin=new window.youbora.Plugin({accountCode:this.options.accountCode,username:this.analytics.user().id()});plugin.removeAdsAdapter();plugin.setOptions(playerOptions);plugin.setAdapter(adapter);if(adsAdapter)plugin.setAdsAdapter(adsAdapter)};Youbora.prototype.updatePlayerData=function(track){var sessionId=track.proxy("properties.session_id");if(!sessionId)return;var pluginObj=this.pluginMap[sessionId];if(!pluginObj)return;extend(pluginObj.data,track.properties());return pluginObj.plugin}},{"@segment/analytics.js-integration":1069,extend:1126,reject:1150}],1069:[function(require,module,exports){arguments[4][49][0].apply(exports,arguments)},{"./protos":1070,"./statics":1071,"@ndhoule/defaults":8,"component-bind":1109,debug:1072,dup:49,extend:1126,"slug-component":1165}],1070:[function(require,module,exports){arguments[4][50][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1106,"component-emitter":1114,dup:50,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1071:[function(require,module,exports){arguments[4][51][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1074,dup:51}],1072:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":1073,_process:1149,dup:43}],1073:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:1075}],1074:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1075:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],1076:[function(require,module,exports){"use strict";var fmt=require("@segment/fmt");var integration=require("@segment/analytics.js-integration");var when=require("do-when");var reject=require("reject");var Zopim=module.exports=integration("Zopim").global("$zopim").option("zopimId","").option("listen",false).readyOnLoad();var integrationContext={name:"zopim",version:"1.0.0"};Zopim.prototype.initialize=function(){var self=this;this.load(function(){if(self.options.listen)self.attachListeners();self.ready()})};Zopim.prototype.loaded=function(){return!!(window.$zopim&&typeof window.$zopim.livechat==="object")};Zopim.prototype.load=function(done){var zopimId=this.options.zopimId;var scriptUrl=fmt("//v2.zopim.com/?%s",zopimId);window.$zopim||function(d,s){var z=window.$zopim=function(c){z._.push(c)},$=z.s=d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set._.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute("charset","utf-8");$.src=scriptUrl;z.t=+new Date;$.type="text/javascript";e.parentNode.insertBefore($,e)}(document,"script");when(this.loaded,done)};Zopim.prototype.attachListeners=function(){var self=this;if(!window.$zopim.livechat)return;if(!window.$zopim.livechat.setOnChatStart)return;window.$zopim.livechat.setOnChatStart(function(){self.analytics.track("Live Chat Conversation Started",{},{context:{integration:integrationContext}})});window.$zopim.livechat.setOnChatEnd(function(){self.analytics.track("Live Chat Conversation Ended",{},{context:{integration:integrationContext}})})};Zopim.prototype.identify=function(identify){window.$zopim.livechat.set(reject({email:identify.email(),name:identify.name()||identify.firstName(),phone:identify.phone()}))}},{"@segment/analytics.js-integration":1077,"@segment/fmt":1089,"do-when":1125,reject:1150}],1077:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./protos":1078,"./statics":1079,"@ndhoule/clone":7,"@ndhoule/defaults":8,"@ndhoule/extend":13,"component-bind":1109,debug:1080,dup:40,"slug-component":1165}],1078:[function(require,module,exports){arguments[4][41][0].apply(exports,arguments)},{"@ndhoule/after":5,"@ndhoule/each":10,"@ndhoule/every":12,"@ndhoule/foldl":14,"@segment/fmt":1089,"@segment/load-script":1093,"analytics-events":1082,"component-emitter":1114,dup:41,is:1131,"load-iframe":1136,"next-tick":1142,"to-no-case":1171}],1079:[function(require,module,exports){arguments[4][42][0].apply(exports,arguments)},{"@ndhoule/each":10,"@ndhoule/includes":15,"component-emitter":1114,domify:1083,dup:42}],1080:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":1081,_process:1149,dup:43}],1081:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:1084}],1082:[function(require,module,exports){arguments[4][45][0].apply(exports,arguments)},{dup:45}],1083:[function(require,module,exports){arguments[4][46][0].apply(exports,arguments)},{dup:46}],1084:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],1085:[function(require,module,exports){var utf8Encode=require("utf8-encode");var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";module.exports=encode;function encode(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=utf8Encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4)}return output}},{"utf8-encode":1181}],1086:[function(require,module,exports){"use strict";function canonical(){var tags=document.getElementsByTagName("link");for(var i=0,tag;tag=tags[i];i++){if(tag.getAttribute("rel")==="canonical"){return tag.getAttribute("href")}}}module.exports=canonical},{}],1087:[function(require,module,exports){"use strict";var clone=require("@ndhoule/clone");var each=require("@ndhoule/each");var type=require("component-type");function convertDates(obj,convert){obj=clone(obj);each(function(val,key){if(type(val)==="date"){obj[key]=convert(val)}if(type(val)==="object"||type(val)==="array"){obj[key]=convertDates(val,convert)}},obj);return obj}module.exports=convertDates},{"@ndhoule/clone":7,"@ndhoule/each":10,"component-type":1120}],1088:[function(require,module,exports){"use strict";var debug=require("debug")("cookie");module.exports=function(name,value,options){switch(arguments.length){case 3:case 2:return set(name,value,options);case 1:return get(name);default:return all()}};function set(name,value,options){options=options||{};var str=encode(name)+"="+encode(value);if(value==null)options.maxage=-1;if(options.maxage){options.expires=new Date(+new Date+options.maxage)}if(options.path)str+="; path="+options.path;if(options.domain)str+="; domain="+options.domain;if(options.expires)str+="; expires="+options.expires.toUTCString();if(options.sameSite)str+="; SameSite="+options.sameSite;if(options.secure)str+="; secure";document.cookie=str}function all(){var str;try{str=document.cookie}catch(err){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(err.stack||err)}return{}}return parse(str)}function get(name){return all()[name]}function parse(str){var obj={};var pairs=str.split(/ *; */);var pair;if(pairs[0]=="")return obj;for(var i=0;i<pairs.length;++i){pair=pairs[i].split("=");obj[decode(pair[0])]=decode(pair[1])}return obj}function encode(value){try{return encodeURIComponent(value)}catch(e){debug("error `encode(%o)` - %o",value,e)}}function decode(value){try{return decodeURIComponent(value)}catch(e){debug("error `decode(%o)` - %o",value,e)}}},{debug:1123}],1089:[function(require,module,exports){(function(global){(function(){"use strict";var toString=global.JSON&&typeof JSON.stringify==="function"?JSON.stringify:String;function fmt(str){var args=Array.prototype.slice.call(arguments,1);var j=0;return str.replace(/%([a-z])/gi,function(match,f){return fmt[f]?fmt[f](args[j++]):match+f})}fmt.o=toString;fmt.s=String;fmt.d=parseInt;module.exports=fmt}).call(this)}).call(this,typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{}],1090:[function(require,module,exports){"use strict";function isMeta(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey){return true}var which=e.which;var button=e.button;if(!which&&button!==undefined){return!button&1&&!button&2&&button&4}else if(which===2){return true}return false}module.exports=isMeta},{}],1091:[function(require,module,exports){"use strict";var isodate=require("@segment/isodate");module.exports=traverse;function traverse(input,strict){if(strict===undefined)strict=true;if(input&&typeof input==="object"){return traverseObject(input,strict)}else if(Array.isArray(input)){return traverseArray(input,strict)}else if(isodate.is(input,strict)){return isodate.parse(input)}return input}function traverseObject(obj,strict){Object.keys(obj).forEach(function(key){obj[key]=traverse(obj[key],strict)});return obj}function traverseArray(arr,strict){arr.forEach(function(value,index){arr[index]=traverse(value,strict)});return arr}},{"@segment/isodate":1092}],1092:[function(require,module,exports){"use strict";var matcher=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;exports.parse=function(iso){var numericKeys=[1,5,6,7,11,12];var arr=matcher.exec(iso);var offset=0;if(!arr){return new Date(iso)}for(var i=0,val;val=numericKeys[i];i++){arr[val]=parseInt(arr[val],10)||0}arr[2]=parseInt(arr[2],10)||1;arr[3]=parseInt(arr[3],10)||1;arr[2]--;arr[8]=arr[8]?(arr[8]+"00").substring(0,3):0;if(arr[4]===" "){offset=(new Date).getTimezoneOffset()}else if(arr[9]!=="Z"&&arr[10]){offset=arr[11]*60+arr[12];if(arr[10]==="+"){offset=0-offset}}var millis=Date.UTC(arr[1],arr[2],arr[3],arr[5],arr[6]+offset,arr[7],arr[8]);return new Date(millis)};exports.is=function(string,strict){if(typeof string!=="string"){return false}if(strict&&/^\d{4}-\d{2}-\d{2}/.test(string)===false){return false}return matcher.test(string)}},{}],1093:[function(require,module,exports){"use strict";var onload=require("script-onload");var tick=require("next-tick");var type=require("component-type");function loadScript(options,cb){if(!options){throw new Error("Can't load nothing...")}if(type(options)==="string"){options={src:options}}var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=(https?"https:":"http:")+options.src}if(https&&options.https){options.src=options.https}else if(!https&&options.http){options.src=options.http}var script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=options.src;if(type(cb)==="function"){onload(script,cb)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(script,firstScript)});return script}module.exports=loadScript},{"component-type":1120,"next-tick":1142,"script-onload":1151}],1094:[function(require,module,exports){"use strict";var keys=require("@ndhoule/keys");var uuid=require("uuid").v4;var inMemoryStore={_data:{},length:0,setItem:function(key,value){this._data[key]=value;this.length=keys(this._data).length;return value},getItem:function(key){if(key in this._data){return this._data[key]}return null},removeItem:function(key){if(key in this._data){delete this._data[key]}this.length=keys(this._data).length;return null},clear:function(){this._data={};this.length=0},key:function(index){return keys(this._data)[index]}};function isSupportedNatively(){try{if(!window.localStorage)return false;var key=uuid();window.localStorage.setItem(key,"test_value");var value=window.localStorage.getItem(key);window.localStorage.removeItem(key);return value==="test_value"}catch(e){return false}}function pickStorage(){if(isSupportedNatively()){return window.localStorage}return inMemoryStore}module.exports.defaultEngine=pickStorage();module.exports.inMemoryEngine=inMemoryStore},{"@ndhoule/keys":16,uuid:1182}],1095:[function(require,module,exports){"use strict";var uuid=require("@lukeed/uuid").v4;var Store=require("./store");var each=require("@ndhoule/each");var Schedule=require("./schedule");var debug=require("debug")("localstorage-retry");var Emitter=require("component-emitter");function bind(func,obj){return function(){return func.apply(obj,arguments)}}function Queue(name,opts,fn){if(typeof opts==="function")fn=opts;this.name=name;this.id=uuid();this.fn=fn;this.maxItems=opts.maxItems||Infinity;this.maxAttempts=opts.maxAttempts||Infinity;this.backoff={MIN_RETRY_DELAY:opts.minRetryDelay||1e3,MAX_RETRY_DELAY:opts.maxRetryDelay||3e4,FACTOR:opts.backoffFactor||2,JITTER:opts.backoffJitter||0};this.timeouts={ACK_TIMER:1e3,RECLAIM_TIMER:3e3,RECLAIM_TIMEOUT:1e4,RECLAIM_WAIT:500};this.keys={IN_PROGRESS:"inProgress",QUEUE:"queue",RECLAIM_START:"reclaimStart",RECLAIM_END:"reclaimEnd",ACK:"ack"};this._schedule=new Schedule;this._processId=0;this._store=new Store(this.name,this.id,this.keys);this._store.set(this.keys.IN_PROGRESS,{});this._store.set(this.keys.QUEUE,[]);this._ack=bind(this._ack,this);this._checkReclaim=bind(this._checkReclaim,this);this._processHead=bind(this._processHead,this);this._running=false}Emitter(Queue.prototype);Queue.prototype.start=function(){if(this._running){this.stop()}this._running=true;this._ack();this._checkReclaim();this._processHead()};Queue.prototype.stop=function(){this._schedule.cancelAll();this._running=false};Queue.prototype.shouldRetry=function(_,attemptNumber){if(attemptNumber>this.maxAttempts)return false;return true};Queue.prototype.getDelay=function(attemptNumber){var ms=this.backoff.MIN_RETRY_DELAY*Math.pow(this.backoff.FACTOR,attemptNumber);if(this.backoff.JITTER){var rand=Math.random();var deviation=Math.floor(rand*this.backoff.JITTER*ms);if(Math.floor(rand*10)<5){ms-=deviation}else{ms+=deviation}}return Number(Math.min(ms,this.backoff.MAX_RETRY_DELAY).toPrecision(1))};Queue.prototype.addItem=function(item){this._enqueue({item:item,attemptNumber:0,time:this._schedule.now(),id:uuid()})};Queue.prototype.requeue=function(item,attemptNumber,error,id){if(this.shouldRetry(item,attemptNumber,error)){this._enqueue({item:item,attemptNumber:attemptNumber,time:this._schedule.now()+this.getDelay(attemptNumber),id:id||uuid()})}else{this.emit("discard",item,attemptNumber)}};Queue.prototype._enqueue=function(entry){var queue=this._store.get(this.keys.QUEUE)||[];queue=queue.slice(-(this.maxItems-1));queue.push(entry);queue=queue.sort(function(a,b){return a.time-b.time});this._store.set(this.keys.QUEUE,queue);if(this._running){this._processHead()}};Queue.prototype._processHead=function(){var self=this;var store=this._store;this._schedule.cancel(this._processId);var queue=store.get(this.keys.QUEUE)||[];var inProgress=store.get(this.keys.IN_PROGRESS)||{};var now=this._schedule.now();var toRun=[];function enqueue(el,id){toRun.push({item:el.item,done:function handle(err,res){var inProgress=store.get(self.keys.IN_PROGRESS)||{};delete inProgress[id];store.set(self.keys.IN_PROGRESS,inProgress);self.emit("processed",err,res,el.item);if(err){self.requeue(el.item,el.attemptNumber+1,err,el.id)}}})}var inProgressSize=Object.keys(inProgress).length;while(queue.length&&queue[0].time<=now&&inProgressSize++<self.maxItems){var el=queue.shift();var id=uuid();inProgress[id]={item:el.item,attemptNumber:el.attemptNumber,time:self._schedule.now()};enqueue(el,id)}store.set(this.keys.QUEUE,queue);store.set(this.keys.IN_PROGRESS,inProgress);each(function(el){try{self.fn(el.item,el.done)}catch(err){debug("Process function threw error: "+err)}},toRun);queue=store.get(this.keys.QUEUE)||[];this._schedule.cancel(this._processId);if(queue.length>0){this._processId=this._schedule.run(this._processHead,queue[0].time-now,Schedule.Modes.ASAP)}};Queue.prototype._ack=function(){this._store.set(this.keys.ACK,this._schedule.now());this._store.set(this.keys.RECLAIM_START,null);this._store.set(this.keys.RECLAIM_END,null);this._schedule.run(this._ack,this.timeouts.ACK_TIMER,Schedule.Modes.ASAP)};Queue.prototype._checkReclaim=function(){var self=this;function tryReclaim(store){store.set(self.keys.RECLAIM_START,self.id);store.set(self.keys.ACK,self._schedule.now());self._schedule.run(function(){if(store.get(self.keys.RECLAIM_START)!==self.id)return;store.set(self.keys.RECLAIM_END,self.id);self._schedule.run(function(){if(store.get(self.keys.RECLAIM_END)!==self.id)return;if(store.get(self.keys.RECLAIM_START)!==self.id)return;self._reclaim(store.id)},self.timeouts.RECLAIM_WAIT,Schedule.Modes.ABANDON)},self.timeouts.RECLAIM_WAIT,Schedule.Modes.ABANDON)}function findOtherQueues(name){var res=[];var storage=self._store.getOriginalEngine();for(var i=0;i<storage.length;i++){var k=storage.key(i);var parts=k.split(".");if(parts.length!==3)continue;if(parts[0]!==name)continue;if(parts[2]!=="ack")continue;res.push(new Store(name,parts[1],self.keys))}return res}each(function(store){if(store.id===self.id)return;if(self._schedule.now()-store.get(self.keys.ACK)<self.timeouts.RECLAIM_TIMEOUT)return;tryReclaim(store)},findOtherQueues(this.name));this._schedule.run(this._checkReclaim,this.timeouts.RECLAIM_TIMER,Schedule.Modes.RESCHEDULE)};Queue.prototype._reclaim=function(id){var self=this;var other=new Store(this.name,id,this.keys);var our={queue:this._store.get(this.keys.QUEUE)||[]};var their={inProgress:other.get(this.keys.IN_PROGRESS)||{},queue:other.get(this.keys.QUEUE)||[]};var trackMessageIds=[];var addConcatQueue=function(queue,incrementAttemptNumberBy){each(function(el){var id=el.id||uuid();if(trackMessageIds.indexOf(id)>=0){self.emit("duplication",el.item,el.attemptNumber)}else{our.queue.push({item:el.item,attemptNumber:el.attemptNumber+incrementAttemptNumberBy,time:self._schedule.now(),id:id});trackMessageIds.push(id)}},queue)};addConcatQueue(their.queue,0);addConcatQueue(their.inProgress,1);our.queue=our.queue.sort(function(a,b){return a.time-b.time});this._store.set(this.keys.QUEUE,our.queue);other.remove(this.keys.IN_PROGRESS);other.remove(this.keys.QUEUE);other.remove(this.keys.RECLAIM_START);other.remove(this.keys.RECLAIM_END);other.remove(this.keys.ACK);this._processHead()};module.exports=Queue},{"./schedule":1096,"./store":1097,"@lukeed/uuid":4,"@ndhoule/each":10,"component-emitter":1114,debug:1098}],1096:[function(require,module,exports){"use strict";var each=require("@ndhoule/each");var CLOCK_LATE_FACTOR=2;var defaultClock={setTimeout:function(fn,ms){return window.setTimeout(fn,ms)},clearTimeout:function(id){return window.clearTimeout(id)},Date:window.Date};var clock=defaultClock;var modes={ASAP:1,RESCHEDULE:2,ABANDON:3};function Schedule(){this.tasks={};this.nextId=1}Schedule.prototype.now=function(){return+new clock.Date};Schedule.prototype.run=function(task,timeout,mode){var id=this.nextId++;this.tasks[id]=clock.setTimeout(this._handle(id,task,timeout,mode||modes.ASAP),timeout);return id};Schedule.prototype.cancel=function(id){if(this.tasks[id]){clock.clearTimeout(this.tasks[id]);delete this.tasks[id]}};Schedule.prototype.cancelAll=function(){each(clock.clearTimeout,this.tasks);this.tasks={}};Schedule.prototype._handle=function(id,callback,timeout,mode){var self=this;var start=self.now();return function(){delete self.tasks[id];if(mode>=modes.RESCHEDULE&&start+timeout*CLOCK_LATE_FACTOR<self.now()){if(mode===modes.RESCHEDULE){self.run(callback,timeout,mode)}return}return callback()}};Schedule.setClock=function(newClock){clock=newClock};Schedule.resetClock=function(){clock=defaultClock};Schedule.Modes=modes;module.exports=Schedule},{"@ndhoule/each":10}],1097:[function(require,module,exports){"use strict";var defaultEngine=require("./engine").defaultEngine;var inMemoryEngine=require("./engine").inMemoryEngine;var each=require("@ndhoule/each");var keys=require("@ndhoule/keys");var json=JSON;function Store(name,id,keys,optionalEngine){this.id=id;this.name=name;this.keys=keys||{};this.engine=optionalEngine||defaultEngine;this.originalEngine=this.engine}Store.prototype.set=function(key,value){var compoundKey=this._createValidKey(key);if(!compoundKey)return;try{this.engine.setItem(compoundKey,json.stringify(value))}catch(err){if(isQuotaExceeded(err)){this._swapEngine();this.set(key,value)}}};Store.prototype.get=function(key){try{var str=this.engine.getItem(this._createValidKey(key));if(str===null){return null}return json.parse(str)}catch(err){return null}};Store.prototype.getOriginalEngine=function(){return this.originalEngine};Store.prototype.remove=function(key){this.engine.removeItem(this._createValidKey(key))};Store.prototype._createValidKey=function(key){var name=this.name;var id=this.id;if(!keys(this.keys).length)return[name,id,key].join(".");var compoundKey;each(function(value){if(value===key){compoundKey=[name,id,key].join(".")}},this.keys);return compoundKey};Store.prototype._swapEngine=function(){var self=this;each(function(key){var value=self.get(key);inMemoryEngine.setItem([self.name,self.id,key].join("."),value);self.remove(key)},this.keys);this.engine=inMemoryEngine};module.exports=Store;function isQuotaExceeded(e){var quotaExceeded=false;if(e.code){switch(e.code){case 22:quotaExceeded=true;break;case 1014:if(e.name==="NS_ERROR_DOM_QUOTA_REACHED"){quotaExceeded=true}break;default:break}}else if(e.number===-2147024882){quotaExceeded=true}return quotaExceeded}},{"./engine":1094,"@ndhoule/each":10,"@ndhoule/keys":16}],1098:[function(require,module,exports){arguments[4][37][0].apply(exports,arguments)},{dup:37}],1099:[function(require,module,exports){"use strict";function preventDefault(e){e=e||window.event;return e.preventDefault?e.preventDefault():e.returnValue=false}module.exports=preventDefault},{}],1100:[function(require,module,exports){"use strict";var define=Object.defineProperty;var initialProtocol=window.location.protocol;var mockedProtocol;module.exports=function(protocol){if(arguments.length===0){return get()}return set(protocol)};module.exports.http=function(){set("http:")};module.exports.https=function(){set("https:")};module.exports.reset=function(){set(initialProtocol)};function get(){return mockedProtocol||window.location.protocol}function set(protocol){try{define(window.location,"protocol",{get:function(){return protocol}})}catch(err){mockedProtocol=protocol}}},{}],1101:[function(require,module,exports){"use strict";var JSON=require("json3");var base64encode=require("@segment/base64-encode");var cors=require("has-cors");var jsonp=require("jsonp");exports=module.exports=cors?json:base64;exports.callback="callback";exports.prefix="data";exports.json=json;exports.base64=base64;exports.type=cors?"xhr":"jsonp";function json(url,obj,headers,fn){if(arguments.length===3)fn=headers,headers={};var req=new XMLHttpRequest;req.onerror=fn;req.onreadystatechange=done;req.open("POST",url,true);for(var k in headers){req.setRequestHeader(k,headers[k])}req.send(JSON.stringify(obj));function done(){if(req.readyState===4){return fn(null,req)}}}function base64(url,obj,_,fn){if(arguments.length===3)fn=_;var prefix=exports.prefix;var data=encode(obj);url+="?"+prefix+"="+data;jsonp(url,{param:exports.callback},function(err,obj){if(err)return fn(err);fn(null,{url:url,body:obj})})}function encode(obj){var str="";str=JSON.stringify(obj);str=base64encode(str);str=str.replace(/\+/g,"-").replace(/\//g,"_");return encodeURIComponent(str)}},{"@segment/base64-encode":1085,"has-cors":1128,json3:1134,jsonp:1135}],1102:[function(require,module,exports){(function(global){(function(){"use strict";var JSON=require("json3");module.exports=function(){var store={},win=typeof window!="undefined"?window:global,doc=win.document,localStorageName="localStorage",scriptTag="script",storage;store.disabled=false;store.version="1.3.20";store.set=function(key,value){};store.get=function(key,defaultVal){};store.has=function(key){return store.get(key)!==undefined};store.remove=function(key){};store.clear=function(){};store.transact=function(key,defaultVal,transactionFn){if(transactionFn==null){transactionFn=defaultVal;defaultVal=null}if(defaultVal==null){defaultVal={}}var val=store.get(key,defaultVal);transactionFn(val);store.set(key,val)};store.getAll=function(){var ret={};store.forEach(function(key,val){ret[key]=val});return ret};store.forEach=function(){};store.serialize=function(value){return JSON.stringify(value)};store.deserialize=function(value){if(typeof value!="string"){return undefined}try{return JSON.parse(value)}catch(e){return value||undefined}};function isLocalStorageNameSupported(){try{return localStorageName in win&&win[localStorageName]}catch(err){return false}}if(isLocalStorageNameSupported()){storage=win[localStorageName];store.set=function(key,val){if(val===undefined){return store.remove(key)}storage.setItem(key,store.serialize(val));return val};store.get=function(key,defaultVal){var val=store.deserialize(storage.getItem(key));return val===undefined?defaultVal:val};store.remove=function(key){storage.removeItem(key)};store.clear=function(){storage.clear()};store.forEach=function(callback){for(var i=0;i<storage.length;i++){var key=storage.key(i);callback(key,store.get(key))}}}else if(doc&&doc.documentElement.addBehavior){var storageOwner,storageContainer;try{storageContainer=new ActiveXObject("htmlfile");storageContainer.open();storageContainer.write("<"+scriptTag+">document.w=window</"+scriptTag+'><iframe src="/favicon.ico"></iframe>');storageContainer.close();storageOwner=storageContainer.w.frames[0].document;storage=storageOwner.createElement("div")}catch(e){storage=doc.createElement("div");storageOwner=doc.body}var withIEStorage=function(storeFunction){return function(){var args=Array.prototype.slice.call(arguments,0);args.unshift(storage);storageOwner.appendChild(storage);storage.addBehavior("#default#userData");storage.load(localStorageName);var result=storeFunction.apply(store,args);storageOwner.removeChild(storage);return result}};var forbiddenCharsRegex=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");var ieKeyFix=function(key){return key.replace(/^d/,"___$&").replace(forbiddenCharsRegex,"___")};store.set=withIEStorage(function(storage,key,val){key=ieKeyFix(key);if(val===undefined){return store.remove(key)}storage.setAttribute(key,store.serialize(val));storage.save(localStorageName);return val});store.get=withIEStorage(function(storage,key,defaultVal){key=ieKeyFix(key);var val=store.deserialize(storage.getAttribute(key));return val===undefined?defaultVal:val});store.remove=withIEStorage(function(storage,key){key=ieKeyFix(key);storage.removeAttribute(key);storage.save(localStorageName)});store.clear=withIEStorage(function(storage){var attributes=storage.XMLDocument.documentElement.attributes;storage.load(localStorageName);for(var i=attributes.length-1;i>=0;i--){storage.removeAttribute(attributes[i].name)}storage.save(localStorageName)});store.forEach=withIEStorage(function(storage,callback){var attributes=storage.XMLDocument.documentElement.attributes;for(var i=0,attr;attr=attributes[i];++i){callback(attr.name,store.deserialize(storage.getAttribute(attr.name)))}})}try{var testKey="__storejs__";store.set(testKey,testKey);if(store.get(testKey)!=testKey){store.disabled=true}store.remove(testKey)}catch(e){store.disabled=true}store.enabled=!store.disabled;return store}()}).call(this)}).call(this,typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{json3:1134}],1103:[function(require,module,exports){"use strict";function pad(number){var n=number.toString();return n.length===1?"0"+n:n}function toISOString(date){return date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1)+"-"+pad(date.getUTCDate())+"T"+pad(date.getUTCHours())+":"+pad(date.getUTCMinutes())+":"+pad(date.getUTCSeconds())+"."+String((date.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}module.exports=toISOString},{}],1104:[function(require,module,exports){arguments[4][882][0].apply(exports,arguments)},{"component-cookie":1111,"component-url":1121,dup:882}],1105:[function(require,module,exports){"use strict";function isObject(o){if("object"===typeof o&&!(o instanceof Array)){return true}return false}exports=module.exports=trample;exports.flattenUntilArrayLeaf=flattenUntilArrayLeaf;function flattenUntilArrayLeaf(key,args,obj){if(!obj)obj={};var isLeaf=false;for(var i=0;i<args.input.length;i++){var prop=args.input[i];var arrayKey=!key?i:key+args.options.delimiter+i;if(isObject(prop)){isLeaf=false;merge(obj,getRoot(arrayKey,prop,args.options))}else if(prop instanceof Array&&args.options.flattenArray){isLeaf=false;var arr=flattenUntilArrayLeaf(arrayKey,{input:prop,options:args.options},obj)}else if(!args.options.flattenArray&&prop instanceof Array){isLeaf=false;var guard=false;for(var k=0;k<prop.length;k++){var kval=prop[k];if(isObject(kval)||kval instanceof Array){guard=false;merge(obj,flattenUntilArrayLeaf(arrayKey,{input:prop,options:args.options},obj));break}else{guard=true}}if(guard){obj[arrayKey]=prop}}else{isLeaf=true;obj[arrayKey]=prop}}if(isLeaf&&!args.options.flattenArray){return args.input}return obj}function trample(props,options){if(!options)options={};if(!options.delimiter)options.delimiter=".";var obj={};merge(obj,getRoot(null,props,options));return obj}function merge(one,two){for(var key in two){var value=two[key];one[key]=value}}function getRoot(localKey,props,options){var obj={};for(var key in props){if(props.hasOwnProperty(key)){var newKey=localKey===null?key:localKey+options.delimiter+key;var value=props[key];if(isObject(value)){merge(obj,getRoot(newKey,value,options))}else if(value instanceof Array){var arr=flattenUntilArrayLeaf(newKey,{input:value,options:options});if(arr instanceof Array){obj[newKey]=arr}else{merge(obj,arr)}}else{obj[newKey]=value}}}return obj}},{}],1106:[function(require,module,exports){"use strict";var map=require("@ndhoule/map");var foldl=require("@ndhoule/foldl");var eventMap={videoPlaybackStarted:[{object:"video playback",action:"started"}],videoPlaybackPaused:[{object:"video playback",action:"paused"}],videoPlaybackInterrupted:[{object:"video playback",action:"interrupted"}],videoPlaybackResumed:[{object:"video playback",action:"resumed"}],videoPlaybackCompleted:[{object:"video playback",action:"completed"}],videoPlaybackExited:[{object:"video playback",action:"exited"}],videoPlaybackBufferStarted:[{object:"video playback buffer",action:"started"}],videoPlaybackBufferCompleted:[{object:"video playback buffer",action:"completed"}],videoPlaybackSeekStarted:[{object:"video playback seek",action:"started"}],videoPlaybackSeekCompleted:[{object:"video playback seek",action:"completed"}],videoContentStarted:[{object:"video content",action:"started"}],videoContentPlaying:[{object:"video content",action:"playing"}],videoContentCompleted:[{object:"video content",action:"completed"}],videoAdStarted:[{object:"video ad",action:"started"}],videoAdPlaying:[{object:"video ad",action:"playing"}],videoAdCompleted:[{object:"video ad",action:"completed"}],videoAdClicked:[{object:"video ad",action:"clicked"}],videoAdSkipped:[{object:"video ad",action:"skipped"}],promotionViewed:[{object:"promotion",action:"viewed"}],promotionClicked:[{object:"promotion",action:"clicked"}],productsSearched:[{object:"products",action:"searched"}],productListViewed:[{object:"product list",action:"viewed"},{object:"product category",action:"viewed"}],productListFiltered:[{object:"product list",action:"filtered"}],productClicked:[{object:"product",action:"clicked"}],productViewed:[{object:"product",action:"viewed"}],productAdded:[{object:"product",action:"added"}],productRemoved:[{object:"product",action:"removed"}],cartViewed:[{object:"cart",action:"viewed"}],orderUpdated:[{object:"order",action:"updated"}],orderCompleted:[{object:"order",action:"completed"}],orderRefunded:[{object:"order",action:"refunded"}],orderCancelled:[{object:"order",action:"cancelled"}],paymentInfoEntered:[{object:"payment info",action:"entered"}],checkoutStarted:[{object:"checkout",action:"started"}],checkoutStepViewed:[{object:"checkout step",action:"viewed"}],checkoutStepCompleted:[{object:"checkout step",action:"completed"}],couponEntered:[{object:"coupon",action:"entered"}],couponApplied:[{object:"coupon",action:"applied"}],couponDenied:[{object:"coupon",action:"denied"}],couponRemoved:[{object:"coupon",action:"removed"}],productAddedToWishlist:[{object:"product",action:"added to wishlist"}],productRemovedFromWishlist:[{object:"product",action:"removed from wishlist"}],productAddedFromWishlistToCart:[{object:"product",action:"added to cart from wishlist"},{object:"product",action:"added from wishlist to cart"}],wishlistProductAddedToCart:[{object:"wishlist product",action:"added to cart"}],productShared:[{object:"product",action:"shared"}],cartShared:[{object:"cart",action:"shared"}],productReviewed:[{object:"product",action:"reviewed"}],applicationInstalled:[{object:"application",action:"installed"}],applicationUpdated:[{object:"application",action:"updated"}],applicationOpened:[{object:"application",action:"opened"}],applicationBackgrounded:[{object:"application",action:"backgrounded"}],applicationUninstalled:[{object:"application",action:"uninstalled"}],applicationCrashed:[{object:"application",action:"crashed"}],installAttributed:[{object:"install",action:"attributed"}],deepLinkOpened:[{object:"deep link",action:"opened"}],deepLinkClicked:[{object:"deep link",action:"clicked"}],pushNotificationReceived:[{object:"push notification",action:"received"}],pushNotificationTapped:[{object:"push notification",action:"tapped"}],pushNotificationBounced:[{object:"push notification",action:"bounced"}],emailBounced:[{object:"email",action:"bounced"}],emailDelivered:[{object:"email",action:"delivered"}],emailLinkClicked:[{object:"email link",action:"clicked"}],emailMarkedAsSpam:[{object:"email",action:"marked as spam"}],emailOpened:[{object:"email",action:"opened"}],unsubscribed:[{object:"",action:"unsubscribed"}],liveChatConversationEnded:[{object:"live chat conversation",action:"ended"}],liveChatConversationStarted:[{object:"live chat conversation",action:"started"}],liveChatMessageReceived:[{object:"live chat message",action:"received"}],liveChatMessageSent:[{object:"live chat message",action:"sent"}]};module.exports=foldl(function transform(ret,pairs,method){var values=map(function(pair){return map(function(permutation){var flattened=[].concat.apply([],map(function(words){return words.split(" ")},permutation));return"^[ _]?"+flattened.join("[ _]?")+"[ _]?"},[[pair.action,pair.object],[pair.object,pair.action]]).join("|")},pairs);var conjoined=values.join("|")+"$";ret[method]=new RegExp(conjoined,"i");return ret},{},eventMap)},{"@ndhoule/foldl":14,"@ndhoule/map":17}],1107:[function(require,module,exports){"use strict";var bind=require("component-bind");function bindAll(obj){for(var key in obj){var val=obj[key];if(typeof val==="function"){obj[key]=bind(obj,obj[key])}}return obj}module.exports=bindAll},{"component-bind":1109}],1108:[function(require,module,exports){var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(str.charCodeAt(i)&255);return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc},{}],1109:[function(require,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],1110:[function(require,module,exports){var type;try{type=require("component-type")}catch(_){type=require("type")}module.exports=clone;function clone(obj){switch(type(obj)){case"object":var copy={};for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){copy[key]=clone(obj[key])}}return copy;case"array":var copy=new Array(obj.length);for(var i=0,l=obj.length;i<l;i++){copy[i]=clone(obj[i])}return copy;case"regexp":var flags="";flags+=obj.multiline?"m":"";flags+=obj.global?"g":"";flags+=obj.ignoreCase?"i":"";return new RegExp(obj.source,flags);case"date":return new Date(obj.getTime());default:return obj}}},{"component-type":1120,type:1120}],1111:[function(require,module,exports){arguments[4][884][0].apply(exports,arguments)},{debug:1123,dup:884}],1112:[function(require,module,exports){try{var type=require("type")}catch(err){var type=require("component-type")}var toFunction=require("to-function");var has=Object.prototype.hasOwnProperty;module.exports=function(obj,fn,ctx){fn=toFunction(fn);ctx=ctx||this;switch(type(obj)){case"array":return array(obj,fn,ctx);case"object":if("number"==typeof obj.length)return array(obj,fn,ctx);return object(obj,fn,ctx);case"string":return string(obj,fn,ctx)}};function string(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj.charAt(i),i)}}function object(obj,fn,ctx){for(var key in obj){if(has.call(obj,key)){fn.call(ctx,key,obj[key])}}}function array(obj,fn,ctx){for(var i=0;i<obj.length;++i){fn.call(ctx,obj[i],i)}}},{"component-type":1113,"to-function":1170,type:1113}],1113:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],1114:[function(require,module,exports){if(typeof module!=="undefined"){module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}if(callbacks.length===0){delete this._callbacks["$"+event]}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=new Array(arguments.length-1),callbacks=this._callbacks["$"+event];for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],1115:[function(require,module,exports){var bind=window.addEventListener?"addEventListener":"attachEvent",unbind=window.removeEventListener?"removeEventListener":"detachEvent",prefix=bind!=="addEventListener"?"on":"";exports.bind=function(el,type,fn,capture){el[bind](prefix+type,fn,capture||false);return fn};exports.unbind=function(el,type,fn,capture){el[unbind](prefix+type,fn,capture||false);return fn}},{}],1116:[function(require,module,exports){module.exports=function(arr,obj){if(arr.indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i){if(arr[i]===obj)return i}return-1}},{}],1117:[function(require,module,exports){var globals=/\b(Array|Date|Object|Math|JSON)\b/g;module.exports=function(str,fn){var p=unique(props(str));if(fn&&"string"==typeof fn)fn=prefixed(fn);if(fn)return map(str,p,fn);return p};function props(str){return str.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\//g,"").replace(globals,"").match(/[a-zA-Z_]\w*/g)||[]}function map(str,props,fn){var re=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^/]+)\/|[a-zA-Z_]\w*/g;return str.replace(re,function(_){if("("==_[_.length-1])return fn(_);if(!~props.indexOf(_))return _;return fn(_)})}function unique(arr){var ret=[];for(var i=0;i<arr.length;i++){if(~ret.indexOf(arr[i]))continue;ret.push(arr[i])}return ret}function prefixed(str){return function(_){return str+_}}},{}],1118:[function(require,module,exports){var trim=require("trim");var type=require("type");var pattern=/(\w+)\[(\d+)\]/;var encode=function(str){try{return encodeURIComponent(str)}catch(e){return str}};var decode=function(str){try{return decodeURIComponent(str.replace(/\+/g," "))}catch(e){return str}};exports.parse=function(str){if("string"!=typeof str)return{};str=trim(str);if(""==str)return{};if("?"==str.charAt(0))str=str.slice(1);var obj={};var pairs=str.split("&");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");var key=decode(parts[0]);var m;if(m=pattern.exec(key)){obj[m[1]]=obj[m[1]]||[];obj[m[1]][m[2]]=decode(parts[1]);continue}obj[parts[0]]=null==parts[1]?"":decode(parts[1])}return obj};exports.stringify=function(obj){if(!obj)return"";var pairs=[];for(var key in obj){var value=obj[key];if("array"==type(value)){for(var i=0;i<value.length;++i){pairs.push(encode(key+"["+i+"]")+"="+encode(value[i]))}continue}pairs.push(encode(key)+"="+encode(obj[key]))}return pairs.join("&")}},{trim:1176,type:1119}],1119:[function(require,module,exports){arguments[4][734][0].apply(exports,arguments)},{dup:734}],1120:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}if(val===null)return"null";if(val===undefined)return"undefined";if(val!==val)return"nan";if(val&&val.nodeType===1)return"element";if(isBuffer(val))return"buffer";val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val);return typeof val};function isBuffer(obj){return!!(obj!=null&&(obj._isBuffer||obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)))}},{}],1121:[function(require,module,exports){exports.parse=function(url){var a=document.createElement("a");a.href=url;return{href:a.href,host:a.host||location.host,port:"0"===a.port||""===a.port?port(a.protocol):a.port,hash:a.hash,hostname:a.hostname||location.hostname,pathname:a.pathname.charAt(0)!="/"?"/"+a.pathname:a.pathname,protocol:!a.protocol||":"==a.protocol?location.protocol:a.protocol,search:a.search,query:a.search.slice(1)}};exports.isAbsolute=function(url){return 0==url.indexOf("//")||!!~url.indexOf("://")};exports.isRelative=function(url){return!exports.isAbsolute(url)};exports.isCrossDomain=function(url){url=exports.parse(url);var location=exports.parse(window.location.href);return url.hostname!==location.hostname||url.port!==location.port||url.protocol!==location.protocol};function port(protocol){switch(protocol){case"http:":return 80;case"https:":return 443;default:return location.port}}},{}],1122:[function(require,module,exports){(function(){var base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number){return crypt.rotl(n,8)&16711935|crypt.rotl(n,24)&4278255360}for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(Math.random()*256));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<words.length*32;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++){hex.push((bytes[i]>>>4).toString(16));hex.push((bytes[i]&15).toString(16))}return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3){var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2];for(var j=0;j<4;j++)if(i*8+j*6<=bytes.length*8)base64.push(base64map.charAt(triplet>>>6*(3-j)&63));else base64.push("=")}return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4){if(imod4==0)continue;bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<imod4*2|base64map.indexOf(base64.charAt(i))>>>6-imod4*2)}return bytes}};module.exports=crypt})()},{}],1123:[function(require,module,exports){arguments[4][43][0].apply(exports,arguments)},{"./debug":1124,_process:1149,dup:43}],1124:[function(require,module,exports){arguments[4][44][0].apply(exports,arguments)},{dup:44,ms:1138}],1125:[function(require,module,exports){var nextTick=require("next-tick");function when(condition,fn,interval){if(typeof condition!=="function")throw new Error("condition must be a function");if(typeof fn!=="function")throw new Error("fn must be a function");if(condition())return nextTick(fn);var ref=setInterval(function(){if(!condition())return;nextTick(fn);clearInterval(ref)},interval||10)}module.exports=when},{"next-tick":1142}],1126:[function(require,module,exports){arguments[4][54][0].apply(exports,arguments)},{dup:54}],1127:[function(require,module,exports){var debug=require("debug");module.exports=generate;function generate(name,options){var log=debug("global-queue:"+name);options=options||{};return function(args){args=[].slice.call(arguments);window[name]||(window[name]=[]);log("%o",args);options.wrap===false?window[name].push.apply(window[name],args):window[name].push(args)}}},{debug:1123}],1128:[function(require,module,exports){try{module.exports=typeof XMLHttpRequest!=="undefined"&&"withCredentials"in new XMLHttpRequest}catch(err){module.exports=false}},{}],1129:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},{}],1130:[function(require,module,exports){module.exports=function(obj){return obj!=null&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer)};function isBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer==="function"&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return typeof obj.readFloatLE==="function"&&typeof obj.slice==="function"&&isBuffer(obj.slice(0,0))}},{}],1131:[function(require,module,exports){arguments[4][742][0].apply(exports,arguments)},{dup:742}],1132:[function(require,module,exports){module.exports=isDate;var isoformat="^\\d{4}-\\d{2}-\\d{2}"+"((T\\d{2}:\\d{2}(:\\d{2})?)"+"(\\.\\d{1,6})?"+"(Z|(\\+|-)\\d{2}:\\d{2})?)?$";var matcher=new RegExp(isoformat);function isDate(val){return typeof val==="string"&&matcher.test(val)&&!isNaN(Date.parse(val))}},{}],1133:[function(require,module,exports){(function(process,global){(function(){(function(root){"use strict";var NODE_JS=typeof process=="object"&&process.versions&&process.versions.node;if(NODE_JS){root=global}var COMMON_JS=!root.JS_SHA256_TEST&&typeof module=="object"&&module.exports;var HEX_CHARS="0123456789abcdef".split("");var EXTRA=[-2147483648,8388608,32768,128];var SHIFT=[24,16,8,0];var K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var blocks=[];var sha224=function(message){return sha256(message,true)};var sha256=function(message,is224){var notString=typeof message!="string";if(notString&&message.constructor==root.ArrayBuffer){message=new Uint8Array(message)}var h0,h1,h2,h3,h4,h5,h6,h7,block,code,first=true,end=false,i,j,index=0,start=0,bytes=0,length=message.length,s0,s1,maj,t1,t2,ch,ab,da,cd,bc;if(is224){h0=3238371032;h1=914150663;h2=812702999;h3=4144912697;h4=4290775857;h5=1750603025;h6=1694076839;h7=3204075428}else{h0=1779033703;h1=3144134277;h2=1013904242;h3=2773480762;h4=1359893119;h5=2600822924;h6=528734635;h7=1541459225}block=0;do{blocks[0]=block;blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0;if(notString){for(i=start;index<length&&i<64;++index){blocks[i>>2]|=message[index]<<SHIFT[i++&3]}}else{for(i=start;index<length&&i<64;++index){code=message.charCodeAt(index);if(code<128){blocks[i>>2]|=code<<SHIFT[i++&3]}else if(code<2048){blocks[i>>2]|=(192|code>>6)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else if(code<55296||code>=57344){blocks[i>>2]|=(224|code>>12)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}else{code=65536+((code&1023)<<10|message.charCodeAt(++index)&1023);blocks[i>>2]|=(240|code>>18)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>12&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code>>6&63)<<SHIFT[i++&3];blocks[i>>2]|=(128|code&63)<<SHIFT[i++&3]}}}bytes+=i-start;start=i-64;if(index==length){blocks[i>>2]|=EXTRA[i&3];++index}block=blocks[16];if(index>length&&i<56){blocks[15]=bytes<<3;end=true}var a=h0,b=h1,c=h2,d=h3,e=h4,f=h5,g=h6,h=h7;for(j=16;j<64;++j){t1=blocks[j-15];s0=(t1>>>7|t1<<25)^(t1>>>18|t1<<14)^t1>>>3;t1=blocks[j-2];s1=(t1>>>17|t1<<15)^(t1>>>19|t1<<13)^t1>>>10;blocks[j]=blocks[j-16]+s0+blocks[j-7]+s1<<0}bc=b&c;for(j=0;j<64;j+=4){if(first){if(is224){ab=300032;t1=blocks[0]-1413257819;h=t1-150054599<<0;d=t1+24177077<<0}else{ab=704751109;t1=blocks[0]-210244248;h=t1-1521486534<<0;d=t1+143694565<<0}first=false}else{s0=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10);s1=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7);ab=a&b;maj=ab^a&c^bc;ch=e&f^~e&g;t1=h+s1+ch+K[j]+blocks[j];t2=s0+maj;h=d+t1<<0;d=t1+t2<<0}s0=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10);s1=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7);da=d&a;maj=da^d&b^ab;ch=h&e^~h&f;t1=g+s1+ch+K[j+1]+blocks[j+1];t2=s0+maj;g=c+t1<<0;c=t1+t2<<0;s0=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10);s1=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7);cd=c&d;maj=cd^c&a^da;ch=g&h^~g&e;t1=f+s1+ch+K[j+2]+blocks[j+2];t2=s0+maj;f=b+t1<<0;b=t1+t2<<0;s0=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10);s1=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7);bc=b&c;maj=bc^b&d^cd;ch=f&g^~f&h;t1=e+s1+ch+K[j+3]+blocks[j+3];t2=s0+maj;e=a+t1<<0;a=t1+t2<<0}h0=h0+a<<0;h1=h1+b<<0;h2=h2+c<<0;h3=h3+d<<0;h4=h4+e<<0;h5=h5+f<<0;h6=h6+g<<0;h7=h7+h<<0}while(!end);var hex=HEX_CHARS[h0>>28&15]+HEX_CHARS[h0>>24&15]+HEX_CHARS[h0>>20&15]+HEX_CHARS[h0>>16&15]+HEX_CHARS[h0>>12&15]+HEX_CHARS[h0>>8&15]+HEX_CHARS[h0>>4&15]+HEX_CHARS[h0&15]+HEX_CHARS[h1>>28&15]+HEX_CHARS[h1>>24&15]+HEX_CHARS[h1>>20&15]+HEX_CHARS[h1>>16&15]+HEX_CHARS[h1>>12&15]+HEX_CHARS[h1>>8&15]+HEX_CHARS[h1>>4&15]+HEX_CHARS[h1&15]+HEX_CHARS[h2>>28&15]+HEX_CHARS[h2>>24&15]+HEX_CHARS[h2>>20&15]+HEX_CHARS[h2>>16&15]+HEX_CHARS[h2>>12&15]+HEX_CHARS[h2>>8&15]+HEX_CHARS[h2>>4&15]+HEX_CHARS[h2&15]+HEX_CHARS[h3>>28&15]+HEX_CHARS[h3>>24&15]+HEX_CHARS[h3>>20&15]+HEX_CHARS[h3>>16&15]+HEX_CHARS[h3>>12&15]+HEX_CHARS[h3>>8&15]+HEX_CHARS[h3>>4&15]+HEX_CHARS[h3&15]+HEX_CHARS[h4>>28&15]+HEX_CHARS[h4>>24&15]+HEX_CHARS[h4>>20&15]+HEX_CHARS[h4>>16&15]+HEX_CHARS[h4>>12&15]+HEX_CHARS[h4>>8&15]+HEX_CHARS[h4>>4&15]+HEX_CHARS[h4&15]+HEX_CHARS[h5>>28&15]+HEX_CHARS[h5>>24&15]+HEX_CHARS[h5>>20&15]+HEX_CHARS[h5>>16&15]+HEX_CHARS[h5>>12&15]+HEX_CHARS[h5>>8&15]+HEX_CHARS[h5>>4&15]+HEX_CHARS[h5&15]+HEX_CHARS[h6>>28&15]+HEX_CHARS[h6>>24&15]+HEX_CHARS[h6>>20&15]+HEX_CHARS[h6>>16&15]+HEX_CHARS[h6>>12&15]+HEX_CHARS[h6>>8&15]+HEX_CHARS[h6>>4&15]+HEX_CHARS[h6&15];if(!is224){hex+=HEX_CHARS[h7>>28&15]+HEX_CHARS[h7>>24&15]+HEX_CHARS[h7>>20&15]+HEX_CHARS[h7>>16&15]+HEX_CHARS[h7>>12&15]+HEX_CHARS[h7>>8&15]+HEX_CHARS[h7>>4&15]+HEX_CHARS[h7&15]}return hex};if(COMMON_JS){sha256.sha256=sha256;sha256.sha224=sha224;module.exports=sha256}else if(root){root.sha256=sha256;root.sha224=sha224}})(this)}).call(this)}).call(this,require("_process"),typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{_process:1149}],1134:[function(require,module,exports){(function(global){(function(){(function(){var isLoader=typeof define==="function"&&define.amd;var objectTypes={function:true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal)){root=freeGlobal}function runInContext(context,exports){context||(context=root.Object());exports||(exports=root.Object());var Number=context.Number||root.Number,String=context.String||root.String,Object=context.Object||root.Object,Date=context.Date||root.Date,SyntaxError=context.SyntaxError||root.SyntaxError,TypeError=context.TypeError||root.TypeError,Math=context.Math||root.Math,nativeJSON=context.JSON||root.JSON;if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty=objectProto.hasOwnProperty,undefined;function attempt(func,errorFunc){try{func()}catch(exception){if(errorFunc){errorFunc()}}}var isExtended=new Date(-0xc782b5b800cec);attempt(function(){isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708});function has(name){if(has[name]!=null){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("date-serialization")&&has("json-parse")}else if(name=="date-serialization"){isSupported=has("json-stringify")&&isExtended;if(isSupported){var stringify=exports.stringify;attempt(function(){isSupported=stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'})}}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function";if(stringifySupported){(value=function(){return 1}).toJSON=value;attempt(function(){stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undefined&&stringify(undefined)===undefined&&stringify()===undefined&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undefined])=="[null]"&&stringify(null)=="null"&&stringify([undefined,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\0\b\n\f\r\t"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"},function(){stringifySupported=false})}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse,parseSupported;if(typeof parse=="function"){attempt(function(){if(parse("0")===0&&!parse(false)){value=parse(serialized);parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){attempt(function(){parseSupported=!parse('"\t"')});if(parseSupported){attempt(function(){parseSupported=parse("01")!==1})}if(parseSupported){attempt(function(){parseSupported=parse("1.")!==1})}}}},function(){parseSupported=false})}isSupported=parseSupported}}return has[name]=!!isSupported}has["bug-string-char-index"]=has["date-serialization"]=has["json"]=has["json-stringify"]=has["json-parse"]=null;if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");var forOwn=function(object,callback){var size=0,Properties,dontEnums,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;dontEnums=new Properties;for(property in dontEnums){if(isProperty.call(dontEnums,property)){size++}}Properties=dontEnums=null;if(!size){dontEnums=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forOwn=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=dontEnums.length;property=dontEnums[--length];){if(hasProperty.call(object,property)){callback(property)}}}}else{forOwn=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forOwn(object,callback)};if(!has("json-stringify")&&!has("date-serialization")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var serializeDate=function(value){var getData,year,month,date,time,hours,minutes,seconds,milliseconds;if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)};getData=function(value){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}}else{getData=function(value){year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}}serializeDate=function(value){if(value>-1/0&&value<1/0){getData(value);value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z";year=month=date=hours=minutes=seconds=milliseconds=null}else{value=null}return value};return serializeDate(value)};if(has("json-stringify")&&!has("date-serialization")){function dateToJSON(key){return serializeDate(this)}var nativeStringify=exports.stringify;exports.stringify=function(source,filter,width){var nativeToJSON=Date.prototype.toJSON;Date.prototype.toJSON=dateToJSON;var result=nativeStringify(source,filter,width);Date.prototype.toJSON=nativeToJSON;return result}}else{var unicodePrefix="\\u00";var escapeChar=function(character){var charCode=character.charCodeAt(0),escaped=Escapes[charCode];if(escaped){return escaped}return unicodePrefix+toPaddedString(2,charCode.toString(16))};var reEscape=/[\x00-\x1f\x22\x5c]/g;var quote=function(value){reEscape.lastIndex=0;return'"'+(reEscape.test(value)?value.replace(reEscape,escapeChar):value)+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,type,className,results,element,index,length,prefix,result;attempt(function(){value=object[property]});if(typeof value=="object"&&value){if(value.getUTCFullYear&&getClass.call(value)==dateClass&&value.toJSON===Date.prototype.toJSON){value=serializeDate(value)}else if(typeof value.toJSON=="function"){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value==undefined){return value===undefined?value:"null"}type=typeof value;if(type=="object"){className=getClass.call(value)}switch(className||type){case"boolean":case booleanClass:return""+value;case"number":case numberClass:return value>-1/0&&value<1/0?""+value:"null";case"string":case stringClass:return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undefined?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forOwn(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undefined){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){className=getClass.call(filter);if(className==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;){value=filter[index++];className=getClass.call(value);if(className=="[object String]"||className=="[object Number]"){properties[value]=1}}}}if(width){className=getClass.call(width);if(className==numberClass){if((width-=width%1)>0){if(width>10){width=10}for(whitespace="";whitespace.length<width;){whitespace+=" "}}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length;position++){charCode=source.charCodeAt(position);if(charCode<48||charCode>57){break}}if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length;position++){charCode=source.charCodeAt(position);if(charCode<48||charCode>57){break}}if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}var temp=source.slice(Index,Index+4);if(temp=="true"){Index+=4;return true}else if(temp=="fals"&&source.charCodeAt(Index+4)==101){Index+=5;return false}else if(temp=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}else{hasMembers=true}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}else{hasMembers=true}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undefined){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(getClass,forOwn,value,length,callback)}}else{forOwn(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}exports.runInContext=runInContext;return exports}if(freeExports&&!isLoader){runInContext(root,freeExports)}else{var nativeJSON=root.JSON,previousJSON=root.JSON3,isRestored=false;var JSON3=runInContext(root,root.JSON3={noConflict:function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root.JSON3=previousJSON;nativeJSON=previousJSON=null}return JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}if(isLoader){define(function(){return JSON3})}}).call(this)}).call(this)}).call(this,typeof window!=="undefined"&&window.document&&window.document.implementation?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{})},{}],1135:[function(require,module,exports){var debug=require("debug")("jsonp");module.exports=jsonp;var count=0;function noop(){}function jsonp(url,opts,fn){if("function"==typeof opts){fn=opts;opts={}}if(!opts)opts={};var prefix=opts.prefix||"__jp";var id=opts.name||prefix+count++;var param=opts.param||"callback";var timeout=null!=opts.timeout?opts.timeout:6e4;var enc=encodeURIComponent;var target=document.getElementsByTagName("script")[0]||document.head;var script;var timer;if(timeout){timer=setTimeout(function(){cleanup();if(fn)fn(new Error("Timeout"))},timeout)}function cleanup(){if(script.parentNode)script.parentNode.removeChild(script);window[id]=noop;if(timer)clearTimeout(timer)}function cancel(){if(window[id]){cleanup()}}window[id]=function(data){debug("jsonp got",data);cleanup();if(fn)fn(null,data)};url+=(~url.indexOf("?")?"&":"?")+param+"="+enc(id);url=url.replace("?&","?");debug('jsonp req "%s"',url);script=document.createElement("script");script.src=url;target.parentNode.insertBefore(script,target);return cancel}},{debug:1123}],1136:[function(require,module,exports){var is=require("is");var onload=require("script-onload");var tick=require("next-tick");module.exports=function loadIframe(options,fn){if(!options)throw new Error("Cant load nothing...");if(is.string(options))options={src:options};var https=document.location.protocol==="https:"||document.location.protocol==="chrome-extension:";if(options.src&&options.src.indexOf("//")===0){options.src=https?"https:"+options.src:"http:"+options.src}if(https&&options.https)options.src=options.https;else if(!https&&options.http)options.src=options.http;var iframe=document.createElement("iframe");iframe.src=options.src;iframe.width=options.width||1;iframe.height=options.height||1;iframe.style.display="none";if(is.fn(fn)){onload(iframe,fn)}tick(function(){var firstScript=document.getElementsByTagName("script")[0];firstScript.parentNode.insertBefore(iframe,firstScript)});return iframe}},{is:1131,"next-tick":1142,"script-onload":1151}],1137:[function(require,module,exports){(function(){var crypt=require("crypt"),utf8=require("charenc").utf8,isBuffer=require("is-buffer"),bin=require("charenc").bin,md5=function(message,options){if(message.constructor==String)if(options&&options.encoding==="binary")message=bin.stringToBytes(message);else message=utf8.stringToBytes(message);else if(isBuffer(message))message=Array.prototype.slice.call(message,0);else if(!Array.isArray(message)&&message.constructor!==Uint8Array)message=message.toString();var m=crypt.bytesToWords(message),l=message.length*8,a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(var i=0;i<m.length;i++){m[i]=(m[i]<<8|m[i]>>>24)&16711935|(m[i]<<24|m[i]>>>8)&4278255360}m[l>>>5]|=128<<l%32;m[(l+64>>>9<<4)+14]=l;var FF=md5._ff,GG=md5._gg,HH=md5._hh,II=md5._ii;for(var i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d;a=FF(a,b,c,d,m[i+0],7,-680876936);d=FF(d,a,b,c,m[i+1],12,-389564586);c=FF(c,d,a,b,m[i+2],17,606105819);b=FF(b,c,d,a,m[i+3],22,-1044525330);a=FF(a,b,c,d,m[i+4],7,-176418897);d=FF(d,a,b,c,m[i+5],12,1200080426);c=FF(c,d,a,b,m[i+6],17,-1473231341);b=FF(b,c,d,a,m[i+7],22,-45705983);a=FF(a,b,c,d,m[i+8],7,1770035416);d=FF(d,a,b,c,m[i+9],12,-1958414417);c=FF(c,d,a,b,m[i+10],17,-42063);b=FF(b,c,d,a,m[i+11],22,-1990404162);a=FF(a,b,c,d,m[i+12],7,1804603682);d=FF(d,a,b,c,m[i+13],12,-40341101);c=FF(c,d,a,b,m[i+14],17,-1502002290);b=FF(b,c,d,a,m[i+15],22,1236535329);a=GG(a,b,c,d,m[i+1],5,-165796510);d=GG(d,a,b,c,m[i+6],9,-1069501632);c=GG(c,d,a,b,m[i+11],14,643717713);b=GG(b,c,d,a,m[i+0],20,-373897302);a=GG(a,b,c,d,m[i+5],5,-701558691);d=GG(d,a,b,c,m[i+10],9,38016083);c=GG(c,d,a,b,m[i+15],14,-660478335);b=GG(b,c,d,a,m[i+4],20,-405537848);a=GG(a,b,c,d,m[i+9],5,568446438);d=GG(d,a,b,c,m[i+14],9,-1019803690);c=GG(c,d,a,b,m[i+3],14,-187363961);b=GG(b,c,d,a,m[i+8],20,1163531501);a=GG(a,b,c,d,m[i+13],5,-1444681467);d=GG(d,a,b,c,m[i+2],9,-51403784);c=GG(c,d,a,b,m[i+7],14,1735328473);b=GG(b,c,d,a,m[i+12],20,-1926607734);a=HH(a,b,c,d,m[i+5],4,-378558);d=HH(d,a,b,c,m[i+8],11,-2022574463);c=HH(c,d,a,b,m[i+11],16,1839030562);b=HH(b,c,d,a,m[i+14],23,-35309556);a=HH(a,b,c,d,m[i+1],4,-1530992060);d=HH(d,a,b,c,m[i+4],11,1272893353);c=HH(c,d,a,b,m[i+7],16,-155497632);b=HH(b,c,d,a,m[i+10],23,-1094730640);a=HH(a,b,c,d,m[i+13],4,681279174);d=HH(d,a,b,c,m[i+0],11,-358537222);c=HH(c,d,a,b,m[i+3],16,-722521979);b=HH(b,c,d,a,m[i+6],23,76029189);a=HH(a,b,c,d,m[i+9],4,-640364487);d=HH(d,a,b,c,m[i+12],11,-421815835);c=HH(c,d,a,b,m[i+15],16,530742520);b=HH(b,c,d,a,m[i+2],23,-995338651);a=II(a,b,c,d,m[i+0],6,-198630844);d=II(d,a,b,c,m[i+7],10,1126891415);c=II(c,d,a,b,m[i+14],15,-1416354905);b=II(b,c,d,a,m[i+5],21,-57434055);a=II(a,b,c,d,m[i+12],6,1700485571);d=II(d,a,b,c,m[i+3],10,-1894986606);c=II(c,d,a,b,m[i+10],15,-1051523);b=II(b,c,d,a,m[i+1],21,-2054922799);a=II(a,b,c,d,m[i+8],6,1873313359);d=II(d,a,b,c,m[i+15],10,-30611744);c=II(c,d,a,b,m[i+6],15,-1560198380);b=II(b,c,d,a,m[i+13],21,1309151649);a=II(a,b,c,d,m[i+4],6,-145523070);d=II(d,a,b,c,m[i+11],10,-1120210379);c=II(c,d,a,b,m[i+2],15,718787259);b=II(b,c,d,a,m[i+9],21,-343485551);a=a+aa>>>0;b=b+bb>>>0;c=c+cc>>>0;d=d+dd>>>0}return crypt.endian([a,b,c,d])};md5._ff=function(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._gg=function(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._hh=function(a,b,c,d,x,s,t){var n=a+(b^c^d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._ii=function(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+(x>>>0)+t;return(n<<s|n>>>32-s)+b};md5._blocksize=16;md5._digestsize=16;module.exports=function(message,options){if(message===undefined||message===null)throw new Error("Illegal argument "+message);var digestbytes=crypt.wordsToBytes(md5(message,options));return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)}})()},{charenc:1108,crypt:1122,"is-buffer":1130}],1138:[function(require,module,exports){arguments[4][47][0].apply(exports,arguments)},{dup:47}],1139:[function(require,module,exports){"use strict";var isodate=require("@segment/isodate");var milliseconds=require("./milliseconds");var seconds=require("./seconds");var objProto=Object.prototype;var toStr=objProto.toString;function isDate(value){return toStr.call(value)==="[object Date]"}function isNumber(value){return toStr.call(value)==="[object Number]"}module.exports=function newDate(val){if(isDate(val))return val;if(isNumber(val))return new Date(toMs(val));if(isodate.is(val)){return isodate.parse(val)}if(milliseconds.is(val)){return milliseconds.parse(val)}if(seconds.is(val)){return seconds.parse(val)}return new Date(val)};function toMs(num){if(num<315576e5)return num*1e3;return num}},{"./milliseconds":1140,"./seconds":1141,"@segment/isodate":1092}],1140:[function(require,module,exports){"use strict";var matcher=/\d{13}/;exports.is=function(string){return matcher.test(string)};exports.parse=function(millis){millis=parseInt(millis,10);return new Date(millis)}},{}],1141:[function(require,module,exports){"use strict";var matcher=/\d{10}/;exports.is=function(string){return matcher.test(string)};exports.parse=function(seconds){var millis=parseInt(seconds,10)*1e3;return new Date(millis)}},{}],1142:[function(require,module,exports){arguments[4][307][0].apply(exports,arguments)},{_process:1149,dup:307,timers:1168}],1143:[function(require,module,exports){var identity=function(_){return _};module.exports=multiple(find);module.exports.find=module.exports;module.exports.replace=function(obj,key,val,options){multiple(replace).call(this,obj,key,val,options);return obj};module.exports.del=function(obj,key,options){multiple(del).call(this,obj,key,null,options);return obj};function multiple(fn){return function(obj,path,val,options){var normalize=options&&isFunction(options.normalizer)?options.normalizer:defaultNormalize;path=normalize(path);var key;var finished=false;while(!finished)loop();function loop(){for(key in obj){var normalizedKey=normalize(key);if(0===path.indexOf(normalizedKey)){var temp=path.substr(normalizedKey.length);if(temp.charAt(0)==="."||temp.length===0){path=temp.substr(1);var child=obj[key];if(null==child){finished=true;return}if(!path.length){finished=true;return}obj=child;return}}}key=undefined;finished=true}if(!key)return;if(null==obj)return obj;return fn(obj,key,val)}}function find(obj,key){if(obj.hasOwnProperty(key))return obj[key]}function del(obj,key){if(obj.hasOwnProperty(key))delete obj[key];return obj}function replace(obj,key,val){if(obj.hasOwnProperty(key))obj[key]=val;return obj}function defaultNormalize(path){return path.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function isFunction(val){return typeof val==="function"}},{}],1144:[function(require,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj){if(has.call(obj,key)){keys.push(key)}}return keys};exports.values=function(obj){var vals=[];for(var key in obj){if(has.call(obj,key)){vals.push(obj[key])}}return vals};exports.merge=function(a,b){for(var key in b){if(has.call(b,key)){a[key]=b[key]}}return a};exports.length=function(obj){return exports.keys(obj).length};exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],1145:[function(require,module,exports){module.exports=omit;function omit(keys,object){var ret={};for(var item in object){ret[item]=object[item]}for(var i=0;i<keys.length;i++){delete ret[keys[i]]}return ret}},{}],1146:[function(require,module,exports){var body=false;var callbacks=[];module.exports=function onBody(callback){if(body){call(callback)}else{callbacks.push(callback)}};var interval=setInterval(function(){if(!document.body)return;body=true;for(var i=0;i<callbacks.length;i++){call(callbacks[i])}clearInterval(interval)},5);function call(callback){callback(document.body)}},{}],1147:[function(require,module,exports){var each=require("each");var body=false;var callbacks=[];module.exports=function onBody(callback){if(body){call(callback)}else{callbacks.push(callback)}};var interval=setInterval(function(){if(!document.body)return;body=true;each(callbacks,call);clearInterval(interval)},5);function call(callback){callback(document.body)}},{each:1112}],1148:[function(require,module,exports){module.exports=pick;function pick(obj){var keys=[].slice.call(arguments,1);var ret={};for(var i=0,key;key=keys[i];i++){if(key in obj)ret[key]=obj[key]}return ret}},{}],1149:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],1150:[function(require,module,exports){var type=require("type-component");module.exports=reject;function reject(obj,fn){fn=fn||compact;return"array"==type(obj)?reject.array(obj,fn):reject.object(obj,fn)}reject.array=function(arr,fn){var ret=[];for(var i=0;i<arr.length;++i){if(!fn(arr[i],i))ret[ret.length]=arr[i]}return ret};reject.object=function(obj,fn){var ret={};for(var k in obj){if(obj.hasOwnProperty(k)&&!fn(obj[k],k)){ret[k]=obj[k]}}return ret};reject.types=reject.type=function(obj,types){if(!Array.isArray(types))types=[types];return reject(obj,function(value){return-1!=types.indexOf(type(value))})};function compact(value){return null==value}},{"type-component":1177}],1151:[function(require,module,exports){module.exports=function(el,fn){return el.addEventListener?add(el,fn):attach(el,fn)};function add(el,fn){el.addEventListener("load",function(_,e){fn(null,e)},false);el.addEventListener("error",function(e){var err=new Error('script error "'+el.src+'"');err.event=e;fn(err)},false)}function attach(el,fn){el.attachEvent("onreadystatechange",function(e){if(!/complete|loaded/.test(el.readyState))return;fn(null,e)});el.attachEvent("onerror",function(e){var err=new Error('failed to load the script "'+el.src+'"');err.event=e||window.event;fn(err)})}},{}],1152:[function(require,module,exports){"use strict";var get=require("obj-case");module.exports=function(proto){proto.zip=trait("postalCode","zip");proto.country=trait("country");proto.street=trait("street");proto.state=trait("state");proto.city=trait("city");proto.region=trait("region");function trait(a,b){return function(){var traits=this.traits();var props=this.properties?this.properties():{};return get(traits,"address."+a)||get(traits,a)||(b?get(traits,"address."+b):null)||(b?get(traits,b):null)||get(props,"address."+a)||get(props,a)||(b?get(props,"address."+b):null)||(b?get(props,b):null)}}}},{"obj-case":1143}],1153:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var Facade=require("./facade");function Alias(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Alias,Facade);Alias.prototype.action=function(){return"alias"};Alias.prototype.type=Alias.prototype.action;Alias.prototype.previousId=function(){return this.field("previousId")||this.field("from")};Alias.prototype.from=Alias.prototype.previousId;Alias.prototype.userId=function(){return this.field("userId")||this.field("to")};Alias.prototype.to=Alias.prototype.userId;module.exports=Alias},{"./facade":1155,"./utils":1163}],1154:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var Facade=require("./facade");function Delete(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Delete,Facade);Delete.prototype.type=function(){return"delete"};module.exports=Delete},{"./facade":1155,"./utils":1163}],1155:[function(require,module,exports){"use strict";var address=require("./address");var clone=require("./utils").clone;var isEnabled=require("./is-enabled");var newDate=require("new-date");var objCase=require("obj-case");var traverse=require("@segment/isodate-traverse");var type=require("./utils").type;function Facade(obj,opts){opts=opts||{};if(!("clone"in opts))opts.clone=true;if(opts.clone)obj=clone(obj);if(!("traverse"in opts))opts.traverse=true;if(!("timestamp"in obj))obj.timestamp=new Date;else obj.timestamp=newDate(obj.timestamp);if(opts.traverse)traverse(obj);this.opts=opts;this.obj=obj}Facade.prototype.proxy=function(field){var fields=field.split(".");field=fields.shift();var obj=this[field]||this.field(field);if(!obj)return obj;if(typeof obj==="function")obj=obj.call(this)||{};if(fields.length===0)return this.opts.clone?transform(obj):obj;obj=objCase(obj,fields.join("."));return this.opts.clone?transform(obj):obj};Facade.prototype.field=function(field){var obj=this.obj[field];return this.opts.clone?transform(obj):obj};Facade.proxy=function(field){return function(){return this.proxy(field)}};Facade.field=function(field){return function(){return this.field(field)}};Facade.multi=function(path){return function(){var multi=this.proxy(path+"s");if(type(multi)==="array")return multi;var one=this.proxy(path);if(one)one=[this.opts.clone?clone(one):one];return one||[]}};Facade.one=function(path){return function(){var one=this.proxy(path);if(one)return one;var multi=this.proxy(path+"s");if(type(multi)==="array")return multi[0]}};Facade.prototype.json=function(){var ret=this.opts.clone?clone(this.obj):this.obj;if(this.type)ret.type=this.type();return ret};Facade.prototype.options=function(integration){var obj=this.obj.options||this.obj.context||{};var options=this.opts.clone?clone(obj):obj;if(!integration)return options;if(!this.enabled(integration))return;var integrations=this.integrations();var value=integrations[integration]||objCase(integrations,integration);if(typeof value!=="object")value=objCase(this.options(),integration);return typeof value==="object"?value:{}};Facade.prototype.context=Facade.prototype.options;Facade.prototype.enabled=function(integration){var allEnabled=this.proxy("options.providers.all");if(typeof allEnabled!=="boolean")allEnabled=this.proxy("options.all");if(typeof allEnabled!=="boolean")allEnabled=this.proxy("integrations.all");if(typeof allEnabled!=="boolean")allEnabled=true;var enabled=allEnabled&&isEnabled(integration);var options=this.integrations();if(options.providers&&options.providers.hasOwnProperty(integration)){enabled=options.providers[integration]}if(options.hasOwnProperty(integration)){var settings=options[integration];if(typeof settings==="boolean"){enabled=settings}else{enabled=true}}return!!enabled};Facade.prototype.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};Facade.prototype.active=function(){var active=this.proxy("options.active");if(active===null||active===undefined)active=true;return active};Facade.prototype.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};Facade.prototype.sessionId=Facade.prototype.anonymousId;Facade.prototype.groupId=Facade.proxy("options.groupId");Facade.prototype.traits=function(aliases){var ret=this.proxy("options.traits")||{};var id=this.userId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=this[alias]==null?this.proxy("options.traits."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Facade.prototype.library=function(){var library=this.proxy("options.library");if(!library)return{name:"unknown",version:null};if(typeof library==="string")return{name:library,version:null};return library};Facade.prototype.device=function(){var device=this.proxy("context.device");if(type(device)!=="object")device={};var library=this.library().name;if(device.type)return device;if(library.indexOf("ios")>-1)device.type="ios";if(library.indexOf("android")>-1)device.type="android";return device};Facade.prototype.userAgent=Facade.proxy("context.userAgent");Facade.prototype.timezone=Facade.proxy("context.timezone");Facade.prototype.timestamp=Facade.field("timestamp");Facade.prototype.channel=Facade.field("channel");Facade.prototype.ip=Facade.proxy("context.ip");Facade.prototype.userId=Facade.field("userId");address(Facade.prototype);function transform(obj){return clone(obj)}module.exports=Facade},{"./address":1152,"./is-enabled":1159,"./utils":1163,"@segment/isodate-traverse":1091,"new-date":1139,"obj-case":1143}],1156:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var isEmail=require("is-email");var newDate=require("new-date");var Facade=require("./facade");function Group(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Group,Facade);Group.prototype.action=function(){return"group"};Group.prototype.type=Group.prototype.action;Group.prototype.groupId=Facade.field("groupId");Group.prototype.created=function(){var created=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(created)return newDate(created)};Group.prototype.email=function(){var email=this.proxy("traits.email");if(email)return email;var groupId=this.groupId();if(isEmail(groupId))return groupId};Group.prototype.traits=function(aliases){var ret=this.properties();var id=this.groupId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=this[alias]==null?this.proxy("traits."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Group.prototype.name=Facade.proxy("traits.name");Group.prototype.industry=Facade.proxy("traits.industry");Group.prototype.employees=Facade.proxy("traits.employees");Group.prototype.properties=function(){return this.field("traits")||this.field("properties")||{}};module.exports=Group},{"./facade":1155,"./utils":1163,"is-email":1164,"new-date":1139}],1157:[function(require,module,exports){"use strict";var Facade=require("./facade");var get=require("obj-case");var inherit=require("./utils").inherit;var isEmail=require("is-email");var newDate=require("new-date");var trim=require("trim");var type=require("./utils").type;function Identify(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Identify,Facade);Identify.prototype.action=function(){return"identify"};Identify.prototype.type=Identify.prototype.action;Identify.prototype.traits=function(aliases){var ret=this.field("traits")||{};var id=this.userId();aliases=aliases||{};if(id)ret.id=id;for(var alias in aliases){var value=this[alias]==null?this.proxy("traits."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;if(alias!==aliases[alias])delete ret[alias]}return ret};Identify.prototype.email=function(){var email=this.proxy("traits.email");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Identify.prototype.created=function(){var created=this.proxy("traits.created")||this.proxy("traits.createdAt");if(created)return newDate(created)};Identify.prototype.companyCreated=function(){var created=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(created){return newDate(created)}};Identify.prototype.companyName=function(){return this.proxy("traits.company.name")};Identify.prototype.name=function(){var name=this.proxy("traits.name");if(typeof name==="string"){return trim(name)}var firstName=this.firstName();var lastName=this.lastName();if(firstName&&lastName){return trim(firstName+" "+lastName)}};Identify.prototype.firstName=function(){var firstName=this.proxy("traits.firstName");if(typeof firstName==="string"){return trim(firstName)}var name=this.proxy("traits.name");if(typeof name==="string"){return trim(name).split(" ")[0]}};Identify.prototype.lastName=function(){var lastName=this.proxy("traits.lastName");if(typeof lastName==="string"){return trim(lastName)}var name=this.proxy("traits.name");if(typeof name!=="string"){return}var space=trim(name).indexOf(" ");if(space===-1){return}return trim(name.substr(space+1))};Identify.prototype.uid=function(){return this.userId()||this.username()||this.email()};Identify.prototype.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};Identify.prototype.age=function(){var date=this.birthday();var age=get(this.traits(),"age");if(age!=null)return age;if(type(date)!=="date")return;var now=new Date;return now.getFullYear()-date.getFullYear()};Identify.prototype.avatar=function(){var traits=this.traits();return get(traits,"avatar")||get(traits,"photoUrl")||get(traits,"avatarUrl")};Identify.prototype.position=function(){var traits=this.traits();return get(traits,"position")||get(traits,"jobTitle")};Identify.prototype.username=Facade.proxy("traits.username");Identify.prototype.website=Facade.one("traits.website");Identify.prototype.websites=Facade.multi("traits.website");Identify.prototype.phone=Facade.one("traits.phone");Identify.prototype.phones=Facade.multi("traits.phone");Identify.prototype.address=Facade.proxy("traits.address");Identify.prototype.gender=Facade.proxy("traits.gender");Identify.prototype.birthday=Facade.proxy("traits.birthday");module.exports=Identify},{"./facade":1155,"./utils":1163,"is-email":1164,"new-date":1139,"obj-case":1143,trim:1176}],1158:[function(require,module,exports){"use strict";var Facade=require("./facade");Facade.Alias=require("./alias");Facade.Group=require("./group");Facade.Identify=require("./identify");Facade.Track=require("./track");Facade.Page=require("./page");Facade.Screen=require("./screen");Facade.Delete=require("./delete");module.exports=Facade},{"./alias":1153,"./delete":1154,"./facade":1155,"./group":1156,"./identify":1157,"./page":1160,"./screen":1161,"./track":1162}],1159:[function(require,module,exports){"use strict";var disabled={Salesforce:true};module.exports=function(integration){return!disabled[integration]}},{}],1160:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var Facade=require("./facade");var Track=require("./track");var isEmail=require("is-email");function Page(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Page,Facade);Page.prototype.action=function(){return"page"};Page.prototype.type=Page.prototype.action;Page.prototype.category=Facade.field("category");Page.prototype.name=Facade.field("name");Page.prototype.title=Facade.proxy("properties.title");Page.prototype.path=Facade.proxy("properties.path");Page.prototype.url=Facade.proxy("properties.url");Page.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};Page.prototype.properties=function(aliases){var props=this.field("properties")||{};var category=this.category();var name=this.name();aliases=aliases||{};if(category)props.category=category;if(name)props.name=name;for(var alias in aliases){var value=this[alias]==null?this.proxy("properties."+alias):this[alias]();if(value==null)continue;props[aliases[alias]]=value;if(alias!==aliases[alias])delete props[alias]}return props};Page.prototype.email=function(){var email=this.proxy("context.traits.email")||this.proxy("properties.email");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Page.prototype.fullName=function(){var category=this.category();var name=this.name();return name&&category?category+" "+name:name};Page.prototype.event=function(name){return name?"Viewed "+name+" Page":"Loaded a Page"};Page.prototype.track=function(name){var json=this.json();json.event=this.event(name);json.timestamp=this.timestamp();json.properties=this.properties();return new Track(json,this.opts)};module.exports=Page},{"./facade":1155,"./track":1162,"./utils":1163,"is-email":1164}],1161:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var Page=require("./page");var Track=require("./track");function Screen(dictionary,opts){Page.call(this,dictionary,opts)}inherit(Screen,Page);Screen.prototype.action=function(){return"screen"};Screen.prototype.type=Screen.prototype.action;Screen.prototype.event=function(name){return name?"Viewed "+name+" Screen":"Loaded a Screen"};Screen.prototype.track=function(name){var json=this.json();json.event=this.event(name);json.timestamp=this.timestamp();json.properties=this.properties();return new Track(json,this.opts)};module.exports=Screen},{"./page":1160,"./track":1162,"./utils":1163}],1162:[function(require,module,exports){"use strict";var inherit=require("./utils").inherit;var type=require("./utils").type;var Facade=require("./facade");var Identify=require("./identify");var isEmail=require("is-email");var get=require("obj-case");function Track(dictionary,opts){Facade.call(this,dictionary,opts)}inherit(Track,Facade);Track.prototype.action=function(){return"track"};Track.prototype.type=Track.prototype.action;Track.prototype.event=Facade.field("event");Track.prototype.value=Facade.proxy("properties.value");Track.prototype.category=Facade.proxy("properties.category");Track.prototype.id=Facade.proxy("properties.id");Track.prototype.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")};Track.prototype.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")};Track.prototype.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")};Track.prototype.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")};Track.prototype.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")};Track.prototype.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")};Track.prototype.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")};Track.prototype.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")};Track.prototype.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")};Track.prototype.sku=Facade.proxy("properties.sku");Track.prototype.tax=Facade.proxy("properties.tax");Track.prototype.name=Facade.proxy("properties.name");Track.prototype.price=Facade.proxy("properties.price");Track.prototype.total=Facade.proxy("properties.total");Track.prototype.repeat=Facade.proxy("properties.repeat");Track.prototype.coupon=Facade.proxy("properties.coupon");Track.prototype.shipping=Facade.proxy("properties.shipping");Track.prototype.discount=Facade.proxy("properties.discount");Track.prototype.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")};Track.prototype.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")};Track.prototype.description=Facade.proxy("properties.description");Track.prototype.plan=Facade.proxy("properties.plan");Track.prototype.subtotal=function(){var subtotal=get(this.properties(),"subtotal");var total=this.total()||this.revenue();if(subtotal)return subtotal;if(!total)return 0;if(this.total()){var n=this.tax();if(n)total-=n;n=this.shipping();if(n)total-=n;n=this.discount();if(n)total+=n}return total};Track.prototype.products=function(){var props=this.properties();var products=get(props,"products");return type(products)==="array"?products:[]};Track.prototype.quantity=function(){var props=this.obj.properties||{};return props.quantity||1};Track.prototype.currency=function(){var props=this.obj.properties||{};return props.currency||"USD"};Track.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};Track.prototype.query=Facade.proxy("options.query");Track.prototype.properties=function(aliases){var ret=this.field("properties")||{};aliases=aliases||{};for(var alias in aliases){var value=this[alias]==null?this.proxy("properties."+alias):this[alias]();if(value==null)continue;ret[aliases[alias]]=value;delete ret[alias]}return ret};Track.prototype.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};Track.prototype.email=function(){var email=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(email)return email;var userId=this.userId();if(isEmail(userId))return userId};Track.prototype.revenue=function(){var revenue=this.proxy("properties.revenue");var event=this.event();var orderCompletedRegExp=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;if(!revenue&&event&&event.match(orderCompletedRegExp)){revenue=this.proxy("properties.total")}return currency(revenue)};Track.prototype.cents=function(){var revenue=this.revenue();return typeof revenue!=="number"?this.value()||0:revenue*100};Track.prototype.identify=function(){var json=this.json();json.traits=this.traits();return new Identify(json,this.opts)};function currency(val){if(!val)return;if(typeof val==="number"){return val}if(typeof val!=="string"){return}val=val.replace(/\$/g,"");val=parseFloat(val);if(!isNaN(val)){return val}}module.exports=Track},{"./facade":1155,"./identify":1157,"./utils":1163,"is-email":1164,"obj-case":1143}],1163:[function(require,module,exports){"use strict";exports.inherit=require("inherits");exports.clone=require("@ndhoule/clone");exports.type=require("type-component")},{"@ndhoule/clone":7,inherits:1129,"type-component":1177}],1164:[function(require,module,exports){module.exports=function isEmail(string){return/.+\@.+\..+/.test(string)}},{}],1165:[function(require,module,exports){module.exports=function(str,options){options||(options={});return str.toLowerCase().replace(options.replace||/[^a-z0-9]/g," ").replace(/^ +| +$/g,"").replace(/ +/g,options.separator||"-")}},{}],1166:[function(require,module,exports){(function(factory){if(typeof exports==="object"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define(factory)}else{var glob;try{glob=window}catch(e){glob=self}glob.SparkMD5=factory()}})(function(undefined){"use strict";var add32=function(a,b){return a+b&4294967295},hex_chr=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function cmn(q,a,b,x,s,t){a=add32(add32(a,q),add32(x,t));return add32(a<<s|a>>>32-s,b)}function ff(a,b,c,d,x,s,t){return cmn(b&c|~b&d,a,b,x,s,t)}function gg(a,b,c,d,x,s,t){return cmn(b&d|c&~d,a,b,x,s,t)}function hh(a,b,c,d,x,s,t){return cmn(b^c^d,a,b,x,s,t)}function ii(a,b,c,d,x,s,t){return cmn(c^(b|~d),a,b,x,s,t)}function md5cycle(x,k){var a=x[0],b=x[1],c=x[2],d=x[3];a=ff(a,b,c,d,k[0],7,-680876936);d=ff(d,a,b,c,k[1],12,-389564586);c=ff(c,d,a,b,k[2],17,606105819);b=ff(b,c,d,a,k[3],22,-1044525330);a=ff(a,b,c,d,k[4],7,-176418897);d=ff(d,a,b,c,k[5],12,1200080426);c=ff(c,d,a,b,k[6],17,-1473231341);b=ff(b,c,d,a,k[7],22,-45705983);a=ff(a,b,c,d,k[8],7,1770035416);d=ff(d,a,b,c,k[9],12,-1958414417);c=ff(c,d,a,b,k[10],17,-42063);b=ff(b,c,d,a,k[11],22,-1990404162);a=ff(a,b,c,d,k[12],7,1804603682);d=ff(d,a,b,c,k[13],12,-40341101);c=ff(c,d,a,b,k[14],17,-1502002290);b=ff(b,c,d,a,k[15],22,1236535329);a=gg(a,b,c,d,k[1],5,-165796510);d=gg(d,a,b,c,k[6],9,-1069501632);c=gg(c,d,a,b,k[11],14,643717713);b=gg(b,c,d,a,k[0],20,-373897302);a=gg(a,b,c,d,k[5],5,-701558691);d=gg(d,a,b,c,k[10],9,38016083);c=gg(c,d,a,b,k[15],14,-660478335);b=gg(b,c,d,a,k[4],20,-405537848);a=gg(a,b,c,d,k[9],5,568446438);d=gg(d,a,b,c,k[14],9,-1019803690);c=gg(c,d,a,b,k[3],14,-187363961);b=gg(b,c,d,a,k[8],20,1163531501);a=gg(a,b,c,d,k[13],5,-1444681467);d=gg(d,a,b,c,k[2],9,-51403784);c=gg(c,d,a,b,k[7],14,1735328473);b=gg(b,c,d,a,k[12],20,-1926607734);a=hh(a,b,c,d,k[5],4,-378558);d=hh(d,a,b,c,k[8],11,-2022574463);c=hh(c,d,a,b,k[11],16,1839030562);b=hh(b,c,d,a,k[14],23,-35309556);a=hh(a,b,c,d,k[1],4,-1530992060);d=hh(d,a,b,c,k[4],11,1272893353);c=hh(c,d,a,b,k[7],16,-155497632);b=hh(b,c,d,a,k[10],23,-1094730640);a=hh(a,b,c,d,k[13],4,681279174);d=hh(d,a,b,c,k[0],11,-358537222);c=hh(c,d,a,b,k[3],16,-722521979);b=hh(b,c,d,a,k[6],23,76029189);a=hh(a,b,c,d,k[9],4,-640364487);d=hh(d,a,b,c,k[12],11,-421815835);c=hh(c,d,a,b,k[15],16,530742520);b=hh(b,c,d,a,k[2],23,-995338651);a=ii(a,b,c,d,k[0],6,-198630844);d=ii(d,a,b,c,k[7],10,1126891415);c=ii(c,d,a,b,k[14],15,-1416354905);b=ii(b,c,d,a,k[5],21,-57434055);a=ii(a,b,c,d,k[12],6,1700485571);d=ii(d,a,b,c,k[3],10,-1894986606);c=ii(c,d,a,b,k[10],15,-1051523);b=ii(b,c,d,a,k[1],21,-2054922799);a=ii(a,b,c,d,k[8],6,1873313359);d=ii(d,a,b,c,k[15],10,-30611744);c=ii(c,d,a,b,k[6],15,-1560198380);b=ii(b,c,d,a,k[13],21,1309151649);a=ii(a,b,c,d,k[4],6,-145523070);d=ii(d,a,b,c,k[11],10,-1120210379);c=ii(c,d,a,b,k[2],15,718787259);b=ii(b,c,d,a,k[9],21,-343485551);x[0]=add32(a,x[0]);x[1]=add32(b,x[1]);x[2]=add32(c,x[2]);x[3]=add32(d,x[3])}function md5blk(s){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=s.charCodeAt(i)+(s.charCodeAt(i+1)<<8)+(s.charCodeAt(i+2)<<16)+(s.charCodeAt(i+3)<<24)}return md5blks}function md5blk_array(a){var md5blks=[],i;for(i=0;i<64;i+=4){md5blks[i>>2]=a[i]+(a[i+1]<<8)+(a[i+2]<<16)+(a[i+3]<<24)}return md5blks}function md51(s){var n=s.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk(s.substring(i-64,i)))}s=s.substring(i-64);length=s.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=s.charCodeAt(i)<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function md51_array(a){var n=a.length,state=[1732584193,-271733879,-1732584194,271733878],i,length,tail,tmp,lo,hi;for(i=64;i<=n;i+=64){md5cycle(state,md5blk_array(a.subarray(i-64,i)))}a=i-64<n?a.subarray(i-64):new Uint8Array(0);length=a.length;tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<length;i+=1){tail[i>>2]|=a[i]<<(i%4<<3)}tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(state,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=n*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(state,tail);return state}function rhex(n){var s="",j;for(j=0;j<4;j+=1){s+=hex_chr[n>>j*8+4&15]+hex_chr[n>>j*8&15]}return s}function hex(x){var i;for(i=0;i<x.length;i+=1){x[i]=rhex(x[i])}return x.join("")}if(hex(md51("hello"))!=="5d41402abc4b2a76b9719d911017c592"){add32=function(x,y){var lsw=(x&65535)+(y&65535),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}}if(typeof ArrayBuffer!=="undefined"&&!ArrayBuffer.prototype.slice){(function(){function clamp(val,length){val=val|0||0;if(val<0){return Math.max(val+length,0)}return Math.min(val,length)}ArrayBuffer.prototype.slice=function(from,to){var length=this.byteLength,begin=clamp(from,length),end=length,num,target,targetArray,sourceArray;if(to!==undefined){end=clamp(to,length)}if(begin>end){return new ArrayBuffer(0)}num=end-begin;target=new ArrayBuffer(num);targetArray=new Uint8Array(target);sourceArray=new Uint8Array(this,begin,num);targetArray.set(sourceArray);return target}})()}function toUtf8(str){if(/[\u0080-\uFFFF]/.test(str)){str=unescape(encodeURIComponent(str))}return str}function utf8Str2ArrayBuffer(str,returnUInt8Array){var length=str.length,buff=new ArrayBuffer(length),arr=new Uint8Array(buff),i;for(i=0;i<length;i+=1){arr[i]=str.charCodeAt(i)}return returnUInt8Array?arr:buff}function arrayBuffer2Utf8Str(buff){return String.fromCharCode.apply(null,new Uint8Array(buff))}function concatenateArrayBuffers(first,second,returnUInt8Array){var result=new Uint8Array(first.byteLength+second.byteLength);result.set(new Uint8Array(first));result.set(new Uint8Array(second),first.byteLength);return returnUInt8Array?result:result.buffer}function hexToBinaryString(hex){var bytes=[],length=hex.length,x;for(x=0;x<length-1;x+=2){bytes.push(parseInt(hex.substr(x,2),16))}return String.fromCharCode.apply(String,bytes)}function SparkMD5(){this.reset()}SparkMD5.prototype.append=function(str){this.appendBinary(toUtf8(str));return this};SparkMD5.prototype.appendBinary=function(contents){this._buff+=contents;this._length+=contents.length;var length=this._buff.length,i;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk(this._buff.substring(i-64,i)))}this._buff=this._buff.substring(i-64);return this};SparkMD5.prototype.end=function(raw){var buff=this._buff,length=buff.length,i,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff.charCodeAt(i)<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.prototype.reset=function(){this._buff="";this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}};SparkMD5.prototype.setState=function(state){this._buff=state.buff;this._length=state.length;this._hash=state.hash;return this};SparkMD5.prototype.destroy=function(){delete this._hash;delete this._buff;delete this._length};SparkMD5.prototype._finish=function(tail,length){var i=length,tmp,lo,hi;tail[i>>2]|=128<<(i%4<<3);if(i>55){md5cycle(this._hash,tail);for(i=0;i<16;i+=1){tail[i]=0}}tmp=this._length*8;tmp=tmp.toString(16).match(/(.*?)(.{0,8})$/);lo=parseInt(tmp[2],16);hi=parseInt(tmp[1],16)||0;tail[14]=lo;tail[15]=hi;md5cycle(this._hash,tail)};SparkMD5.hash=function(str,raw){return SparkMD5.hashBinary(toUtf8(str),raw)};SparkMD5.hashBinary=function(content,raw){var hash=md51(content),ret=hex(hash);return raw?hexToBinaryString(ret):ret};SparkMD5.ArrayBuffer=function(){this.reset()};SparkMD5.ArrayBuffer.prototype.append=function(arr){var buff=concatenateArrayBuffers(this._buff.buffer,arr,true),length=buff.length,i;this._length+=arr.byteLength;for(i=64;i<=length;i+=64){md5cycle(this._hash,md5blk_array(buff.subarray(i-64,i)))}this._buff=i-64<length?new Uint8Array(buff.buffer.slice(i-64)):new Uint8Array(0);return this};SparkMD5.ArrayBuffer.prototype.end=function(raw){var buff=this._buff,length=buff.length,tail=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i,ret;for(i=0;i<length;i+=1){tail[i>>2]|=buff[i]<<(i%4<<3)}this._finish(tail,length);ret=hex(this._hash);if(raw){ret=hexToBinaryString(ret)}this.reset();return ret};SparkMD5.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._hash=[1732584193,-271733879,-1732584194,271733878];return this};SparkMD5.ArrayBuffer.prototype.getState=function(){var state=SparkMD5.prototype.getState.call(this);state.buff=arrayBuffer2Utf8Str(state.buff);return state};SparkMD5.ArrayBuffer.prototype.setState=function(state){state.buff=utf8Str2ArrayBuffer(state.buff,true);return SparkMD5.prototype.setState.call(this,state)};SparkMD5.ArrayBuffer.prototype.destroy=SparkMD5.prototype.destroy;SparkMD5.ArrayBuffer.prototype._finish=SparkMD5.prototype._finish;SparkMD5.ArrayBuffer.hash=function(arr,raw){var hash=md51_array(new Uint8Array(arr)),ret=hex(hash);return raw?hexToBinaryString(ret):ret};return SparkMD5})},{}],1167:[function(require,module,exports){module.exports=throttle;function throttle(func,wait){var rtn;var last=0;return function throttled(){var now=(new Date).getTime();var delta=now-last;if(delta>=wait){rtn=func.apply(this,arguments);last=now}return rtn}}},{}],1168:[function(require,module,exports){(function(setImmediate,clearImmediate){(function(){var nextTick=require("process/browser.js").nextTick;var apply=Function.prototype.apply;var slice=Array.prototype.slice;var immediateIds={};var nextImmediateId=0;exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)};exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)};exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()};function Timeout(id,clearFn){this._id=id;this._clearFn=clearFn}Timeout.prototype.unref=Timeout.prototype.ref=function(){};Timeout.prototype.close=function(){this._clearFn.call(window,this._id)};exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId);item._idleTimeout=msecs};exports.unenroll=function(item){clearTimeout(item._idleTimeoutId);item._idleTimeout=-1};exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;if(msecs>=0){item._idleTimeoutId=setTimeout(function onTimeout(){if(item._onTimeout)item._onTimeout()},msecs)}};exports.setImmediate=typeof setImmediate==="function"?setImmediate:function(fn){var id=nextImmediateId++;var args=arguments.length<2?false:slice.call(arguments,1);immediateIds[id]=true;nextTick(function onNextTick(){if(immediateIds[id]){if(args){fn.apply(null,args)}else{fn.call(null)}exports.clearImmediate(id)}});return id};exports.clearImmediate=typeof clearImmediate==="function"?clearImmediate:function(id){delete immediateIds[id]}}).call(this)}).call(this,require("timers").setImmediate,require("timers").clearImmediate)},{"process/browser.js":1149,timers:1168}],1169:[function(require,module,exports){var space=require("to-space-case");module.exports=toCamelCase;function toCamelCase(string){return space(string).replace(/\s(\w)/g,function(matches,letter){return letter.toUpperCase()})}},{"to-space-case":1173}],1170:[function(require,module,exports){var expr;try{expr=require("props")}catch(e){expr=require("component-props")}module.exports=toFunction;function toFunction(obj){switch({}.toString.call(obj)){case"[object Object]":return objectToFunction(obj);case"[object Function]":return obj;case"[object String]":return stringToFunction(obj);case"[object RegExp]":return regexpToFunction(obj);default:return defaultToFunction(obj)}}function defaultToFunction(val){return function(obj){return val===obj}}function regexpToFunction(re){return function(obj){return re.test(obj)}}function stringToFunction(str){if(/^ *\W+/.test(str))return new Function("_","return _ "+str);return new Function("_","return "+get(str))}function objectToFunction(obj){var match={};for(var key in obj){match[key]=typeof obj[key]==="string"?defaultToFunction(obj[key]):toFunction(obj[key])}return function(val){if(typeof val!=="object")return false;for(var key in match){if(!(key in val))return false;if(!match[key](val[key]))return false}return true}}function get(str){var props=expr(str);if(!props.length)return"_."+str;var val,i,prop;for(i=0;i<props.length;i++){prop=props[i];val="_."+prop;val="('function' == typeof "+val+" ? "+val+"() : "+val+")";str=stripNested(prop,str,val)}return str}function stripNested(prop,str,val){return str.replace(new RegExp("(\\.)?"+prop,"g"),function($0,$1){return $1?$0:val})}},{"component-props":1117,props:1117}],1171:[function(require,module,exports){arguments[4][384][0].apply(exports,arguments)},{dup:384}],1172:[function(require,module,exports){var toSpace=require("to-space-case");module.exports=toSnakeCase;function toSnakeCase(string){return toSpace(string).replace(/\s/g,"_")}},{"to-space-case":1173}],1173:[function(require,module,exports){var clean=require("to-no-case");module.exports=toSpaceCase;function toSpaceCase(string){return clean(string).replace(/[\W_]+(.|$)/g,function(matches,match){return match?" "+match:""}).trim()}},{"to-no-case":1174}],1174:[function(require,module,exports){arguments[4][388][0].apply(exports,arguments)},{dup:388}],1175:[function(require,module,exports){"use strict";function toUnixTimestamp(date){return Math.floor(new Date(date).getTime()/1e3)}module.exports=toUnixTimestamp},{}],1176:[function(require,module,exports){exports=module.exports=trim;function trim(str){if(str.trim)return str.trim();return exports.right(exports.left(str))}exports.left=function(str){if(str.trimLeft)return str.trimLeft();return str.replace(/^\s\s*/,"")};exports.right=function(str){if(str.trimRight)return str.trimRight();var whitespace_pattern=/\s/,i=str.length;while(whitespace_pattern.test(str.charAt(--i)));return str.slice(0,i+1)}},{}],1177:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}if(val===null)return"null";if(val===undefined)return"undefined";if(val===Object(val))return"object";return typeof val}},{}],1178:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function(val){switch(toString.call(val)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}if(typeof val=="object"&&val&&typeof val.length=="number"){try{if(typeof val.callee=="function")return"arguments"}catch(ex){if(ex instanceof TypeError){return"arguments"}}}if(val===null)return"null";if(val===undefined)return"undefined";if(val&&val.nodeType===1)return"element";if(val===Object(val))return"object";return typeof val}},{}],1179:[function(require,module,exports){module.exports=function(date){date=new Date(date);return Math.floor(date.getTime()/1e3)}},{}],1180:[function(require,module,exports){module.exports=function(url){switch(arguments.length){case 0:return check();case 1:return transform(url)}};function transform(url){return check()?"https:"+url:"http:"+url}function check(){return location.protocol=="https:"||location.protocol=="chrome-extension:"}},{}],1181:[function(require,module,exports){module.exports=encode;function encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}},{}],1182:[function(require,module,exports){var v1=require("./v1");var v4=require("./v4");var uuid=v4;uuid.v1=v1;uuid.v4=v4;module.exports=uuid},{"./v1":1185,"./v4":1186}],1183:[function(require,module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},{}],1184:[function(require,module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},{}],1185:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");var _nodeId;var _clockseq;var _lastMSecs=0;var _lastNSecs=0;function v1(options,buf,offset){var i=buf&&offset||0;var b=buf||[];options=options||{};var node=options.node||_nodeId;var clockseq=options.clockseq!==undefined?options.clockseq:_clockseq;if(node==null||clockseq==null){var seedBytes=rng();if(node==null){node=_nodeId=[seedBytes[0]|1,seedBytes[1],seedBytes[2],seedBytes[3],seedBytes[4],seedBytes[5]]}if(clockseq==null){clockseq=_clockseq=(seedBytes[6]<<8|seedBytes[7])&16383}}var msecs=options.msecs!==undefined?options.msecs:(new Date).getTime();var nsecs=options.nsecs!==undefined?options.nsecs:_lastNSecs+1;var dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&options.clockseq===undefined){clockseq=clockseq+1&16383}if((dt<0||msecs>_lastMSecs)&&options.nsecs===undefined){nsecs=0}if(nsecs>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}_lastMSecs=msecs;_lastNSecs=nsecs;_clockseq=clockseq;msecs+=122192928e5;var tl=((msecs&268435455)*1e4+nsecs)%4294967296;b[i++]=tl>>>24&255;b[i++]=tl>>>16&255;b[i++]=tl>>>8&255;b[i++]=tl&255;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255;b[i++]=tmh&255;b[i++]=tmh>>>24&15|16;b[i++]=tmh>>>16&255;b[i++]=clockseq>>>8|128;b[i++]=clockseq&255;for(var n=0;n<6;++n){b[i+n]=node[n]}return buf?buf:bytesToUuid(b)}module.exports=v1},{"./lib/bytesToUuid":1183,"./lib/rng":1184}],1186:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},{"./lib/bytesToUuid":1183,"./lib/rng":1184}],1187:[function(require,module,exports){var unserialize=require("unserialize");var each=require("each");var storage;try{storage=window.localStorage}catch(e){storage=null}module.exports=store;function store(key,value){var length=arguments.length;if(0==length)return all();if(2<=length)return set(key,value);if(1!=length)return;if(null==key)return storage.clear();if("string"==typeof key)return get(key);if("object"==typeof key)return each(key,set)}store.supported=!!storage;function set(key,val){return null==val?storage.removeItem(key):storage.setItem(key,JSON.stringify(val))}function get(key){return unserialize(storage.getItem(key))}function all(){var len=storage.length;var ret={};var key;while(0<=--len){key=storage.key(len);ret[key]=get(key)}return ret}},{each:1112,unserialize:1188}],1188:[function(require,module,exports){module.exports=function(val){try{return JSON.parse(val)}catch(e){return val||undefined}}},{}]},{},[2])})(window.define);
