(function(){
  var getSessionId = function() {
    var existingSessionId = Number(Cookies.get("amplitude-session-id"));

    // Number.isNaN polyfill:
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN
    var isNaN = Number.isNaN || function(value) {
      return value !== value;
    };

    var isSessionIdValid = function(sessionId) {
      return !isNaN(sessionId)
    }

    return isSessionIdValid(existingSessionId) ? existingSessionId : Date.now();
  };

  var getIntegrationOptions = function() {
    return {
      integrations: { Amplitude: { session_id: getSessionId() } }
    };
  };
  var DAYS_PER_MINUTE = 1 / 24 / 60;
  function getAnchorPositions(e){return e.map(function(e){return e.getBoundingClientRect().top})}function getActiveAnchor(e){return e.filter(function(e){return 100>=e}).length-1}function getArrayFrom(e){return Array.from(document.querySelectorAll(e))}function removeClasses(e,t){e.forEach(function(e){e.classList.remove(t)})}function setActiveAnchor(e,t){removeClasses(t,"active"),t[e]&&(t[e].parentElement.setAttribute("data-active",t[e].getAttribute("data-value")),t[e].classList.add("active"))}function setLoggedIn(){$(".customers-only").show(),$(".noncustomers-only").hide(),$(document.body).addClass("loggedin")}function setLoggedOut(){$(document.body).removeClass("loggedin"),$(".customers-only").hide(),$(".noncustomers-only").show()}function getUrlVars(e){var t={},n=decodeURIComponent(e),i=n.substr(1).split("&");return i.forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t}function urlifyTrackingParams(){var e="",t=["gclid","utm_source","utm_medium","utm_term","utm_content","utm_campaign","initial_referrer","current_referrer"];return t.forEach(function(t){var n=Cookies.get(t);e.length<1?e+="?"+t+"="+n:n&&(e+="&"+t+"="+n)}),e}function appendUTMs(){var e=document.querySelectorAll("[data-append-utms]"),t=urlifyTrackingParams();e.forEach(function(e){e.href+=t})}$(window).load(function(){var e=function(){$(".twitter-tweet").remove();for(var e=document.querySelectorAll(".tweet"),t=0;t<e.length;t++){var n=e[t],i=n.getAttribute("tweetID");twttr.widgets.createTweet(i,n,{conversation:"none",cards:"hidden",linkColor:"#337AB7",theme:"light"})}};$(".love-slider").on("init reInit breakpoint",e).slick({autoplay:!0,autoplaySpeed:6e3,arrows:!1,dots:!0,infinite:!0,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:992,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]})}),$(document).ready(function(){$(".quotes-slider-container").each(function(){var e=$(this);if(!(e.find(".quote").length<2)){for(var t=e[0],n=t.children.length;n>=0;n--)t.appendChild(t.children[Math.random()*n|0]);e.slick({autoplay:!0,autoplaySpeed:6e3,arrows:!1,dots:!0})}})}),function(){var e=Array.from(document.querySelectorAll("[data-action=toggle-dropdown]"));e.forEach(function(e){var t=e.getAttribute("data-target-dropdown"),n=document.querySelectorAll("[data-dropdown="+t+"]")[0];e.addEventListener("click",function(e){$(n).toggle(),"block"===n.style.display?window.activeDropdown=n:window.activeDropdown=null,e.stopPropagation()})}),window.addEventListener("click",function(){window.activeDropdown&&($(window.activeDropdown).toggle(),window.activeDropdown=null)})}(),function(){window.addEventListener("load",function(){var e=Array.from(document.getElementsByClassName("component banner removable")),t=function(e){e.style.height=e.clientHeight+"px",e.style.transition="height 600ms",requestAnimationFrame(function(){e.style.height="0px",setTimeout(function(){e.style.display="none"},600)})};e.forEach(function(e){var n=e.getAttribute("data-cookie");"true"===localStorage[n]&&(e.style.display="none");var i=e.getElementsByClassName("close")[0];i.addEventListener("click",function(){t(e),n&&(localStorage[n]="true")})})})}(),function(){window.addEventListener("scroll",function(){setActiveAnchor(getActiveAnchor(getAnchorPositions(getArrayFrom(".anchor"))),getArrayFrom("[data-subnav-item]"))}),window.addEventListener("load",function(){setActiveAnchor(getActiveAnchor(getAnchorPositions(getArrayFrom(".anchor"))),getArrayFrom("[data-subnav-item]"));var e=document.querySelector(".component.subnav"),t=70;if(e&&e.classList.contains("dynamic-fixed")){var n=function(){var n=document.getElementById("subnav-placeholder");n.style.height=e.clientHeight+"px",n.getBoundingClientRect().top<=t?e.classList.add("js-fixed"):e.classList.remove("js-fixed")};n(),window.addEventListener("scroll",n)}e&&getArrayFrom("[data-subnav-item]").forEach(function(e){e.getAttribute("data-value")===e.parentElement.getAttribute("data-active")&&e.classList.add("active")})})}(),function(){var e=Array.from(document.querySelectorAll("[data-lity]")),t=new CustomEvent("lity-closed"),n=!1;e.forEach(function(e){if(void 0===e.getAttribute("data-lity-video"))return-1;var i=e.href.split("#")[1],o=document.querySelector("#"+i),a=o.querySelector("iframe");window.addEventListener("lity-closed",function(){a.src=a.src.split("?")[0],n=!1}),e.addEventListener("click",function(){a.src+="?autoplay=1",n=!0}),window.addEventListener("keydown",function(e){"Escape"===e.key&&n===!0&&window.dispatchEvent(t)}),window.addEventListener("click",function(e){null!==e.target.getAttribute("data-lity-close")&&n===!0&&window.dispatchEvent(t)})})}(),function(){function e(){document.querySelector("span[data-name='weeks']").innerHTML=n,document.querySelector("span[data-name='days']").innerHTML=i,document.querySelector("span[data-name='hours']").innerHTML=o,document.querySelector("span[data-name='minutes']").innerHTML=a,document.querySelector("span[data-name='seconds']").innerHTML=r}var t=document.querySelector(".countdown-timer");if(t){var n,i,o,a,r,s=t.getAttribute("data-target-date"),c=new Date(s),l=new Date;setInterval(function(){l=new Date,n=Math.floor((c-l)/1e3/60/60/24/7),i=Math.floor((c-l)/1e3/60/60/24)-7*n,o=Math.floor((c-l)/1e3/60/60)-24*(7*n+i),a=Math.floor((c-l)/1e3/60)-60*(24*(7*n+i)+o),r=Math.floor((c-l)/1e3)-60*(60*(24*(7*n+i)+o)+a),e()},1e3)}}(),jQuery(document).ready(function(e){e("img[data-default-src]").each(function(){var t=e(this).data("default-src");e(this).on("error",function(){e(this).attr({src:t})})})}),document.addEventListener("chatlio.ready",function(){var e=$("#enterprise-chat-overlay");_chatlio.messages().length>0&&_chatlio.isOnline()&&(_chatlio.show(),e.addClass("dismissed")),e.show()},!1),$(document).ready(function(){var e=$("#enterprise-chat-overlay"),t=$("#enterprise-chat-form");if(0!==e.length){var n=Cookies.get("enterprise_pre_chat_state");e.addClass(n),setTimeout(function(){n||e.hasClass("dismissed")||e.removeClass("minimized")},25e3),e.find(".btn-minimize").on("click",function(t){t.preventDefault(),e.toggleClass("minimized"),e.removeClass("expanded"),e.hasClass("minimized")?Cookies.set("enterprise_pre_chat_state","minimized",{expires:.4}):Cookies.remove("enterprise_pre_chat_state")}),e.find(".btn-close").on("click",function(t){t.preventDefault(),e.toggleClass("dismissed"),e.removeClass("expanded"),e.hasClass("dismissed")?Cookies.set("enterprise_pre_chat_state","dismissed",{expires:.4}):Cookies.remove("enterprise_pre_chat_state")}),e.find(".btn-expand").on("click",function(){e.addClass("expanded")}),e.find('input[name="name"], input[name="email"]').on("focus",function(){e.addClass("expanded")}),t.submit(function(t){if(!t.isDefaultPrevented()){t.preventDefault(),e.addClass("dismissed");var n=$(this).find('input[name="email"]').val(),i=$(this).find('textarea[name="message"]').val(),o={};o.email=n,o.name=$(this).find('input[name="name"]').val(),o.company=$(this).find('input[name="company"]').val(),o.country=$(this).find('select[name="country"]').val();for(var a=["gclid","utm_source","utm_medium","utm_term","lead-url","utm_content","utm_campaign","initial_referrer","current_referrer"],r=0;r<a.length;r++){var s=a[r],c=Cookies.get(s);c&&(o[s]=c)}var l=Cookies.get("_mkto_trk");l&&(o.marketo_munchkin=l),_chatlio.identify(n,o),_chatlio.show({expanded:!0}),_chatlio.send(i),_chatlio.isOnline()||$("#chatlio-widget .chatlio-btn").click()}})}}),$(document).ready(function(){if(0!=$(".pricing-tabs").length){$('[data-toggle="tooltip"]').tooltip();var e=document.location.hash;e&&$('a[data-toggle="tab"][href='+e+"]").tab("show"),$('a[data-toggle="tab"]').on("click",function(){history.replaceState(null,null,$(this).attr("href"))}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target).data("target");$(t+" .quotes-slider-container").slick("slickGoTo",0)})}}),jQuery(document).ready(function(e){e(".right-links").hide(),"true"===Cookies.get("cci-customer")&&setLoggedIn(),jQuery.getJSON("/api/v1/me").done(function(t){if(e(".right-links").show(),setLoggedIn(),window.userData=t,Cookies.set("cci-customer","true",{expires:3650}),window.analytics){Cookies.set("amplitude-session-id",getSessionId(),{expires:30*DAYS_PER_MINUTE}),analytics.identify(t.analytics_id,null,getIntegrationOptions());var n=analytics.user()._getTraits(),i=[];n.primary_email.indexOf("circleci.com")>-1&&!i.includes("circleci")?i.push("circleci"):i.includes("circleci")&&i.splice(i.findIndex(function(){return i.includes("circleci")}));({key:analytics.user()._getId(),email:n.primary_email,custom:{groups:i}})}}).fail(function(){Cookies.set("cci-customer","false",{expires:3650}),e(".right-links").show(),setLoggedOut();var t=Array.from(document.querySelectorAll(".noncustomers-only"));t.forEach(function(e){e.classList.contains("removed")||(e.style.display="block")})})}),window.analyticsTrackProps=function(e){var t={path:document.location.pathname,url:document.location.href,referrer:document.referrer,title:document.title},n=window.userData&&window.userData.login;if(n&&(t.user=n),e){var i=$(e).data("analytics-location");i&&(t.page_location=i);var o=$.trim($(e).text());o&&(t.cta_text=o);var a=$(e).data("analytics-vcs-type");a&&(t["vcs-type"]=a);var r=$(e).data("analytics-vcs-scope");r&&(t["vcs-scope"]=r)}return t},window.addEventListener("load",function(){var e=Array.from(document.querySelectorAll("[data-analytics-action]"));e.forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-analytics-action");e&&trackEvent(e,analyticsTrackProps(this))})})}),jQuery(document).ready(function(e){var t=e("main [data-analytics-action='signup-clicked']")[0];t&&trackEvent("signup-impression",analyticsTrackProps(t))}),jQuery(document).ready(function(e){e(".share-buttons .popout").on("click",function(t){t.preventDefault(),window.open(e(this).attr("href"),"pop","width=600, height=450")})}),jQuery(document).ready(function(e){e(".blog.page").find("a[href$='.jpg'], a[href$='.png'], a[href$='.gif']").fluidbox()}),hljs.initHighlightingOnLoad();var popModal=function(e,t){var n=document.getElementById("general-modal"),i=document.getElementById("modal-bg"),o=n.getElementsByTagName("h2")[0],a=n.getElementsByTagName("p")[0];try{o.innerHTML=e,a.innerHTML=t}catch(r){console.log(r,"; This is probably because a form has yet to be submitted, or because browser settings are preventing localStorage functionality.")}setTimeout(function(){n.style.display="block",i.style.display="block",setTimeout(function(){n.style.top="25px",i.style.opacity="1"},10),i.addEventListener("click",function(){n.style.display=null,i.style.display=null,n.style.top=null,i.style.opacity=null})},10)},firingModal=function(){if(window.location.hash.indexOf("confirm")>-1){var e,t=getUrlVars(window.location.hash);t.confirm&&(e=t.confirm),modals[e].execute&&modals[e].execute(),popModal(modals[e].header,modals[e].content)}};window.addEventListener("load",firingModal),window.addEventListener("hashchange",firingModal),jQuery(document).ready(function(e){if(e("body").hasClass("error-login-taken")){var t,n,i=getUrlVars(window.location.search);"gh"===i.vcs?(t="GitHub",n="Bitbucket"):"bb"===i.vcs&&(t="Bitbucket",n="GitHub"),e(".username").text(i.username),e(".vcs").text(t),e(".other-vcs").text(n),e(".login-button."+i.vcs).hide()}}),function(){var e=document.getElementById("enterprise-chat-form")||void 0,t=document.getElementById("enterprise-chat-overlay")||void 0;e&&t&&void 0!==e&&e.addEventListener("submit",function(){trackEvent("enterprise-chat-submitted",analyticsTrackProps(e)),qEvent(getAnonymousId(),"Enterprise Conversion - Order ID")})}(),function(){var e=document.getElementById("contact-nav-button"),t=document.getElementById("contact-nav-footer"),n=0;e&&e.addEventListener("click",function(){0===n?(t.style.display="block",setTimeout(function(){t.style.height="160px"},10),n=1):1===n&&(t.style.height="0px",setTimeout(function(){t.style.display="none"},600),n=0)})}(),appendUTMs(),function(){jQuery(document).ready(function(e){var t=Array.from(document.getElementsByClassName("html5-form"));t.length>0&&t.forEach(function(t){var n=document.getElementsByClassName("work-email")[0];n&&n.addEventListener("blur",function(){var e=this.value.toLowerCase();e.endsWith("gmail.com")||e.endsWith("gmail.fr")||e.endsWith("yahoo.com")||e.endsWith("yahoo.fr")||e.endsWith("live.com")||e.endsWith("outlook.com")||e.endsWith("msn.com")||e.endsWith("hotmail.com")||e.endsWith("comcast.net")||e.endsWith("aol.com")||e.endsWith("safetymail.info")?(this.setCustomValidity("Please enter your work email address."),this.validity.valid=!1):(this.setCustomValidity(""),this.validity.valid=!0)}),t.addEventListener("submit",function(n){var i=t.getAttribute("action"),o=t.getAttribute("data-modal"),a=t.getAttribute("data-redirect");n.preventDefault(),data=e(t).serialize();var r=function(e,t){var n=t||document,i=n.querySelectorAll(e)[0];return i?i.value:void 0};localStorage.userInfo=JSON.stringify({first_name:r("[name=first_name]",t),last_name:r("[name=last_name]",t),company:r("[name=company]",t),email:r("[name=email]",t)}),i&&postAjax(i,data,function(e){"error"===e?window.location="#confirm=error":o?(window.scrollTo(0,0),window.location="#confirm="+o):a&&(window.location=a)})})})})}();
})()
