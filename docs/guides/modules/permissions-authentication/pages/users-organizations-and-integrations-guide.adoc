= Users, organizations, and integrations guide
:page-platform: Cloud
:page-description: A guide to understanding user accounts, organizations and integrations with version control systems in CircleCI.
:experimental:

This guide defines the concepts of user, organization and integration in CircleCI. After these concepts are covered you will find out about the features available to you depending on you organization and pipeline type.

== User account

When you log in to CircleCI you are logging in to your _user account_.

#user settings#

As a CircleCI _user_ you can access _organizations_. You can have access to zero, one or many organizations.

There are two ways to log in to CircleCI:

* Email and password
* Social login (GitHub, Bitbucket)

#INSTRUCTION FOR DELETING A USERT ACCOUNT?#

== Organizations

An organization in CircleCI is a workspace that serves as a container for your team's projects, settings, permissions, and billing. Organizations are typically linked to your version control system (VCS) account(s) (GitHub, GitLab, or Bitbucket).

Create an organization allows you to manage the following:

* Multiple projects under a single entity.
* CI/CD pipelines specific to your team or company needs.
* Invites for team members.
* Assignment of roles (`circleci` orgs only, roles for `github` and `bitbucket` orgs are managed through the VCS provider).

Each organization has its own settings, including security, integrations, and resource management, making it easier to coordinate and control your CI/CD processes across multiple projects and users.

A CircleCI _organization_ can be one of three types:

A CircleCI `circleci` organization:: You can create a `circleci` organization from your user homepage via the btn:[Create organization] button. #create guide to making a new org and link to it - retire support article?#
A CircleCI `github` organization:: A `github` organization used an OAuth app connection and is created when you log in to CircleCI using your GitHub account, rather than using your email/password or by connecting to GitHub Oauth app via menu:User Settings[Application Integrations].  #do we want to cover setting up one of these?#
A CircleCI `bitbucket` organization:: A `bitbucket` organization is created when you log in to CircleCI using your Bitbucket account, rather than using your email/password or by connecting to Bitbucket OAuth app via menu:User Settings[Application Integrations].#do we want to cover setting up one of these?#

For a guide to creating an organization, see #Add link when ready#

== Integration options

The integration options available to you depend on your organization type, as follows:

[cols=7*, options="header"]
|===
| Organization type |GitHub App | GitHub OAuth | Bitbucket Cloud | Bitbucket Data Center | GitLab self managed | GitLab SaaS

| `circleci`
| [.circle-green]#Yes#
| [.circle-red]#No#
| [.circle-red]#No#
| [.circle-green]#Yes#
| [.circle-green]#Yes#
| [.circle-green]#Yes#

|`github`
| [.circle-green]#Yes#
| [.circle-green]#Yes#
| [.circle-red]#No#
| [.circle-red]#No#
| [.circle-red]#No#
| [.circle-red]#No#

|`bitbucket`
| [.circle-red]#No#
| [.circle-red]#No#
| [.circle-green]#Yes#
| [.circle-red]#No#
| [.circle-red]#No#
| [.circle-red]#No#

|===

== Quickstart

The followin links take you to the sections you need to get set up with CircleCI:

* xref:getting-started:first-steps.adoc[Sign up and create an organization]
* xref:getting-started:invite-your-team.adoc[Join a team or invite your team]
* xref:getting-started:create-project.adoc[Create a project]
* xref:orchestrate:pipelines.adoc[Set up a pipeline]
* xref:orchestrate:set-up-triggers.adoc[Set up a trigger]

== View and manage integrations

You can view and manage integrations in two places depending on your organization type. The following sections describe your options for each integration type.

=== Manage a GitHub App integration

A GitHub App integration is available for `circleci` and `github` organizations. The CircleCI GitHub App is installed in an organization. To see your integration navigate to menu:Organization Settings[Account Integrations]. If you are in a `circleci` or `github` organization you will either see your active GitHub App integration or an option to install the GitHub App.

If you would like to uninstall the GitHub App, select the trash/bin button and follow the instructions.

=== Manage a GitHub OAuth app integration

A GitHub OAuth app integration is built into a `github` type organization.

You can _disconnect_ your GitHub OAuth app integration. Doing so will remove your `github` organization from CircleCI. To disconnect your GitHub OAuth app integration, navigate to menu:User Settings[Account Integrations], select btn:[Disconnect] next to your GitHub integration and follow the instructions.

=== Manage a Bitbucket Cloud integration

A Bitbucket Cloud integration is built into a `bitbucket` type organization.

You can _disconnect_ your Bitbucket Cloud integration. Doing so will remove your `bitbucket` type organization from CircleCI. To disconnect your Bitbucket Cloud integration, navigate to menu:User Settings[Account Integrations], select btn:[Disconnect] next to your Bitbucket Cloud integration and follow the instructions.

##GITLAB BBDC REMOVAL INSTRUCTIONS?#

=== Can I integrate a GitHub org with multiple CircleCI orgs?

A GitHub org with the CircleCI GitHub App installed can only be integrated with one CircleCI organization.

In this scenario, attempting to integrate with a second CircleCI organization will redirect you to a GitHub App integration settings page when creating a project. If you are not sure what other CircleCI organization may be connected to your GitHub organization, you can submit a request link:https://forms.gle/dvcXN8ArByXqNNbJ7[here].

#Benny can you help with this section?#

image::guides:ROOT:github-app-configuration-page.png[Create a project]

== Invite your team to your organization

#Add instructions for inviting for each org type#

== Organization user permissions

For `github` and `bitbucket` type organizations user permissions are inherited from the VCS provider.

For `circleci` type organizations user permissions are managed through CircleCI. You can find information on managing organization and project roles and permissions starting with the xref:permissions-authentication:roles-and-permissions-overview.adoc[Roles and Permissions] page. You can manage roles and permissions at an organization and project level. You can manage roles and permissions individually for each user or add users to groups and manage group roles and permissions.

== Projects

For `github` and `bitbucket` type organizations projects are synonymous with repositories. Select "Projects" in the link:https://app.circleci.com/home[CircleCI web app] to view your repositories. From here you have the option to:

* Set up new repositories as CircleCI projects, which involves committing a CircleCI `config.yml` file to the repository to define your pipeline. THis creates a GitHub OAuth  or Bitbucket Cloud pipeline for you, which you can view in menu:Project Settings[Project Setup] or menu:Project Settings[Pipelines] .
* Follow/unfollow projects, to subscribe/unsubscribe from notifications for builds.

For `circleci` type organizations, projects are created separately to code repositories directly in CIrcleCI via the web app, API or CLI. Select "Projects" in the link:https://app.circleci.com/home[CircleCI web app] to view your projects. From here you have the option to:

* Create a new project, including setting up a pipeline, at which point you connect your code repository to your project.
* Follow/unfollow projects, to subscribe/unsubscribe from notifications for builds.

== Rename an organization or project

For full instructions on renaming organizations and projects, see the xref:security:rename-organizations-and-repositories.adoc[Rename organizations and projects] page.

== Delete and organization or project

For full instructions on deleting organizations and projects, see the xref:security:delete-organizations-and-projects.adoc[Delete organizations and repositories] page.

== Pipelines

Pipelines are the highest-level unit of work in your CI/CD process. Pipelines orchestrate the execution of _workflows_ which run _jobs_ to build, test, and deploy your code. Each pipeline is defined by a configuration file stored in a repository (typically `.circleci/config.yml`).

The pipelines you have available to you depend on your organization type and where your code is stored.

If you have a `circleci` organization:
* If your code is stored in a GitHub repository you can have GitHub App pipelines.
* If your code is stored in a GitLab repository you can have GitLab pipelines.
* If your code is stored in a Bitbucket Data Center repository you can set up Bitbucket Data Center pipelines.

If you have a `github` organization you can have GitHub App or GitHub OAuth pipelines.

If you have a `bitbucket` organization you can have Bitbucket Cloud pipelines.

== Triggers

The trigger options available to you depend on your pipeline type. These options are described in the following table:

[options="header",cols="9*"]
|===
|Pipeline type
^|GitHub OAuth trigger
^|Bitbucket Cloud OAuth trigger
^|GitLab trigger
^|Schedule trigger
^|GitHub App trigger
^|Bitbucket Data Center trigger
^|Custom Webhook
^|API / Manual triggering

|GitHub OAuth image:guides:ROOT:icons/github-oauth.svg[OAuth pipeline badge, role="no-border"]
^|Zero or one
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|Zero, one, many
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|[.circle-green]#*Yes*#

|GitHub App image:guides:ROOT:icons/github-app.svg[GitHub App pipeline badge, role="no-border"]
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|Zero, one, many
^|Zero, one, many
^|[.circle-red]#*No*#
^|Zero, one, many
^|[.circle-green]#*Yes*#

|Bitbucket Cloud #insert badge#
^|[.circle-red]#*No*#
^| One
^|[.circle-red]#*No*#
^|Zero, one, many
^|Zero, one, many
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|[.circle-green]#*Yes*#

|GitLab #insert badge#
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|Zero, one, many
^|Zero, one, many
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|[.circle-green]#*Yes*#

|Bitbucket Data Center #insert badge#
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|[.circle-red]#*No*#
^|Zero, one, many
^|[.circle-red]#*No*#
^|Zero, one, many
^|[.circle-red]#*No*#
^|[.circle-green]#*Yes*#
|===

== How CircleCI checks out your code

The way your code is checked out when a pipeline triggers depends on the pipeline type you have set up. The different methods are described below. Select the tab for your pipeline type to view information relevant to you.

[tabs]
====
GitHub App::
+
--
#TBC#
--
GitHub OAuth::
+
--
When you set up a new project with a GitHub OAuth pipeline, CircleCI creates a deployment key on the VCS provider for your project. A deploy key is an SSH key-pair, one public, one private. The VCS provider stores the public key, and CircleCI stores the private key. The deployment key gives CircleCI access to a single repository. To prevent CircleCI from pushing to your repository, this deployment key is read-only.

For code in GitHub, to set up a CircleCI project, you might find you need to enable the creation of deploy keys in your GitHub organization. To do so follow these steps:

. Log in to link:https://github.com[GitHub.com].
. Navigate to your organization.
. Click on Settings at the top of the organization page.
. In the left sidebar, select "Deploy Keys" in the Security section.
. Enable the option for allow repositories in this organization to create deploy keys.
. Select btn:[Save].

If you want to push to the repository from your builds, you will need a deployment key with write access. See the below section for GitHub-specific instructions to create a deployment key.

****
If your deploy keys or user keys appear to have been removed, it may be due to one of the following reasons:

* GitHub will remove inactive keys if they are unused for over a year.
* If CircleCI creates keys through a user's OAuth integration with GitHub, and the user revokes or removes the integration, GitHub will also remove the associated keys.
* In GitHub, if an organization owner restricts or disables deploy keys across all repositories, GitHub may disable or remove existing deploy keys.
* If your CircleCI project has no xref:about-circleci:introduction-to-the-circleci-web-app.adoc#projects[followers], CircleCI will consider it disabled and remove the associated keys.
* When you delete a CircleCI project, CircleCI will remove its associated keys.
****

When CircleCI builds your project, the private key is installed into the `.ssh` directory and SSH is subsequently configured to communicate with your version control provider. Therefore, the private key is used for:

- Checking out the main project
- Checking out any GitHub-hosted submodules
- Checking out any GitHub-hosted private dependencies
- Automatic git merging/tagging/etc

Private keys are also used to enable your project to <<#enable-your-project-to-check-out-additional-private-repositories,check out additional private repositories>>.
--
Bitbucket Cloud::
+
--
When you set up a new project with a Bitbucket Cloud pipeline, CircleCI creates a deployment key on the VCS provider for your project. A deploy key is an SSH key-pair, one public, one private. The VCS provider stores the public key, and CircleCI stores the private key. The deployment key gives CircleCI access to a single repository. To prevent CircleCI from pushing to your repository, this deployment key is read-only.

If you want to push to the repository from your builds, you will need a deployment key with write access. See the below section for GitHub-specific instructions to create a deployment key.

****
If your deploy keys or user keys appear to have been removed, it may be due to one of the following reasons:

* GitHub will remove inactive keys if they are unused for over a year.
* If CircleCI creates keys through a user's OAuth integration with GitHub, and the user revokes or removes the integration, GitHub will also remove the associated keys.
* In GitHub, if an organization owner restricts or disables deploy keys across all repositories, GitHub may disable or remove existing deploy keys.
* If your CircleCI project has no xref:about-circleci:introduction-to-the-circleci-web-app.adoc#projects[followers], CircleCI will consider it disabled and remove the associated keys.
* When you delete a CircleCI project, CircleCI will remove its associated keys.
****

When CircleCI builds your project, the private key is installed into the `.ssh` directory and SSH is subsequently configured to communicate with your version control provider. Therefore, the private key is used for:

- Checking out the main project
- Checking out any Bitbucket-hosted submodules
- Checking out any Bitbucket-hosted private dependencies
- Automatic git merging/tagging/etc

Private keys are also used to enable your project to <<#enable-your-project-to-check-out-additional-private-repositories,check out additional private repositories>>.
--
GitLab::
+
--
#TBC#
--
Bitbucket Data Center::
+
--
#TBC#
--
====

[#create-a-github-user-key]
== Create a GitHub user key - GitHub OAuth and Bitbucket Cloud pipelines only

Create a GitHub user key in CircleCI when you need write access to your GitHub repositories during your CI/CD pipeline, or when you need to access multiple repositories that your user account has access to.

Some example tasks where you might need a GitHub user key:

* Pushing commits back to your repository. If your pipeline needs to commit and push changes back to GitHub (like updating a changelog, bumping version numbers, generating documentation, or creating automated pull requests) you need write permissions that a user key provides.
* Accessing multiple private repositories. When your build depends on multiple private repos (beyond just the one being built), a user key gives your pipeline access to all repos your GitHub user can access. This is useful for:
** Pulling private dependencies from other repos your organization owns.
** Checking out submodules from private repositories.
** Running scripts that interact with multiple repos.

As described above, CircleCI automatically provides a deploy key for the repository being built, but deploy keys have some limitations:

* Read-only by default.
* Limited to a single repository.
* Can not be reused across multiple repositories.

A user key bypasses these limitations.

The trade-off with chosing a user key is that user keys grant broad access based on your GitHub account's permissions, so they are a bigger security risk if compromised.

We recommend creating a dedicated "machine user" GitHub/Bitbucket account with minimal necessary permissions, then adding that account's user key to CircleCI, rather than using your personal GitHub/Bitbucket account's key.

To create a GitHub user key, follow these steps:

NOTE: To use the recommended approach of creating a machine user, you will need to create a new GitHub/Bitbucket account with minimal necessary permissions and then follow these steps logged in as that machine user account.

include::ROOT:partial$app-navigation/steps-to-project-settings.adoc[]

. In the sidebar menu, select *SSH Keys*.
. Under the **User Key** section, select btn:[Authorize With GitHub]. The page will refresh while the authorization takes place and you will be redirected back to the project settings overview page.
. Navigate back to **SSH keys** and go to the **User Key** section.
. Select btn:[Add User Key], then btn:[Confirm User]. You will now see your user key displayed on the page.

[#user-key-security]
=== User key security

CircleCI will never make your SSH keys public.

The private keys of the checkout key-pairs CircleCI generates never leave the CircleCI systems (only the public key is transmitted to GitHub) and are safely encrypted in storage. However, since the keys are installed into your build containers, any code that you run in CircleCI can read them. Likewise, developers that can SSH in will have direct access to this key.

Remember that SSH keys should be shared only with trusted users. GitHub collaborators on projects employing user keys can access your repositories, therefore, only entrust a user key to someone with whom you would entrust your source code.

[#user-key-access-related-error-messages]
=== User key access-related error messages

Here are common errors that indicate you need to add a user key.

**Python**: During the `pip install` step:

```
ERROR: Repository not found.
```

**Ruby**: During the `bundle install` step:

```
Permission denied (publickey).
```


[#create-additional-ssh-keys]
== Create additional SSH keys - All pipeline types

You may need to add additional SSH keys to your pipelines. Some examples of when you might need to add additional SSH keys are as follows:

* Secure authentication to remote systems. SSH keys allow your pipeline to authenticate to servers, repositories, or services without storing plaintext passwords. This is crucial when you need to deploy code to production servers, pull from private repositories, or interact with remote infrastructure.
* Git operations with private repositories. Many projects depend on private packages or modules hosted in private Git repositories. SSH keys enable your CI/CD pipeline to clone these dependencies during the build process.
* Automated deployments. When deploying applications, pipelines often need to SSH into servers to transfer files, restart services, or run deployment scripts. SSH keys make this automation possible without manual intervention or exposing credentials.
* Third-party service integration. Some services and tools require SSH authentication for secure communication. For example, interacting with certain package registries, backup systems, or specialized deployment tools may require SSH key authentication.

If you need additional SSH keys in your builds, follow these steps:

In this example you will create a deploy key with write access to a GitHub repository. The GitHub repository is `https://github.com/you/test-repo`, and the CircleCI project is `https://app.circleci.com/pipelines/github/you/test-repo`.

. Create an SSH key-pair by following the link:https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/[GitHub instructions]. When prompted to enter a passphrase, do **not** enter one (below is one example command to generate a key on macOS):
+
[source,console]
----
$ ssh-keygen -t ed25519 -C "your_email@example.com"
----

. Go to `https://github.com/you/test-repo/settings/keys`, and select **Add Deploy Key**. Enter a title in the "Title" field, then copy and paste the public key you created in step 1. Check **Allow write access**, then select **Add key**.

. Go to your project settings in the CircleCI app, select **SSH Keys**, and **Add SSH key**. In the "hostname" field, enter `github.com` and add the private key you created in step 1. Then select **Add SSH Key**.

. In your `.circleci/config.yml` file, add the fingerprint to a job using the `add_ssh_keys` key:
+
```yaml
  version: 2.1

  jobs:
    deploy-job:
      steps:
        - add_ssh_keys:
            fingerprints:
              - "SO:ME:FIN:G:ER:PR:IN:T"
```

When you push to your GitHub repository from a job, CircleCI will use the SSH key you added.

For a guide to additional SSH keys for CircleCI pipelines, see the xref:integration:add-ssh-key.adoc[Add SSH keys] page.

[#Moving-from-github-oauth-app-to-github-app]
== Moving from the GitHub OAuth app integration to the GitHub App integration

Before attempting to move your information from an org integrated with the GitHub OAuth app to an org integrated with CircleCI’s GitHub App, consider the following:

* If the motivation for moving is to **leverage new functionality that is only available to the GitHub App integration**, consider using your existing organization and installing the GitHub App alongside your OAuth app integration, as described in xref:guides:integration:using-the-circleci-github-app-in-an-oauth-org.adoc[this guide].
* If the motivation is to **completely remove the OAuth app integration** for security, compliance, or other reasons, follow the steps below.

[#Steps-to-migrate-to-an-organization-without-default-GitHub-OAuth-integration]
=== Steps to migrate to an organization without default GitHub OAuth integration

The following steps guide you through migrating you organization as follows:

* *From* an organization integrated with GitHub through the OAuth integration by default (identifiable by `/github/` or `/gh/` in the URL).
* *To* an organization that does not have a default OAuth integration with GitHub (identifiable by `/circleci/` in the URL).

[CAUTION]
====
* You can not currently automate migrating your organization from the GitHub OAuth app to CircleCI's GitHub App integration.
* Before proceeding, confirm that you do not immediately need any of the functionality listed in the <<currently-not-supported>> section below.
* The following steps include *creating a new org*. If you need to transfer private orbs or self-hosted runner resource classes to your new org, contact link:https://support.circleci.com/[Support at CircleCI] before following step 14.
* If you have a dedicated account team at CircleCI, contact them first to discuss your migration.
====

. From your existing CircleCI organization in the CircleCI web app, select the organization dropdown in the top-left corner.
. At the bottom of the drop-down, select btn:[Create New Organization].
. On the "Connect your code" page, select btn:[Connect] next to "GitHub".
. You will be redirected to GitHub to install the CircleCI GitHub App into your GitHub organization.
+
NOTE: You can install the CircleCI GitHub App into the same GitHub organization that already uses the GitHub OAuth App integration, as long as your original CirlceCI organization is not already connected to it.
. Follow the instructions to create a project that is connected to one of your GitHub repositories.
. If you are on a **paid** pricing plan:
.. Navigate back to the organization that is connected to the GitHub OAuth app
.. Select **Plan** in the CircleCI web app
.. Select the "Share and Transfer" tab
.. Select btn:[Add shared organization] and choose the new organization that you just created that integrates with CircleCI's GitHub App.
. Navigate to the project that was created in step 4 in the "new" organization that is integrated with the GitHub App. Match any custom project settings that you had from your previous project to this new project on the **Project Settings** page.  This includes things like environment variables and outbound webhooks.
. Perform a test push of code to your repository to ensure that a pipeline is triggered and is working as expected in your **new** CircleCI organization.
. Assuming the repository you connected is also connected to your previous CircleCI organization, CircleCI will start pipelines when a push event happens to the repository in both the old and new organizations. If your test from step 8 above was successful, go to **Project Settings** in your organization connected to the GitHub OAuth App (your "old" org), scroll down and select btn:[Stop Building].  This will ensure that push events to your repository only trigger pipelines in the project connected to your GitHub App organization.
. Repeat steps 6-9 by selecting menu:Projects[Create a Project] for each project that you had set up in your previous organization.
. If you are using xref:security:contexts.adoc[contexts], you will need to recreate the contexts in your new organization.
. Invite your teammates to the new organization (the one that is integrated with the CircleCI GitHub App) using the instructions on xref:getting-started:invite-your-team.adoc[this page].
. If you are on a **paid** pricing plan and followed step 6:
.. Navigate back to the "old" organization and select menu:Plan[Share and Transfer].
.. Select the image:guides:ROOT:icons/cancel.svg[delete icon, role="no-border"] next to the "new" organization to remove the shared relationship between the "new" and "old" organizations.
.. Select btn:[Transfer Plan] and follow the instructions to transfer the plan from the "old" organization to the "new" organization.
. At this point, you will be left with a GitHub App-integrated organization that has the same payment plan and projects as your previous organization. If you get logged out, you can continue to use the "Login with GitHub" button on link:https://circleci.com/login[the CircleCI login page] as long as the old organization is not deleted.

NOTE: Data from xref:insights:insights.adoc[Insights] and historical pipeline runs will not be present in your new organization. Contexts will not be present until you recreate them for your new org.

== Built-in environment variables and pipeline values

The built-in environment variables and pipeline values available to you depend on your project integration type. For a full list see the xref:reference:ROOT:variables.adoc[Project values and variables] page.

== Feature support

Some organization and project combinations affect the features that are available to you. For a full list, see the xref:integration:version-control-system-integration-overview.adoc[Version Control System Integration Overview] page.