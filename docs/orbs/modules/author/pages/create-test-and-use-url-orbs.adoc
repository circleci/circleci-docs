= Create, test, and use URL orbs
:page-platform: Cloud
:page-description: How to author URL orbs for your organization
:experimental:
:page-show-readtime: true

NOTE: URL orbs are not available if your code is stored in a GitLab repository.

This guide covers how to create URL orbs. URL orbs are reusable CircleCI configuration stored in an accessible location like a Git repository. You can use URL orbs to share configuration across your organization.

== Introduction

URL orbs are reusable packages of CircleCI configuration. They can be stored in any accessible location (such as a Git repository or object storage) and referenced directly via URL in your CircleCI configuration files.

URL orbs contain the same reusable configuration elements as inline orbs and registry orbs:

* xref:use:orb-concepts.adoc#commands[Commands]
* xref:use:orb-concepts.adoc#jobs[Jobs]
* xref:use:orb-concepts.adoc#executors[Executors]

The key differences:

* Unlike *registry orbs* (published to the Orb Registry), URL orbs are not published and are controlled by your organization's allow-list.
* Unlike *inline orbs* (defined in a single project's config), URL orbs can be shared across your organization.

[NOTE]
====
This guide covers **URL orbs**. For information on creating registry orbs, see xref:create-test-and-publish-a-registry-orb.adoc[Create, Test, and Publish a Registry Orb]. For information on creating inline orbs, see xref:create-an-inline-orb.adoc[Create an Inline Orb].
====

For a complete comparison of all three orb types, see the xref:use:orb-concepts.adoc#orb-types-comparison[Orb Types Comparison] section.

== Prerequisites

Before creating a URL orb:

* Ensure you are in a position to configure your organization's URL orb allow-list. See xref:use:managing-url-orbs-allow-lists.adoc[Managing URL Orbs Allow-Lists] for steps.
* Ensure you have access to a hosting location for your orb files (GitHub repository, S3 bucket, etc.).
* Be familiar with xref:reference:ROOT:reusing-config.adoc[Reusable Configuration] concepts.

== URL orb structure

URL orbs are YAML files that follow the CircleCI orbs specification. Here is a basic structure:

[,yaml]
----
version: 2.1

description: >
  A description of what your orb does.

commands:
  # Your reusable commands

jobs:
  # Your reusable jobs

executors:
  # Your reusable executors
----

[#creating-a-url-orb]
== Creating a URL orb

[#step-1-create-the-orb-file]
=== 1. Create the orb file

Create a YAML file with your orb configuration. For example, create a file named `platform-tools.yml`:

.Example platform-tools.yml file to be used as a URL orb
[,yaml]
----
version: 2.1

description: >
  Platform tools and utilities for our organization.

commands:
  install-cli:
    description: Install our platform CLI tool
    parameters:
      version:
        type: string
        default: "latest"
        description: Version of the CLI to install
    steps:
      - run:
          name: Install Platform CLI
          command: |
            echo "Installing platform CLI version << parameters.version >>"
            # Add your installation commands here

  deploy:
    description: Deploy application to our platform
    parameters:
      environment:
        type: string
        description: Target environment (staging, production)
      api-key:
        type: env_var_name
        default: PLATFORM_API_KEY
        description: Environment variable containing API key
    steps:
      - run:
          name: Deploy to << parameters.environment >>
          command: |
            # Add your deployment commands here
            echo "Deploying to << parameters.environment >>"

jobs:
  deploy-app:
    description: Complete deployment job
    executor: default
    parameters:
      environment:
        type: string
        description: Target environment
    steps:
      - checkout
      - install-cli
      - deploy:
          environment: << parameters.environment >>

executors:
  default:
    description: Default executor for platform jobs
    docker:
      - image: cimg/base:2026.01
----

[#step-2-store-the-orb]
=== 2. Store the orb in an accessible location

Store your orb file in a location accessible via HTTPS. Common options include:

* GitHub repository.
* GitLab repository.
* Bitbucket repository.
* AWS S3 bucket.
* Other object storage.

For the purposes of this guide, we will use a GitHub repository.

Store your orb in a GitHub repository, as follows:

.Example GitHub repository structure for storing URL orbs
[,shell]
----
my-org-orbs/
├── README.md
├── platform-tools.yml
└── security-scanner.yml
----

The raw URL will be:

.Example raw URL for a URL orb in a GitHub repository
[,shell]
----
https://raw.githubusercontent.com/<org>/<repo>/<branch>/platform-tools.yml
----

If you choose another hosting option, the raw URL will be different. For example:

* **GitLab**: `https://gitlab.com/<org>/<repo>/-/raw/<branch>/<file>.yml`
* **Bitbucket**: `https://bitbucket.org/<org>/<repo>/raw/<branch>/<file>.yml`
* **AWS S3**: `https://s3.amazonaws.com/<bucket>/<path>/<file>.yml`
* **Other object storage**: Any HTTPS-accessible location.

[#step-3-configure-allow-list]
=== 3. Configure the allow-list

Your organization administrator must add the URL prefix to the allow-list before the orb can be used.

For example, if your orb is at:

.Example URL for a URL orb in a GitHub repository
[,shell]
----
https://raw.githubusercontent.com/my-org/orbs/main/platform-tools.yml
----


The allow-list entry should include the prefix:

.Example URL prefix for a URL orb in a GitHub repository
[,shell]
----
https://raw.githubusercontent.com/my-org/orbs/
----

See xref:use:managing-url-orbs-allow-lists.adoc#adding-a-url-orb-allow-list-entry[Adding a URL Orb Allow-List Entry] for detailed instructions.

[#step-4-use-the-orb]
=== Step 4: Use the orb in your configuration

Reference your URL orb in a CircleCI configuration file:

[,yaml]
----
version: 2.1

orbs:
  platform: https://raw.githubusercontent.com/my-org/orbs/main/platform-tools.yml

workflows:
  deploy:
    jobs:
      - platform/deploy-app:
          environment: staging
----

[#testing-your-url-orb]
== Testing your URL orb

[#validate-yaml]
=== Validate YAML

Before using your orb, validate the YAML syntax:

TIP: If you do not have the CircleCI CLI installed, first see the xref:guides:toolkit:local-cli.adoc[Installing the Local CLI] page.

[,shell]
----
circleci orb validate platform-tools.yml
----

[#test-in-a-pipeline]
=== Test in a pipeline

Create a test configuration to verify your orb works correctly:

[,yaml]
----
version: 2.1

orbs:
  platform: https://raw.githubusercontent.com/my-org/orbs/main/platform-tools.yml

workflows:
  test-orb:
    jobs:
      - test-commands

jobs:
  test-commands:
    docker:
      - image: cimg/base:stable
    steps:
      - platform/install-cli:
          version: "1.0.0"
      - run:
          name: Verify installation
          command: |
            # Add verification commands
            echo "CLI installed successfully"
----

Trigger a pipeline (via push, API, or web app) to test your orb, observe the results in the CircleCI web app.

[#updating-url-orbs]
== Updating URL orbs

To update a URL orb:

. Make changes to your orb YAML file.
. Commit and push the changes to your repository.
. The updated orb will be available at the same URL.

[NOTE]
====
URL orbs are cached for 5 minutes after being fetched. Changes may not be immediately visible in running pipelines.
====

[#versioning-url-orbs]
== Versioning URL orbs

URL orbs do not use semantic versioning. You can implement your own versioning strategy using Git features:

[#using-branches]
=== Using branches

Use different branches for different versions:

[,yaml]
----
# Production
orbs:
  platform: https://raw.githubusercontent.com/my-org/orbs/main/platform-tools.yml

# Development
orbs:
  platform: https://raw.githubusercontent.com/my-org/orbs/develop/platform-tools.yml
----

[#using-tags]
=== Using tags

Create Git tags for stable versions:

[,yaml]
----
# Specific version
orbs:
  platform: https://raw.githubusercontent.com/my-org/orbs/v1.0/platform-tools.yml
----

[#using-commit-shas]
=== Using commit hashes

Reference specific commits for immutability:

[,yaml]
----
orbs:
  platform: https://raw.githubusercontent.com/my-org/orbs/abc123def456/platform-tools.yml
----

[#best-practices]
== Best practices

Add descriptions to all components:

.Example command with description
[,yaml]
----
commands:
  deploy:
    description: Deploy application to the platform
    parameters:
      environment:
        type: string
        description: Target environment (staging or production)
    steps:
      # ...
----

Make your orb components flexible with parameters:

.Example command with parameters. A parameter is used to pass the version of the tool to install.
[,yaml]
----
commands:
  install-tool:
    parameters:
      version:
        type: string
        default: "latest"
      install-path:
        type: string
        default: "/usr/local/bin"
    steps:
      # Installation steps using parameters
----

Never hard-code secrets. Use the `env_var_name` parameter type:

.Example command with secrets. The API key is stored in an environment variable.
[,yaml]
----
commands:
  authenticate:
    parameters:
      api-key:
        type: env_var_name
        default: API_KEY
        description: Environment variable containing the API key
    steps:
      - run:
          name: Authenticate
          command: |
            # Use ${!parameter} to get the value from the environment variable
            API_KEY_VALUE=${!<< parameters.api-key >>}
            # Use API_KEY_VALUE in your commands
----

Include documentation in your repository, for example:

* Add a README explaining what the orb does and how to use it.
* Include usage examples.
* Document all parameters and their effects.
* Keep a changelog of updates.

[#limitations]
== Limitations

URL orbs have the following limitations:

* Limited to 50 URL orbs per configuration file.
* Maximum nesting depth of 5 for URL orb hierarchies.
* Cached for 5 minutes after fetching.

For full details, see xref:use:managing-url-orbs-allow-lists.adoc#limitations-and-caveats[URL Orb Limitations].

[#see-also]
== See also

* xref:use:managing-url-orbs-allow-lists.adoc[Managing URL Orbs Allow Lists].
* xref:use:orb-concepts.adoc#orb-types-comparison[Orb Types Comparison] for comparing URL orbs with inline and registry orbs.
* xref:author:create-an-inline-orb.adoc[Create an Inline Orb] if you're considering starting with inline orbs.
* xref:orb-author.adoc[Introduction to Authoring Orbs] for general orb authoring guidance.
* xref:use:orb-concepts.adoc[Orb Concepts] for understanding orb configuration elements.
* xref:reference:ROOT:reusing-config.adoc[Reusable Configuration Reference] for examples of reusable configuration.
